(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Co(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const tt={},pn=[],rr=()=>{},Mc=()=>!1,Hi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ao=t=>t.startsWith("onUpdate:"),St=Object.assign,jo=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Uc=Object.prototype.hasOwnProperty,We=(t,e)=>Uc.call(t,e),xe=Array.isArray,gn=t=>Vi(t)==="[object Map]",Iu=t=>Vi(t)==="[object Set]",Te=t=>typeof t=="function",gt=t=>typeof t=="string",Ar=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",Du=t=>(ct(t)||Te(t))&&Te(t.then)&&Te(t.catch),$u=Object.prototype.toString,Vi=t=>$u.call(t),Kc=t=>Vi(t).slice(8,-1),Lu=t=>Vi(t)==="[object Object]",Ro=t=>gt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Kn=Co(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wi=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Bc=/-(\w)/g,Vt=Wi(t=>t.replace(Bc,(e,r)=>r?r.toUpperCase():"")),Nc=/\B([A-Z])/g,jr=Wi(t=>t.replace(Nc,"-$1").toLowerCase()),zi=Wi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bs=Wi(t=>t?`on${zi(t)}`:""),Cr=(t,e)=>!Object.is(t,e),$i=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Fu=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},ao=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Da;const Mu=()=>Da||(Da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Io(t){if(xe(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=gt(n)?Wc(n):Io(n);if(s)for(const a in s)e[a]=s[a]}return e}else if(gt(t)||ct(t))return t}const qc=/;(?![^(]*\))/g,Hc=/:([^]+)/,Vc=/\/\*[^]*?\*\//g;function Wc(t){const e={};return t.replace(Vc,"").split(qc).forEach(r=>{if(r){const n=r.split(Hc);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Do(t){let e="";if(gt(t))e=t;else if(xe(t))for(let r=0;r<t.length;r++){const n=Do(t[r]);n&&(e+=n+" ")}else if(ct(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const zc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jc=Co(zc);function Uu(t){return!!t||t===""}const Ku=t=>!!(t&&t.__v_isRef===!0),Hr=t=>gt(t)?t:t==null?"":xe(t)||ct(t)&&(t.toString===$u||!Te(t.toString))?Ku(t)?Hr(t.value):JSON.stringify(t,Bu,2):String(t),Bu=(t,e)=>Ku(e)?Bu(t,e.value):gn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],a)=>(r[Ns(n,a)+" =>"]=s,r),{})}:Iu(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Ns(r))}:Ar(e)?Ns(e):ct(e)&&!xe(e)&&!Lu(e)?String(e):e,Ns=(t,e="")=>{var r;return Ar(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class Gc{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Mt;try{return Mt=this,e()}finally{Mt=r}}}on(){Mt=this}off(){Mt=this.parent}stop(e){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Qc(){return Mt}let it;const qs=new WeakSet;class Nu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qs.has(this)&&(qs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$a(this),Vu(this);const e=it,r=Gt;it=this,Gt=!0;try{return this.fn()}finally{Wu(this),it=e,Gt=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fo(e);this.deps=this.depsTail=void 0,$a(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uo(this)&&this.run()}get dirty(){return uo(this)}}let qu=0,dn;function Hu(t){t.flags|=8,t.next=dn,dn=t}function $o(){qu++}function Lo(){if(--qu>0)return;let t;for(;dn;){let e=dn,r;for(;e;)e.flags&1||(e.flags&=-9),e=e.next;for(e=dn,dn=void 0;e;){if(r=e.next,e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function Vu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Wu(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Fo(n),Yc(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function uo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wn))return;t.globalVersion=Wn;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!uo(t)){t.flags&=-3;return}const r=it,n=Gt;it=t,Gt=!0;try{Vu(t);const s=t.fn(t._value);(e.version===0||Cr(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{it=r,Gt=n,Wu(t),t.flags&=-3}}function Fo(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n),!r.subs&&r.computed){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)Fo(a,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Yc(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Gt=!0;const Ju=[];function Rr(){Ju.push(Gt),Gt=!1}function Ir(){const t=Ju.pop();Gt=t===void 0?!0:t}function $a(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=it;it=void 0;try{e()}finally{it=r}}}let Wn=0;class Xc{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!it||!Gt||it===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==it)r=this.activeLink=new Xc(it,this),it.deps?(r.prevDep=it.depsTail,it.depsTail.nextDep=r,it.depsTail=r):it.deps=it.depsTail=r,Gu(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=it.depsTail,r.nextDep=void 0,it.depsTail.nextDep=r,it.depsTail=r,it.deps===r&&(it.deps=n)}return r}trigger(e){this.version++,Wn++,this.notify(e)}notify(e){$o();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Lo()}}}function Gu(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Gu(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const lo=new WeakMap,Jr=Symbol(""),co=Symbol(""),zn=Symbol("");function Ot(t,e,r){if(Gt&&it){let n=lo.get(t);n||lo.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Mo),s.target=t,s.map=n,s.key=r),s.track()}}function cr(t,e,r,n,s,a){const l=lo.get(t);if(!l){Wn++;return}const c=f=>{f&&f.trigger()};if($o(),e==="clear")l.forEach(c);else{const f=xe(t),y=f&&Ro(r);if(f&&r==="length"){const g=Number(n);l.forEach((b,R)=>{(R==="length"||R===zn||!Ar(R)&&R>=g)&&c(b)})}else switch(r!==void 0&&c(l.get(r)),y&&c(l.get(zn)),e){case"add":f?y&&c(l.get("length")):(c(l.get(Jr)),gn(t)&&c(l.get(co)));break;case"delete":f||(c(l.get(Jr)),gn(t)&&c(l.get(co)));break;case"set":gn(t)&&c(l.get(Jr));break}}Lo()}function an(t){const e=ze(t);return e===t?e:(Ot(e,"iterate",zn),Ht(t)?e:e.map(kt))}function Ji(t){return Ot(t=ze(t),"iterate",zn),t}const Zc={__proto__:null,[Symbol.iterator](){return Hs(this,Symbol.iterator,kt)},concat(...t){return an(this).concat(...t.map(e=>xe(e)?an(e):e))},entries(){return Hs(this,"entries",t=>(t[1]=kt(t[1]),t))},every(t,e){return ar(this,"every",t,e,void 0,arguments)},filter(t,e){return ar(this,"filter",t,e,r=>r.map(kt),arguments)},find(t,e){return ar(this,"find",t,e,kt,arguments)},findIndex(t,e){return ar(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ar(this,"findLast",t,e,kt,arguments)},findLastIndex(t,e){return ar(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ar(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vs(this,"includes",t)},indexOf(...t){return Vs(this,"indexOf",t)},join(t){return an(this).join(t)},lastIndexOf(...t){return Vs(this,"lastIndexOf",t)},map(t,e){return ar(this,"map",t,e,void 0,arguments)},pop(){return Dn(this,"pop")},push(...t){return Dn(this,"push",t)},reduce(t,...e){return La(this,"reduce",t,e)},reduceRight(t,...e){return La(this,"reduceRight",t,e)},shift(){return Dn(this,"shift")},some(t,e){return ar(this,"some",t,e,void 0,arguments)},splice(...t){return Dn(this,"splice",t)},toReversed(){return an(this).toReversed()},toSorted(t){return an(this).toSorted(t)},toSpliced(...t){return an(this).toSpliced(...t)},unshift(...t){return Dn(this,"unshift",t)},values(){return Hs(this,"values",kt)}};function Hs(t,e,r){const n=Ji(t),s=n[e]();return n!==t&&!Ht(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=r(a.value)),a}),s}const eh=Array.prototype;function ar(t,e,r,n,s,a){const l=Ji(t),c=l!==t&&!Ht(t),f=l[e];if(f!==eh[e]){const b=f.apply(t,a);return c?kt(b):b}let y=r;l!==t&&(c?y=function(b,R){return r.call(this,kt(b),R,t)}:r.length>2&&(y=function(b,R){return r.call(this,b,R,t)}));const g=f.call(l,y,n);return c&&s?s(g):g}function La(t,e,r,n){const s=Ji(t);let a=r;return s!==t&&(Ht(t)?r.length>3&&(a=function(l,c,f){return r.call(this,l,c,f,t)}):a=function(l,c,f){return r.call(this,l,kt(c),f,t)}),s[e](a,...n)}function Vs(t,e,r){const n=ze(t);Ot(n,"iterate",zn);const s=n[e](...r);return(s===-1||s===!1)&&qo(r[0])?(r[0]=ze(r[0]),n[e](...r)):s}function Dn(t,e,r=[]){Rr(),$o();const n=ze(t)[e].apply(t,r);return Lo(),Ir(),n}const th=Co("__proto__,__v_isRef,__isVue"),Qu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ar));function rh(t){Ar(t)||(t=String(t));const e=ze(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class Yu{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){const s=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(s?a?gh:tl:a?el:Zu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const l=xe(e);if(!s){let f;if(l&&(f=Zc[r]))return f;if(r==="hasOwnProperty")return rh}const c=Reflect.get(e,r,Et(e)?e:n);return(Ar(r)?Qu.has(r):th(r))||(s||Ot(e,"get",r),a)?c:Et(c)?l&&Ro(r)?c:c.value:ct(c)?s?rl(c):Bo(c):c}}class Xu extends Yu{constructor(e=!1){super(!1,e)}set(e,r,n,s){let a=e[r];if(!this._isShallow){const f=Gr(a);if(!Ht(n)&&!Gr(n)&&(a=ze(a),n=ze(n)),!xe(e)&&Et(a)&&!Et(n))return f?!1:(a.value=n,!0)}const l=xe(e)&&Ro(r)?Number(r)<e.length:We(e,r),c=Reflect.set(e,r,n,Et(e)?e:s);return e===ze(s)&&(l?Cr(n,a)&&cr(e,"set",r,n):cr(e,"add",r,n)),c}deleteProperty(e,r){const n=We(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&cr(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!Ar(r)||!Qu.has(r))&&Ot(e,"has",r),n}ownKeys(e){return Ot(e,"iterate",xe(e)?"length":Jr),Reflect.ownKeys(e)}}class nh extends Yu{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const ih=new Xu,sh=new nh,oh=new Xu(!0);const Uo=t=>t,Gi=t=>Reflect.getPrototypeOf(t);function Si(t,e,r=!1,n=!1){t=t.__v_raw;const s=ze(t),a=ze(e);r||(Cr(e,a)&&Ot(s,"get",e),Ot(s,"get",a));const{has:l}=Gi(s),c=n?Uo:r?Ho:kt;if(l.call(s,e))return c(t.get(e));if(l.call(s,a))return c(t.get(a));t!==s&&t.get(e)}function Oi(t,e=!1){const r=this.__v_raw,n=ze(r),s=ze(t);return e||(Cr(t,s)&&Ot(n,"has",t),Ot(n,"has",s)),t===s?r.has(t):r.has(t)||r.has(s)}function Pi(t,e=!1){return t=t.__v_raw,!e&&Ot(ze(t),"iterate",Jr),Reflect.get(t,"size",t)}function Fa(t,e=!1){!e&&!Ht(t)&&!Gr(t)&&(t=ze(t));const r=ze(this);return Gi(r).has.call(r,t)||(r.add(t),cr(r,"add",t,t)),this}function Ma(t,e,r=!1){!r&&!Ht(e)&&!Gr(e)&&(e=ze(e));const n=ze(this),{has:s,get:a}=Gi(n);let l=s.call(n,t);l||(t=ze(t),l=s.call(n,t));const c=a.call(n,t);return n.set(t,e),l?Cr(e,c)&&cr(n,"set",t,e):cr(n,"add",t,e),this}function Ua(t){const e=ze(this),{has:r,get:n}=Gi(e);let s=r.call(e,t);s||(t=ze(t),s=r.call(e,t)),n&&n.call(e,t);const a=e.delete(t);return s&&cr(e,"delete",t,void 0),a}function Ka(){const t=ze(this),e=t.size!==0,r=t.clear();return e&&cr(t,"clear",void 0,void 0),r}function Ti(t,e){return function(n,s){const a=this,l=a.__v_raw,c=ze(l),f=e?Uo:t?Ho:kt;return!t&&Ot(c,"iterate",Jr),l.forEach((y,g)=>n.call(s,f(y),f(g),a))}}function Ci(t,e,r){return function(...n){const s=this.__v_raw,a=ze(s),l=gn(a),c=t==="entries"||t===Symbol.iterator&&l,f=t==="keys"&&l,y=s[t](...n),g=r?Uo:e?Ho:kt;return!e&&Ot(a,"iterate",f?co:Jr),{next(){const{value:b,done:R}=y.next();return R?{value:b,done:R}:{value:c?[g(b[0]),g(b[1])]:g(b),done:R}},[Symbol.iterator](){return this}}}}function vr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ah(){const t={get(a){return Si(this,a)},get size(){return Pi(this)},has:Oi,add:Fa,set:Ma,delete:Ua,clear:Ka,forEach:Ti(!1,!1)},e={get(a){return Si(this,a,!1,!0)},get size(){return Pi(this)},has:Oi,add(a){return Fa.call(this,a,!0)},set(a,l){return Ma.call(this,a,l,!0)},delete:Ua,clear:Ka,forEach:Ti(!1,!0)},r={get(a){return Si(this,a,!0)},get size(){return Pi(this,!0)},has(a){return Oi.call(this,a,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Ti(!0,!1)},n={get(a){return Si(this,a,!0,!0)},get size(){return Pi(this,!0)},has(a){return Oi.call(this,a,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Ti(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Ci(a,!1,!1),r[a]=Ci(a,!0,!1),e[a]=Ci(a,!1,!0),n[a]=Ci(a,!0,!0)}),[t,r,e,n]}const[uh,lh,ch,hh]=ah();function Ko(t,e){const r=e?t?hh:ch:t?lh:uh;return(n,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(We(r,s)&&s in n?r:n,s,a)}const fh={get:Ko(!1,!1)},dh={get:Ko(!1,!0)},ph={get:Ko(!0,!1)};const Zu=new WeakMap,el=new WeakMap,tl=new WeakMap,gh=new WeakMap;function yh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mh(t){return t.__v_skip||!Object.isExtensible(t)?0:yh(Kc(t))}function Bo(t){return Gr(t)?t:No(t,!1,ih,fh,Zu)}function vh(t){return No(t,!1,oh,dh,el)}function rl(t){return No(t,!0,sh,ph,tl)}function No(t,e,r,n,s){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const l=mh(t);if(l===0)return t;const c=new Proxy(t,l===2?n:r);return s.set(t,c),c}function yn(t){return Gr(t)?yn(t.__v_raw):!!(t&&t.__v_isReactive)}function Gr(t){return!!(t&&t.__v_isReadonly)}function Ht(t){return!!(t&&t.__v_isShallow)}function qo(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function _h(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&Fu(t,"__v_skip",!0),t}const kt=t=>ct(t)?Bo(t):t,Ho=t=>ct(t)?rl(t):t;function Et(t){return t?t.__v_isRef===!0:!1}function bh(t){return wh(t,!1)}function wh(t,e){return Et(t)?t:new kh(t,e)}class kh{constructor(e,r){this.dep=new Mo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:ze(e),this._value=r?e:kt(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Ht(e)||Gr(e);e=n?e:ze(e),Cr(e,r)&&(this._rawValue=e,this._value=n?e:kt(e),this.dep.trigger())}}function xh(t){return Et(t)?t.value:t}const Eh={get:(t,e,r)=>e==="__v_raw"?t:xh(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Et(s)&&!Et(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function nl(t){return yn(t)?t:new Proxy(t,Eh)}class Sh{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Mo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Hu(this),!0}get value(){const e=this.dep.track();return zu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Oh(t,e,r=!1){let n,s;return Te(t)?n=t:(n=t.get,s=t.set),new Sh(n,s,r)}const Ai={},Ui=new WeakMap;let Vr;function Ph(t,e=!1,r=Vr){if(r){let n=Ui.get(r);n||Ui.set(r,n=[]),n.push(t)}}function Th(t,e,r=tt){const{immediate:n,deep:s,once:a,scheduler:l,augmentJob:c,call:f}=r,y=ce=>s?ce:Ht(ce)||s===!1||s===0?lr(ce,1):lr(ce);let g,b,R,V,se=!1,le=!1;if(Et(t)?(b=()=>t.value,se=Ht(t)):yn(t)?(b=()=>y(t),se=!0):xe(t)?(le=!0,se=t.some(ce=>yn(ce)||Ht(ce)),b=()=>t.map(ce=>{if(Et(ce))return ce.value;if(yn(ce))return y(ce);if(Te(ce))return f?f(ce,2):ce()})):Te(t)?e?b=f?()=>f(t,2):t:b=()=>{if(R){Rr();try{R()}finally{Ir()}}const ce=Vr;Vr=g;try{return f?f(t,3,[V]):t(V)}finally{Vr=ce}}:b=rr,e&&s){const ce=b,Le=s===!0?1/0:s;b=()=>lr(ce(),Le)}const me=Qc(),we=()=>{g.stop(),me&&jo(me.effects,g)};if(a&&e){const ce=e;e=(...Le)=>{ce(...Le),we()}}let je=le?new Array(t.length).fill(Ai):Ai;const Re=ce=>{if(!(!(g.flags&1)||!g.dirty&&!ce))if(e){const Le=g.run();if(s||se||(le?Le.some((Ye,ve)=>Cr(Ye,je[ve])):Cr(Le,je))){R&&R();const Ye=Vr;Vr=g;try{const ve=[Le,je===Ai?void 0:le&&je[0]===Ai?[]:je,V];f?f(e,3,ve):e(...ve),je=Le}finally{Vr=Ye}}}else g.run()};return c&&c(Re),g=new Nu(b),g.scheduler=l?()=>l(Re,!1):Re,V=ce=>Ph(ce,!1,g),R=g.onStop=()=>{const ce=Ui.get(g);if(ce){if(f)f(ce,4);else for(const Le of ce)Le();Ui.delete(g)}},e?n?Re(!0):je=g.run():l?l(Re.bind(null,!0),!0):g.run(),we.pause=g.pause.bind(g),we.resume=g.resume.bind(g),we.stop=we,we}function lr(t,e=1/0,r){if(e<=0||!ct(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Et(t))lr(t.value,e,r);else if(xe(t))for(let n=0;n<t.length;n++)lr(t[n],e,r);else if(Iu(t)||gn(t))t.forEach(n=>{lr(n,e,r)});else if(Lu(t)){for(const n in t)lr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&lr(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xn(t,e,r,n){try{return n?t(...n):t()}catch(s){Qi(s,e,r)}}function nr(t,e,r,n){if(Te(t)){const s=Xn(t,e,r,n);return s&&Du(s)&&s.catch(a=>{Qi(a,e,r)}),s}if(xe(t)){const s=[];for(let a=0;a<t.length;a++)s.push(nr(t[a],e,r,n));return s}}function Qi(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||tt;if(e){let c=e.parent;const f=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;c;){const g=c.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](t,f,y)===!1)return}c=c.parent}if(a){Rr(),Xn(a,null,10,[t,f,y]),Ir();return}}Ch(t,r,s,n,l)}function Ch(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}let Jn=!1,ho=!1;const At=[];let er=0;const mn=[];let Er=null,hn=0;const il=Promise.resolve();let Vo=null;function Ah(t){const e=Vo||il;return t?e.then(this?t.bind(this):t):e}function jh(t){let e=Jn?er+1:0,r=At.length;for(;e<r;){const n=e+r>>>1,s=At[n],a=Gn(s);a<t||a===t&&s.flags&2?e=n+1:r=n}return e}function Wo(t){if(!(t.flags&1)){const e=Gn(t),r=At[At.length-1];!r||!(t.flags&2)&&e>=Gn(r)?At.push(t):At.splice(jh(e),0,t),t.flags|=1,sl()}}function sl(){!Jn&&!ho&&(ho=!0,Vo=il.then(al))}function Rh(t){xe(t)?mn.push(...t):Er&&t.id===-1?Er.splice(hn+1,0,t):t.flags&1||(mn.push(t),t.flags|=1),sl()}function Ba(t,e,r=Jn?er+1:0){for(;r<At.length;r++){const n=At[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;At.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ol(t){if(mn.length){const e=[...new Set(mn)].sort((r,n)=>Gn(r)-Gn(n));if(mn.length=0,Er){Er.push(...e);return}for(Er=e,hn=0;hn<Er.length;hn++){const r=Er[hn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Er=null,hn=0}}const Gn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function al(t){ho=!1,Jn=!0;try{for(er=0;er<At.length;er++){const e=At[er];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;er<At.length;er++){const e=At[er];e&&(e.flags&=-2)}er=0,At.length=0,ol(),Jn=!1,Vo=null,(At.length||mn.length)&&al()}}let Kt=null,ul=null;function Ki(t){const e=Kt;return Kt=t,ul=t&&t.type.__scopeId||null,e}function Ih(t,e=Kt,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Qa(-1);const a=Ki(e);let l;try{l=t(...s)}finally{Ki(a),n._d&&Qa(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function _r(t,e){if(Kt===null)return t;const r=ts(Kt),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,l,c,f=tt]=e[s];a&&(Te(a)&&(a={mounted:a,updated:a}),a.deep&&lr(l),n.push({dir:a,instance:r,value:l,oldValue:void 0,arg:c,modifiers:f}))}return t}function Br(t,e,r,n){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const c=s[l];a&&(c.oldValue=a[l].value);let f=c.dir[n];f&&(Rr(),nr(f,r,8,[t.el,c,t,e]),Ir())}}const Dh=Symbol("_vte"),$h=t=>t.__isTeleport;function zo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ll(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function fo(t,e,r,n,s=!1){if(xe(t)){t.forEach((se,le)=>fo(se,e&&(xe(e)?e[le]:e),r,n,s));return}if(Bn(n)&&!s)return;const a=n.shapeFlag&4?ts(n.component):n.el,l=s?null:a,{i:c,r:f}=t,y=e&&e.r,g=c.refs===tt?c.refs={}:c.refs,b=c.setupState,R=ze(b),V=b===tt?()=>!1:se=>We(R,se);if(y!=null&&y!==f&&(gt(y)?(g[y]=null,V(y)&&(b[y]=null)):Et(y)&&(y.value=null)),Te(f))Xn(f,c,12,[l,g]);else{const se=gt(f),le=Et(f);if(se||le){const me=()=>{if(t.f){const we=se?V(f)?b[f]:g[f]:f.value;s?xe(we)&&jo(we,a):xe(we)?we.includes(a)||we.push(a):se?(g[f]=[a],V(f)&&(b[f]=g[f])):(f.value=[a],t.k&&(g[t.k]=f.value))}else se?(g[f]=l,V(f)&&(b[f]=l)):le&&(f.value=l,t.k&&(g[t.k]=l))};l?(me.id=-1,Lt(me,r)):me()}}}const Bn=t=>!!t.type.__asyncLoader,cl=t=>t.type.__isKeepAlive;function Lh(t,e){hl(t,"a",e)}function Fh(t,e){hl(t,"da",e)}function hl(t,e,r=xt){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Yi(e,n,r),r){let s=r.parent;for(;s&&s.parent;)cl(s.parent.vnode)&&Mh(n,e,r,s),s=s.parent}}function Mh(t,e,r,n){const s=Yi(e,t,n,!0);dl(()=>{jo(n[e],s)},r)}function Yi(t,e,r=xt,n=!1){if(r){const s=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...l)=>{Rr();const c=Zn(r),f=nr(e,r,t,l);return c(),Ir(),f});return n?s.unshift(a):s.push(a),a}}const hr=t=>(e,r=xt)=>{(!es||t==="sp")&&Yi(t,(...n)=>e(...n),r)},Uh=hr("bm"),fl=hr("m"),Kh=hr("bu"),Bh=hr("u"),Nh=hr("bum"),dl=hr("um"),qh=hr("sp"),Hh=hr("rtg"),Vh=hr("rtc");function Wh(t,e=xt){Yi("ec",t,e)}const zh="components";function pl(t,e){return Gh(zh,t,!0,e)||t}const Jh=Symbol.for("v-ndc");function Gh(t,e,r=!0,n=!1){const s=Kt||xt;if(s){const a=s.type;{const c=Ff(a,!1);if(c&&(c===e||c===Vt(e)||c===zi(Vt(e))))return a}const l=Na(s[t]||a[t],e)||Na(s.appContext[t],e);return!l&&n?a:l}}function Na(t,e){return t&&(t[e]||t[Vt(e)]||t[zi(Vt(e))])}function Ws(t,e,r,n){let s;const a=r,l=xe(t);if(l||gt(t)){const c=l&&yn(t);let f=!1;c&&(f=!Ht(t),t=Ji(t)),s=new Array(t.length);for(let y=0,g=t.length;y<g;y++)s[y]=e(f?kt(t[y]):t[y],y,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,a)}else if(ct(t))if(t[Symbol.iterator])s=Array.from(t,(c,f)=>e(c,f,void 0,a));else{const c=Object.keys(t);s=new Array(c.length);for(let f=0,y=c.length;f<y;f++){const g=c[f];s[f]=e(t[g],g,f,a)}}else s=[];return s}const po=t=>t?Fl(t)?ts(t):po(t.parent):null,Nn=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>po(t.parent),$root:t=>po(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Jo(t),$forceUpdate:t=>t.f||(t.f=()=>{Wo(t.update)}),$nextTick:t=>t.n||(t.n=Ah.bind(t.proxy)),$watch:t=>vf.bind(t)}),zs=(t,e)=>t!==tt&&!t.__isScriptSetup&&We(t,e),Qh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:a,accessCache:l,type:c,appContext:f}=t;let y;if(e[0]!=="$"){const V=l[e];if(V!==void 0)switch(V){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return a[e]}else{if(zs(n,e))return l[e]=1,n[e];if(s!==tt&&We(s,e))return l[e]=2,s[e];if((y=t.propsOptions[0])&&We(y,e))return l[e]=3,a[e];if(r!==tt&&We(r,e))return l[e]=4,r[e];go&&(l[e]=0)}}const g=Nn[e];let b,R;if(g)return e==="$attrs"&&Ot(t.attrs,"get",""),g(t);if((b=c.__cssModules)&&(b=b[e]))return b;if(r!==tt&&We(r,e))return l[e]=4,r[e];if(R=f.config.globalProperties,We(R,e))return R[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:a}=t;return zs(s,e)?(s[e]=r,!0):n!==tt&&We(n,e)?(n[e]=r,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:a}},l){let c;return!!r[l]||t!==tt&&We(t,l)||zs(e,l)||(c=a[0])&&We(c,l)||We(n,l)||We(Nn,l)||We(s.config.globalProperties,l)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:We(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function qa(t){return xe(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let go=!0;function Yh(t){const e=Jo(t),r=t.proxy,n=t.ctx;go=!1,e.beforeCreate&&Ha(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:f,inject:y,created:g,beforeMount:b,mounted:R,beforeUpdate:V,updated:se,activated:le,deactivated:me,beforeDestroy:we,beforeUnmount:je,destroyed:Re,unmounted:ce,render:Le,renderTracked:Ye,renderTriggered:ve,errorCaptured:I,serverPrefetch:j,expose:W,inheritAttrs:ue,components:he,directives:ge,filters:Ce}=e;if(y&&Xh(y,n,null),l)for(const Z in l){const ye=l[Z];Te(ye)&&(n[Z]=ye.bind(r))}if(s){const Z=s.call(r,r);ct(Z)&&(t.data=Bo(Z))}if(go=!0,a)for(const Z in a){const ye=a[Z],de=Te(ye)?ye.bind(r,r):Te(ye.get)?ye.get.bind(r,r):rr,rt=!Te(ye)&&Te(ye.set)?ye.set.bind(r):rr,Qe=Uf({get:de,set:rt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:oe=>Qe.value=oe})}if(c)for(const Z in c)gl(c[Z],n,r,Z);if(f){const Z=Te(f)?f.call(r):f;Reflect.ownKeys(Z).forEach(ye=>{sf(ye,Z[ye])})}g&&Ha(g,t,"c");function Se(Z,ye){xe(ye)?ye.forEach(de=>Z(de.bind(r))):ye&&Z(ye.bind(r))}if(Se(Uh,b),Se(fl,R),Se(Kh,V),Se(Bh,se),Se(Lh,le),Se(Fh,me),Se(Wh,I),Se(Vh,Ye),Se(Hh,ve),Se(Nh,je),Se(dl,ce),Se(qh,j),xe(W))if(W.length){const Z=t.exposed||(t.exposed={});W.forEach(ye=>{Object.defineProperty(Z,ye,{get:()=>r[ye],set:de=>r[ye]=de})})}else t.exposed||(t.exposed={});Le&&t.render===rr&&(t.render=Le),ue!=null&&(t.inheritAttrs=ue),he&&(t.components=he),ge&&(t.directives=ge),j&&ll(t)}function Xh(t,e,r=rr){xe(t)&&(t=yo(t));for(const n in t){const s=t[n];let a;ct(s)?"default"in s?a=Li(s.from||n,s.default,!0):a=Li(s.from||n):a=Li(s),Et(a)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[n]=a}}function Ha(t,e,r){nr(xe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function gl(t,e,r,n){let s=n.includes(".")?Cl(r,n):()=>r[n];if(gt(t)){const a=e[t];Te(a)&&Gs(s,a)}else if(Te(t))Gs(s,t.bind(r));else if(ct(t))if(xe(t))t.forEach(a=>gl(a,e,r,n));else{const a=Te(t.handler)?t.handler.bind(r):e[t.handler];Te(a)&&Gs(s,a,t)}}function Jo(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,c=a.get(e);let f;return c?f=c:!s.length&&!r&&!n?f=e:(f={},s.length&&s.forEach(y=>Bi(f,y,l,!0)),Bi(f,e,l)),ct(e)&&a.set(e,f),f}function Bi(t,e,r,n=!1){const{mixins:s,extends:a}=e;a&&Bi(t,a,r,!0),s&&s.forEach(l=>Bi(t,l,r,!0));for(const l in e)if(!(n&&l==="expose")){const c=Zh[l]||r&&r[l];t[l]=c?c(t[l],e[l]):e[l]}return t}const Zh={data:Va,props:Wa,emits:Wa,methods:Mn,computed:Mn,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:Mn,directives:Mn,watch:tf,provide:Va,inject:ef};function Va(t,e){return e?t?function(){return St(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function ef(t,e){return Mn(yo(t),yo(e))}function yo(t){if(xe(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Ct(t,e){return t?[...new Set([].concat(t,e))]:e}function Mn(t,e){return t?St(Object.create(null),t,e):e}function Wa(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:St(Object.create(null),qa(t),qa(e??{})):e}function tf(t,e){if(!t)return e;if(!e)return t;const r=St(Object.create(null),t);for(const n in e)r[n]=Ct(t[n],e[n]);return r}function yl(){return{app:null,config:{isNativeTag:Mc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rf=0;function nf(t,e){return function(n,s=null){Te(n)||(n=St({},n)),s!=null&&!ct(s)&&(s=null);const a=yl(),l=new WeakSet,c=[];let f=!1;const y=a.app={_uid:rf++,_component:n,_props:s,_container:null,_context:a,_instance:null,version:Kf,get config(){return a.config},set config(g){},use(g,...b){return l.has(g)||(g&&Te(g.install)?(l.add(g),g.install(y,...b)):Te(g)&&(l.add(g),g(y,...b))),y},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),y},component(g,b){return b?(a.components[g]=b,y):a.components[g]},directive(g,b){return b?(a.directives[g]=b,y):a.directives[g]},mount(g,b,R){if(!f){const V=y._ceVNode||Qt(n,s);return V.appContext=a,R===!0?R="svg":R===!1&&(R=void 0),b&&e?e(V,g):t(V,g,R),f=!0,y._container=g,g.__vue_app__=y,ts(V.component)}},onUnmount(g){c.push(g)},unmount(){f&&(nr(c,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(g,b){return a.provides[g]=b,y},runWithContext(g){const b=vn;vn=y;try{return g()}finally{vn=b}}};return y}}let vn=null;function sf(t,e){if(xt){let r=xt.provides;const n=xt.parent&&xt.parent.provides;n===r&&(r=xt.provides=Object.create(n)),r[t]=e}}function Li(t,e,r=!1){const n=xt||Kt;if(n||vn){const s=vn?vn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Te(e)?e.call(n&&n.proxy):e}}const ml={},vl=()=>Object.create(ml),_l=t=>Object.getPrototypeOf(t)===ml;function of(t,e,r,n=!1){const s={},a=vl();t.propsDefaults=Object.create(null),bl(t,e,s,a);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);r?t.props=n?s:vh(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function af(t,e,r,n){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=ze(s),[f]=t.propsOptions;let y=!1;if((n||l>0)&&!(l&16)){if(l&8){const g=t.vnode.dynamicProps;for(let b=0;b<g.length;b++){let R=g[b];if(Xi(t.emitsOptions,R))continue;const V=e[R];if(f)if(We(a,R))V!==a[R]&&(a[R]=V,y=!0);else{const se=Vt(R);s[se]=mo(f,c,se,V,t,!1)}else V!==a[R]&&(a[R]=V,y=!0)}}}else{bl(t,e,s,a)&&(y=!0);let g;for(const b in c)(!e||!We(e,b)&&((g=jr(b))===b||!We(e,g)))&&(f?r&&(r[b]!==void 0||r[g]!==void 0)&&(s[b]=mo(f,c,b,void 0,t,!0)):delete s[b]);if(a!==c)for(const b in a)(!e||!We(e,b))&&(delete a[b],y=!0)}y&&cr(t.attrs,"set","")}function bl(t,e,r,n){const[s,a]=t.propsOptions;let l=!1,c;if(e)for(let f in e){if(Kn(f))continue;const y=e[f];let g;s&&We(s,g=Vt(f))?!a||!a.includes(g)?r[g]=y:(c||(c={}))[g]=y:Xi(t.emitsOptions,f)||(!(f in n)||y!==n[f])&&(n[f]=y,l=!0)}if(a){const f=ze(r),y=c||tt;for(let g=0;g<a.length;g++){const b=a[g];r[b]=mo(s,f,b,y[b],t,!We(y,b))}}return l}function mo(t,e,r,n,s,a){const l=t[r];if(l!=null){const c=We(l,"default");if(c&&n===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&Te(f)){const{propsDefaults:y}=s;if(r in y)n=y[r];else{const g=Zn(s);n=y[r]=f.call(null,e),g()}}else n=f;s.ce&&s.ce._setProp(r,n)}l[0]&&(a&&!c?n=!1:l[1]&&(n===""||n===jr(r))&&(n=!0))}return n}const uf=new WeakMap;function wl(t,e,r=!1){const n=r?uf:e.propsCache,s=n.get(t);if(s)return s;const a=t.props,l={},c=[];let f=!1;if(!Te(t)){const g=b=>{f=!0;const[R,V]=wl(b,e,!0);St(l,R),V&&c.push(...V)};!r&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!f)return ct(t)&&n.set(t,pn),pn;if(xe(a))for(let g=0;g<a.length;g++){const b=Vt(a[g]);za(b)&&(l[b]=tt)}else if(a)for(const g in a){const b=Vt(g);if(za(b)){const R=a[g],V=l[b]=xe(R)||Te(R)?{type:R}:St({},R),se=V.type;let le=!1,me=!0;if(xe(se))for(let we=0;we<se.length;++we){const je=se[we],Re=Te(je)&&je.name;if(Re==="Boolean"){le=!0;break}else Re==="String"&&(me=!1)}else le=Te(se)&&se.name==="Boolean";V[0]=le,V[1]=me,(le||We(V,"default"))&&c.push(b)}}const y=[l,c];return ct(t)&&n.set(t,y),y}function za(t){return t[0]!=="$"&&!Kn(t)}const kl=t=>t[0]==="_"||t==="$stable",Go=t=>xe(t)?t.map(tr):[tr(t)],lf=(t,e,r)=>{if(e._n)return e;const n=Ih((...s)=>Go(e(...s)),r);return n._c=!1,n},xl=(t,e,r)=>{const n=t._ctx;for(const s in t){if(kl(s))continue;const a=t[s];if(Te(a))e[s]=lf(s,a,n);else if(a!=null){const l=Go(a);e[s]=()=>l}}},El=(t,e)=>{const r=Go(e);t.slots.default=()=>r},Sl=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},cf=(t,e,r)=>{const n=t.slots=vl();if(t.vnode.shapeFlag&32){const s=e._;s?(Sl(n,e,r),r&&Fu(n,"_",s,!0)):xl(e,n)}else e&&El(t,e)},hf=(t,e,r)=>{const{vnode:n,slots:s}=t;let a=!0,l=tt;if(n.shapeFlag&32){const c=e._;c?r&&c===1?a=!1:Sl(s,e,r):(a=!e.$stable,xl(e,s)),l=e}else e&&(El(t,e),l={default:1});if(a)for(const c in s)!kl(c)&&l[c]==null&&delete s[c]},Lt=Sf;function ff(t){return df(t)}function df(t,e){const r=Mu();r.__VUE__=!0;const{insert:n,remove:s,patchProp:a,createElement:l,createText:c,createComment:f,setText:y,setElementText:g,parentNode:b,nextSibling:R,setScopeId:V=rr,insertStaticContent:se}=t,le=(v,k,D,M=null,B=null,N=null,X=void 0,J=null,H=!!k.dynamicChildren)=>{if(v===k)return;v&&!$n(v,k)&&(M=Xe(v),oe(v,B,N,!0),v=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:ee}=k;switch(K){case Zi:me(v,k,D,M);break;case Qr:we(v,k,D,M);break;case Ys:v==null&&je(k,D,M,X);break;case Ut:he(v,k,D,M,B,N,X,J,H);break;default:ee&1?Le(v,k,D,M,B,N,X,J,H):ee&6?ge(v,k,D,M,B,N,X,J,H):(ee&64||ee&128)&&K.process(v,k,D,M,B,N,X,J,H,Fe)}ie!=null&&B&&fo(ie,v&&v.ref,N,k||v,!k)},me=(v,k,D,M)=>{if(v==null)n(k.el=c(k.children),D,M);else{const B=k.el=v.el;k.children!==v.children&&y(B,k.children)}},we=(v,k,D,M)=>{v==null?n(k.el=f(k.children||""),D,M):k.el=v.el},je=(v,k,D,M)=>{[v.el,v.anchor]=se(v.children,k,D,M,v.el,v.anchor)},Re=({el:v,anchor:k},D,M)=>{let B;for(;v&&v!==k;)B=R(v),n(v,D,M),v=B;n(k,D,M)},ce=({el:v,anchor:k})=>{let D;for(;v&&v!==k;)D=R(v),s(v),v=D;s(k)},Le=(v,k,D,M,B,N,X,J,H)=>{k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),v==null?Ye(k,D,M,B,N,X,J,H):j(v,k,B,N,X,J,H)},Ye=(v,k,D,M,B,N,X,J)=>{let H,K;const{props:ie,shapeFlag:ee,transition:Y,dirs:pe}=v;if(H=v.el=l(v.type,N,ie&&ie.is,ie),ee&8?g(H,v.children):ee&16&&I(v.children,H,null,M,B,Js(v,N),X,J),pe&&Br(v,null,M,"created"),ve(H,v,v.scopeId,X,M),ie){for(const Ae in ie)Ae!=="value"&&!Kn(Ae)&&a(H,Ae,null,ie[Ae],N,M);"value"in ie&&a(H,"value",null,ie.value,N),(K=ie.onVnodeBeforeMount)&&Zt(K,M,v)}pe&&Br(v,null,M,"beforeMount");const ke=pf(B,Y);ke&&Y.beforeEnter(H),n(H,k,D),((K=ie&&ie.onVnodeMounted)||ke||pe)&&Lt(()=>{K&&Zt(K,M,v),ke&&Y.enter(H),pe&&Br(v,null,M,"mounted")},B)},ve=(v,k,D,M,B)=>{if(D&&V(v,D),M)for(let N=0;N<M.length;N++)V(v,M[N]);if(B){let N=B.subTree;if(k===N||jl(N.type)&&(N.ssContent===k||N.ssFallback===k)){const X=B.vnode;ve(v,X,X.scopeId,X.slotScopeIds,B.parent)}}},I=(v,k,D,M,B,N,X,J,H=0)=>{for(let K=H;K<v.length;K++){const ie=v[K]=J?Sr(v[K]):tr(v[K]);le(null,ie,k,D,M,B,N,X,J)}},j=(v,k,D,M,B,N,X)=>{const J=k.el=v.el;let{patchFlag:H,dynamicChildren:K,dirs:ie}=k;H|=v.patchFlag&16;const ee=v.props||tt,Y=k.props||tt;let pe;if(D&&Nr(D,!1),(pe=Y.onVnodeBeforeUpdate)&&Zt(pe,D,k,v),ie&&Br(k,v,D,"beforeUpdate"),D&&Nr(D,!0),(ee.innerHTML&&Y.innerHTML==null||ee.textContent&&Y.textContent==null)&&g(J,""),K?W(v.dynamicChildren,K,J,D,M,Js(k,B),N):X||ye(v,k,J,null,D,M,Js(k,B),N,!1),H>0){if(H&16)ue(J,ee,Y,D,B);else if(H&2&&ee.class!==Y.class&&a(J,"class",null,Y.class,B),H&4&&a(J,"style",ee.style,Y.style,B),H&8){const ke=k.dynamicProps;for(let Ae=0;Ae<ke.length;Ae++){const Oe=ke[Ae],Ze=ee[Oe],Be=Y[Oe];(Be!==Ze||Oe==="value")&&a(J,Oe,Ze,Be,B,D)}}H&1&&v.children!==k.children&&g(J,k.children)}else!X&&K==null&&ue(J,ee,Y,D,B);((pe=Y.onVnodeUpdated)||ie)&&Lt(()=>{pe&&Zt(pe,D,k,v),ie&&Br(k,v,D,"updated")},M)},W=(v,k,D,M,B,N,X)=>{for(let J=0;J<k.length;J++){const H=v[J],K=k[J],ie=H.el&&(H.type===Ut||!$n(H,K)||H.shapeFlag&70)?b(H.el):D;le(H,K,ie,null,M,B,N,X,!0)}},ue=(v,k,D,M,B)=>{if(k!==D){if(k!==tt)for(const N in k)!Kn(N)&&!(N in D)&&a(v,N,k[N],null,B,M);for(const N in D){if(Kn(N))continue;const X=D[N],J=k[N];X!==J&&N!=="value"&&a(v,N,J,X,B,M)}"value"in D&&a(v,"value",k.value,D.value,B)}},he=(v,k,D,M,B,N,X,J,H)=>{const K=k.el=v?v.el:c(""),ie=k.anchor=v?v.anchor:c("");let{patchFlag:ee,dynamicChildren:Y,slotScopeIds:pe}=k;pe&&(J=J?J.concat(pe):pe),v==null?(n(K,D,M),n(ie,D,M),I(k.children||[],D,ie,B,N,X,J,H)):ee>0&&ee&64&&Y&&v.dynamicChildren?(W(v.dynamicChildren,Y,D,B,N,X,J),(k.key!=null||B&&k===B.subTree)&&Ol(v,k,!0)):ye(v,k,D,ie,B,N,X,J,H)},ge=(v,k,D,M,B,N,X,J,H)=>{k.slotScopeIds=J,v==null?k.shapeFlag&512?B.ctx.activate(k,D,M,X,H):Ce(k,D,M,B,N,X,H):ot(v,k,H)},Ce=(v,k,D,M,B,N,X)=>{const J=v.component=Rf(v,M,B);if(cl(v)&&(J.ctx.renderer=Fe),If(J,!1,X),J.asyncDep){if(B&&B.registerDep(J,Se,X),!v.el){const H=J.subTree=Qt(Qr);we(null,H,k,D)}}else Se(J,v,k,D,B,N,X)},ot=(v,k,D)=>{const M=k.component=v.component;if(xf(v,k,D))if(M.asyncDep&&!M.asyncResolved){Z(M,k,D);return}else M.next=k,M.update();else k.el=v.el,M.vnode=k},Se=(v,k,D,M,B,N,X)=>{const J=()=>{if(v.isMounted){let{next:ee,bu:Y,u:pe,parent:ke,vnode:Ae}=v;{const ht=Pl(v);if(ht){ee&&(ee.el=Ae.el,Z(v,ee,X)),ht.asyncDep.then(()=>{v.isUnmounted||J()});return}}let Oe=ee,Ze;Nr(v,!1),ee?(ee.el=Ae.el,Z(v,ee,X)):ee=Ae,Y&&$i(Y),(Ze=ee.props&&ee.props.onVnodeBeforeUpdate)&&Zt(Ze,ke,ee,Ae),Nr(v,!0);const Be=Qs(v),Ge=v.subTree;v.subTree=Be,le(Ge,Be,b(Ge.el),Xe(Ge),v,B,N),ee.el=Be.el,Oe===null&&Ef(v,Be.el),pe&&Lt(pe,B),(Ze=ee.props&&ee.props.onVnodeUpdated)&&Lt(()=>Zt(Ze,ke,ee,Ae),B)}else{let ee;const{el:Y,props:pe}=k,{bm:ke,m:Ae,parent:Oe,root:Ze,type:Be}=v,Ge=Bn(k);if(Nr(v,!1),ke&&$i(ke),!Ge&&(ee=pe&&pe.onVnodeBeforeMount)&&Zt(ee,Oe,k),Nr(v,!0),Y&&_e){const ht=()=>{v.subTree=Qs(v),_e(Y,v.subTree,v,B,null)};Ge&&Be.__asyncHydrate?Be.__asyncHydrate(Y,v,ht):ht()}else{Ze.ce&&Ze.ce._injectChildStyle(Be);const ht=v.subTree=Qs(v);le(null,ht,D,M,v,B,N),k.el=ht.el}if(Ae&&Lt(Ae,B),!Ge&&(ee=pe&&pe.onVnodeMounted)){const ht=k;Lt(()=>Zt(ee,Oe,ht),B)}(k.shapeFlag&256||Oe&&Bn(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&v.a&&Lt(v.a,B),v.isMounted=!0,k=D=M=null}};v.scope.on();const H=v.effect=new Nu(J);v.scope.off();const K=v.update=H.run.bind(H),ie=v.job=H.runIfDirty.bind(H);ie.i=v,ie.id=v.uid,H.scheduler=()=>Wo(ie),Nr(v,!0),K()},Z=(v,k,D)=>{k.component=v;const M=v.vnode.props;v.vnode=k,v.next=null,af(v,k.props,M,D),hf(v,k.children,D),Rr(),Ba(v),Ir()},ye=(v,k,D,M,B,N,X,J,H=!1)=>{const K=v&&v.children,ie=v?v.shapeFlag:0,ee=k.children,{patchFlag:Y,shapeFlag:pe}=k;if(Y>0){if(Y&128){rt(K,ee,D,M,B,N,X,J,H);return}else if(Y&256){de(K,ee,D,M,B,N,X,J,H);return}}pe&8?(ie&16&&Ve(K,B,N),ee!==K&&g(D,ee)):ie&16?pe&16?rt(K,ee,D,M,B,N,X,J,H):Ve(K,B,N,!0):(ie&8&&g(D,""),pe&16&&I(ee,D,M,B,N,X,J,H))},de=(v,k,D,M,B,N,X,J,H)=>{v=v||pn,k=k||pn;const K=v.length,ie=k.length,ee=Math.min(K,ie);let Y;for(Y=0;Y<ee;Y++){const pe=k[Y]=H?Sr(k[Y]):tr(k[Y]);le(v[Y],pe,D,null,B,N,X,J,H)}K>ie?Ve(v,B,N,!0,!1,ee):I(k,D,M,B,N,X,J,H,ee)},rt=(v,k,D,M,B,N,X,J,H)=>{let K=0;const ie=k.length;let ee=v.length-1,Y=ie-1;for(;K<=ee&&K<=Y;){const pe=v[K],ke=k[K]=H?Sr(k[K]):tr(k[K]);if($n(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;K++}for(;K<=ee&&K<=Y;){const pe=v[ee],ke=k[Y]=H?Sr(k[Y]):tr(k[Y]);if($n(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;ee--,Y--}if(K>ee){if(K<=Y){const pe=Y+1,ke=pe<ie?k[pe].el:M;for(;K<=Y;)le(null,k[K]=H?Sr(k[K]):tr(k[K]),D,ke,B,N,X,J,H),K++}}else if(K>Y)for(;K<=ee;)oe(v[K],B,N,!0),K++;else{const pe=K,ke=K,Ae=new Map;for(K=ke;K<=Y;K++){const lt=k[K]=H?Sr(k[K]):tr(k[K]);lt.key!=null&&Ae.set(lt.key,K)}let Oe,Ze=0;const Be=Y-ke+1;let Ge=!1,ht=0;const et=new Array(Be);for(K=0;K<Be;K++)et[K]=0;for(K=pe;K<=ee;K++){const lt=v[K];if(Ze>=Be){oe(lt,B,N,!0);continue}let yt;if(lt.key!=null)yt=Ae.get(lt.key);else for(Oe=ke;Oe<=Y;Oe++)if(et[Oe-ke]===0&&$n(lt,k[Oe])){yt=Oe;break}yt===void 0?oe(lt,B,N,!0):(et[yt-ke]=K+1,yt>=ht?ht=yt:Ge=!0,le(lt,k[yt],D,null,B,N,X,J,H),Ze++)}const fe=Ge?gf(et):pn;for(Oe=fe.length-1,K=Be-1;K>=0;K--){const lt=ke+K,yt=k[lt],Dr=lt+1<ie?k[lt+1].el:M;et[K]===0?le(null,yt,D,Dr,B,N,X,J,H):Ge&&(Oe<0||K!==fe[Oe]?Qe(yt,D,Dr,2):Oe--)}}},Qe=(v,k,D,M,B=null)=>{const{el:N,type:X,transition:J,children:H,shapeFlag:K}=v;if(K&6){Qe(v.component.subTree,k,D,M);return}if(K&128){v.suspense.move(k,D,M);return}if(K&64){X.move(v,k,D,Fe);return}if(X===Ut){n(N,k,D);for(let ee=0;ee<H.length;ee++)Qe(H[ee],k,D,M);n(v.anchor,k,D);return}if(X===Ys){Re(v,k,D);return}if(M!==2&&K&1&&J)if(M===0)J.beforeEnter(N),n(N,k,D),Lt(()=>J.enter(N),B);else{const{leave:ee,delayLeave:Y,afterLeave:pe}=J,ke=()=>n(N,k,D),Ae=()=>{ee(N,()=>{ke(),pe&&pe()})};Y?Y(N,ke,Ae):Ae()}else n(N,k,D)},oe=(v,k,D,M=!1,B=!1)=>{const{type:N,props:X,ref:J,children:H,dynamicChildren:K,shapeFlag:ie,patchFlag:ee,dirs:Y,cacheIndex:pe}=v;if(ee===-2&&(B=!1),J!=null&&fo(J,null,D,v,!0),pe!=null&&(k.renderCache[pe]=void 0),ie&256){k.ctx.deactivate(v);return}const ke=ie&1&&Y,Ae=!Bn(v);let Oe;if(Ae&&(Oe=X&&X.onVnodeBeforeUnmount)&&Zt(Oe,k,v),ie&6)Je(v.component,D,M);else{if(ie&128){v.suspense.unmount(D,M);return}ke&&Br(v,null,k,"beforeUnmount"),ie&64?v.type.remove(v,k,D,Fe,M):K&&!K.hasOnce&&(N!==Ut||ee>0&&ee&64)?Ve(K,k,D,!1,!0):(N===Ut&&ee&384||!B&&ie&16)&&Ve(H,k,D),M&&Ke(v)}(Ae&&(Oe=X&&X.onVnodeUnmounted)||ke)&&Lt(()=>{Oe&&Zt(Oe,k,v),ke&&Br(v,null,k,"unmounted")},D)},Ke=v=>{const{type:k,el:D,anchor:M,transition:B}=v;if(k===Ut){ft(D,M);return}if(k===Ys){ce(v);return}const N=()=>{s(D),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(v.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:J}=B,H=()=>X(D,N);J?J(v.el,N,H):H()}else N()},ft=(v,k)=>{let D;for(;v!==k;)D=R(v),s(v),v=D;s(k)},Je=(v,k,D)=>{const{bum:M,scope:B,job:N,subTree:X,um:J,m:H,a:K}=v;Ja(H),Ja(K),M&&$i(M),B.stop(),N&&(N.flags|=8,oe(X,v,k,D)),J&&Lt(J,k),Lt(()=>{v.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Ve=(v,k,D,M=!1,B=!1,N=0)=>{for(let X=N;X<v.length;X++)oe(v[X],k,D,M,B)},Xe=v=>{if(v.shapeFlag&6)return Xe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=R(v.anchor||v.el),D=k&&k[Dh];return D?R(D):k};let at=!1;const q=(v,k,D)=>{v==null?k._vnode&&oe(k._vnode,null,null,!0):le(k._vnode||null,v,k,null,null,null,D),k._vnode=v,at||(at=!0,Ba(),ol(),at=!1)},Fe={p:le,um:oe,m:Qe,r:Ke,mt:Ce,mc:I,pc:ye,pbc:W,n:Xe,o:t};let He,_e;return{render:q,hydrate:He,createApp:nf(q,He)}}function Js({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Nr({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ol(t,e,r=!1){const n=t.children,s=e.children;if(xe(n)&&xe(s))for(let a=0;a<n.length;a++){const l=n[a];let c=s[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[a]=Sr(s[a]),c.el=l.el),!r&&c.patchFlag!==-2&&Ol(l,c)),c.type===Zi&&(c.el=l.el)}}function gf(t){const e=t.slice(),r=[0];let n,s,a,l,c;const f=t.length;for(n=0;n<f;n++){const y=t[n];if(y!==0){if(s=r[r.length-1],t[s]<y){e[n]=s,r.push(n);continue}for(a=0,l=r.length-1;a<l;)c=a+l>>1,t[r[c]]<y?a=c+1:l=c;y<t[r[a]]&&(a>0&&(e[n]=r[a-1]),r[a]=n)}}for(a=r.length,l=r[a-1];a-- >0;)r[a]=l,l=e[l];return r}function Pl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Pl(e)}function Ja(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const yf=Symbol.for("v-scx"),mf=()=>Li(yf);function Gs(t,e,r){return Tl(t,e,r)}function Tl(t,e,r=tt){const{immediate:n,deep:s,flush:a,once:l}=r,c=St({},r);let f;if(es)if(a==="sync"){const R=mf();f=R.__watcherHandles||(R.__watcherHandles=[])}else if(!e||n)c.once=!0;else{const R=()=>{};return R.stop=rr,R.resume=rr,R.pause=rr,R}const y=xt;c.call=(R,V,se)=>nr(R,y,V,se);let g=!1;a==="post"?c.scheduler=R=>{Lt(R,y&&y.suspense)}:a!=="sync"&&(g=!0,c.scheduler=(R,V)=>{V?R():Wo(R)}),c.augmentJob=R=>{e&&(R.flags|=4),g&&(R.flags|=2,y&&(R.id=y.uid,R.i=y))};const b=Th(t,e,c);return f&&f.push(b),b}function vf(t,e,r){const n=this.proxy,s=gt(t)?t.includes(".")?Cl(n,t):()=>n[t]:t.bind(n,n);let a;Te(e)?a=e:(a=e.handler,r=e);const l=Zn(this),c=Tl(s,a.bind(n),r);return l(),c}function Cl(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const _f=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vt(e)}Modifiers`]||t[`${jr(e)}Modifiers`];function bf(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||tt;let s=r;const a=e.startsWith("update:"),l=a&&_f(n,e.slice(7));l&&(l.trim&&(s=r.map(g=>gt(g)?g.trim():g)),l.number&&(s=r.map(ao)));let c,f=n[c=Bs(e)]||n[c=Bs(Vt(e))];!f&&a&&(f=n[c=Bs(jr(e))]),f&&nr(f,t,6,s);const y=n[c+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,nr(y,t,6,s)}}function Al(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const a=t.emits;let l={},c=!1;if(!Te(t)){const f=y=>{const g=Al(y,e,!0);g&&(c=!0,St(l,g))};!r&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!c?(ct(t)&&n.set(t,null),null):(xe(a)?a.forEach(f=>l[f]=null):St(l,a),ct(t)&&n.set(t,l),l)}function Xi(t,e){return!t||!Hi(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,jr(e))||We(t,e))}function Qs(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[a],slots:l,attrs:c,emit:f,render:y,renderCache:g,props:b,data:R,setupState:V,ctx:se,inheritAttrs:le}=t,me=Ki(t);let we,je;try{if(r.shapeFlag&4){const ce=s||n,Le=ce;we=tr(y.call(Le,ce,g,b,V,R,se)),je=c}else{const ce=e;we=tr(ce.length>1?ce(b,{attrs:c,slots:l,emit:f}):ce(b,null)),je=e.props?c:wf(c)}}catch(ce){qn.length=0,Qi(ce,t,1),we=Qt(Qr)}let Re=we;if(je&&le!==!1){const ce=Object.keys(je),{shapeFlag:Le}=Re;ce.length&&Le&7&&(a&&ce.some(Ao)&&(je=kf(je,a)),Re=bn(Re,je,!1,!0))}return r.dirs&&(Re=bn(Re,null,!1,!0),Re.dirs=Re.dirs?Re.dirs.concat(r.dirs):r.dirs),r.transition&&zo(Re,r.transition),we=Re,Ki(me),we}const wf=t=>{let e;for(const r in t)(r==="class"||r==="style"||Hi(r))&&((e||(e={}))[r]=t[r]);return e},kf=(t,e)=>{const r={};for(const n in t)(!Ao(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function xf(t,e,r){const{props:n,children:s,component:a}=t,{props:l,children:c,patchFlag:f}=e,y=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&f>=0){if(f&1024)return!0;if(f&16)return n?Ga(n,l,y):!!l;if(f&8){const g=e.dynamicProps;for(let b=0;b<g.length;b++){const R=g[b];if(l[R]!==n[R]&&!Xi(y,R))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?Ga(n,l,y):!0:!!l;return!1}function Ga(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const a=n[s];if(e[a]!==t[a]&&!Xi(r,a))return!0}return!1}function Ef({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const jl=t=>t.__isSuspense;function Sf(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):Rh(t)}const Ut=Symbol.for("v-fgt"),Zi=Symbol.for("v-txt"),Qr=Symbol.for("v-cmt"),Ys=Symbol.for("v-stc"),qn=[];let Bt=null;function It(t=!1){qn.push(Bt=t?null:[])}function Of(){qn.pop(),Bt=qn[qn.length-1]||null}let Qn=1;function Qa(t){Qn+=t,t<0&&Bt&&(Bt.hasOnce=!0)}function Rl(t){return t.dynamicChildren=Qn>0?Bt||pn:null,Of(),Qn>0&&Bt&&Bt.push(t),t}function qt(t,e,r,n,s,a){return Rl(be(t,e,r,n,s,a,!0))}function Il(t,e,r,n,s){return Rl(Qt(t,e,r,n,s,!0))}function Dl(t){return t?t.__v_isVNode===!0:!1}function $n(t,e){return t.type===e.type&&t.key===e.key}const $l=({key:t})=>t??null,Fi=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?gt(t)||Et(t)||Te(t)?{i:Kt,r:t,k:e,f:!!r}:t:null);function be(t,e=null,r=null,n=0,s=null,a=t===Ut?0:1,l=!1,c=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$l(e),ref:e&&Fi(e),scopeId:ul,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return c?(Qo(f,r),a&128&&t.normalize(f)):r&&(f.shapeFlag|=gt(r)?8:16),Qn>0&&!l&&Bt&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Bt.push(f),f}const Qt=Pf;function Pf(t,e=null,r=null,n=0,s=null,a=!1){if((!t||t===Jh)&&(t=Qr),Dl(t)){const c=bn(t,e,!0);return r&&Qo(c,r),Qn>0&&!a&&Bt&&(c.shapeFlag&6?Bt[Bt.indexOf(t)]=c:Bt.push(c)),c.patchFlag=-2,c}if(Mf(t)&&(t=t.__vccOpts),e){e=Tf(e);let{class:c,style:f}=e;c&&!gt(c)&&(e.class=Do(c)),ct(f)&&(qo(f)&&!xe(f)&&(f=St({},f)),e.style=Io(f))}const l=gt(t)?1:jl(t)?128:$h(t)?64:ct(t)?4:Te(t)?2:0;return be(t,e,r,n,s,l,a,!0)}function Tf(t){return t?qo(t)||_l(t)?St({},t):t:null}function bn(t,e,r=!1,n=!1){const{props:s,ref:a,patchFlag:l,children:c,transition:f}=t,y=e?Cf(s||{},e):s,g={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&$l(y),ref:e&&e.ref?r&&a?xe(a)?a.concat(Fi(e)):[a,Fi(e)]:Fi(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ut?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&bn(t.ssContent),ssFallback:t.ssFallback&&bn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&n&&zo(g,f.clone(g)),g}function Ll(t=" ",e=0){return Qt(Zi,null,t,e)}function Xs(t="",e=!1){return e?(It(),Il(Qr,null,t)):Qt(Qr,null,t)}function tr(t){return t==null||typeof t=="boolean"?Qt(Qr):xe(t)?Qt(Ut,null,t.slice()):Dl(t)?Sr(t):Qt(Zi,null,String(t))}function Sr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:bn(t)}function Qo(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(xe(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Qo(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!_l(e)?e._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Kt},r=32):(e=String(e),n&64?(r=16,e=[Ll(e)]):r=8);t.children=e,t.shapeFlag|=r}function Cf(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Do([e.class,n.class]));else if(s==="style")e.style=Io([e.style,n.style]);else if(Hi(s)){const a=e[s],l=n[s];l&&a!==l&&!(xe(a)&&a.includes(l))&&(e[s]=a?[].concat(a,l):l)}else s!==""&&(e[s]=n[s])}return e}function Zt(t,e,r,n=null){nr(t,e,7,[r,n])}const Af=yl();let jf=0;function Rf(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||Af,a={uid:jf++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wl(n,s),emitsOptions:Al(n,s),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:n.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=bf.bind(null,a),t.ce&&t.ce(a),a}let xt=null,Ni,vo;{const t=Mu(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};Ni=e("__VUE_INSTANCE_SETTERS__",r=>xt=r),vo=e("__VUE_SSR_SETTERS__",r=>es=r)}const Zn=t=>{const e=xt;return Ni(t),t.scope.on(),()=>{t.scope.off(),Ni(e)}},Ya=()=>{xt&&xt.scope.off(),Ni(null)};function Fl(t){return t.vnode.shapeFlag&4}let es=!1;function If(t,e=!1,r=!1){e&&vo(e);const{props:n,children:s}=t.vnode,a=Fl(t);of(t,n,a,e),cf(t,s,r);const l=a?Df(t,e):void 0;return e&&vo(!1),l}function Df(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Qh);const{setup:n}=r;if(n){const s=t.setupContext=n.length>1?Lf(t):null,a=Zn(t);Rr();const l=Xn(n,t,0,[t.props,s]);if(Ir(),a(),Du(l)){if(Bn(t)||ll(t),l.then(Ya,Ya),e)return l.then(c=>{Xa(t,c,e)}).catch(c=>{Qi(c,t,0)});t.asyncDep=l}else Xa(t,l,e)}else Ml(t,e)}function Xa(t,e,r){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=nl(e)),Ml(t,r)}let Za;function Ml(t,e,r){const n=t.type;if(!t.render){if(!e&&Za&&!n.render){const s=n.template||Jo(t).template;if(s){const{isCustomElement:a,compilerOptions:l}=t.appContext.config,{delimiters:c,compilerOptions:f}=n,y=St(St({isCustomElement:a,delimiters:c},l),f);n.render=Za(s,y)}}t.render=n.render||rr}{const s=Zn(t);Rr();try{Yh(t)}finally{Ir(),s()}}}const $f={get(t,e){return Ot(t,"get",""),t[e]}};function Lf(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,$f),slots:t.slots,emit:t.emit,expose:e}}function ts(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(nl(_h(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Nn)return Nn[r](t)},has(e,r){return r in e||r in Nn}})):t.proxy}function Ff(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function Mf(t){return Te(t)&&"__vccOpts"in t}const Uf=(t,e)=>Oh(t,e,es),Kf="3.5.10";/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _o;const eu=typeof window<"u"&&window.trustedTypes;if(eu)try{_o=eu.createPolicy("vue",{createHTML:t=>t})}catch{}const Ul=_o?t=>_o.createHTML(t):t=>t,Bf="http://www.w3.org/2000/svg",Nf="http://www.w3.org/1998/Math/MathML",ur=typeof document<"u"?document:null,tu=ur&&ur.createElement("template"),qf={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?ur.createElementNS(Bf,t):e==="mathml"?ur.createElementNS(Nf,t):r?ur.createElement(t,{is:r}):ur.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>ur.createTextNode(t),createComment:t=>ur.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ur.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,a){const l=r?r.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===a||!(s=s.nextSibling)););else{tu.innerHTML=Ul(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const c=tu.content;if(n==="svg"||n==="mathml"){const f=c.firstChild;for(;f.firstChild;)c.appendChild(f.firstChild);c.removeChild(f)}e.insertBefore(c,r)}return[l?l.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Hf=Symbol("_vtc");function Vf(t,e,r){const n=t[Hf];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const ru=Symbol("_vod"),Wf=Symbol("_vsh"),zf=Symbol(""),Jf=/(^|;)\s*display\s*:/;function Gf(t,e,r){const n=t.style,s=gt(r);let a=!1;if(r&&!s){if(e)if(gt(e))for(const l of e.split(";")){const c=l.slice(0,l.indexOf(":")).trim();r[c]==null&&Mi(n,c,"")}else for(const l in e)r[l]==null&&Mi(n,l,"");for(const l in r)l==="display"&&(a=!0),Mi(n,l,r[l])}else if(s){if(e!==r){const l=n[zf];l&&(r+=";"+l),n.cssText=r,a=Jf.test(r)}}else e&&t.removeAttribute("style");ru in t&&(t[ru]=a?n.display:"",t[Wf]&&(n.display="none"))}const nu=/\s*!important$/;function Mi(t,e,r){if(xe(r))r.forEach(n=>Mi(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Qf(t,e);nu.test(r)?t.setProperty(jr(n),r.replace(nu,""),"important"):t[n]=r}}const iu=["Webkit","Moz","ms"],Zs={};function Qf(t,e){const r=Zs[e];if(r)return r;let n=Vt(e);if(n!=="filter"&&n in t)return Zs[e]=n;n=zi(n);for(let s=0;s<iu.length;s++){const a=iu[s]+n;if(a in t)return Zs[e]=a}return e}const su="http://www.w3.org/1999/xlink";function ou(t,e,r,n,s,a=Jc(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(su,e.slice(6,e.length)):t.setAttributeNS(su,e,r):r==null||a&&!Uu(r)?t.removeAttribute(e):t.setAttribute(e,a?"":Ar(r)?String(r):r)}function au(t,e,r,n){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Ul(r):r);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,c=r==null?t.type==="checkbox"?"on":"":String(r);(l!==c||!("_value"in t))&&(t.value=c),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=Uu(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(e)}function fn(t,e,r,n){t.addEventListener(e,r,n)}function Yf(t,e,r,n){t.removeEventListener(e,r,n)}const uu=Symbol("_vei");function Xf(t,e,r,n,s=null){const a=t[uu]||(t[uu]={}),l=a[e];if(n&&l)l.value=n;else{const[c,f]=Zf(e);if(n){const y=a[e]=rd(n,s);fn(t,c,y,f)}else l&&(Yf(t,c,l,f),a[e]=void 0)}}const lu=/(?:Once|Passive|Capture)$/;function Zf(t){let e;if(lu.test(t)){e={};let n;for(;n=t.match(lu);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):jr(t.slice(2)),e]}let eo=0;const ed=Promise.resolve(),td=()=>eo||(ed.then(()=>eo=0),eo=Date.now());function rd(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;nr(nd(n,r.value),e,5,[n])};return r.value=t,r.attached=td(),r}function nd(t,e){if(xe(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const cu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,id=(t,e,r,n,s,a)=>{const l=s==="svg";e==="class"?Vf(t,n,l):e==="style"?Gf(t,r,n):Hi(e)?Ao(e)||Xf(t,e,r,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):sd(t,e,n,l))?(au(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ou(t,e,n,l,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!gt(n))?au(t,Vt(e),n):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),ou(t,e,n,l))};function sd(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&cu(e)&&Te(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return cu(e)&&gt(r)?!1:e in t}const hu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xe(e)?r=>$i(e,r):e};function od(t){t.target.composing=!0}function fu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const to=Symbol("_assign"),br={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[to]=hu(s);const a=n||s.props&&s.props.type==="number";fn(t,e?"change":"input",l=>{if(l.target.composing)return;let c=t.value;r&&(c=c.trim()),a&&(c=ao(c)),t[to](c)}),r&&fn(t,"change",()=>{t.value=t.value.trim()}),e||(fn(t,"compositionstart",od),fn(t,"compositionend",fu),fn(t,"change",fu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:a}},l){if(t[to]=hu(l),t.composing)return;const c=(a||t.type==="number")&&!/^0\d/.test(t.value)?ao(t.value):t.value,f=e??"";c!==f&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===f)||(t.value=f))}},ad=["ctrl","shift","alt","meta"],ud={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ad.some(r=>t[`${r}Key`]&&!e.includes(r))},du=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...a)=>{for(let l=0;l<e.length;l++){const c=ud[e[l]];if(c&&c(s,e))return}return t(s,...a)})},ld={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cd=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const a=jr(s.key);if(e.some(l=>l===a||ld[l]===a))return t(s)})},hd=St({patchProp:id},qf);let pu;function fd(){return pu||(pu=ff(hd))}const dd=(...t)=>{const e=fd().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=gd(n);if(!s)return;const a=e._component;!Te(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=r(s,!1,pd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e};function pd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gd(t){return gt(t)?document.querySelector(t):t}var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yd(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Bl={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,n){t.exports=n()})(jt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,l={},c=0,f={parse:function(I,j){var W=(j=j||{}).dynamicTyping||!1;if(ve(W)&&(j.dynamicTypingFunction=W,W={}),j.dynamicTyping=W,j.transform=!!ve(j.transform)&&j.transform,j.worker&&f.WORKERS_SUPPORTED){var ue=function(){if(!f.WORKERS_SUPPORTED)return!1;var ge=(ot=n.URL||n.webkitURL||null,Se=r.toString(),f.BLOB_URL||(f.BLOB_URL=ot.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Se,")();"],{type:"text/javascript"})))),Ce=new n.Worker(ge),ot,Se;return Ce.onmessage=je,Ce.id=c++,l[Ce.id]=Ce}();return ue.userStep=j.step,ue.userChunk=j.chunk,ue.userComplete=j.complete,ue.userError=j.error,j.step=ve(j.step),j.chunk=ve(j.chunk),j.complete=ve(j.complete),j.error=ve(j.error),delete j.worker,void ue.postMessage({input:I,config:j,workerId:ue.id})}var he=null;return f.NODE_STREAM_INPUT,typeof I=="string"?(I=function(ge){return ge.charCodeAt(0)===65279?ge.slice(1):ge}(I),he=j.download?new b(j):new V(j)):I.readable===!0&&ve(I.read)&&ve(I.on)?he=new se(j):(n.File&&I instanceof File||I instanceof Object)&&(he=new R(j)),he.stream(I)},unparse:function(I,j){var W=!1,ue=!0,he=",",ge=`\r
`,Ce='"',ot=Ce+Ce,Se=!1,Z=null,ye=!1;(function(){if(typeof j=="object"){if(typeof j.delimiter!="string"||f.BAD_DELIMITERS.filter(function(oe){return j.delimiter.indexOf(oe)!==-1}).length||(he=j.delimiter),(typeof j.quotes=="boolean"||typeof j.quotes=="function"||Array.isArray(j.quotes))&&(W=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(Se=j.skipEmptyLines),typeof j.newline=="string"&&(ge=j.newline),typeof j.quoteChar=="string"&&(Ce=j.quoteChar),typeof j.header=="boolean"&&(ue=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");Z=j.columns}j.escapeChar!==void 0&&(ot=j.escapeChar+Ce),(typeof j.escapeFormulae=="boolean"||j.escapeFormulae instanceof RegExp)&&(ye=j.escapeFormulae instanceof RegExp?j.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var de=new RegExp(me(Ce),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return rt(null,I,Se);if(typeof I[0]=="object")return rt(Z||Object.keys(I[0]),I,Se)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||Z),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),rt(I.fields||[],I.data||[],Se);throw new Error("Unable to serialize unrecognized input");function rt(oe,Ke,ft){var Je="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof Ke=="string"&&(Ke=JSON.parse(Ke));var Ve=Array.isArray(oe)&&0<oe.length,Xe=!Array.isArray(Ke[0]);if(Ve&&ue){for(var at=0;at<oe.length;at++)0<at&&(Je+=he),Je+=Qe(oe[at],at);0<Ke.length&&(Je+=ge)}for(var q=0;q<Ke.length;q++){var Fe=Ve?oe.length:Ke[q].length,He=!1,_e=Ve?Object.keys(Ke[q]).length===0:Ke[q].length===0;if(ft&&!Ve&&(He=ft==="greedy"?Ke[q].join("").trim()==="":Ke[q].length===1&&Ke[q][0].length===0),ft==="greedy"&&Ve){for(var v=[],k=0;k<Fe;k++){var D=Xe?oe[k]:k;v.push(Ke[q][D])}He=v.join("").trim()===""}if(!He){for(var M=0;M<Fe;M++){0<M&&!_e&&(Je+=he);var B=Ve&&Xe?oe[M]:M;Je+=Qe(Ke[q][B],M)}q<Ke.length-1&&(!ft||0<Fe&&!_e)&&(Je+=ge)}}return Je}function Qe(oe,Ke){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var ft=!1;ye&&typeof oe=="string"&&ye.test(oe)&&(oe="'"+oe,ft=!0);var Je=oe.toString().replace(de,ot);return(ft=ft||W===!0||typeof W=="function"&&W(oe,Ke)||Array.isArray(W)&&W[Ke]||function(Ve,Xe){for(var at=0;at<Xe.length;at++)if(-1<Ve.indexOf(Xe[at]))return!0;return!1}(Je,f.BAD_DELIMITERS)||-1<Je.indexOf(he)||Je.charAt(0)===" "||Je.charAt(Je.length-1)===" ")?Ce+Je+Ce:Je}}};if(f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!s&&!!n.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=we,f.ParserHandle=le,f.NetworkStreamer=b,f.FileStreamer=R,f.StringStreamer=V,f.ReadableStreamStreamer=se,n.jQuery){var y=n.jQuery;y.fn.parse=function(I){var j=I.config||{},W=[];return this.each(function(ge){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Ce=0;Ce<this.files.length;Ce++)W.push({file:this.files[Ce],inputElem:this,instanceConfig:y.extend({},j)})}),ue(),this;function ue(){if(W.length!==0){var ge,Ce,ot,Se,Z=W[0];if(ve(I.before)){var ye=I.before(Z.file,Z.inputElem);if(typeof ye=="object"){if(ye.action==="abort")return ge="AbortError",Ce=Z.file,ot=Z.inputElem,Se=ye.reason,void(ve(I.error)&&I.error({name:ge},Ce,ot,Se));if(ye.action==="skip")return void he();typeof ye.config=="object"&&(Z.instanceConfig=y.extend(Z.instanceConfig,ye.config))}else if(ye==="skip")return void he()}var de=Z.instanceConfig.complete;Z.instanceConfig.complete=function(rt){ve(de)&&de(rt,Z.file,Z.inputElem),he()},f.parse(Z.file,Z.instanceConfig)}else ve(I.complete)&&I.complete()}function he(){W.splice(0,1),ue()}}}function g(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(j){var W=Le(j);W.chunkSize=parseInt(W.chunkSize),j.step||j.chunk||(W.chunkSize=null),this._handle=new le(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(j,W){if(this.isFirstChunk&&ve(this._config.beforeFirstChunk)){var ue=this._config.beforeFirstChunk(j);ue!==void 0&&(j=ue)}this.isFirstChunk=!1,this._halted=!1;var he=this._partialLine+j;this._partialLine="";var ge=this._handle.parse(he,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Ce=ge.meta.cursor;this._finished||(this._partialLine=he.substring(Ce-this._baseIndex),this._baseIndex=Ce),ge&&ge.data&&(this._rowCount+=ge.data.length);var ot=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)n.postMessage({results:ge,workerId:f.WORKER_ID,finished:ot});else if(ve(this._config.chunk)&&!W){if(this._config.chunk(ge,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ge=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ge.data),this._completeResults.errors=this._completeResults.errors.concat(ge.errors),this._completeResults.meta=ge.meta),this._completed||!ot||!ve(this._config.complete)||ge&&ge.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ot||ge&&ge.meta.paused||this._nextChunk(),ge}this._halted=!0},this._sendError=function(j){ve(this._config.error)?this._config.error(j):a&&this._config.error&&n.postMessage({workerId:f.WORKER_ID,error:j,finished:!1})}}function b(I){var j;(I=I||{}).chunkSize||(I.chunkSize=f.RemoteChunkSize),g.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W=this._config.downloadRequestHeaders;for(var ue in W)j.setRequestHeader(ue,W[ue])}if(this._config.chunkSize){var he=this._start+this._config.chunkSize-1;j.setRequestHeader("Range","bytes="+this._start+"-"+he)}try{j.send(this._config.downloadRequestBody)}catch(ge){this._chunkError(ge.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:j.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(W){var ue=W.getResponseHeader("Content-Range");return ue===null?-1:parseInt(ue.substring(ue.lastIndexOf("/")+1))}(j),this.parseChunk(j.responseText)))},this._chunkError=function(W){var ue=j.statusText||W;this._sendError(new Error(ue))}}function R(I){var j,W;(I=I||{}).chunkSize||(I.chunkSize=f.LocalChunkSize),g.call(this,I);var ue=typeof FileReader<"u";this.stream=function(he){this._input=he,W=he.slice||he.webkitSlice||he.mozSlice,ue?((j=new FileReader).onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var he=this._input;if(this._config.chunkSize){var ge=Math.min(this._start+this._config.chunkSize,this._input.size);he=W.call(he,this._start,ge)}var Ce=j.readAsText(he,this._config.encoding);ue||this._chunkLoaded({target:{result:Ce}})},this._chunkLoaded=function(he){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(he.target.result)},this._chunkError=function(){this._sendError(j.error)}}function V(I){var j;g.call(this,I=I||{}),this.stream=function(W){return j=W,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var W,ue=this._config.chunkSize;return ue?(W=j.substring(0,ue),j=j.substring(ue)):(W=j,j=""),this._finished=!j,this.parseChunk(W)}}}function se(I){g.call(this,I=I||{});var j=[],W=!0,ue=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(he){this._input=he,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):W=!0},this._streamData=Ye(function(he){try{j.push(typeof he=="string"?he:he.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(ge){this._streamError(ge)}},this),this._streamError=Ye(function(he){this._streamCleanUp(),this._sendError(he)},this),this._streamEnd=Ye(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Ye(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(I){var j,W,ue,he=Math.pow(2,53),ge=-he,Ce=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ot=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Z=0,ye=0,de=!1,rt=!1,Qe=[],oe={data:[],errors:[],meta:{}};if(ve(I.step)){var Ke=I.step;I.step=function(q){if(oe=q,Ve())Je();else{if(Je(),oe.data.length===0)return;Z+=q.data.length,I.preview&&Z>I.preview?W.abort():(oe.data=oe.data[0],Ke(oe,Se))}}}function ft(q){return I.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Je(){return oe&&ue&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),ue=!1),I.skipEmptyLines&&(oe.data=oe.data.filter(function(q){return!ft(q)})),Ve()&&function(){if(!oe)return;function q(He,_e){ve(I.transformHeader)&&(He=I.transformHeader(He,_e)),Qe.push(He)}if(Array.isArray(oe.data[0])){for(var Fe=0;Ve()&&Fe<oe.data.length;Fe++)oe.data[Fe].forEach(q);oe.data.splice(0,1)}else oe.data.forEach(q)}(),function(){if(!oe||!I.header&&!I.dynamicTyping&&!I.transform)return oe;function q(He,_e){var v,k=I.header?{}:[];for(v=0;v<He.length;v++){var D=v,M=He[v];I.header&&(D=v>=Qe.length?"__parsed_extra":Qe[v]),I.transform&&(M=I.transform(M,D)),M=Xe(D,M),D==="__parsed_extra"?(k[D]=k[D]||[],k[D].push(M)):k[D]=M}return I.header&&(v>Qe.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+Qe.length+" fields but parsed "+v,ye+_e):v<Qe.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+Qe.length+" fields but parsed "+v,ye+_e)),k}var Fe=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(q),Fe=oe.data.length):oe.data=q(oe.data,0),I.header&&oe.meta&&(oe.meta.fields=Qe),ye+=Fe,oe}()}function Ve(){return I.header&&Qe.length===0}function Xe(q,Fe){return He=q,I.dynamicTypingFunction&&I.dynamicTyping[He]===void 0&&(I.dynamicTyping[He]=I.dynamicTypingFunction(He)),(I.dynamicTyping[He]||I.dynamicTyping)===!0?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&(function(_e){if(Ce.test(_e)){var v=parseFloat(_e);if(ge<v&&v<he)return!0}return!1}(Fe)?parseFloat(Fe):ot.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe;var He}function at(q,Fe,He,_e){var v={type:q,code:Fe,message:He};_e!==void 0&&(v.row=_e),oe.errors.push(v)}this.parse=function(q,Fe,He){var _e=I.quoteChar||'"';if(I.newline||(I.newline=function(D,M){D=D.substring(0,1048576);var B=new RegExp(me(M)+"([^]*?)"+me(M),"gm"),N=(D=D.replace(B,"")).split("\r"),X=D.split(`
`),J=1<X.length&&X[0].length<N[0].length;if(N.length===1||J)return`
`;for(var H=0,K=0;K<N.length;K++)N[K][0]===`
`&&H++;return H>=N.length/2?`\r
`:"\r"}(q,_e)),ue=!1,I.delimiter)ve(I.delimiter)&&(I.delimiter=I.delimiter(q),oe.meta.delimiter=I.delimiter);else{var v=function(D,M,B,N,X){var J,H,K,ie;X=X||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ee=0;ee<X.length;ee++){var Y=X[ee],pe=0,ke=0,Ae=0;K=void 0;for(var Oe=new we({comments:N,delimiter:Y,newline:M,preview:10}).parse(D),Ze=0;Ze<Oe.data.length;Ze++)if(B&&ft(Oe.data[Ze]))Ae++;else{var Be=Oe.data[Ze].length;ke+=Be,K!==void 0?0<Be&&(pe+=Math.abs(Be-K),K=Be):K=Be}0<Oe.data.length&&(ke/=Oe.data.length-Ae),(H===void 0||pe<=H)&&(ie===void 0||ie<ke)&&1.99<ke&&(H=pe,J=Y,ie=ke)}return{successful:!!(I.delimiter=J),bestDelimiter:J}}(q,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);v.successful?I.delimiter=v.bestDelimiter:(ue=!0,I.delimiter=f.DefaultDelimiter),oe.meta.delimiter=I.delimiter}var k=Le(I);return I.preview&&I.header&&k.preview++,j=q,W=new we(k),oe=W.parse(j,Fe,He),Je(),de?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return de},this.pause=function(){de=!0,W.abort(),j=ve(I.chunk)?"":j.substring(W.getCharIndex())},this.resume=function(){Se.streamer._halted?(de=!1,Se.streamer.parseChunk(j,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return rt},this.abort=function(){rt=!0,W.abort(),oe.meta.aborted=!0,ve(I.complete)&&I.complete(oe),j=""}}function me(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function we(I){var j,W=(I=I||{}).delimiter,ue=I.newline,he=I.comments,ge=I.step,Ce=I.preview,ot=I.fastMode,Se=j=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Se=I.escapeChar),(typeof W!="string"||-1<f.BAD_DELIMITERS.indexOf(W))&&(W=","),he===W)throw new Error("Comment character same as delimiter");he===!0?he="#":(typeof he!="string"||-1<f.BAD_DELIMITERS.indexOf(he))&&(he=!1),ue!==`
`&&ue!=="\r"&&ue!==`\r
`&&(ue=`
`);var Z=0,ye=!1;this.parse=function(de,rt,Qe){if(typeof de!="string")throw new Error("Input must be a string");var oe=de.length,Ke=W.length,ft=ue.length,Je=he.length,Ve=ve(ge),Xe=[],at=[],q=[],Fe=Z=0;if(!de)return Ge();if(I.header&&!rt){var He=de.split(ue)[0].split(W),_e=[],v={},k=!1;for(var D in He){var M=He[D];ve(I.transformHeader)&&(M=I.transformHeader(M,D));var B=M,N=v[M]||0;for(0<N&&(k=!0,B=M+"_"+N),v[M]=N+1;_e.includes(B);)B=B+"_"+N;_e.push(B)}if(k){var X=de.split(ue);X[0]=_e.join(W),de=X.join(ue)}}if(ot||ot!==!1&&de.indexOf(j)===-1){for(var J=de.split(ue),H=0;H<J.length;H++){if(q=J[H],Z+=q.length,H!==J.length-1)Z+=ue.length;else if(Qe)return Ge();if(!he||q.substring(0,Je)!==he){if(Ve){if(Xe=[],Ae(q.split(W)),ht(),ye)return Ge()}else Ae(q.split(W));if(Ce&&Ce<=H)return Xe=Xe.slice(0,Ce),Ge(!0)}}return Ge()}for(var K=de.indexOf(W,Z),ie=de.indexOf(ue,Z),ee=new RegExp(me(Se)+me(j),"g"),Y=de.indexOf(j,Z);;)if(de[Z]!==j)if(he&&q.length===0&&de.substring(Z,Z+Je)===he){if(ie===-1)return Ge();Z=ie+ft,ie=de.indexOf(ue,Z),K=de.indexOf(W,Z)}else if(K!==-1&&(K<ie||ie===-1))q.push(de.substring(Z,K)),Z=K+Ke,K=de.indexOf(W,Z);else{if(ie===-1)break;if(q.push(de.substring(Z,ie)),Be(ie+ft),Ve&&(ht(),ye))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0)}else for(Y=Z,Z++;;){if((Y=de.indexOf(j,Y+1))===-1)return Qe||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Xe.length,index:Z}),Ze();if(Y===oe-1)return Ze(de.substring(Z,Y).replace(ee,j));if(j!==Se||de[Y+1]!==Se){if(j===Se||Y===0||de[Y-1]!==Se){K!==-1&&K<Y+1&&(K=de.indexOf(W,Y+1)),ie!==-1&&ie<Y+1&&(ie=de.indexOf(ue,Y+1));var pe=Oe(ie===-1?K:Math.min(K,ie));if(de.substr(Y+1+pe,Ke)===W){q.push(de.substring(Z,Y).replace(ee,j)),de[Z=Y+1+pe+Ke]!==j&&(Y=de.indexOf(j,Z)),K=de.indexOf(W,Z),ie=de.indexOf(ue,Z);break}var ke=Oe(ie);if(de.substring(Y+1+ke,Y+1+ke+ft)===ue){if(q.push(de.substring(Z,Y).replace(ee,j)),Be(Y+1+ke+ft),K=de.indexOf(W,Z),Y=de.indexOf(j,Z),Ve&&(ht(),ye))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Xe.length,index:Z}),Y++}}else Y++}return Ze();function Ae(et){Xe.push(et),Fe=Z}function Oe(et){var fe=0;if(et!==-1){var lt=de.substring(Y+1,et);lt&&lt.trim()===""&&(fe=lt.length)}return fe}function Ze(et){return Qe||(et===void 0&&(et=de.substring(Z)),q.push(et),Z=oe,Ae(q),Ve&&ht()),Ge()}function Be(et){Z=et,Ae(q),q=[],ie=de.indexOf(ue,Z)}function Ge(et){return{data:Xe,errors:at,meta:{delimiter:W,linebreak:ue,aborted:ye,truncated:!!et,cursor:Fe+(rt||0)}}}function ht(){ge(Ge()),Xe=[],at=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return Z}}function je(I){var j=I.data,W=l[j.workerId],ue=!1;if(j.error)W.userError(j.error,j.file);else if(j.results&&j.results.data){var he={abort:function(){ue=!0,Re(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(ve(W.userStep)){for(var ge=0;ge<j.results.data.length&&(W.userStep({data:j.results.data[ge],errors:j.results.errors,meta:j.results.meta},he),!ue);ge++);delete j.results}else ve(W.userChunk)&&(W.userChunk(j.results,he,j.file),delete j.results)}j.finished&&!ue&&Re(j.workerId,j.results)}function Re(I,j){var W=l[I];ve(W.userComplete)&&W.userComplete(j),W.terminate(),delete l[I]}function ce(){throw new Error("Not implemented.")}function Le(I){if(typeof I!="object"||I===null)return I;var j=Array.isArray(I)?[]:{};for(var W in I)j[W]=Le(I[W]);return j}function Ye(I,j){return function(){I.apply(j,arguments)}}function ve(I){return typeof I=="function"}return a&&(n.onmessage=function(I){var j=I.data;if(f.WORKER_ID===void 0&&j&&(f.WORKER_ID=j.workerId),typeof j.input=="string")n.postMessage({workerId:f.WORKER_ID,results:f.parse(j.input,j.config),finished:!0});else if(n.File&&j.input instanceof File||j.input instanceof Object){var W=f.parse(j.input,j.config);W&&n.postMessage({workerId:f.WORKER_ID,results:W,finished:!0})}}),(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(g.prototype)).constructor=R,(V.prototype=Object.create(V.prototype)).constructor=V,(se.prototype=Object.create(g.prototype)).constructor=se,f})})(Bl);var md=Bl.exports;const gu=Kl(md);var Nl={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(jt,function(){var r=function(i,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])})(i,o)},n=function(){return(n=Object.assign||function(i){for(var o,u=1,h=arguments.length;u<h;u++)for(var d in o=arguments[u])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function s(i,o,u){for(var h,d=0,p=o.length;d<p;d++)!h&&d in o||((h=h||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(h||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:jt,l=Object.keys,c=Array.isArray;function f(i,o){return typeof o!="object"||l(o).forEach(function(u){i[u]=o[u]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,g={}.hasOwnProperty;function b(i,o){return g.call(i,o)}function R(i,o){typeof o=="function"&&(o=o(y(i))),(typeof Reflect>"u"?l:Reflect.ownKeys)(o).forEach(function(u){se(i,u,o[u])})}var V=Object.defineProperty;function se(i,o,u,h){V(i,o,f(u&&b(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},h))}function le(i){return{from:function(o){return i.prototype=Object.create(o.prototype),se(i.prototype,"constructor",i),{extend:R.bind(null,i.prototype)}}}}var me=Object.getOwnPropertyDescriptor,we=[].slice;function je(i,o,u){return we.call(i,o,u)}function Re(i,o){return o(i)}function ce(i){if(!i)throw new Error("Assertion Failed")}function Le(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Ye(i,o){if(typeof o=="string"&&b(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var u=[],h=0,d=o.length;h<d;++h){var p=Ye(i,o[h]);u.push(p)}return u}var m=o.indexOf(".");if(m!==-1){var _=i[o.substr(0,m)];return _==null?void 0:Ye(_,o.substr(m+1))}}function ve(i,o,u){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){ce(typeof u!="string"&&"length"in u);for(var h=0,d=o.length;h<d;++h)ve(i,o[h],u[h])}else{var p,m,_=o.indexOf(".");_!==-1?(p=o.substr(0,_),(m=o.substr(_+1))===""?u===void 0?c(i)&&!isNaN(parseInt(p))?i.splice(p,1):delete i[p]:i[p]=u:ve(_=!(_=i[p])||!b(i,p)?i[p]={}:_,m,u)):u===void 0?c(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=u}}function I(i){var o,u={};for(o in i)b(i,o)&&(u[o]=i[o]);return u}var j=[].concat;function W(i){return j.apply([],i)}var sr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),ue=new Set(sr.map(function(i){return a[i]})),he=null;function ge(i){return he=new WeakMap,i=function o(u){if(!u||typeof u!="object")return u;var h=he.get(u);if(h)return h;if(c(u)){h=[],he.set(u,h);for(var d=0,p=u.length;d<p;++d)h.push(o(u[d]))}else if(ue.has(u.constructor))h=u;else{var m,_=y(u);for(m in h=_===Object.prototype?{}:Object.create(_),he.set(u,h),u)b(u,m)&&(h[m]=o(u[m]))}return h}(i),he=null,i}var Ce={}.toString;function ot(i){return Ce.call(i).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof Se=="symbol"?function(i){var o;return i!=null&&(o=i[Se])&&o.apply(i)}:function(){return null};function ye(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var de={};function rt(i){var o,u,h,d;if(arguments.length===1){if(c(i))return i.slice();if(this===de&&typeof i=="string")return[i];if(d=Z(i)){for(u=[];!(h=d.next()).done;)u.push(h.value);return u}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(u=new Array(o);o--;)u[o]=i[o];return u}for(o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return u}var Qe=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Nt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(i,o){this.name=i,this.message=o}function ft(i,o){return i+". Errors: "+Object.keys(o).map(function(u){return o[u].toString()}).filter(function(u,h,d){return d.indexOf(u)===h}).join(`
`)}function Je(i,o,u,h){this.failures=o,this.failedKeys=h,this.successCount=u,this.message=ft(i,o)}function Ve(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(u){return o[u]}),this.failuresByPos=o,this.message=ft(i,this.failures)}le(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Je).from(Ke),le(Ve).from(Ke);var Xe=Nt.reduce(function(i,o){return i[o]=o+"Error",i},{}),at=Ke,q=Nt.reduce(function(i,o){var u=o+"Error";function h(d,p){this.name=u,d?typeof d=="string"?(this.message="".concat(d).concat(p?`
 `+p:""),this.inner=p||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=oe[o]||u,this.inner=null)}return le(h).from(at),i[o]=h,i},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Fe=Y.reduce(function(i,o){return i[o+"Error"]=q[o],i},{}),He=Nt.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=q[o]),i},{});function _e(){}function v(i){return i}function k(i,o){return i==null||i===v?o:function(u){return o(i(u))}}function D(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function M(i,o){return i===_e?o:function(){var u=i.apply(this,arguments);u!==void 0&&(arguments[0]=u);var h=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?D(h,this.onsuccess):h),d&&(this.onerror=this.onerror?D(d,this.onerror):d),p!==void 0?p:u}}function B(i,o){return i===_e?o:function(){i.apply(this,arguments);var u=this.onsuccess,h=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?D(u,this.onsuccess):u),h&&(this.onerror=this.onerror?D(h,this.onerror):h)}}function N(i,o){return i===_e?o:function(u){var h=i.apply(this,arguments);f(u,h);var d=this.onsuccess,p=this.onerror;return this.onsuccess=null,this.onerror=null,u=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?D(d,this.onsuccess):d),p&&(this.onerror=this.onerror?D(p,this.onerror):p),h===void 0?u===void 0?void 0:u:f(h,u)}}function X(i,o){return i===_e?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function J(i,o){return i===_e?o:function(){var u=i.apply(this,arguments);if(u&&typeof u.then=="function"){for(var h=this,d=arguments.length,p=new Array(d);d--;)p[d]=arguments[d];return u.then(function(){return o.apply(h,p)})}return o.apply(this,arguments)}}He.ModifyError=Je,He.DexieError=Ke,He.BulkError=Ve;var H=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function K(i){H=i}var ie={},ee=100,sr=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),i]}(),Y=sr[0],Nt=sr[1],sr=sr[2],Nt=Nt&&Nt.then,pe=Y&&Y.constructor,ke=!!sr,Ae=function(i,o){lt.push([i,o]),Ze&&(queueMicrotask(pc),Ze=!1)},Oe=!0,Ze=!0,Be=[],Ge=[],ht=v,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:_e,pgp:!1,env:{},finalize:_e},fe=et,lt=[],yt=0,Dr=[];function ae(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=fe;if(typeof i!="function"){if(i!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cs(this,this._value))}this._state=null,this._value=null,++o.ref,function u(h,d){try{d(function(p){if(h._state===null){if(p===h)throw new TypeError("A promise cannot be resolved with itself.");var m=h._lib&&Zr();p&&typeof p.then=="function"?u(h,function(_,S){p instanceof ae?p._then(_,S):p.then(_,S)}):(h._state=!0,h._value=p,ia(h)),m&&en()}},cs.bind(null,h))}catch(p){cs(h,p)}}(this,i)}var ls={get:function(){var i=fe,o=si;function u(h,d){var p=this,m=!i.global&&(i!==fe||o!==si),_=m&&!dr(),S=new ae(function(x,T){hs(p,new na(oa(h,i,m,_),oa(d,i,m,_),x,T,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=ie,u},set:function(i){se(this,"then",i&&i.prototype===ie?ls:{get:function(){return i},set:ls.set})}};function na(i,o,u,h,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=u,this.reject=h,this.psd=d}function cs(i,o){var u,h;Ge.push(o),i._state===null&&(u=i._lib&&Zr(),o=ht(o),i._state=!1,i._value=o,h=i,Be.some(function(d){return d._value===h._value})||Be.push(h),ia(i),u&&en())}function ia(i){var o=i._listeners;i._listeners=[];for(var u=0,h=o.length;u<h;++u)hs(i,o[u]);var d=i._PSD;--d.ref||d.finalize(),yt===0&&(++yt,Ae(function(){--yt==0&&fs()},[]))}function hs(i,o){if(i._state!==null){var u=i._state?o.onFulfilled:o.onRejected;if(u===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++yt,Ae(dc,[u,i,o])}else i._listeners.push(o)}function dc(i,o,u){try{var h,d=o._value;!o._state&&Ge.length&&(Ge=[]),h=H&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Ge.indexOf(d)!==-1||function(p){for(var m=Be.length;m;)if(Be[--m]._value===p._value)return Be.splice(m,1)}(o),u.resolve(h)}catch(p){u.reject(p)}finally{--yt==0&&fs(),--u.psd.ref||u.psd.finalize()}}function pc(){$r(et,function(){Zr()&&en()})}function Zr(){var i=Oe;return Ze=Oe=!1,i}function en(){var i,o,u;do for(;0<lt.length;)for(i=lt,lt=[],u=i.length,o=0;o<u;++o){var h=i[o];h[0].apply(null,h[1])}while(0<lt.length);Ze=Oe=!0}function fs(){var i=Be;Be=[],i.forEach(function(h){h._PSD.onunhandled.call(null,h._value,h)});for(var o=Dr.slice(0),u=o.length;u;)o[--u]()}function ri(i){return new ae(ie,!1,i)}function ut(i,o){var u=fe;return function(){var h=Zr(),d=fe;try{return pr(u,!0),i.apply(this,arguments)}catch(p){o&&o(p)}finally{pr(d,!1),h&&en()}}}R(ae.prototype,{then:ls,_then:function(i,o){hs(this,new na(null,null,i,o,fe))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,u=arguments[1];return typeof o=="function"?this.then(null,function(h){return(h instanceof o?u:ri)(h)}):this.then(null,function(h){return(h&&h.name===o?u:ri)(h)})},finally:function(i){return this.then(function(o){return ae.resolve(i()).then(function(){return o})},function(o){return ae.resolve(i()).then(function(){return ri(o)})})},timeout:function(i,o){var u=this;return i<1/0?new ae(function(h,d){var p=setTimeout(function(){return d(new q.Timeout(o))},i);u.then(h,d).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(ae.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=sa(),R(ae,{all:function(){var i=rt.apply(null,arguments).map(oi);return new ae(function(o,u){i.length===0&&o([]);var h=i.length;i.forEach(function(d,p){return ae.resolve(d).then(function(m){i[p]=m,--h||o(i)},u)})})},resolve:function(i){return i instanceof ae?i:i&&typeof i.then=="function"?new ae(function(o,u){i.then(o,u)}):new ae(ie,!0,i)},reject:ri,race:function(){var i=rt.apply(null,arguments).map(oi);return new ae(function(o,u){i.map(function(h){return ae.resolve(h).then(o,u)})})},PSD:{get:function(){return fe},set:function(i){return fe=i}},totalEchoes:{get:function(){return si}},newPSD:fr,usePSD:$r,scheduler:{get:function(){return Ae},set:function(i){Ae=i}},rejectionMapper:{get:function(){return ht},set:function(i){ht=i}},follow:function(i,o){return new ae(function(u,h){return fr(function(d,p){var m=fe;m.unhandleds=[],m.onunhandled=p,m.finalize=D(function(){var _,S=this;_=function(){S.unhandleds.length===0?d():p(S.unhandleds[0])},Dr.push(function x(){_(),Dr.splice(Dr.indexOf(x),1)}),++yt,Ae(function(){--yt==0&&fs()},[])},m.finalize),i()},o,u,h)})}}),pe&&(pe.allSettled&&se(ae,"allSettled",function(){var i=rt.apply(null,arguments).map(oi);return new ae(function(o){i.length===0&&o([]);var u=i.length,h=new Array(u);i.forEach(function(d,p){return ae.resolve(d).then(function(m){return h[p]={status:"fulfilled",value:m}},function(m){return h[p]={status:"rejected",reason:m}}).then(function(){return--u||o(h)})})})}),pe.any&&typeof AggregateError<"u"&&se(ae,"any",function(){var i=rt.apply(null,arguments).map(oi);return new ae(function(o,u){i.length===0&&u(new AggregateError([]));var h=i.length,d=new Array(h);i.forEach(function(p,m){return ae.resolve(p).then(function(_){return o(_)},function(_){d[m]=_,--h||u(new AggregateError(d))})})})}));var mt={awaits:0,echoes:0,id:0},gc=0,ni=[],ii=0,si=0,yc=0;function fr(i,o,u,h){var d=fe,p=Object.create(d);return p.parent=d,p.ref=0,p.global=!1,p.id=++yc,et.env,p.env=ke?{Promise:ae,PromiseProp:{value:ae,configurable:!0,writable:!0},all:ae.all,race:ae.race,allSettled:ae.allSettled,any:ae.any,resolve:ae.resolve,reject:ae.reject}:{},o&&f(p,o),++d.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},h=$r(p,i,u,h),p.ref===0&&p.finalize(),h}function tn(){return mt.id||(mt.id=++gc),++mt.awaits,mt.echoes+=ee,mt.id}function dr(){return!!mt.awaits&&(--mt.awaits==0&&(mt.id=0),mt.echoes=mt.awaits*ee,!0)}function oi(i){return mt.echoes&&i&&i.constructor===pe?(tn(),i.then(function(o){return dr(),o},function(o){return dr(),dt(o)})):i}function mc(){var i=ni[ni.length-1];ni.pop(),pr(i,!1)}function pr(i,o){var u,h=fe;(o?!mt.echoes||ii++&&i===fe:!ii||--ii&&i===fe)||queueMicrotask(o?(function(d){++si,mt.echoes&&--mt.echoes!=0||(mt.echoes=mt.awaits=mt.id=0),ni.push(fe),pr(d,!0)}).bind(null,i):mc),i!==fe&&(fe=i,h===et&&(et.env=sa()),ke&&(u=et.env.Promise,o=i.env,(h.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),u.all=o.all,u.race=o.race,u.resolve=o.resolve,u.reject=o.reject,o.allSettled&&(u.allSettled=o.allSettled),o.any&&(u.any=o.any))))}function sa(){var i=a.Promise;return ke?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function $r(i,o,u,h,d){var p=fe;try{return pr(i,!0),o(u,h,d)}finally{pr(p,!1)}}function oa(i,o,u,h){return typeof i!="function"?i:function(){var d=fe;u&&tn(),pr(o,!0);try{return i.apply(this,arguments)}finally{pr(d,!1),h&&queueMicrotask(dr)}}}function ds(i){Promise===pe&&mt.echoes===0?ii===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Nt).indexOf("[native code]")===-1&&(tn=dr=_e);var dt=ae.reject,Lr="",ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",aa="String expected.",rn=[],ai="__dbnames",ps="readonly",gs="readwrite";function Fr(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var ua={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ui(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=ge(o))[i],o}}function la(){throw q.Type()}function Ne(i,o){try{var u=ca(i),h=ca(o);if(u!==h)return u==="Array"?1:h==="Array"?-1:u==="binary"?1:h==="binary"?-1:u==="string"?1:h==="string"?-1:u==="Date"?1:h!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x)if(d[x]!==p[x])return d[x]<p[x]?-1:1;return m===_?0:m<_?-1:1}(ha(i),ha(o));case"Array":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x){var T=Ne(d[x],p[x]);if(T!==0)return T}return m===_?0:m<_?-1:1}(i,o)}}catch{}return NaN}function ca(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=ot(i),i==="ArrayBuffer"?"binary":i)}function ha(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var fa=(st.prototype._trans=function(i,o,u){var h=this._tx||fe.trans,d=this.name,p=H&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function m(x,T,w){if(!w.schema[d])throw new q.NotFound("Table "+d+" not part of transaction");return o(w.idbtrans,w)}var _=Zr();try{var S=h&&h.db._novip===this.db._novip?h===fe.trans?h._promise(i,m,u):fr(function(){return h._promise(i,m,u)},{trans:h,transless:fe.transless||fe}):function x(T,w,C,E){if(T.idbdb&&(T._state.openComplete||fe.letThrough||T._vip)){var P=T._createTransaction(w,C,T._dbSchema);try{P.create(),T._state.PR1398_maxLoop=3}catch(A){return A.name===Xe.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,E)})):dt(A)}return P._promise(w,function(A,O){return fr(function(){return fe.trans=P,E(A,O,P)})}).then(function(A){if(w==="readwrite")try{P.idbtrans.commit()}catch{}return w==="readonly"?A:P._completion.then(function(){return A})})}if(T._state.openComplete)return dt(new q.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return dt(new q.DatabaseClosed);T.open().catch(_e)}return T._state.dbReadyPromise.then(function(){return x(T,w,C,E)})}(this.db,i,[this.name],m);return p&&(S._consoleTask=p,S=S.catch(function(x){return console.trace(x),dt(x)})),S}finally{_&&en()}},st.prototype.get=function(i,o){var u=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?dt(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return u.core.get({trans:h,key:i}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},st.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(c(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=l(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&o.every(function(T){return 0<=S.keyPath.indexOf(T)})){for(var x=0;x<o.length;++x)if(o.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==Lr){var m=u.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(x){return i[x]}))}!u&&H&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var h=this.schema.idxByName,d=this.db._deps.indexedDB;function p(S,x){return d.cmp(S,x)===0}var _=o.reduce(function(C,x){var T=C[0],w=C[1],C=h[x],E=i[x];return[T||C,T||!C?Fr(w,C&&C.multi?function(P){return P=Ye(P,x),c(P)&&P.some(function(A){return p(E,A)})}:function(P){return p(E,Ye(P,x))}):w]},[null,null]),m=_[0],_=_[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(_):u?this.filter(_):this.where(o).equals("")},st.prototype.filter=function(i){return this.toCollection().and(i)},st.prototype.count=function(i){return this.toCollection().count(i)},st.prototype.offset=function(i){return this.toCollection().offset(i)},st.prototype.limit=function(i){return this.toCollection().limit(i)},st.prototype.each=function(i){return this.toCollection().each(i)},st.prototype.toArray=function(i){return this.toCollection().toArray(i)},st.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},st.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,c(i)?"[".concat(i.join("+"),"]"):i))},st.prototype.reverse=function(){return this.toCollection().reverse()},st.prototype.mapToClass=function(i){var o,u=this.db,h=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof la&&(function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function T(){this.constructor=S}r(S,x),S.prototype=x===null?Object.create(x):(T.prototype=x.prototype,new T)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),d.prototype.table=function(){return h},i=d);for(var p=new Set,m=i.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(S){return p.add(S)});function _(S){if(!S)return S;var x,T=Object.create(i.prototype);for(x in S)if(!p.has(x))try{T[x]=S[x]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),i},st.prototype.defineClass=function(){return this.mapToClass(function(i){f(this,i)})},st.prototype.add=function(i,o){var u=this,h=this.schema.primKey,d=h.auto,p=h.keyPath,m=i;return p&&d&&(m=ui(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[m]})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{ve(i,p,_)}catch{}return _})},st.prototype.update=function(i,o){return typeof i!="object"||c(i)?this.where(":id").equals(i).modify(o):(i=Ye(i,this.schema.primKey.keyPath),i===void 0?dt(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},st.prototype.put=function(i,o){var u=this,h=this.schema.primKey,d=h.auto,p=h.keyPath,m=i;return p&&d&&(m=ui(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"put",values:[m],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{ve(i,p,_)}catch{}return _})},st.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[i]})}).then(function(u){return u.numFailures?ae.reject(u.failures[0]):void 0})},st.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:ua})}).then(function(o){return o.numFailures?ae.reject(o.failures[0]):void 0})},st.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:i,trans:u}).then(function(h){return h.map(function(d){return o.hook.reading.fire(d)})})})},st.prototype.bulkAdd=function(i,o,u){var h=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=h.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(ui(x)):i;return h.core.mutate({trans:m,type:"add",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new Ve("".concat(h.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),P)})})},st.prototype.bulkPut=function(i,o,u){var h=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=h.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(ui(x)):i;return h.core.mutate({trans:m,type:"put",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new Ve("".concat(h.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),P)})})},st.prototype.bulkUpdate=function(i){var o=this,u=this.core,h=i.map(function(m){return m.key}),d=i.map(function(m){return m.changes}),p=[];return this._trans("readwrite",function(m){return u.getMany({trans:m,keys:h,cache:"clone"}).then(function(_){var S=[],x=[];i.forEach(function(w,C){var E=w.key,P=w.changes,A=_[C];if(A){for(var O=0,$=Object.keys(P);O<$.length;O++){var L=$[O],F=P[L];if(L===o.schema.primKey.keyPath){if(Ne(F,E)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else ve(A,L,F)}p.push(C),S.push(E),x.push(A)}});var T=S.length;return u.mutate({trans:m,type:"put",keys:S,values:x,updates:{keys:h,changeSpecs:d}}).then(function(w){var C=w.numFailures,E=w.failures;if(C===0)return T;for(var P=0,A=Object.keys(E);P<A.length;P++){var O,$=A[P],L=p[Number($)];L!=null&&(O=E[$],delete E[$],E[L]=O)}throw new Ve("".concat(o.name,".bulkUpdate(): ").concat(C," of ").concat(T," operations failed"),E)})})})},st.prototype.bulkDelete=function(i){var o=this,u=i.length;return this._trans("readwrite",function(h){return o.core.mutate({trans:h,type:"delete",keys:i})}).then(function(m){var d=m.numFailures,p=m.lastResult,m=m.failures;if(d===0)return p;throw new Ve("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),m)})},st);function st(){}function Sn(i){function o(m,_){if(_){for(var S=arguments.length,x=new Array(S-1);--S;)x[S-1]=arguments[S];return u[m].subscribe.apply(null,x),i}if(typeof m=="string")return u[m]}var u={};o.addEventType=p;for(var h=1,d=arguments.length;h<d;++h)p(arguments[h]);return o;function p(m,_,S){if(typeof m!="object"){var x;_=_||X;var T={subscribers:[],fire:S=S||_e,subscribe:function(w){T.subscribers.indexOf(w)===-1&&(T.subscribers.push(w),T.fire=_(T.fire,w))},unsubscribe:function(w){T.subscribers=T.subscribers.filter(function(C){return C!==w}),T.fire=T.subscribers.reduce(_,S)}};return u[m]=o[m]=T}l(x=m).forEach(function(w){var C=x[w];if(c(C))p(w,x[w][0],x[w][1]);else{if(C!=="asap")throw new q.InvalidArgument("Invalid event config");var E=p(w,v,function(){for(var P=arguments.length,A=new Array(P);P--;)A[P]=arguments[P];E.subscribers.forEach(function(O){Le(function(){O.apply(null,A)})})})}})}}function On(i,o){return le(o).from({prototype:i}),o}function nn(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function ys(i,o){i.filter=Fr(i.filter,o)}function ms(i,o,u){var h=i.replayFilter;i.replayFilter=h?function(){return Fr(h(),o())}:o,i.justLimit=u&&!h}function li(i,o){if(i.isPrimKey)return o.primaryKey;var u=o.getIndexByKeyPath(i.index);if(!u)throw new q.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return u}function da(i,o,u){var h=li(i,o.schema);return o.openCursor({trans:u,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:h,range:i.range}})}function ci(i,o,u,h){var d=i.replayFilter?Fr(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},m=function(_,S,x){var T,w;d&&!d(S,x,function(C){return S.stop(C)},function(C){return S.fail(C)})||((w=""+(T=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(T)),b(p,w)||(p[w]=!0,o(_,S,x)))};return Promise.all([i.or._iterate(m,u),pa(da(i,h,u),i.algorithm,m,!i.keysOnly&&i.valueMapper)])}return pa(da(i,h,u),Fr(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function pa(i,o,u,h){var d=ut(h?function(p,m,_){return u(h(p),m,_)}:u);return i.then(function(p){if(p)return p.start(function(){var m=function(){return p.continue()};o&&!o(p,function(_){return m=_},function(_){p.stop(_),m=_e},function(_){p.fail(_),m=_e})||d(p.value,p,function(_){return m=_}),m()})})}var sr=Symbol(),Pn=(ga.prototype.execute=function(i){if(this.add!==void 0){var o=this.add;if(c(o))return s(s([],c(i)?i:[],!0),o).sort();if(typeof o=="number")return(Number(i)||0)+o;if(typeof o=="bigint")try{return BigInt(i)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var u=this.remove;if(c(u))return c(i)?i.filter(function(h){return!u.includes(h)}).sort():[];if(typeof u=="number")return Number(i)-u;if(typeof u=="bigint")try{return BigInt(i)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return o=(o=this.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof i=="string"&&i.startsWith(o)?this.replacePrefix[1]+i.substring(o.length):i},ga);function ga(i){Object.assign(this,i)}var vc=(qe.prototype._read=function(i,o){var u=this._ctx;return u.error?u.table._trans(null,dt.bind(null,u.error)):u.table._trans("readonly",i).then(o)},qe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,dt.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},qe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=Fr(o.algorithm,i)},qe.prototype._iterate=function(i,o){return ci(this._ctx,i,o,this._ctx.table.core)},qe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return i&&f(u,i),o._ctx=u,o},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(i){var o=this._ctx;return this._read(function(u){return ci(o,i,u,o.table.core)})},qe.prototype.count=function(i){var o=this;return this._read(function(u){var h=o._ctx,d=h.table.core;if(nn(h,!0))return d.count({trans:u,query:{index:li(h,d.schema),range:h.range}}).then(function(m){return Math.min(m,h.limit)});var p=0;return ci(h,function(){return++p,!1},u,d).then(function(){return p})}).then(i)},qe.prototype.sortBy=function(i,o){var u=i.split(".").reverse(),h=u[0],d=u.length-1;function p(S,x){return x?p(S[u[x]],x-1):S[h]}var m=this._ctx.dir==="next"?1:-1;function _(S,x){return S=p(S,d),x=p(x,d),S<x?-m:x<S?m:0}return this.toArray(function(S){return S.sort(_)}).then(o)},qe.prototype.toArray=function(i){var o=this;return this._read(function(u){var h=o._ctx;if(h.dir==="next"&&nn(h,!0)&&0<h.limit){var d=h.valueMapper,p=li(h,h.table.core.schema);return h.table.core.query({trans:u,limit:h.limit,values:!0,query:{index:p,range:h.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var m=[];return ci(h,function(_){return m.push(_)},u,h.table.core).then(function(){return m})},i)},qe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,nn(o)?ms(o,function(){var u=i;return function(h,d){return u===0||(u===1?--u:d(function(){h.advance(u),u=0}),!1)}}):ms(o,function(){var u=i;return function(){return--u<0}})),this},qe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ms(this._ctx,function(){var o=i;return function(u,h,d){return--o<=0&&h(d),0<=o}},!0),this},qe.prototype.until=function(i,o){return ys(this._ctx,function(u,h,d){return!i(u.value)||(h(d),o)}),this},qe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},qe.prototype.last=function(i){return this.reverse().first(i)},qe.prototype.filter=function(i){var o;return ys(this._ctx,function(u){return i(u.value)}),(o=this._ctx).isMatch=Fr(o.isMatch,i),this},qe.prototype.and=function(i){return this.filter(i)},qe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,h){i(h.key,h)})},qe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},qe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,h){i(h.primaryKey,h)})},qe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(h,d){u.push(d.key)}).then(function(){return u}).then(i)},qe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&nn(o,!0)&&0<o.limit)return this._read(function(h){var d=li(o,o.table.core.schema);return o.table.core.query({trans:h,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(h){return h.result}).then(i);o.keysOnly=!o.isMatch;var u=[];return this.each(function(h,d){u.push(d.primaryKey)}).then(function(){return u}).then(i)},qe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},qe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},qe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},qe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return ys(this._ctx,function(d){var h=d.primaryKey.toString(),d=b(o,h);return o[h]=!0,!d}),this},qe.prototype.modify=function(i){var o=this,u=this._ctx;return this._write(function(h){var d,p,m;m=typeof i=="function"?i:(d=l(i),p=d.length,function(O){for(var $=!1,L=0;L<p;++L){var F=d[L],U=i[F],G=Ye(O,F);U instanceof Pn?(ve(O,F,U.execute(G)),$=!0):G!==U&&(ve(O,F,U),$=!0)}return $});function _(O,F){var L=F.failures,F=F.numFailures;P+=O-F;for(var U=0,G=l(L);U<G.length;U++){var re=G[U];E.push(L[re])}}var S=u.table.core,x=S.schema.primaryKey,T=x.outbound,w=x.extractKey,C=o.db._options.modifyChunkSize||200,E=[],P=0,A=[];return o.clone().primaryKeys().then(function(O){function $(F){var U=Math.min(C,O.length-F);return S.getMany({trans:h,keys:O.slice(F,F+U),cache:"immutable"}).then(function(G){for(var re=[],Q=[],te=T?[]:null,ne=[],z=0;z<U;++z){var Ee=G[z],Pe={value:ge(Ee),primKey:O[F+z]};m.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?ne.push(O[F+z]):T||Ne(w(Ee),w(Pe.value))===0?(Q.push(Pe.value),T&&te.push(O[F+z])):(ne.push(O[F+z]),re.push(Pe.value)))}return Promise.resolve(0<re.length&&S.mutate({trans:h,type:"add",values:re}).then(function(Me){for(var Ie in Me.failures)ne.splice(parseInt(Ie),1);_(re.length,Me)})).then(function(){return(0<Q.length||L&&typeof i=="object")&&S.mutate({trans:h,type:"put",keys:te,values:Q,criteria:L,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<F}).then(function(Me){return _(Q.length,Me)})}).then(function(){return(0<ne.length||L&&i===vs)&&S.mutate({trans:h,type:"delete",keys:ne,criteria:L,isAdditionalChunk:0<F}).then(function(Me){return _(ne.length,Me)})}).then(function(){return O.length>F+U&&$(F+C)})})}var L=nn(u)&&u.limit===1/0&&(typeof i!="function"||i===vs)&&{index:u.index,range:u.range};return $(0).then(function(){if(0<E.length)throw new Je("Error modifying one or more objects",E,P,A);return O.length})})})},qe.prototype.delete=function(){var i=this._ctx,o=i.range;return nn(i)&&(i.isPrimKey||o.type===3)?this._write(function(u){var h=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:u,query:{index:h,range:d}}).then(function(p){return i.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(m){var _=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Je("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),p-m);return p-m})})}):this.modify(vs)},qe);function qe(){}var vs=function(i,o){return o.value=null};function _c(i,o){return i<o?-1:i===o?0:1}function bc(i,o){return o<i?-1:i===o?0:1}function $t(i,o,u){return i=i instanceof ma?new i.Collection(i):i,i._ctx.error=new(u||TypeError)(o),i}function sn(i){return new i.Collection(i,function(){return ya("")}).limit(0)}function hi(i,o,u,h){var d,p,m,_,S,x,T,w=u.length;if(!u.every(function(P){return typeof P=="string"}))return $t(i,aa);function C(P){d=P==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},p=P==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},m=P==="next"?_c:bc;var A=u.map(function(O){return{lower:p(O),upper:d(O)}}).sort(function(O,$){return m(O.lower,$.lower)});_=A.map(function(O){return O.upper}),S=A.map(function(O){return O.lower}),T=(x=P)==="next"?"":h}C("next"),i=new i.Collection(i,function(){return gr(_[0],S[w-1]+h)}),i._ondirectionchange=function(P){C(P)};var E=0;return i._addAlgorithm(function(P,A,O){var $=P.key;if(typeof $!="string")return!1;var L=p($);if(o(L,S,E))return!0;for(var F=null,U=E;U<w;++U){var G=function(re,Q,te,ne,z,Ee){for(var Pe=Math.min(re.length,ne.length),Me=-1,Ie=0;Ie<Pe;++Ie){var Wt=Q[Ie];if(Wt!==ne[Ie])return z(re[Ie],te[Ie])<0?re.substr(0,Ie)+te[Ie]+te.substr(Ie+1):z(re[Ie],ne[Ie])<0?re.substr(0,Ie)+ne[Ie]+te.substr(Ie+1):0<=Me?re.substr(0,Me)+Q[Me]+te.substr(Me+1):null;z(re[Ie],Wt)<0&&(Me=Ie)}return Pe<ne.length&&Ee==="next"?re+te.substr(re.length):Pe<re.length&&Ee==="prev"?re.substr(0,te.length):Me<0?null:re.substr(0,Me)+ne[Me]+te.substr(Me+1)}($,L,_[U],S[U],m,x);G===null&&F===null?E=U+1:(F===null||0<m(F,G))&&(F=G)}return A(F!==null?function(){P.continue(F+T)}:O),!1}),i}function gr(i,o,u,h){return{type:2,lower:i,upper:o,lowerOpen:u,upperOpen:h}}function ya(i){return{type:1,lower:i,upper:i}}var ma=(Object.defineProperty(vt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),vt.prototype.between=function(i,o,u,h){u=u!==!1,h=h===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(u||h)&&(!u||!h)?sn(this):new this.Collection(this,function(){return gr(i,o,!u,!h)})}catch{return $t(this,ir)}},vt.prototype.equals=function(i){return i==null?$t(this,ir):new this.Collection(this,function(){return ya(i)})},vt.prototype.above=function(i){return i==null?$t(this,ir):new this.Collection(this,function(){return gr(i,void 0,!0)})},vt.prototype.aboveOrEqual=function(i){return i==null?$t(this,ir):new this.Collection(this,function(){return gr(i,void 0,!1)})},vt.prototype.below=function(i){return i==null?$t(this,ir):new this.Collection(this,function(){return gr(void 0,i,!1,!0)})},vt.prototype.belowOrEqual=function(i){return i==null?$t(this,ir):new this.Collection(this,function(){return gr(void 0,i)})},vt.prototype.startsWith=function(i){return typeof i!="string"?$t(this,aa):this.between(i,i+Lr,!0,!0)},vt.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):hi(this,function(o,u){return o.indexOf(u[0])===0},[i],Lr)},vt.prototype.equalsIgnoreCase=function(i){return hi(this,function(o,u){return o===u[0]},[i],"")},vt.prototype.anyOfIgnoreCase=function(){var i=rt.apply(de,arguments);return i.length===0?sn(this):hi(this,function(o,u){return u.indexOf(o)!==-1},i,"")},vt.prototype.startsWithAnyOfIgnoreCase=function(){var i=rt.apply(de,arguments);return i.length===0?sn(this):hi(this,function(o,u){return u.some(function(h){return o.indexOf(h)===0})},i,Lr)},vt.prototype.anyOf=function(){var i=this,o=rt.apply(de,arguments),u=this._cmp;try{o.sort(u)}catch{return $t(this,ir)}if(o.length===0)return sn(this);var h=new this.Collection(this,function(){return gr(o[0],o[o.length-1])});h._ondirectionchange=function(p){u=p==="next"?i._ascending:i._descending,o.sort(u)};var d=0;return h._addAlgorithm(function(p,m,_){for(var S=p.key;0<u(S,o[d]);)if(++d===o.length)return m(_),!1;return u(S,o[d])===0||(m(function(){p.continue(o[d])}),!1)}),h},vt.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},vt.prototype.noneOf=function(){var i=rt.apply(de,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return $t(this,ir)}var o=i.reduce(function(u,h){return u?u.concat([[u[u.length-1][1],h]]):[[-1/0,h]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},vt.prototype.inAnyRange=function($,o){var u=this,h=this._cmp,d=this._ascending,p=this._descending,m=this._min,_=this._max;if($.length===0)return sn(this);if(!$.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&d(L[0],L[1])<=0}))return $t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var S=!o||o.includeLowers!==!1,x=o&&o.includeUppers===!0,T,w=d;function C(L,F){return w(L[0],F[0])}try{(T=$.reduce(function(L,F){for(var U=0,G=L.length;U<G;++U){var re=L[U];if(h(F[0],re[1])<0&&0<h(F[1],re[0])){re[0]=m(re[0],F[0]),re[1]=_(re[1],F[1]);break}}return U===G&&L.push(F),L},[])).sort(C)}catch{return $t(this,ir)}var E=0,P=x?function(L){return 0<d(L,T[E][1])}:function(L){return 0<=d(L,T[E][1])},A=S?function(L){return 0<p(L,T[E][0])}:function(L){return 0<=p(L,T[E][0])},O=P,$=new this.Collection(this,function(){return gr(T[0][0],T[T.length-1][1],!S,!x)});return $._ondirectionchange=function(L){w=L==="next"?(O=P,d):(O=A,p),T.sort(C)},$._addAlgorithm(function(L,F,U){for(var G,re=L.key;O(re);)if(++E===T.length)return F(U),!1;return!P(G=re)&&!A(G)||(u._cmp(re,T[E][1])===0||u._cmp(re,T[E][0])===0||F(function(){w===d?L.continue(T[E][0]):L.continue(T[E][1])}),!1)}),$},vt.prototype.startsWithAnyOf=function(){var i=rt.apply(de,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?sn(this):this.inAnyRange(i.map(function(o){return[o,o+Lr]})):$t(this,"startsWithAnyOf() only works with strings")},vt);function vt(){}function Yt(i){return ut(function(o){return Tn(o),i(o.target.error),!1})}function Tn(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Cn="storagemutated",_s="x-storagemutated-1",yr=Sn(null,Cn),wc=(Xt.prototype._lock=function(){return ce(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},Xt.prototype._unlock=function(){if(ce(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{$r(i[1],i[0])}catch{}}return this},Xt.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},Xt.prototype.create=function(i){var o=this;if(!this.mode)return this;var u=this.db.idbdb,h=this.db._state.dbOpenError;if(ce(!this.idbtrans),!i&&!u)switch(h&&h.name){case"DatabaseClosedError":throw new q.DatabaseClosed(h);case"MissingAPIError":throw new q.MissingAPI(h.message,h);default:throw new q.OpenFailed(h)}if(!this.active)throw new q.TransactionInactive;return ce(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(d){Tn(d),o._reject(i.error)}),i.onabort=ut(function(d){Tn(d),o.active&&o._reject(new q.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=ut(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&yr.storagemutated.fire(i.mutatedParts)}),this},Xt.prototype._promise=function(i,o,u){var h=this;if(i==="readwrite"&&this.mode!=="readwrite")return dt(new q.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new q.TransactionInactive);if(this._locked())return new ae(function(p,m){h._blockedFuncs.push([function(){h._promise(i,o,u).then(p,m)},fe])});if(u)return fr(function(){var p=new ae(function(m,_){h._lock();var S=o(m,_,h);S&&S.then&&S.then(m,_)});return p.finally(function(){return h._unlock()}),p._lib=!0,p});var d=new ae(function(p,m){var _=o(p,m,h);_&&_.then&&_.then(p,m)});return d._lib=!0,d},Xt.prototype._root=function(){return this.parent?this.parent._root():this},Xt.prototype.waitFor=function(i){var o,u=this._root(),h=ae.resolve(i);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return h}):(u._waitingFor=h,u._waitingQueue=[],o=u.idbtrans.objectStore(u.storeNames[0]),function p(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(o.get(-1/0).onsuccess=p)}());var d=u._waitingFor;return new ae(function(p,m){h.then(function(_){return u._waitingQueue.push(ut(p.bind(null,_)))},function(_){return u._waitingQueue.push(ut(m.bind(null,_)))}).finally(function(){u._waitingFor===d&&(u._waitingFor=null)})})},Xt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},Xt.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,i))return o[i];var u=this.schema[i];if(!u)throw new q.NotFound("Table "+i+" not part of transaction");return u=new this.db.Table(i,u,this),u.core=this.db.core.table(i),o[i]=u},Xt);function Xt(){}function bs(i,o,u,h,d,p,m){return{name:i,keyPath:o,unique:u,multi:h,auto:d,compound:p,src:(u&&!m?"&":"")+(h?"*":"")+(d?"++":"")+va(o)}}function va(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function ws(i,o,u){return{name:i,primKey:o,indexes:u,mappedClass:null,idxByName:(h=function(d){return[d.name,d]},u.reduce(function(d,p,m){return m=h(p,m),m&&(d[m[0]]=m[1]),d},{}))};var h}var An=function(i){try{return i.only([[]]),An=function(){return[[]]},[[]]}catch{return An=function(){return Lr},Lr}};function ks(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(u){return u[o]}:function(u){return Ye(u,o)}:function(u){return Ye(u,i)};var o}function _a(i){return[].slice.call(i)}var kc=0;function jn(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function xc(i,o,S){function h(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=O.lower,P=O.upper,A=O.lowerOpen,O=O.upperOpen;return E===void 0?P===void 0?null:o.upperBound(P,!!O):P===void 0?o.lowerBound(E,!!A):o.bound(E,P,!!A,!!O)}function d(C){var E,P=C.name;return{name:P,schema:C,mutate:function(A){var O=A.trans,$=A.type,L=A.keys,F=A.values,U=A.range;return new Promise(function(G,re){G=ut(G);var Q=O.objectStore(P),te=Q.keyPath==null,ne=$==="put"||$==="add";if(!ne&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var z,Ee=(L||F||{length:1}).length;if(L&&F&&L.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Pe(Tt){++Wt,Tn(Tt)}var Me=[],Ie=[],Wt=0;if($==="deleteRange"){if(U.type===4)return G({numFailures:Wt,failures:Ie,results:[],lastResult:void 0});U.type===3?Me.push(z=Q.clear()):Me.push(z=Q.delete(h(U)))}else{var te=ne?te?[F,L]:[F,null]:[L,null],De=te[0],bt=te[1];if(ne)for(var wt=0;wt<Ee;++wt)Me.push(z=bt&&bt[wt]!==void 0?Q[$](De[wt],bt[wt]):Q[$](De[wt])),z.onerror=Pe;else for(wt=0;wt<Ee;++wt)Me.push(z=Q[$](De[wt])),z.onerror=Pe}function Ei(Tt){Tt=Tt.target.result,Me.forEach(function(Kr,Ks){return Kr.error!=null&&(Ie[Ks]=Kr.error)}),G({numFailures:Wt,failures:Ie,results:$==="delete"?L:Me.map(function(Kr){return Kr.result}),lastResult:Tt})}z.onerror=function(Tt){Pe(Tt),Ei(Tt)},z.onsuccess=Ei})},getMany:function(A){var O=A.trans,$=A.keys;return new Promise(function(L,F){L=ut(L);for(var U,G=O.objectStore(P),re=$.length,Q=new Array(re),te=0,ne=0,z=function(Me){Me=Me.target,Q[Me._pos]=Me.result,++ne===te&&L(Q)},Ee=Yt(F),Pe=0;Pe<re;++Pe)$[Pe]!=null&&((U=G.get($[Pe]))._pos=Pe,U.onsuccess=z,U.onerror=Ee,++te);te===0&&L(Q)})},get:function(A){var O=A.trans,$=A.key;return new Promise(function(L,F){L=ut(L);var U=O.objectStore(P).get($);U.onsuccess=function(G){return L(G.target.result)},U.onerror=Yt(F)})},query:(E=x,function(A){return new Promise(function(O,$){O=ut(O);var L,F,U,te=A.trans,G=A.values,re=A.limit,z=A.query,Q=re===1/0?void 0:re,ne=z.index,z=z.range,te=te.objectStore(P),ne=ne.isPrimaryKey?te:te.index(ne.name),z=h(z);if(re===0)return O({result:[]});E?((Q=G?ne.getAll(z,Q):ne.getAllKeys(z,Q)).onsuccess=function(Ee){return O({result:Ee.target.result})},Q.onerror=Yt($)):(L=0,F=!G&&"openKeyCursor"in ne?ne.openKeyCursor(z):ne.openCursor(z),U=[],F.onsuccess=function(Ee){var Pe=F.result;return Pe?(U.push(G?Pe.value:Pe.primaryKey),++L===re?O({result:U}):void Pe.continue()):O({result:U})},F.onerror=Yt($))})}),openCursor:function(A){var O=A.trans,$=A.values,L=A.query,F=A.reverse,U=A.unique;return new Promise(function(G,re){G=ut(G);var ne=L.index,Q=L.range,te=O.objectStore(P),te=ne.isPrimaryKey?te:te.index(ne.name),ne=F?U?"prevunique":"prev":U?"nextunique":"next",z=!$&&"openKeyCursor"in te?te.openKeyCursor(h(Q),ne):te.openCursor(h(Q),ne);z.onerror=Yt(re),z.onsuccess=ut(function(Ee){var Pe,Me,Ie,Wt,De=z.result;De?(De.___id=++kc,De.done=!1,Pe=De.continue.bind(De),Me=(Me=De.continuePrimaryKey)&&Me.bind(De),Ie=De.advance.bind(De),Wt=function(){throw new Error("Cursor not stopped")},De.trans=O,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=ut(re),De.next=function(){var bt=this,wt=1;return this.start(function(){return wt--?bt.continue():bt.stop()}).then(function(){return bt})},De.start=function(bt){function wt(){if(z.result)try{bt()}catch(Tt){De.fail(Tt)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var Ei=new Promise(function(Tt,Kr){Tt=ut(Tt),z.onerror=Yt(Kr),De.fail=Kr,De.stop=function(Ks){De.stop=De.continue=De.continuePrimaryKey=De.advance=Wt,Tt(Ks)}});return z.onsuccess=ut(function(Tt){z.onsuccess=wt,wt()}),De.continue=Pe,De.continuePrimaryKey=Me,De.advance=Ie,wt(),Ei},G(De)):G(null)},re)})},count:function(A){var O=A.query,$=A.trans,L=O.index,F=O.range;return new Promise(function(U,G){var re=$.objectStore(P),Q=L.isPrimaryKey?re:re.index(L.name),re=h(F),Q=re?Q.count(re):Q.count();Q.onsuccess=ut(function(te){return U(te.target.result)}),Q.onerror=Yt(G)})}}}var p,m,_,T=(m=S,_=_a((p=i).objectStoreNames),{schema:{name:p.name,tables:_.map(function(C){return m.objectStore(C)}).map(function(C){var E=C.keyPath,O=C.autoIncrement,P=c(E),A={},O={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:P,keyPath:E,autoIncrement:O,unique:!0,extractKey:ks(E)},indexes:_a(C.indexNames).map(function($){return C.index($)}).map(function(U){var L=U.name,F=U.unique,G=U.multiEntry,U=U.keyPath,G={name:L,compound:c(U),keyPath:U,unique:F,multiEntry:G,extractKey:ks(U)};return A[jn(U)]=G}),getIndexByKeyPath:function($){return A[jn($)]}};return A[":id"]=O.primaryKey,E!=null&&(A[jn(E)]=O.primaryKey),O})},hasGetAll:0<_.length&&"getAll"in m.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=T.schema,x=T.hasGetAll,T=S.tables.map(d),w={};return T.forEach(function(C){return w[C.name]=C}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(C){if(!w[C])throw new Error("Table '".concat(C,"' not found"));return w[C]},MIN_KEY:-1/0,MAX_KEY:An(o),schema:S}}function Ec(i,o,u,h){var d=u.IDBKeyRange;return u.indexedDB,{dbcore:(h=xc(o,d,h),i.dbcore.reduce(function(p,m){return m=m.create,n(n({},p),m(p))},h))}}function fi(i,h){var u=h.db,h=Ec(i._middlewares,u,i._deps,h);i.core=h.dbcore,i.tables.forEach(function(d){var p=d.name;i.core.schema.tables.some(function(m){return m.name===p})&&(d.core=i.core.table(p),i[p]instanceof i.Table&&(i[p].core=d.core))})}function di(i,o,u,h){u.forEach(function(d){var p=h[d];o.forEach(function(m){var _=function S(x,T){return me(x,T)||(x=y(x))&&S(x,T)}(m,d);(!_||"value"in _&&_.value===void 0)&&(m===i.Transaction.prototype||m instanceof i.Transaction?se(m,d,{get:function(){return this.table(d)},set:function(S){V(this,d,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):m[d]=new i.Table(d,p))})})}function xs(i,o){o.forEach(function(u){for(var h in u)u[h]instanceof i.Table&&delete u[h]})}function Sc(i,o){return i._cfg.version-o._cfg.version}function Oc(i,o,u,h){var d=i._dbSchema;u.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=ws("$meta",wa("")[0],[]),i._storeNames.push("$meta"));var p=i._createTransaction("readwrite",i._storeNames,d);p.create(u),p._completion.catch(h);var m=p._reject.bind(p),_=fe.transless||fe;fr(function(){return fe.trans=p,fe.transless=_,o!==0?(fi(i,u),x=o,((S=p).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(T){return T??x}):ae.resolve(x)).then(function(T){return C=T,E=p,P=u,A=[],T=(w=i)._versions,O=w._dbSchema=gi(0,w.idbdb,P),(T=T.filter(function($){return $._cfg.version>=C})).length!==0?(T.forEach(function($){A.push(function(){var L=O,F=$._cfg.dbschema;yi(w,L,P),yi(w,F,P),O=w._dbSchema=F;var U=Es(L,F);U.add.forEach(function(ne){Ss(P,ne[0],ne[1].primKey,ne[1].indexes)}),U.change.forEach(function(ne){if(ne.recreate)throw new q.Upgrade("Not yet support for changing primary key");var z=P.objectStore(ne.name);ne.add.forEach(function(Ee){return pi(z,Ee)}),ne.change.forEach(function(Ee){z.deleteIndex(Ee.name),pi(z,Ee)}),ne.del.forEach(function(Ee){return z.deleteIndex(Ee)})});var G=$._cfg.contentUpgrade;if(G&&$._cfg.version>C){fi(w,P),E._memoizedTables={};var re=I(F);U.del.forEach(function(ne){re[ne]=L[ne]}),xs(w,[w.Transaction.prototype]),di(w,[w.Transaction.prototype],l(re),re),E.schema=re;var Q,te=Qe(G);return te&&tn(),U=ae.follow(function(){var ne;(Q=G(E))&&te&&(ne=dr.bind(null,null),Q.then(ne,ne))}),Q&&typeof Q.then=="function"?ae.resolve(Q):U.then(function(){return Q})}}),A.push(function(L){var F,U,G=$._cfg.dbschema;F=G,U=L,[].slice.call(U.db.objectStoreNames).forEach(function(re){return F[re]==null&&U.db.deleteObjectStore(re)}),xs(w,[w.Transaction.prototype]),di(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),E.schema=w._dbSchema}),A.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===$._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(F){return F!=="$meta"})):L.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return A.length?ae.resolve(A.shift()(E.idbtrans)).then($):ae.resolve()}().then(function(){ba(O,P)})):ae.resolve();var w,C,E,P,A,O}).catch(m)):(l(d).forEach(function(T){Ss(u,T,d[T].primKey,d[T].indexes)}),fi(i,u),void ae.follow(function(){return i.on.populate.fire(p)}).catch(m));var S,x})}function Pc(i,o){ba(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var u=gi(0,i.idbdb,o);yi(i,i._dbSchema,o);for(var h=0,d=Es(u,i._dbSchema).change;h<d.length;h++){var p=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(m.name);m.add.forEach(function(S){H&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(S.src)),pi(_,S)})}(d[h]);if(typeof p=="object")return p.value}}function Es(i,o){var u,h={del:[],add:[],change:[]};for(u in i)o[u]||h.del.push(u);for(u in o){var d=i[u],p=o[u];if(d){var m={name:u,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||d.primKey.auto!==p.primKey.auto)m.recreate=!0,h.change.push(m);else{var _=d.idxByName,S=p.idxByName,x=void 0;for(x in _)S[x]||m.del.push(x);for(x in S){var T=_[x],w=S[x];T?T.src!==w.src&&m.change.push(w):m.add.push(w)}(0<m.del.length||0<m.add.length||0<m.change.length)&&h.change.push(m)}}else h.add.push([u,p])}return h}function Ss(i,o,u,h){var d=i.db.createObjectStore(o,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return h.forEach(function(p){return pi(d,p)}),d}function ba(i,o){l(i).forEach(function(u){o.db.objectStoreNames.contains(u)||(H&&console.debug("Dexie: Creating missing table",u),Ss(o,u,i[u].primKey,i[u].indexes))})}function pi(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function gi(i,o,u){var h={};return je(o.objectStoreNames,0).forEach(function(d){for(var p=u.objectStore(d),m=bs(va(x=p.keyPath),x||"",!0,!1,!!p.autoIncrement,x&&typeof x!="string",!0),_=[],S=0;S<p.indexNames.length;++S){var T=p.index(p.indexNames[S]),x=T.keyPath,T=bs(T.name,x,!!T.unique,!!T.multiEntry,!1,x&&typeof x!="string",!1);_.push(T)}h[d]=ws(d,m,_)}),h}function yi(i,o,u){for(var h=u.db.objectStoreNames,d=0;d<h.length;++d){var p=h[d],m=u.objectStore(p);i._hasGetAll="getAll"in m;for(var _=0;_<m.indexNames.length;++_){var S=m.indexNames[_],x=m.index(S).keyPath,T=typeof x=="string"?x:"["+je(x).join("+")+"]";!o[p]||(x=o[p].idxByName[T])&&(x.name=S,delete o[p].idxByName[T],o[p].idxByName[S]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function wa(i){return i.split(",").map(function(o,u){var h=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return bs(h,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),c(d),u===0)})}var Tc=(mi.prototype._parseStoresSpec=function(i,o){l(i).forEach(function(u){if(i[u]!==null){var h=wa(i[u]),d=h.shift();if(d.unique=!0,d.multi)throw new q.Schema("Primary key cannot be multi-valued");h.forEach(function(p){if(p.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),o[u]=ws(u,d,h)}})},mi.prototype.stores=function(u){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,u):u;var u=o._versions,h={},d={};return u.forEach(function(p){f(h,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(h,d)}),o._dbSchema=d,xs(o,[o._allTables,o,o.Transaction.prototype]),di(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(d),d),o._storeNames=l(d),this},mi.prototype.upgrade=function(i){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||_e,i),this},mi);function mi(){}function Os(i,o){var u=i._dbNamesDB;return u||(u=i._dbNamesDB=new or(ai,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Ps(i){return i&&typeof i.databases=="function"}function Ts(i){return fr(function(){return fe.letThrough=!0,i()})}function Cs(i){return!("from"in i)}var Pt=function(i,o){if(!this){var u=new Pt;return i&&"d"in i&&f(u,i),u}f(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Rn(i,o,u){var h=Ne(o,u);if(!isNaN(h)){if(0<h)throw RangeError();if(Cs(i))return f(i,{from:o,to:u,d:1});var d=i.l,h=i.r;if(Ne(u,i.from)<0)return d?Rn(d,o,u):i.l={from:o,to:u,d:1,l:null,r:null},xa(i);if(0<Ne(o,i.to))return h?Rn(h,o,u):i.r={from:o,to:u,d:1,l:null,r:null},xa(i);Ne(o,i.from)<0&&(i.from=o,i.l=null,i.d=h?h.d+1:1),0<Ne(u,i.to)&&(i.to=u,i.r=null,i.d=i.l?i.l.d+1:1),u=!i.r,d&&!i.l&&In(i,d),h&&u&&In(i,h)}}function In(i,o){Cs(o)||function u(h,S){var p=S.from,m=S.to,_=S.l,S=S.r;Rn(h,p,m),_&&u(h,_),S&&u(h,S)}(i,o)}function ka(i,o){var u=vi(o),h=u.next();if(h.done)return!1;for(var d=h.value,p=vi(i),m=p.next(d.from),_=m.value;!h.done&&!m.done;){if(Ne(_.from,d.to)<=0&&0<=Ne(_.to,d.from))return!0;Ne(d.from,_.from)<0?d=(h=u.next(_.from)).value:_=(m=p.next(d.from)).value}return!1}function vi(i){var o=Cs(i)?null:{s:0,n:i};return{next:function(u){for(var h=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,h)for(;o.n.l&&Ne(u,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!h||Ne(u,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function xa(i){var o,u,h=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((u=i.l)===null||u===void 0?void 0:u.d)||0),d=1<h?"r":h<-1?"l":"";d&&(o=d=="r"?"l":"r",u=n({},i),h=i[d],i.from=h.from,i.to=h.to,i[d]=h[d],u[d]=h[o],(i[o]=u).d=Ea(u)),i.d=Ea(i)}function Ea(u){var o=u.r,u=u.l;return(o?u?Math.max(o.d,u.d):o.d:u?u.d:0)+1}function _i(i,o){return l(o).forEach(function(u){i[u]?In(i[u],o[u]):i[u]=function h(d){var p,m,_={};for(p in d)b(d,p)&&(m=d[p],_[p]=!m||typeof m!="object"||ue.has(m.constructor)?m:h(m));return _}(o[u])}),i}function As(i,o){return i.all||o.all||Object.keys(i).some(function(u){return o[u]&&ka(o[u],i[u])})}R(Pt.prototype,((Nt={add:function(i){return In(this,i),this},addKey:function(i){return Rn(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(u){return Rn(o,u,u)}),this},hasKey:function(i){var o=vi(this).next(i).value;return o&&Ne(o.from,i)<=0&&0<=Ne(o.to,i)}})[Se]=function(){return vi(this)},Nt));var Mr={},js={},Rs=!1;function bi(i){_i(js,i),Rs||(Rs=!0,setTimeout(function(){Rs=!1,Is(js,!(js={}))},0))}function Is(i,o){o===void 0&&(o=!1);var u=new Set;if(i.all)for(var h=0,d=Object.values(Mr);h<d.length;h++)Sa(m=d[h],i,u,o);else for(var p in i){var m,_=/^idb\:\/\/(.*)\/(.*)\//.exec(p);_&&(p=_[1],_=_[2],(m=Mr["idb://".concat(p,"/").concat(_)])&&Sa(m,i,u,o))}u.forEach(function(S){return S()})}function Sa(i,o,u,h){for(var d=[],p=0,m=Object.entries(i.queries.query);p<m.length;p++){for(var _=m[p],S=_[0],x=[],T=0,w=_[1];T<w.length;T++){var C=w[T];As(o,C.obsSet)?C.subscribers.forEach(function(O){return u.add(O)}):h&&x.push(C)}h&&d.push([S,x])}if(h)for(var E=0,P=d;E<P.length;E++){var A=P[E],S=A[0],x=A[1];i.queries.query[S]=x}}function Cc(i){var o=i._state,u=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?dt(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var h=o.openCanceller,d=Math.round(10*i.verno),p=!1;function m(){if(o.openCanceller!==h)throw new q.DatabaseClosed("db.open() was cancelled")}function _(){return new ae(function(C,E){if(m(),!u)throw new q.MissingAPI;var P=i.name,A=o.autoSchema||!d?u.open(P):u.open(P,d);if(!A)throw new q.MissingAPI;A.onerror=Yt(E),A.onblocked=ut(i._fireOnBlocked),A.onupgradeneeded=ut(function(O){var $;T=A.transaction,o.autoSchema&&!i._options.allowEmptyDB?(A.onerror=Tn,T.abort(),A.result.close(),($=u.deleteDatabase(P)).onsuccess=$.onerror=ut(function(){E(new q.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(T.onerror=Yt(E),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=A.result,p&&Pc(i,T),Oc(i,O/10,T,E))},E),A.onsuccess=ut(function(){T=null;var O,$,L,F,U,G=i.idbdb=A.result,re=je(G.objectStoreNames);if(0<re.length)try{var Q=G.transaction((F=re).length===1?F[0]:F,"readonly");if(o.autoSchema)$=G,L=Q,(O=i).verno=$.version/10,L=O._dbSchema=gi(0,$,L),O._storeNames=je($.objectStoreNames,0),di(O,[O._allTables],l(L),L);else if(yi(i,i._dbSchema,Q),((U=Es(gi(0,(U=i).idbdb,Q),U._dbSchema)).add.length||U.change.some(function(te){return te.add.length||te.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),d=G.version+1,p=!0,C(_());fi(i,Q)}catch{}rn.push(i),G.onversionchange=ut(function(te){o.vcFired=!0,i.on("versionchange").fire(te)}),G.onclose=ut(function(te){i.on("close").fire(te)}),w&&(U=i._deps,Q=P,G=U.indexedDB,U=U.IDBKeyRange,Ps(G)||Q===ai||Os(G,U).put({name:Q}).catch(_e)),C()},E)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return ae.reject(C)})}var S,x=o.dbReadyResolve,T=null,w=!1;return ae.race([h,(typeof navigator>"u"?ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function E(){return indexedDB.databases().finally(C)}S=setInterval(E,100),E()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(_)]).then(function(){return m(),o.onReadyBeingFired=[],ae.resolve(Ts(function(){return i.on.ready.fire(i.vip)})).then(function C(){if(0<o.onReadyBeingFired.length){var E=o.onReadyBeingFired.reduce(J,_e);return o.onReadyBeingFired=[],ae.resolve(Ts(function(){return E(i.vip)})).then(C)}})}).finally(function(){o.openCanceller===h&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(C){o.dbOpenError=C;try{T&&T.abort()}catch{}return h===o.openCanceller&&i._close(),dt(C)}).finally(function(){o.openComplete=!0,x()}).then(function(){var C;return w&&(C={},i.tables.forEach(function(E){E.schema.indexes.forEach(function(P){P.name&&(C["idb://".concat(i.name,"/").concat(E.name,"/").concat(P.name)]=new Pt(-1/0,[[[]]]))}),C["idb://".concat(i.name,"/").concat(E.name,"/")]=C["idb://".concat(i.name,"/").concat(E.name,"/:dels")]=new Pt(-1/0,[[[]]])}),yr(Cn).fire(C),Is(C,!0)),i})}function Ds(i){function o(p){return i.next(p)}var u=d(o),h=d(function(p){return i.throw(p)});function d(p){return function(S){var _=p(S),S=_.value;return _.done?S:S&&typeof S.then=="function"?S.then(u,h):c(S)?Promise.all(S).then(u,h):u(S)}}return d(o)()}function wi(i,o,u){for(var h=c(i)?i.slice():[i],d=0;d<u;++d)h.push(o);return h}var Ac={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return n(n({},i),{table:function(o){var u=i.table(o),h=u.schema,d={},p=[];function m(w,C,E){var P=jn(w),A=d[P]=d[P]||[],O=w==null?0:typeof w=="string"?1:w.length,$=0<C,$=n(n({},E),{name:$?"".concat(P,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:$,keyTail:C,keyLength:O,extractKey:ks(w),unique:!$&&E.unique});return A.push($),$.isPrimaryKey||p.push($),1<O&&m(O===2?w[0]:w.slice(0,O-1),C+1,E),A.sort(function(L,F){return L.keyTail-F.keyTail}),$}o=m(h.primaryKey.keyPath,0,h.primaryKey),d[":id"]=[o];for(var _=0,S=h.indexes;_<S.length;_++){var x=S[_];m(x.keyPath,0,x)}function T(w){var C,E=w.query.index;return E.isVirtual?n(n({},w),{query:{index:E.lowLevelIndex,range:(C=w.query.range,E=E.keyTail,{type:C.type===1?2:C.type,lower:wi(C.lower,C.lowerOpen?i.MAX_KEY:i.MIN_KEY,E),lowerOpen:!0,upper:wi(C.upper,C.upperOpen?i.MIN_KEY:i.MAX_KEY,E),upperOpen:!0})}}):w}return n(n({},u),{schema:n(n({},h),{primaryKey:o,indexes:p,getIndexByKeyPath:function(w){return(w=d[jn(w)])&&w[0]}}),count:function(w){return u.count(T(w))},query:function(w){return u.query(T(w))},openCursor:function(w){var C=w.query.index,E=C.keyTail,P=C.isVirtual,A=C.keyLength;return P?u.openCursor(T(w)).then(function($){return $&&O($)}):u.openCursor(w);function O($){return Object.create($,{continue:{value:function(L){L!=null?$.continue(wi(L,w.reverse?i.MAX_KEY:i.MIN_KEY,E)):w.unique?$.continue($.key.slice(0,A).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,E)):$.continue()}},continuePrimaryKey:{value:function(L,F){$.continuePrimaryKey(wi(L,i.MAX_KEY,E),F)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var L=$.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return $.value}}})}}})}})}};function $s(i,o,u,h){return u=u||{},h=h||"",l(i).forEach(function(d){var p,m,_;b(o,d)?(p=i[d],m=o[d],typeof p=="object"&&typeof m=="object"&&p&&m?(_=ot(p))!==ot(m)?u[h+d]=o[d]:_==="Object"?$s(p,m,u,h+d+"."):p!==m&&(u[h+d]=o[d]):p!==m&&(u[h+d]=o[d])):u[h+d]=void 0}),l(o).forEach(function(d){b(i,d)||(u[h+d]=o[d])}),u}function Ls(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var jc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return n(n({},i),{table:function(o){var u=i.table(o),h=u.schema.primaryKey;return n(n({},u),{mutate:function(d){var p=fe.trans,m=p.table(o).hook,_=m.deleting,S=m.creating,x=m.updating;switch(d.type){case"add":if(S.fire===_e)break;return p._promise("readwrite",function(){return T(d)},!0);case"put":if(S.fire===_e&&x.fire===_e)break;return p._promise("readwrite",function(){return T(d)},!0);case"delete":if(_.fire===_e)break;return p._promise("readwrite",function(){return T(d)},!0);case"deleteRange":if(_.fire===_e)break;return p._promise("readwrite",function(){return function w(C,E,P){return u.query({trans:C,values:!1,query:{index:h,range:E},limit:P}).then(function(A){var O=A.result;return T({type:"delete",keys:O,trans:C}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):O.length<P?{failures:[],numFailures:0,lastResult:void 0}:w(C,n(n({},E),{lower:O[O.length-1],lowerOpen:!0}),P)})})}(d.trans,d.range,1e4)},!0)}return u.mutate(d);function T(w){var C,E,P,A=fe.trans,O=w.keys||Ls(h,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?n(n({},w),{keys:O}):n({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),C=u,P=O,((E=w).type==="add"?Promise.resolve([]):C.getMany({trans:E.trans,keys:P,cache:"immutable"})).then(function($){var L=O.map(function(F,U){var G,re,Q,te=$[U],ne={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(ne,F,te,A):w.type==="add"||te===void 0?(G=S.fire.call(ne,F,w.values[U],A),F==null&&G!=null&&(w.keys[U]=F=G,h.outbound||ve(w.values[U],h.keyPath,F))):(G=$s(te,w.values[U]),(re=x.fire.call(ne,G,F,te,A))&&(Q=w.values[U],Object.keys(re).forEach(function(z){b(Q,z)?Q[z]=re[z]:ve(Q,z,re[z])}))),ne});return u.mutate(w).then(function(F){for(var U=F.failures,G=F.results,re=F.numFailures,F=F.lastResult,Q=0;Q<O.length;++Q){var te=(G||O)[Q],ne=L[Q];te==null?ne.onerror&&ne.onerror(U[Q]):ne.onsuccess&&ne.onsuccess(w.type==="put"&&$[Q]?w.values[Q]:te)}return{failures:U,results:G,numFailures:re,lastResult:F}}).catch(function(F){return L.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}}})}})}};function Oa(i,o,u){try{if(!o||o.keys.length<i.length)return null;for(var h=[],d=0,p=0;d<o.keys.length&&p<i.length;++d)Ne(o.keys[d],i[p])===0&&(h.push(u?ge(o.values[d]):o.values[d]),++p);return h.length===i.length?h:null}catch{return null}}var Rc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var u=i.table(o);return n(n({},u),{getMany:function(h){if(!h.cache)return u.getMany(h);var d=Oa(h.keys,h.trans._cache,h.cache==="clone");return d?ae.resolve(d):u.getMany(h).then(function(p){return h.trans._cache={keys:h.keys,values:h.cache==="clone"?ge(p):p},p})},mutate:function(h){return h.type!=="add"&&(h.trans._cache=null),u.mutate(h)}})}}}};function Pa(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Ta(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ic={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,u=new Pt(i.MIN_KEY,i.MAX_KEY);return n(n({},i),{transaction:function(h,d,p){if(fe.subscr&&d!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return i.transaction(h,d,p)},table:function(h){var d=i.table(h),p=d.schema,m=p.primaryKey,w=p.indexes,_=m.extractKey,S=m.outbound,x=m.autoIncrement&&w.filter(function(E){return E.compound&&E.keyPath.includes(m.keyPath)}),T=n(n({},d),{mutate:function(E){function P(z){return z="idb://".concat(o,"/").concat(h,"/").concat(z),F[z]||(F[z]=new Pt)}var A,O,$,L=E.trans,F=E.mutatedParts||(E.mutatedParts={}),U=P(""),G=P(":dels"),re=E.type,ne=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[Ls(m,E).filter(function(z){return z}),E.values]:[],Q=ne[0],te=ne[1],ne=E.trans._cache;return c(Q)?(U.addKeys(Q),(ne=re==="delete"||Q.length===te.length?Oa(Q,ne):null)||G.addKeys(Q),(ne||te)&&(A=P,O=ne,$=te,p.indexes.forEach(function(z){var Ee=A(z.name||"");function Pe(Ie){return Ie!=null?z.extractKey(Ie):null}function Me(Ie){return z.multiEntry&&c(Ie)?Ie.forEach(function(Wt){return Ee.addKey(Wt)}):Ee.addKey(Ie)}(O||$).forEach(function(Ie,bt){var De=O&&Pe(O[bt]),bt=$&&Pe($[bt]);Ne(De,bt)!==0&&(De!=null&&Me(De),bt!=null&&Me(bt))})}))):Q?(te={from:Q.lower,to:Q.upper},G.add(te),U.add(te)):(U.add(u),G.add(u),p.indexes.forEach(function(z){return P(z.name).add(u)})),d.mutate(E).then(function(z){return!Q||E.type!=="add"&&E.type!=="put"||(U.addKeys(z.results),x&&x.forEach(function(Ee){var Pe=E.values.map(function(Ie){return Ee.extractKey(Ie)}),Me=Ee.keyPath.findIndex(function(Ie){return Ie===m.keyPath});z.results.forEach(function(Ie){return Pe[Me]=Ie}),P(Ee.name).addKeys(Pe)})),L.mutatedParts=_i(L.mutatedParts||{},F),z})}}),w=function(P){var A=P.query,P=A.index,A=A.range;return[P,new Pt((P=A.lower)!==null&&P!==void 0?P:i.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:i.MAX_KEY)]},C={get:function(E){return[m,new Pt(E.key)]},getMany:function(E){return[m,new Pt().addKeys(E.keys)]},count:w,query:w,openCursor:w};return l(C).forEach(function(E){T[E]=function(P){var A=fe.subscr,O=!!A,$=Pa(fe,d)&&Ta(E,P)?P.obsSet={}:A;if(O){var L=function(te){return te="idb://".concat(o,"/").concat(h,"/").concat(te),$[te]||($[te]=new Pt)},F=L(""),U=L(":dels"),A=C[E](P),O=A[0],A=A[1];if((E==="query"&&O.isPrimaryKey&&!P.values?U:L(O.name||"")).add(A),!O.isPrimaryKey){if(E!=="count"){var G=E==="query"&&S&&P.values&&d.query(n(n({},P),{values:!1}));return d[E].apply(this,arguments).then(function(te){if(E==="query"){if(S&&P.values)return G.then(function(Pe){return Pe=Pe.result,F.addKeys(Pe),te});var ne=P.values?te.result.map(_):te.result;(P.values?F:U).addKeys(ne)}else if(E==="openCursor"){var z=te,Ee=P.values;return z&&Object.create(z,{key:{get:function(){return U.addKey(z.primaryKey),z.key}},primaryKey:{get:function(){var Pe=z.primaryKey;return U.addKey(Pe),Pe}},value:{get:function(){return Ee&&F.addKey(z.primaryKey),z.value}}})}return te})}U.add(u)}}return d[E].apply(this,arguments)}}),T}})}};function Ca(i,o,u){if(u.numFailures===0)return o;if(o.type==="deleteRange")return null;var h=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return u.numFailures===h?null:(o=n({},o),c(o.keys)&&(o.keys=o.keys.filter(function(d,p){return!(p in u.failures)})),"values"in o&&c(o.values)&&(o.values=o.values.filter(function(d,p){return!(p in u.failures)})),o)}function Fs(i,o){return u=i,((h=o).lower===void 0||(h.lowerOpen?0<Ne(u,h.lower):0<=Ne(u,h.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?Ne(i,o.upper)<0:Ne(i,o.upper)<=0));var u,h}function Aa(i,o,C,h,d,p){if(!C||C.length===0)return i;var m=o.query.index,_=m.multiEntry,S=o.query.range,x=h.schema.primaryKey.extractKey,T=m.extractKey,w=(m.lowLevelIndex||m).extractKey,C=C.reduce(function(E,P){var A=E,O=[];if(P.type==="add"||P.type==="put")for(var $=new Pt,L=P.values.length-1;0<=L;--L){var F,U=P.values[L],G=x(U);$.hasKey(G)||(F=T(U),(_&&c(F)?F.some(function(ne){return Fs(ne,S)}):Fs(F,S))&&($.addKey(G),O.push(U)))}switch(P.type){case"add":A=E.concat(o.values?O:O.map(function(z){return x(z)}));break;case"put":var re=new Pt().addKeys(P.values.map(function(z){return x(z)})),A=E.filter(function(z){return!re.hasKey(o.values?x(z):z)}).concat(o.values?O:O.map(function(z){return x(z)}));break;case"delete":var Q=new Pt().addKeys(P.keys);A=E.filter(function(z){return!Q.hasKey(o.values?x(z):z)});break;case"deleteRange":var te=P.range;A=E.filter(function(z){return!Fs(x(z),te)})}return A},i);return C===i?i:(C.sort(function(E,P){return Ne(w(E),w(P))||Ne(x(E),x(P))}),o.limit&&o.limit<1/0&&(C.length>o.limit?C.length=o.limit:i.length===o.limit&&C.length<o.limit&&(d.dirty=!0)),p?Object.freeze(C):C)}function ja(i,o){return Ne(i.lower,o.lower)===0&&Ne(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Dc(i,o){return function(u,h,d,p){if(u===void 0)return h!==void 0?-1:0;if(h===void 0)return 1;if((h=Ne(u,h))===0){if(d&&p)return 0;if(d)return 1;if(p)return-1}return h}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(u,h,d,p){if(u===void 0)return h!==void 0?1:0;if(h===void 0)return-1;if((h=Ne(u,h))===0){if(d&&p)return 0;if(d)return-1;if(p)return 1}return h}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function $c(i,o,u,h){i.subscribers.add(u),h.addEventListener("abort",function(){var d,p;i.subscribers.delete(u),i.subscribers.size===0&&(d=i,p=o,setTimeout(function(){d.subscribers.size===0&&ye(p,d)},3e3))})}var Lc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return n(n({},i),{transaction:function(u,h,d){var p,m,_=i.transaction(u,h,d);return h==="readwrite"&&(m=(p=new AbortController).signal,d=function(S){return function(){if(p.abort(),h==="readwrite"){for(var x=new Set,T=0,w=u;T<w.length;T++){var C=w[T],E=Mr["idb://".concat(o,"/").concat(C)];if(E){var P=i.table(C),A=E.optimisticOps.filter(function(Ee){return Ee.trans===_});if(_._explicit&&S&&_.mutatedParts)for(var O=0,$=Object.values(E.queries.query);O<$.length;O++)for(var L=0,F=(re=$[O]).slice();L<F.length;L++)As((Q=F[L]).obsSet,_.mutatedParts)&&(ye(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)}));else if(0<A.length){E.optimisticOps=E.optimisticOps.filter(function(Ee){return Ee.trans!==_});for(var U=0,G=Object.values(E.queries.query);U<G.length;U++)for(var re,Q,te,ne=0,z=(re=G[U]).slice();ne<z.length;ne++)(Q=z[ne]).res!=null&&_.mutatedParts&&(S&&!Q.dirty?(te=Object.isFrozen(Q.res),te=Aa(Q.res,Q.req,A,P,Q,te),Q.dirty?(ye(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})):te!==Q.res&&(Q.res=te,Q.promise=ae.resolve({result:te}))):(Q.dirty&&ye(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})))}}}x.forEach(function(Ee){return Ee()})}}},_.addEventListener("abort",d(!1),{signal:m}),_.addEventListener("error",d(!1),{signal:m}),_.addEventListener("complete",d(!0),{signal:m})),_},table:function(u){var h=i.table(u),d=h.schema.primaryKey;return n(n({},h),{mutate:function(p){var m=fe.trans;if(d.outbound||m.db._options.cache==="disabled"||m.explicit)return h.mutate(p);var _=Mr["idb://".concat(o,"/").concat(u)];return _?(m=h.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Ls(d,p).some(function(S){return S==null}))?(_.optimisticOps.push(p),p.mutatedParts&&bi(p.mutatedParts),m.then(function(S){0<S.numFailures&&(ye(_.optimisticOps,p),(S=Ca(0,p,S))&&_.optimisticOps.push(S),p.mutatedParts&&bi(p.mutatedParts))}),m.catch(function(){ye(_.optimisticOps,p),p.mutatedParts&&bi(p.mutatedParts)})):m.then(function(S){var x=Ca(0,n(n({},p),{values:p.values.map(function(E,w){var C,E=(C=d.keyPath)!==null&&C!==void 0&&C.includes(".")?ge(E):n({},E);return ve(E,d.keyPath,S.results[w]),E})}),S);_.optimisticOps.push(x),queueMicrotask(function(){return p.mutatedParts&&bi(p.mutatedParts)})}),m):h.mutate(p)},query:function(p){if(!Pa(fe,h)||!Ta("query",p))return h.query(p);var m=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",w=fe,_=w.requery,S=w.signal,x=function(P,A,O,$){var L=Mr["idb://".concat(P,"/").concat(A)];if(!L)return[];if(!(A=L.queries[O]))return[null,!1,L,null];var F=A[($.query?$.query.index.name:null)||""];if(!F)return[null,!1,L,null];switch(O){case"query":var U=F.find(function(G){return G.req.limit===$.limit&&G.req.values===$.values&&ja(G.req.query.range,$.query.range)});return U?[U,!0,L,F]:[F.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=$.limit&&(!$.values||G.req.values)&&Dc(G.req.query.range,$.query.range)}),!1,L,F];case"count":return U=F.find(function(G){return ja(G.req.query.range,$.query.range)}),[U,!!U,L,F]}}(o,u,"query",p),T=x[0],w=x[1],C=x[2],E=x[3];return T&&w?T.obsSet=p.obsSet:(w=h.query(p).then(function(P){var A=P.result;if(T&&(T.res=A),m){for(var O=0,$=A.length;O<$;++O)Object.freeze(A[O]);Object.freeze(A)}else P.result=ge(A);return P}).catch(function(P){return E&&T&&ye(E,T),Promise.reject(P)}),T={obsSet:p.obsSet,promise:w,subscribers:new Set,type:"query",req:p,dirty:!1},E?E.push(T):(E=[T],(C=C||(Mr["idb://".concat(o,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=E)),$c(T,E,_,S),T.promise.then(function(P){return{result:Aa(P.result,p,C==null?void 0:C.optimisticOps,h,T,m)}})}})}})}};function ki(i,o){return new Proxy(i,{get:function(u,h,d){return h==="db"?o:Reflect.get(u,h,d)}})}var or=(pt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new q.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,u=o.filter(function(h){return h._cfg.version===i})[0];return u||(u=new this.Version(i),o.push(u),o.sort(Sc),u.stores({}),this._state.autoSchema=!1,u)},pt.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?i():new ae(function(u,h){if(o._state.openComplete)return h(new q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void h(new q.DatabaseClosed);o.open().catch(_e)}o._state.dbReadyPromise.then(u,h)}).then(i)},pt.prototype.use=function(i){var o=i.stack,u=i.create,h=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:u,level:h??10,name:d}),i.sort(function(p,m){return p.level-m.level}),this},pt.prototype.unuse=function(i){var o=i.stack,u=i.name,h=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return h?d.create!==h:!!u&&d.name!==u})),this},pt.prototype.open=function(){var i=this;return $r(et,function(){return Cc(i)})},pt.prototype._close=function(){var i=this._state,o=rn.indexOf(this);if(0<=o&&rn.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new ae(function(u){i.dbReadyResolve=u}),i.openCanceller=new ae(function(u,h){i.cancelOpen=h}))},pt.prototype.close=function(u){var o=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new q.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new q.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},pt.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",h=this._state;return new ae(function(d,p){function m(){o.close(i);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=ut(function(){var S,x,T;S=o._deps,x=o.name,T=S.indexedDB,S=S.IDBKeyRange,Ps(T)||x===ai||Os(T,S).delete(x).catch(_e),d()}),_.onerror=Yt(p),_.onblocked=o._fireOnBlocked}if(u)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(m):m()})},pt.prototype.backendDB=function(){return this.idbdb},pt.prototype.isOpen=function(){return this.idbdb!==null},pt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pt.prototype,"tables",{get:function(){var i=this;return l(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),pt.prototype.transaction=function(){var i=(function(o,u,h){var d=arguments.length;if(d<2)throw new q.InvalidArgument("Too few arguments");for(var p=new Array(d-1);--d;)p[d-1]=arguments[d];return h=p.pop(),[o,W(p),h]}).apply(this,arguments);return this._transaction.apply(this,i)},pt.prototype._transaction=function(i,o,u){var h=this,d=fe.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var p,m,_=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(m=o.map(function(x){if(x=x instanceof h.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),i=="r"||i===ps)p=ps;else{if(i!="rw"&&i!=gs)throw new q.InvalidArgument("Invalid transaction mode: "+i);p=gs}if(d){if(d.mode===ps&&p===gs){if(!_)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&m.forEach(function(x){if(d&&d.storeNames.indexOf(x)===-1){if(!_)throw new q.SubTransaction("Table "+x+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(x){return d?d._promise(null,function(T,w){w(x)}):dt(x)}var S=(function x(T,w,C,E,P){return ae.resolve().then(function(){var A=fe.transless||fe,O=T._createTransaction(w,C,T._dbSchema,E);if(O.explicit=!0,A={trans:O,transless:A},E)O.idbtrans=E.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(F){return F.name===Xe.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,null,P)})):dt(F)}var $,L=Qe(P);return L&&tn(),A=ae.follow(function(){var F;($=P.call(O,O))&&(L?(F=dr.bind(null,null),$.then(F,F)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Ds($)))},A),($&&typeof $.then=="function"?ae.resolve($).then(function(F){return O.active?F:dt(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return $})).then(function(F){return E&&O._resolve(),O._completion.then(function(){return F})}).catch(function(F){return O._reject(F),dt(F)})})}).bind(null,this,p,m,d,u);return d?d._promise(p,S,"lock"):fe.trans?$r(fe.transless,function(){return h._whenReady(S)}):this._whenReady(S)},pt.prototype.table=function(i){if(!b(this._allTables,i))throw new q.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},pt);function pt(i,o){var u=this;this._middlewares={},this.verno=0;var h=pt.dependencies;this._options=o=n({addons:pt.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},h=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,p,m,_,S,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:_e,dbReadyPromise:null,cancelOpen:_e,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};x.dbReadyPromise=new ae(function(w){x.dbReadyResolve=w}),x.openCanceller=new ae(function(w,C){x.cancelOpen=C}),this._state=x,this.name=i,this.on=Sn(this,"populate","blocked","versionchange","close",{ready:[J,_e]}),this.on.ready.subscribe=Re(this.on.ready.subscribe,function(w){return function(C,E){pt.vip(function(){var P,A=u._state;A.openComplete?(A.dbOpenError||ae.resolve().then(C),E&&w(C)):A.onReadyBeingFired?(A.onReadyBeingFired.push(C),E&&w(C)):(w(C),P=u,E||w(function O(){P.on.ready.unsubscribe(C),P.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,On(vc.prototype,function($,O){this.db=d;var E=ua,P=null;if(O)try{E=O()}catch(L){P=L}var A=$._ctx,O=A.table,$=O.hook.reading.fire;this._ctx={table:O,index:A.index,isPrimKey:!A.index||O.schema.primKey.keyPath&&A.index===O.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:A.or,valueMapper:$!==v?$:null}})),this.Table=(p=this,On(fa.prototype,function(w,C,E){this.db=p,this._tx=E,this.name=w,this.schema=C,this.hook=p._allTables[w]?p._allTables[w].hook:Sn(null,{creating:[M,_e],reading:[k,v],updating:[N,_e],deleting:[B,_e]})})),this.Transaction=(m=this,On(wc.prototype,function(w,C,E,P,A){var O=this;this.db=m,this.mode=w,this.storeNames=C,this.schema=E,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=Sn(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ae(function($,L){O._resolve=$,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function($){var L=O.active;return O.active=!1,O.on.error.fire($),O.parent?O.parent._reject($):L&&O.idbtrans&&O.idbtrans.abort(),dt($)})})),this.Version=(_=this,On(Tc.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,On(ma.prototype,function(w,C,E){if(this.db=S,this._ctx={table:w,index:C===":id"?null:C,or:E},this._cmp=this._ascending=Ne,this._descending=function(P,A){return Ne(A,P)},this._max=function(P,A){return 0<Ne(P,A)?P:A},this._min=function(P,A){return Ne(P,A)<0?P:A},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=An(o.IDBKeyRange),this._createTransaction=function(w,C,E,P){return new u.Transaction(w,C,E,u._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(w){u.on("blocked").fire(w),rn.filter(function(C){return C.name===u.name&&C!==u&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(w)})},this.use(Rc),this.use(Lc),this.use(Ic),this.use(Ac),this.use(jc);var T=new Proxy(this,{get:function(w,C,E){if(C==="_vip")return!0;if(C==="table")return function(A){return ki(u.table(A),T)};var P=Reflect.get(w,C,E);return P instanceof fa?ki(P,T):C==="tables"?P.map(function(A){return ki(A,T)}):C==="_createTransaction"?function(){return ki(P.apply(this,arguments),T)}:P}});this.vip=T,h.forEach(function(w){return w(u)})}var xi,Nt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fc=(Ms.prototype.subscribe=function(i,o,u){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:u})},Ms.prototype[Nt]=function(){return this},Ms);function Ms(i){this._subscribe=i}try{xi={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{xi={indexedDB:null,IDBKeyRange:null}}function Ra(i){var o,u=!1,h=new Fc(function(d){var p=Qe(i),m,_=!1,S={},x={},T={get closed(){return _},unsubscribe:function(){_||(_=!0,m&&m.abort(),w&&yr.storagemutated.unsubscribe(E))}};d.start&&d.start(T);var w=!1,C=function(){return ds(P)},E=function(A){_i(S,A),As(x,S)&&C()},P=function(){var A,O,$;!_&&xi.indexedDB&&(S={},A={},m&&m.abort(),m=new AbortController,$=function(L){var F=Zr();try{p&&tn();var U=fr(i,L);return U=p?U.finally(dr):U}finally{F&&en()}}(O={subscr:A,signal:m.signal,requery:C,querier:i,trans:null}),Promise.resolve($).then(function(L){u=!0,o=L,_||O.signal.aborted||(S={},function(F){for(var U in F)if(b(F,U))return;return 1}(x=A)||w||(yr(Cn,E),w=!0),ds(function(){return!_&&d.next&&d.next(L)}))},function(L){u=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||ds(function(){_||d.error&&d.error(L)})}))};return setTimeout(C,0),T});return h.hasValue=function(){return u},h.getValue=function(){return o},h}var Ur=or;function Us(i){var o=mr;try{mr=!0,yr.storagemutated.fire(i),Is(i,!0)}finally{mr=o}}R(Ur,n(n({},He),{delete:function(i){return new Ur(i,{addons:[]}).delete()},exists:function(i){return new Ur(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Ur.dependencies,u=o.indexedDB,o=o.IDBKeyRange,(Ps(u)?Promise.resolve(u.databases()).then(function(h){return h.map(function(d){return d.name}).filter(function(d){return d!==ai})}):Os(u,o).toCollection().primaryKeys()).then(i)}catch{return dt(new q.MissingAPI)}var o,u},defineClass:function(){return function(i){f(this,i)}},ignoreTransaction:function(i){return fe.trans?$r(fe.transless,i):i()},vip:Ts,async:function(i){return function(){try{var o=Ds(i.apply(this,arguments));return o&&typeof o.then=="function"?o:ae.resolve(o)}catch(u){return dt(u)}}},spawn:function(i,o,u){try{var h=Ds(i.apply(u,o||[]));return h&&typeof h.then=="function"?h:ae.resolve(h)}catch(d){return dt(d)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(i,o){return o=ae.resolve(typeof i=="function"?Ur.ignoreTransaction(i):i).timeout(o||6e4),fe.trans?fe.trans.waitFor(o):o},Promise:ae,debug:{get:function(){return H},set:function(i){K(i)}},derive:le,extend:f,props:R,override:Re,Events:Sn,on:yr,liveQuery:Ra,extendObservabilitySet:_i,getByKeyPath:Ye,setByKeyPath:ve,delByKeyPath:function(i,o){typeof o=="string"?ve(i,o,void 0):"length"in o&&[].map.call(o,function(u){ve(i,u,void 0)})},shallowClone:I,deepClone:ge,getObjectDiff:$s,cmp:Ne,asap:Le,minKey:-1/0,addons:[],connections:rn,errnames:Xe,dependencies:xi,cache:Mr,semVer:"4.0.8",version:"4.0.8".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,u){return i+o/Math.pow(10,2*u)})})),Ur.maxKey=An(Ur.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yr(Cn,function(i){mr||(i=new CustomEvent(_s,{detail:i}),mr=!0,dispatchEvent(i),mr=!1)}),addEventListener(_s,function(i){i=i.detail,mr||Us(i)}));var on,mr=!1,Ia=function(){};return typeof BroadcastChannel<"u"&&((Ia=function(){(on=new BroadcastChannel(_s)).onmessage=function(i){return i.data&&Us(i.data)}})(),typeof on.unref=="function"&&on.unref(),yr(Cn,function(i){mr||on.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!or.disableBfCache&&i.persisted){H&&console.debug("Dexie: handling persisted pagehide"),on!=null&&on.close();for(var o=0,u=rn;o<u.length;o++)u[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!or.disableBfCache&&i.persisted&&(H&&console.debug("Dexie: handling persisted pageshow"),Ia(),Us({all:new Pt(-1/0,[[]])}))})),ae.rejectionMapper=function(i,o){return!i||i instanceof Ke||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Fe[i.name]?i:(o=new Fe[i.name](o||i.message,i),"stack"in i&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},K(H),n(or,Object.freeze({__proto__:null,Dexie:or,liveQuery:Ra,Entity:la,cmp:Ne,PropModSymbol:sr,PropModification:Pn,replacePrefix:function(i,o){return new Pn({replacePrefix:[i,o]})},add:function(i){return new Pn({add:i})},remove:function(i){return new Pn({remove:i})},default:or,RangeSet:Pt,mergeRanges:In,rangesOverlap:ka}),{default:or}),or})})(Nl);var vd=Nl.exports;const bo=Kl(vd),yu=Symbol.for("Dexie"),wo=globalThis[yu]||(globalThis[yu]=bo);if(bo.semVer!==wo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bo.semVer} and ${wo.semVer}`);const Tr=new wo("DictionaryDB");Tr.version(1).stores({words:"id,type,chinese,romaji,classification,audioid,english",definitions:"defid,wordid,partofspeech,def_chinese,def_english"});async function _d(){try{const e=await(await fetch("./src/assets/taigiwords.csv")).text(),n=await(await fetch("./src/assets/taigidefs.csv")).text();gu.parse(e,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await Tr.words.clear(),await Tr.words.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}}),gu.parse(n,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await Tr.definitions.clear(),await Tr.definitions.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}})}catch(t){console.error("Error loading CSV file:",t)}}const Yo=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},bd={},wd={class:"play-audio",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function kd(t,e){return It(),qt("svg",wd,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.9177 4.9473L19.4897 4.3313L18.2577 5.1873L18.6857 5.8023C21.3027 9.5713 21.3027 14.4363 18.6857 18.1973L18.2577 18.8123L19.4887 19.6693L19.9177 19.0533C22.8497 14.8393 22.8497 9.1703 19.9177 4.9473Z",fill:"gray"},null,-1),be("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.2312 7.6226L16.8582 6.9716L15.5572 7.7166L15.9292 8.3676C17.2142 10.6126 17.2142 13.3966 15.9302 15.6336L15.5562 16.2836L16.8572 17.0306L17.2312 16.3806C18.7792 13.6836 18.7792 10.3276 17.2312 7.6226Z",fill:"gray"},null,-1),be("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.0788 7.564H2.3848V8.064C2.3828 10.688 2.3828 13.312 2.3848 15.937V16.436H7.0788L11.2048 20.013H12.6678V3.987H11.2048L7.0788 7.564Z",fill:"gray"},null,-1)]))}const ql=Yo(bd,[["render",kd]]),xd={props:{audioID:{type:String,required:!0}},components:{IconPlayAudio:ql},data(){return{isPlaying:!1,baseSrc:"src/assets/audio_taigi/"}},computed:{fullSrc(){return`${this.baseSrc}${getAudioFolder(this.audioid)}/${audioid}.mp3`}},methods:{togglePlay(){const t=this.$refs.audio;this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying},audioEnded(){this.isPlaying=!1,console.log("Audio has finished playing.")},getAudioFolder(t){if(console.log(t),t){const e=parseInt(t.match(/^(\d+)\(/)[1]);return e<1e3?"0":e>=1e3&&e<2e3?"1":e>=2e3&&e<3e3?"2":e>=3e3&&e<4e3?"3":e>=4e3&&e<5e3?"4":e>=5e3&&e<6e3?"5":e>=6e3&&e<7e3?"6":e>=7e3&&e<8e3?"7":e>=8e3&&e<9e3?"8":e>=9e3&&e<1e4?"9":e>=1e4&&e<11e3?"10":e>=11e3&&e<12e3?"11":e>=12e3&&e<13e3?"12":e>=13e3&&e<14e3?"13":e>=14e3&&e<15e3?"14":e>=15e3&&e<16e3?"15":e>=16e3&&e<17e3?"16":e>=17e3&&e<18e3?"17":e>=18e3&&e<19e3?"18":e>=19e3&&e<2e4?"19":e>=2e4&&e<21e3?"20":e>=21e3&&e<22e3?"21":e>=22e3&&e<23e3?"22":e>=23e3&&e<24e3?"23":e>=24e3&&e<25e3?"24":e>=25e3&&e<26e3?"25":e>=26e3&&e<27e3?"26":e>=27e3&&e<28e3?"27":e>=28e3&&e<29e3?"28":"Out of range"}}},mounted(){this.$refs.audio},beforeDestroy(){this.$refs.audio}},Ed={class:"audio-player"},Sd=["src"];function Od(t,e,r,n,s,a){const l=pl("IconPlayAudio");return It(),qt("div",Ed,[be("audio",{ref:"audio",src:`${this.baseSrc}${a.getAudioFolder(r.audioID)}/${r.audioID}.mp3`,onEnded:e[0]||(e[0]=(...c)=>a.audioEnded&&a.audioEnded(...c))},null,40,Sd),Qt(l,{onClick:a.togglePlay},null,8,["onClick"])])}const Pd=Yo(xd,[["render",Od],["__scopeId","data-v-ce97b142"]]),Td="modulepreload",Cd=function(t){return"/taigi-dict-app/"+t},mu={},wn=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(f=>{if(f=Cd(f),f in mu)return;mu[f]=!0;const y=f.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Td,y||(b.as="script"),b.crossOrigin="",b.href=f,c&&b.setAttribute("nonce",c),document.head.appendChild(b),y)return new Promise((R,V)=>{b.addEventListener("load",R),b.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Ad=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Xo extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class jd extends Xo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rd extends Xo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Id extends Xo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ko;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ko||(ko={}));var Dd=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};class $d{constructor(e,{headers:r={},customFetch:n,region:s=ko.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Ad(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Dd(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:l}=r;let c={},{region:f}=r;f||(f=this.region),f&&f!=="any"&&(c["x-region"]=f);let y;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(c["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(c["Content-Type"]="application/json",y=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:y}).catch(se=>{throw new jd(se)}),b=g.headers.get("x-relay-error");if(b&&b==="true")throw new Rd(g);if(!g.ok)throw new Id(g);let R=((n=g.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),V;return R==="application/json"?V=yield g.json():R==="application/octet-stream"?V=yield g.blob():R==="text/event-stream"?V=g:R==="multipart/form-data"?V=yield g.formData():V=yield g.text(),{data:V,error:null}}catch(s){return{data:null,error:s}}})}}var Dt={},Zo={},rs={},ei={},ns={},is={},Ld=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kn=Ld();const Fd=kn.fetch,Hl=kn.fetch.bind(kn),Vl=kn.Headers,Md=kn.Request,Ud=kn.Response,xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vl,Request:Md,Response:Ud,default:Hl,fetch:Fd},Symbol.toStringTag,{value:"Module"})),Kd=yd(xn);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});class Bd extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}ss.default=Bd;var Wl=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(is,"__esModule",{value:!0});const Nd=Wl(Kd),qd=Wl(ss);let Hd=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,c,f;let y=null,g=null,b=null,R=a.status,V=a.statusText;if(a.ok){if(this.method!=="HEAD"){const we=await a.text();we===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=we:g=JSON.parse(we))}const le=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),me=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");le&&me&&me.length>1&&(b=parseInt(me[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,R=406,V="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const le=await a.text();try{y=JSON.parse(le),Array.isArray(y)&&a.status===404&&(g=[],y=null,R=200,V="OK")}catch{a.status===404&&le===""?(R=204,V="No Content"):y={message:le}}if(y&&this.isMaybeSingle&&(!((f=y==null?void 0:y.details)===null||f===void 0)&&f.includes("0 rows"))&&(y=null,R=200,V="OK"),y&&this.shouldThrowOnError)throw new qd.default(y)}return{error:y,data:g,count:b,status:R,statusText:V}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,c,f;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(f=a==null?void 0:a.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}};is.default=Hd;var Vd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ns,"__esModule",{value:!0});const Wd=Vd(is);let zd=class extends Wd.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var c;const f=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${y}"; options=${f};`,l==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ns.default=zd;var Jd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ei,"__esModule",{value:!0});const Gd=Jd(ns);let Qd=class extends Gd.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${l}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};ei.default=Qd;var Yd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rs,"__esModule",{value:!0});const Ln=Yd(ei);let Xd=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){const c=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const l="POST",c=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const f=e.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(f.length>0){const y=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new Ln.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Ln.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ln.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rs.default=Xd;var os={},as={};Object.defineProperty(as,"__esModule",{value:!0});as.version=void 0;as.version="0.0.0-automated";Object.defineProperty(os,"__esModule",{value:!0});os.DEFAULT_HEADERS=void 0;const Zd=as;os.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Zd.version}`};var zl=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zo,"__esModule",{value:!0});const ep=zl(rs),tp=zl(ei),rp=os;let np=class Jl{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},rp.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new ep.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let l;const c=new URL(`${this.url}/rpc/${e}`);let f;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{c.searchParams.append(g,b)})):(l="POST",f=r);const y=Object.assign({},this.headers);return a&&(y.Prefer=`count=${a}`),new tp.default({method:l,url:c,headers:y,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};Zo.default=np;var En=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.PostgrestError=Dt.PostgrestBuilder=Dt.PostgrestTransformBuilder=Dt.PostgrestFilterBuilder=Dt.PostgrestQueryBuilder=Dt.PostgrestClient=void 0;const Gl=En(Zo);Dt.PostgrestClient=Gl.default;const Ql=En(rs);Dt.PostgrestQueryBuilder=Ql.default;const Yl=En(ei);Dt.PostgrestFilterBuilder=Yl.default;const Xl=En(ns);Dt.PostgrestTransformBuilder=Xl.default;const Zl=En(is);Dt.PostgrestBuilder=Zl.default;const ec=En(ss);Dt.PostgrestError=ec.default;var ip=Dt.default={PostgrestClient:Gl.default,PostgrestQueryBuilder:Ql.default,PostgrestFilterBuilder:Yl.default,PostgrestTransformBuilder:Xl.default,PostgrestBuilder:Zl.default,PostgrestError:ec.default};const{PostgrestClient:sp,PostgrestQueryBuilder:iy,PostgrestFilterBuilder:sy,PostgrestTransformBuilder:oy,PostgrestBuilder:ay}=ip,op="2.10.7",ap={"X-Client-Info":`realtime-js/${op}`},up="1.0.0",tc=1e4,lp=1e3;var _n;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_n||(_n={}));var Ft;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ft||(Ft={}));var Jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jt||(Jt={}));var xo;(function(t){t.websocket="websocket"})(xo||(xo={}));var zr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zr||(zr={}));class cp{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const c=n.decode(e.slice(l,l+s));l=l+s;const f=n.decode(e.slice(l,l+a));l=l+a;const y=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:f,payload:y}}}class rc{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nt||(nt={}));const vu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,l)=>(a[l]=hp(l,t,e,s),a),{})},hp=(t,e,r,n)=>{const s=e.find(c=>c.name===t),a=s==null?void 0:s.type,l=r[t];return a&&!n.includes(a)?nc(a,l):Eo(l)},nc=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return gp(e,r)}switch(t){case nt.bool:return fp(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return dp(e);case nt.json:case nt.jsonb:return pp(e);case nt.timestamp:return yp(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return Eo(e);default:return Eo(e)}},Eo=t=>t,fp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},dp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gp=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>nc(e,c))}return t},yp=t=>typeof t=="string"?t.replace(" ","T"):t,ic=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ro{constructor(e,r,n={},s=tc){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _u;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_u||(_u={}));class Hn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hn.syncState(this.state,s,a,l),this.pendingDiffs.forEach(f=>{this.state=Hn.syncDiff(this.state,f,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hn.syncDiff(this.state,s,a,l),c())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),l=this.transformState(r),c={},f={};return this.map(a,(y,g)=>{l[y]||(f[y]=g)}),this.map(l,(y,g)=>{const b=a[y];if(b){const R=g.map(me=>me.presence_ref),V=b.map(me=>me.presence_ref),se=g.filter(me=>V.indexOf(me.presence_ref)<0),le=b.filter(me=>R.indexOf(me.presence_ref)<0);se.length>0&&(c[y]=se),le.length>0&&(f[y]=le)}else c[y]=g}),this.syncDiff(a,{joins:c,leaves:f},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(c,f)=>{var y;const g=(y=e[c])!==null&&y!==void 0?y:[];if(e[c]=this.cloneDeep(f),g.length>0){const b=e[c].map(V=>V.presence_ref),R=g.filter(V=>b.indexOf(V.presence_ref)<0);e[c].unshift(...R)}n(c,g,f)}),this.map(l,(c,f)=>{let y=e[c];if(!y)return;const g=f.map(b=>b.presence_ref);y=y.filter(b=>g.indexOf(b.presence_ref)<0),e[c]=y,s(c,y,f),y.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bu||(bu={}));var wu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wu||(wu={}));var ku;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ku||(ku={}));class ea{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ro(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new rc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Hn(this),this.broadcastEndpointURL=ic(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:c}}=this.params;this._onError(g=>e&&e("CHANNEL_ERROR",g)),this._onClose(()=>e&&e("CLOSED"));const f={},y={broadcast:a,presence:l,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessToken&&(f.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:y},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:g})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),g===void 0){e&&e("SUBSCRIBED");return}else{const R=this.bindings.postgres_changes,V=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,se=[];for(let le=0;le<V;le++){const me=R[le],{filter:{event:we,schema:je,table:Re,filter:ce}}=me,Le=g&&g[le];if(Le&&Le.event===we&&Le.schema===je&&Le.table===Re&&Le.filter===ce)se.push(Object.assign(Object.assign({},me),{id:Le.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=se,e&&e("SUBSCRIBED");return}}).receive("error",g=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,f;const y=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),y.receive("ok",()=>a("ok")),y.receive("error",()=>a("error")),y.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new ro(this,Jt.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ro(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const l=e.toLocaleLowerCase(),{close:c,error:f,leave:y,join:g}=Jt;if(n&&[c,f,y,g].indexOf(l)>=0&&n!==this._joinRef())return;let R=this._onMessage(l,r,n);if(r&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(V=>{var se,le,me;return((se=V.filter)===null||se===void 0?void 0:se.event)==="*"||((me=(le=V.filter)===null||le===void 0?void 0:le.event)===null||me===void 0?void 0:me.toLocaleLowerCase())===l}).map(V=>V.callback(R,n)):(a=this.bindings[l])===null||a===void 0||a.filter(V=>{var se,le,me,we,je,Re;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in V){const ce=V.id,Le=(se=V.filter)===null||se===void 0?void 0:se.event;return ce&&((le=r.ids)===null||le===void 0?void 0:le.includes(ce))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((me=r.data)===null||me===void 0?void 0:me.type.toLocaleLowerCase()))}else{const ce=(je=(we=V==null?void 0:V.filter)===null||we===void 0?void 0:we.event)===null||je===void 0?void 0:je.toLocaleLowerCase();return ce==="*"||ce===((Re=r==null?void 0:r.event)===null||Re===void 0?void 0:Re.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===l}).map(V=>{if(typeof R=="object"&&"ids"in R){const se=R.data,{schema:le,table:me,commit_timestamp:we,type:je,errors:Re}=se;R=Object.assign(Object.assign({},{schema:le,table:me,commit_timestamp:we,eventType:je,new:{},old:{},errors:Re}),this._getPayloadRecords(se))}V.callback(R,n)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ea.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jt.close,{},e)}_onError(e){this._on(Jt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=vu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=vu(e.columns,e.old_record)),r}}const mp=()=>{},vp=typeof WebSocket<"u",_p=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bp{constructor(e,r){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ap,this.params={},this.timeout=tc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=mp,this.conn=null,this.sendBuffer=[],this.serializer=new cp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>wn(async()=>{const{default:f}=await Promise.resolve().then(()=>xn);return{default:f}},void 0).then(({default:f})=>f(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${xo.websocket}`,this.httpEndpoint=ic(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,l)=>l(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(vp){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new wp(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),wn(async()=>{const{default:e}=await import("./browser-BUlKid0w.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _n.connecting:return zr.Connecting;case _n.open:return zr.Open;case _n.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}channel(e,r={config:{}}){const n=new ea(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:s,ref:a}=e,l=()=>{this.encode(e,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(Jt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:up}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:l}=r;(l&&l===this.pendingHeartbeatRef||s===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${l&&"("+l+")"||""}`,a),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,a,l)),this.stateChangeCallbacks.message.forEach(c=>c(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(lp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([_p],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class wp{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_n.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class ta extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kp extends ta{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class So extends ta{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var xp=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};const sc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Ep=()=>xp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wn(()=>Promise.resolve().then(()=>xn),void 0)).Response:Response}),Oo=t=>{if(Array.isArray(t))return t.map(r=>Oo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Oo(n)}),e};var Yr=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};const no=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sp=(t,e,r)=>Yr(void 0,void 0,void 0,function*(){const n=yield Ep();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new kp(no(s),t.status||500))}).catch(s=>{e(new So(no(s),s))}):e(new So(no(t),t))}),Op=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ti(t,e,r,n,s,a){return Yr(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(r,Op(e,n,s,a)).then(f=>{if(!f.ok)throw f;return n!=null&&n.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>Sp(f,c,n))})})}function qi(t,e,r,n){return Yr(this,void 0,void 0,function*(){return ti(t,"GET",e,r,n)})}function Or(t,e,r,n,s){return Yr(this,void 0,void 0,function*(){return ti(t,"POST",e,n,s,r)})}function Pp(t,e,r,n,s){return Yr(this,void 0,void 0,function*(){return ti(t,"PUT",e,n,s,r)})}function Tp(t,e,r,n){return Yr(this,void 0,void 0,function*(){return ti(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function oc(t,e,r,n,s){return Yr(this,void 0,void 0,function*(){return ti(t,"DELETE",e,n,s,r)})}var Rt=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};const Cp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ap{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=sc(s)}uploadOrUpdate(e,r,n,s){return Rt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},xu),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const y=this._removeEmptyFolders(r),g=this._getFinalPath(y),b=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),R=yield b.json();return b.ok?{data:{path:y,id:R.Id,fullPath:R.Key},error:null}:{data:null,error:R}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Rt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",r);try{let f;const y=Object.assign({upsert:xu.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",y.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",y.cacheControl)):(f=n,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const b=yield this.fetch(c.toString(),{method:"PUT",body:f,headers:g}),R=yield b.json();return b.ok?{data:{path:a,fullPath:R.Key},error:null}:{data:null,error:R}}catch(f){if(_t(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,r){return Rt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Or(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new ta("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}update(e,r,n){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Rt(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Or(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Or(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Rt(this,void 0,void 0,function*(){try{const s=yield Or(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}download(e,r){return Rt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield qi(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(_t(c))return{data:null,error:c};throw c}})}info(e){return Rt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield qi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Oo(n),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}exists(e){return Rt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Tp(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(_t(n)&&n instanceof So){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&s.push(f);let y=s.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${y}`)}}}remove(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}list(e,r,n){return Rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Cp),r),{prefix:e||""});return{data:yield Or(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const jp="2.7.1",Rp={"X-Client-Info":`storage-js/${jp}`};var un=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};class Ip{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Rp),r),this.fetch=sc(n)}listBuckets(){return un(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return un(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return un(this,void 0,void 0,function*(){try{return{data:yield Pp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}emptyBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}deleteBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}}class Dp extends Ip{constructor(e,r={},n){super(e,r,n)}from(e){return new Ap(this.url,this.headers,e,this.fetch)}}const $p="2.46.1";let Un="";typeof Deno<"u"?Un="deno":typeof document<"u"?Un="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Un="react-native":Un="node";const Lp={"X-Client-Info":`supabase-js-${Un}/${$p}`},Fp={headers:Lp},Mp={schema:"public"},Up={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kp={};var Bp=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};const Np=t=>{let e;return t?e=t:typeof fetch>"u"?e=Hl:e=fetch,(...r)=>e(...r)},qp=()=>typeof Headers>"u"?Vl:Headers,Hp=(t,e,r)=>{const n=Np(r),s=qp();return(a,l)=>Bp(void 0,void 0,void 0,function*(){var c;const f=(c=yield e())!==null&&c!==void 0?c:t;let y=new s(l==null?void 0:l.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization",`Bearer ${f}`),n(a,Object.assign(Object.assign({},l),{headers:y}))})};var Vp=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};function Wp(t){return t.replace(/\/$/,"")}function zp(t,e){const{db:r,auth:n,realtime:s,global:a}=t,{db:l,auth:c,realtime:f,global:y}=e,g={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},f),s),global:Object.assign(Object.assign({},y),a),accessToken:()=>Vp(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const ac="2.65.1",Jp="http://localhost:9999",Gp="supabase.auth.token",Qp={"X-Client-Info":`gotrue-js/${ac}`},Eu=10,Po="X-Supabase-Api-Version",uc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Yp(t){return Math.round(Date.now()/1e3)+t}function Xp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const zt=()=>typeof document<"u",qr={tested:!1,writable:!1},Vn=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qr.tested)return qr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qr.tested=!0,qr.writable=!0}catch{qr.tested=!0,qr.writable=!1}return qr.writable};function io(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Zp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cc=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ji=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ri=async(t,e)=>{await t.removeItem(e)};function eg(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,s,a,l,c,f,y,g=0;for(t=t.replace("-","+").replace("_","/");g<t.length;)l=e.indexOf(t.charAt(g++)),c=e.indexOf(t.charAt(g++)),f=e.indexOf(t.charAt(g++)),y=e.indexOf(t.charAt(g++)),n=l<<2|c>>4,s=(c&15)<<4|f>>2,a=(f&3)<<6|y,r=r+String.fromCharCode(n),f!=64&&s!=0&&(r=r+String.fromCharCode(s)),y!=64&&a!=0&&(r=r+String.fromCharCode(a));return r}class us{constructor(){this.promise=new us.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}us.promiseConstructor=Promise;function Su(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(eg(n))}async function tg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rg(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function ng(t){return("0"+t.toString(16)).substr(-2)}function ig(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,ng).join("")}async function sg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function og(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ag(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await sg(t);return og(r)}async function ln(t,e,r=!1){const n=ig();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await cc(t,`${e}-code-verifier`,s);const a=await ag(n);return[a,n===a?"plain":"s256"]}const ug=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lg(t){const e=t.headers.get(Po);if(!e||!e.match(ug))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class ra extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cg extends ra{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function hg(t){return $e(t)&&t.name==="AuthApiError"}class hc extends ra{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Xr extends ra{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class kr extends Xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fg(t){return $e(t)&&t.name==="AuthSessionMissingError"}class so extends Xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ii extends Xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Di extends Xr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ou extends Xr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class To extends Xr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function oo(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Pu extends Xr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var dg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pg=[502,503,504];async function Tu(t){var e;if(!Zp(t))throw new To(Wr(t),0);if(pg.includes(t.status))throw new To(Wr(t),t.status);let r;try{r=await t.json()}catch(a){throw new hc(Wr(a),a)}let n;const s=lg(t);if(s&&s.getTime()>=uc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Pu(Wr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new kr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Pu(Wr(r),t.status,r.weak_password.reasons);throw new cg(Wr(r),t.status||500,n)}const gg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ue(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Po]||(a[Po]=uc["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await yg(t,e,r+c,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function yg(t,e,r,n,s,a){const l=gg(e,n,s,a);let c;try{c=await t(r,Object.assign({},l))}catch(f){throw console.error(f),new To(Wr(f),0)}if(c.ok||await Tu(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(f){await Tu(f)}}function xr(t){var e;let r=null;bg(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Yp(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Cu(t){const e=xr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mg(t){return{data:t,error:null}}function vg(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,l=dg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},f=Object.assign({},l);return{data:{properties:c,user:f},error:null}}function _g(t){return t}function bg(t){return t.access_token&&t.refresh_token&&t.expires_in}var wg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class kg{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=lc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Pr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=wg(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($e(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pr})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,l,c,f;try{const y={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:_g});if(g.error)throw g.error;const b=await g.json(),R=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,V=(f=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return V.length>0&&(V.forEach(se=>{const le=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),me=JSON.parse(se.split(";")[1].split("=")[1]);y[`${me}Page`]=le}),y.total=parseInt(R)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pr})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Pr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Pr})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($e(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}}const xg={getItem:t=>Vn()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Vn()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Vn()&&globalThis.localStorage.removeItem(t)}};function Au(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Eg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cn={debug:!!(globalThis&&Vn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sg extends fc{}async function Og(t,e,r){cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),cn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Sg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}Eg();const Pg={url:Jp,storageKey:Gp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Fn=30*1e3,ju=3;async function Ru(t,e,r){return await r()}class Yn{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yn.nextInstanceID,Yn.nextInstanceID+=1,this.instanceID>0&&zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Pg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new kg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lc(s.fetch),this.lock=s.lock||Ru,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:zt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Og:this.lock=Ru,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Vn()?this.storage=xg:(this.memoryStorage={},this.storage=Au(this.memoryStorage)):(this.memoryStorage={},this.storage=Au(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ac}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=zt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),(n==null?void 0:n.code)==="identity_already_exists"?{error:n}:(await this._removeSession(),{error:n});const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new hc("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:xr}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const f=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:g,password:b,options:R}=e;let V=null,se=null;this.flowType==="pkce"&&([V,se]=await ln(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R==null?void 0:R.emailRedirectTo,body:{email:g,password:b,data:(r=R==null?void 0:R.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken},code_challenge:V,code_challenge_method:se},xform:xr})}else if("phone"in e){const{phone:g,password:b,options:R}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(n=R==null?void 0:R.data)!==null&&n!==void 0?n:{},channel:(s=R==null?void 0:R.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken}},xform:xr})}else throw new Ii("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const f=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:l,options:c}=e;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Cu})}else if("phone"in e){const{phone:a,password:l,options:c}=e;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Cu})}else throw new Ii("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new so}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await ji(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:xr});if(await Ri(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new so}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=e,c=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:xr}),{data:f,error:y}=c;return y?{data:{user:null,session:null},error:y}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new so}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:y})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,l;try{if("email"in e){const{email:c,options:f}=e;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await ln(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:c,options:f}=e,{data:y,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:g}}throw new Ii("You must provide either an email or phone number.")}catch(c){if($e(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:xr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,y=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ln(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:mg})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new kr;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:l}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:l,error:c}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new Ii("You must provide either an email or phone number and a type")}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,y,g)=>(!l&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,y,g))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pr}):await this._useSession(async r=>{var n,s,a;const{data:l,error:c}=r;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Pr})})}catch(r){if($e(r))return fg(r)&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new kr;const l=s.session;let c=null,f=null;this.flowType==="pkce"&&e.email!=null&&([c,f]=await ln(this.storage,this.storageKey));const{data:y,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:f}),jwt:l.access_token,xform:Pr});if(g)throw g;return l.user=y.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Su(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kr;const r=Date.now()/1e3;let n=r,s=!0,a=null;const l=Su(e.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:c,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if($e(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:c}=r;if(c)throw c;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new kr;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!zt())throw new Di("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Di("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ou("Not a valid PKCE flow url.");const r=io(window.location.href);if(e){if(!r.code)throw new Ou("No code detected.");const{data:je,error:Re}=await this._exchangeCodeForSession(r.code);if(Re)throw Re;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:je.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Di(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:f,token_type:y}=r;if(!a||!c||!l||!y)throw new Di("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(c);let R=g+b;f&&(R=parseInt(f));const V=R-g;V*1e3<=Fn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${b}s`);const se=R-b;g-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,R,g):g-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",se,R,g);const{data:le,error:me}=await this._getUser(a);if(me)throw me;const we={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:R,refresh_token:l,token_type:y,user:le.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:r.type},error:null}}catch(r){if($e(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=io(window.location.href);return!!(zt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=io(window.location.href),r=await ji(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(hg(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Xp(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ln(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,c,f,y,g;const{data:b,error:R}=a;if(R)throw R;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",V,{headers:this.headers,jwt:(g=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return zt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($e(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rg(async s=>(s>0&&await tg(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xr})),(s,a)=>{const l=200*Math.pow(2,s);return a&&oo(a)&&Date.now()+l-n<Fn})}catch(n){if(this._debug(r,"error",n),$e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),zt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ji(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+Eu;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Eu}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),oo(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new us;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new kr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(s,"error",a),$e(a)){const l={session:null,error:a};return oo(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(f){a.push(f)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await cc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ri(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Fn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fn}ms, refresh threshold is ${ju} ticks`),s<=ju&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await ln(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:y}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if($e(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($e(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}}Yn.nextInstanceID=0;const Tg=Yn;class Cg extends Tg{constructor(e){super(e)}}var Ag=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(g){try{y(n.next(g))}catch(b){l(b)}}function f(g){try{y(n.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(c,f)}y((n=n.apply(t,e||[])).next())})};class jg{constructor(e,r,n){var s,a,l;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const c=Wp(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Mp,realtime:Kp,auth:Object.assign(Object.assign({},Up),{storageKey:f}),global:Fp},g=zp(n??{},y);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=Hp(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new sp(`${c}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new $d(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dp(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ag(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:l,lock:c,debug:f},y,g){var b;const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cg({url:this.authUrl,headers:Object.assign(Object.assign({},R),y),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:l,lock:c,debug:f,fetch:g,hasCustomAuthorizationHeader:(b="Authorization"in this.headers)!==null&&b!==void 0?b:!1})}_initRealtimeClient(e){return new bp(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rg=(t,e,r)=>new jg(t,e,r),Ig="https://oqwvljqwtearyepyaslo.supabase.co",Dg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xd3ZsanF3dGVhcnllcHlhc2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEwODA1NjIsImV4cCI6MjA0NjY1NjU2Mn0.31HmSCfXawvkzhevPCaKWoVCZyD_elcQOCtgFWJMRKI",wr=Rg(Ig,Dg),$g={data(){return{words:[],searchQuery:"",searchResults:[],word:null,showDialog:!1,selectedWordId:null}},components:{AudioPlayerTaigi:Pd,IconPlayAudio:ql},async created(){},methods:{async fetchWords(){const{data:t,error:e}=await wr.from("words").select(`
          id,
          english,
          definitions (defid, def_english)
        `);e?console.error(e):this.words=t},clearInput(){this.searchQuery=""},async openDialog(t){this.showDialog=!0,this.selectedWordId=t;const{data:e,error:r}=await wr.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese)").eq("id",t).single();r?console.error("Error fetching word:",r.message):(this.word=e,console.log(this.word))},async editWord(t){const{data:e,error:r}=await wr.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese, partofspeech)").eq("id",t).single();r?console.error("Error fetching word:",r.message):this.word=e},async updateWord(){const{data:t,error:e}=await wr.from("words").upsert({id:this.word.id,chinese:this.word.chinese,romaji:this.word.romaji,classification:this.word.classification,english:this.word.english});e?console.error("Error updating word:",e.message):console.log("Word updated successfully:",t)},async updateDefinition(t,e){const r=this.word.definitions[e],{data:n,error:s}=await wr.from("definitions").upsert({defid:t,wordid:this.word.id,partofspeech:r.partofspeech,def_english:r.def_english,def_chinese:r.def_chinese});s?console.error("Error updating definition:",s.message):console.log("Definition updated successfully:",n)},async deleteWord(t){const{error:e}=await wr.from("definitions").delete().eq("word_id",t);if(e){console.error(e);return}const{error:r}=await wr.from("words").delete().eq("id",t);r&&console.error(r)},async searchWords(){const{data:t,error:e}=await wr.from("words").select("id, english, chinese, romaji, audioid, definitions (defid, def_english, def_chinese)").or(`chinese.ilike.%${this.searchQuery}%,english.ilike.%${this.searchQuery}%`);e?console.error(e):(this.words=t,console.log(this.words))}}},Lg={id:"supasearch"},Fg={class:"search-words"},Mg={class:"results-count"},Ug={class:"results"},Kg={class:"word"},Bg={class:"word-item word-taigi"},Ng={class:"word-item word-english"},qg={class:"word-item word-chinese"},Hg=["onClick"],Vg={key:0,class:"edit-dialog"},Wg={key:0},zg=["onSubmit"],Jg=["onUpdate:modelValue"],Gg=["onUpdate:modelValue"],Qg=["onUpdate:modelValue"];function Yg(t,e,r,n,s,a){const l=pl("AudioPlayerTaigi");return It(),qt("div",Lg,[be("div",Fg,[_r(be("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>s.searchQuery=c),onKeyup:e[1]||(e[1]=cd(c=>a.searchWords(s.searchQuery),["enter"])),placeholder:"Search for a word...",class:"text-field search-words-text-field"},null,544),[[br,s.searchQuery]]),be("button",{onClick:e[2]||(e[2]=(...c)=>a.searchWords&&a.searchWords(...c))},"Search"),be("button",{onClick:e[3]||(e[3]=(...c)=>a.clearInput&&a.clearInput(...c))},"Clear"),be("div",Mg,Hr(s.words.length),1)]),be("ul",Ug,[(It(!0),qt(Ut,null,Ws(s.words,c=>(It(),qt("li",{key:c.id,class:"entry"},[be("div",Kg,[be("div",Bg,[Ll(Hr(c.romaji)+" ",1),c.audioid?(It(),Il(l,{key:0,audioID:c.audioid},null,8,["audioID"])):Xs("",!0)]),be("div",Ng,Hr(c.english),1),be("div",qg,Hr(c.chinese),1)]),be("ul",null,[(It(!0),qt(Ut,null,Ws(c.definitions,f=>(It(),qt("li",{key:f.id},[be("ul",null,[be("li",null,Hr(f.def_english),1),be("li",null,Hr(f.def_chinese),1)])]))),128))]),be("button",{onClick:f=>a.openDialog(c.id)},"Edit",8,Hg)]))),128))]),s.showDialog?(It(),qt("div",Vg,[be("button",{onClick:e[4]||(e[4]=c=>this.showDialog=!1)},"Close"),be("form",{onSubmit:e[9]||(e[9]=du((...c)=>a.updateWord&&a.updateWord(...c),["prevent"]))},[be("div",null,[e[10]||(e[10]=be("label",{for:"romaji"},"Romaji",-1)),_r(be("input",{"onUpdate:modelValue":e[5]||(e[5]=c=>s.word.romaji=c),type:"text",id:"romaji"},null,512),[[br,s.word.romaji]])]),be("div",null,[e[11]||(e[11]=be("label",{for:"english"},"English",-1)),_r(be("input",{"onUpdate:modelValue":e[6]||(e[6]=c=>s.word.english=c),type:"text",id:"english"},null,512),[[br,s.word.english]])]),be("div",null,[e[12]||(e[12]=be("label",{for:"chinese"},"Chinese",-1)),_r(be("input",{"onUpdate:modelValue":e[7]||(e[7]=c=>s.word.chinese=c),type:"text",id:"chinese"},null,512),[[br,s.word.chinese]])]),be("div",null,[e[13]||(e[13]=be("label",{for:"classification"},"Classification:",-1)),_r(be("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>s.word.classification=c),type:"text",id:"classification"},null,512),[[br,s.word.classification]])]),e[14]||(e[14]=be("button",{type:"submit"},"Save Word",-1))],32),s.word.definitions.length>0?(It(),qt("div",Wg,[(It(!0),qt(Ut,null,Ws(s.word.definitions,(c,f)=>(It(),qt("div",{key:c.defid},[be("form",{onSubmit:du(y=>a.updateDefinition(c.defid,f),["prevent"])},[be("div",null,[e[15]||(e[15]=be("label",{for:"def_english"},"English Definition:",-1)),_r(be("textarea",{"onUpdate:modelValue":y=>c.def_english=y,type:"textarea",id:"def_english"},null,8,Jg),[[br,c.def_english]])]),be("div",null,[e[16]||(e[16]=be("label",{for:"def_chinese"},"Chinese Definition:",-1)),_r(be("input",{"onUpdate:modelValue":y=>c.def_chinese=y,type:"text",id:"def_chinese"},null,8,Gg),[[br,c.def_chinese]])]),be("div",null,[e[17]||(e[17]=be("label",{for:"partofspeech"},"Part of Speech:",-1)),_r(be("input",{"onUpdate:modelValue":y=>c.partofspeech=y,type:"text",id:"partofspeech"},null,8,Qg),[[br,c.partofspeech]])]),e[18]||(e[18]=be("button",{type:"submit"},"Save Definition",-1))],40,zg)]))),128))])):Xs("",!0)])):Xs("",!0)])}const Xg=Yo($g,[["render",Yg],["__scopeId","data-v-dab79886"]]),Zg={__name:"App",setup(t){const e=bh(!1);return fl(async()=>{e.value=await Tr.words.count()>0&&await Tr.definitions.count()>0,console.log(Tr),e.value?console.log("Data is available in IndexedDB."):(console.log("No data in IndexedDB."),_d())}),(r,n)=>(It(),qt(Ut,null,[n[0]||(n[0]=be("header",null,[be("div")],-1)),be("main",null,[Qt(Xg)]),n[1]||(n[1]=be("footer",null,null,-1))],64))}};dd(Zg).mount("#app");export{Kl as g};
