(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $o(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const nt={},vr=[],sn=()=>{},Nc=()=>!1,Qi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Lo=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Fo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qc=Object.prototype.hasOwnProperty,ze=(t,e)=>qc.call(t,e),xe=Array.isArray,_r=t=>Yi(t)==="[object Map]",Ul=t=>Yi(t)==="[object Set]",Ce=t=>typeof t=="function",mt=t=>typeof t=="string",In=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",Kl=t=>(ft(t)||Ce(t))&&Ce(t.then)&&Ce(t.catch),Bl=Object.prototype.toString,Yi=t=>Bl.call(t),Hc=t=>Yi(t).slice(8,-1),Nl=t=>Yi(t)==="[object Object]",Mo=t=>mt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hr=$o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Vc=/-(\w)/g,Jt=Xi(t=>t.replace(Vc,(e,n)=>n?n.toUpperCase():"")),Wc=/\B([A-Z])/g,Dn=Xi(t=>t.replace(Wc,"-$1").toLowerCase()),Zi=Xi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Js=Xi(t=>t?`on${Zi(t)}`:""),Rn=(t,e)=>!Object.is(t,e),Ki=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ql=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},fo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ka;const Hl=()=>Ka||(Ka=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uo(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=mt(r)?Qc(r):Uo(r);if(s)for(const a in s)e[a]=s[a]}return e}else if(mt(t)||ft(t))return t}const zc=/;(?![^(]*\))/g,Jc=/:([^]+)/,Gc=/\/\*[^]*?\*\//g;function Qc(t){const e={};return t.replace(Gc,"").split(zc).forEach(n=>{if(n){const r=n.split(Jc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ko(t){let e="";if(mt(t))e=t;else if(xe(t))for(let n=0;n<t.length;n++){const r=Ko(t[n]);r&&(e+=r+" ")}else if(ft(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Yc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xc=$o(Yc);function Vl(t){return!!t||t===""}const Wl=t=>!!(t&&t.__v_isRef===!0),St=t=>mt(t)?t:t==null?"":xe(t)||ft(t)&&(t.toString===Bl||!Ce(t.toString))?Wl(t)?St(t.value):JSON.stringify(t,zl,2):String(t),zl=(t,e)=>Wl(e)?zl(t,e.value):_r(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],a)=>(n[Gs(r,a)+" =>"]=s,n),{})}:Ul(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Gs(n))}:In(e)?Gs(e):ft(e)&&!xe(e)&&!Nl(e)?String(e):e,Gs=(t,e="")=>{var n;return In(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qt;class Zc{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qt,!e&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=qt;try{return qt=this,e()}finally{qt=n}}}on(){qt=this}off(){qt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function eh(){return qt}let st;const Qs=new WeakSet;class Jl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qt&&qt.active&&qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qs.has(this)&&(Qs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ql(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ba(this),Yl(this);const e=st,n=Xt;st=this,Xt=!0;try{return this.fn()}finally{Xl(this),st=e,Xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)qo(e);this.deps=this.depsTail=void 0,Ba(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){po(this)&&this.run()}get dirty(){return po(this)}}let Gl=0,yr;function Ql(t){t.flags|=8,t.next=yr,yr=t}function Bo(){Gl++}function No(){if(--Gl>0)return;let t;for(;yr;){let e=yr,n;for(;e;)e.flags&1||(e.flags&=-9),e=e.next;for(e=yr,yr=void 0;e;){if(n=e.next,e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Yl(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Xl(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),qo(r),th(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function po(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Zl(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Yr))return;t.globalVersion=Yr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!po(t)){t.flags&=-3;return}const n=st,r=Xt;st=t,Xt=!0;try{Yl(t);const s=t.fn(t._value);(e.version===0||Rn(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{st=n,Xt=r,Xl(t),t.flags&=-3}}function qo(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)qo(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function th(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Xt=!0;const eu=[];function $n(){eu.push(Xt),Xt=!1}function Ln(){const t=eu.pop();Xt=t===void 0?!0:t}function Ba(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=st;st=void 0;try{e()}finally{st=n}}}let Yr=0;class nh{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ho{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!st||!Xt||st===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==st)n=this.activeLink=new nh(st,this),st.deps?(n.prevDep=st.depsTail,st.depsTail.nextDep=n,st.depsTail=n):st.deps=st.depsTail=n,tu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=st.depsTail,n.nextDep=void 0,st.depsTail.nextDep=n,st.depsTail=n,st.deps===n&&(st.deps=r)}return n}trigger(e){this.version++,Yr++,this.notify(e)}notify(e){Bo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{No()}}}function tu(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)tu(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const go=new WeakMap,Xn=Symbol(""),yo=Symbol(""),Xr=Symbol("");function At(t,e,n){if(Xt&&st){let r=go.get(t);r||go.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ho),s.target=t,s.map=r,s.key=n),s.track()}}function pn(t,e,n,r,s,a){const l=go.get(t);if(!l){Yr++;return}const h=c=>{c&&c.trigger()};if(Bo(),e==="clear")l.forEach(h);else{const c=xe(t),y=c&&Mo(n);if(c&&n==="length"){const g=Number(r);l.forEach((b,R)=>{(R==="length"||R===Xr||!In(R)&&R>=g)&&h(b)})}else switch(n!==void 0&&h(l.get(n)),y&&h(l.get(Xr)),e){case"add":c?y&&h(l.get("length")):(h(l.get(Xn)),_r(t)&&h(l.get(yo)));break;case"delete":c||(h(l.get(Xn)),_r(t)&&h(l.get(yo)));break;case"set":_r(t)&&h(l.get(Xn));break}}No()}function cr(t){const e=Je(t);return e===t?e:(At(e,"iterate",Xr),zt(t)?e:e.map(Ot))}function es(t){return At(t=Je(t),"iterate",Xr),t}const rh={__proto__:null,[Symbol.iterator](){return Ys(this,Symbol.iterator,Ot)},concat(...t){return cr(this).concat(...t.map(e=>xe(e)?cr(e):e))},entries(){return Ys(this,"entries",t=>(t[1]=Ot(t[1]),t))},every(t,e){return cn(this,"every",t,e,void 0,arguments)},filter(t,e){return cn(this,"filter",t,e,n=>n.map(Ot),arguments)},find(t,e){return cn(this,"find",t,e,Ot,arguments)},findIndex(t,e){return cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cn(this,"findLast",t,e,Ot,arguments)},findLastIndex(t,e){return cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Xs(this,"includes",t)},indexOf(...t){return Xs(this,"indexOf",t)},join(t){return cr(this).join(t)},lastIndexOf(...t){return Xs(this,"lastIndexOf",t)},map(t,e){return cn(this,"map",t,e,void 0,arguments)},pop(){return Mr(this,"pop")},push(...t){return Mr(this,"push",t)},reduce(t,...e){return Na(this,"reduce",t,e)},reduceRight(t,...e){return Na(this,"reduceRight",t,e)},shift(){return Mr(this,"shift")},some(t,e){return cn(this,"some",t,e,void 0,arguments)},splice(...t){return Mr(this,"splice",t)},toReversed(){return cr(this).toReversed()},toSorted(t){return cr(this).toSorted(t)},toSpliced(...t){return cr(this).toSpliced(...t)},unshift(...t){return Mr(this,"unshift",t)},values(){return Ys(this,"values",Ot)}};function Ys(t,e,n){const r=es(t),s=r[e]();return r!==t&&!zt(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const ih=Array.prototype;function cn(t,e,n,r,s,a){const l=es(t),h=l!==t&&!zt(t),c=l[e];if(c!==ih[e]){const b=c.apply(t,a);return h?Ot(b):b}let y=n;l!==t&&(h?y=function(b,R){return n.call(this,Ot(b),R,t)}:n.length>2&&(y=function(b,R){return n.call(this,b,R,t)}));const g=c.call(l,y,r);return h&&s?s(g):g}function Na(t,e,n,r){const s=es(t);let a=n;return s!==t&&(zt(t)?n.length>3&&(a=function(l,h,c){return n.call(this,l,h,c,t)}):a=function(l,h,c){return n.call(this,l,Ot(h),c,t)}),s[e](a,...r)}function Xs(t,e,n){const r=Je(t);At(r,"iterate",Xr);const s=r[e](...n);return(s===-1||s===!1)&&Go(n[0])?(n[0]=Je(n[0]),r[e](...n)):s}function Mr(t,e,n=[]){$n(),Bo();const r=Je(t)[e].apply(t,n);return No(),Ln(),r}const sh=$o("__proto__,__v_isRef,__isVue"),nu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(In));function oh(t){In(t)||(t=String(t));const e=Je(this);return At(e,"has",t),e.hasOwnProperty(t)}class ru{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?_h:au:a?ou:su).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const l=xe(e);if(!s){let c;if(l&&(c=rh[n]))return c;if(n==="hasOwnProperty")return oh}const h=Reflect.get(e,n,Tt(e)?e:r);return(In(n)?nu.has(n):sh(n))||(s||At(e,"get",n),a)?h:Tt(h)?l&&Mo(n)?h:h.value:ft(h)?s?lu(h):zo(h):h}}class iu extends ru{constructor(e=!1){super(!1,e)}set(e,n,r,s){let a=e[n];if(!this._isShallow){const c=Zn(a);if(!zt(r)&&!Zn(r)&&(a=Je(a),r=Je(r)),!xe(e)&&Tt(a)&&!Tt(r))return c?!1:(a.value=r,!0)}const l=xe(e)&&Mo(n)?Number(n)<e.length:ze(e,n),h=Reflect.set(e,n,r,Tt(e)?e:s);return e===Je(s)&&(l?Rn(r,a)&&pn(e,"set",n,r):pn(e,"add",n,r)),h}deleteProperty(e,n){const r=ze(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&pn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!In(n)||!nu.has(n))&&At(e,"has",n),r}ownKeys(e){return At(e,"iterate",xe(e)?"length":Xn),Reflect.ownKeys(e)}}class ah extends ru{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const lh=new iu,uh=new ah,ch=new iu(!0);const Vo=t=>t,ts=t=>Reflect.getPrototypeOf(t);function Ai(t,e,n=!1,r=!1){t=t.__v_raw;const s=Je(t),a=Je(e);n||(Rn(e,a)&&At(s,"get",e),At(s,"get",a));const{has:l}=ts(s),h=r?Vo:n?Qo:Ot;if(l.call(s,e))return h(t.get(e));if(l.call(s,a))return h(t.get(a));t!==s&&t.get(e)}function ji(t,e=!1){const n=this.__v_raw,r=Je(n),s=Je(t);return e||(Rn(t,s)&&At(r,"has",t),At(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ri(t,e=!1){return t=t.__v_raw,!e&&At(Je(t),"iterate",Xn),Reflect.get(t,"size",t)}function qa(t,e=!1){!e&&!zt(t)&&!Zn(t)&&(t=Je(t));const n=Je(this);return ts(n).has.call(n,t)||(n.add(t),pn(n,"add",t,t)),this}function Ha(t,e,n=!1){!n&&!zt(e)&&!Zn(e)&&(e=Je(e));const r=Je(this),{has:s,get:a}=ts(r);let l=s.call(r,t);l||(t=Je(t),l=s.call(r,t));const h=a.call(r,t);return r.set(t,e),l?Rn(e,h)&&pn(r,"set",t,e):pn(r,"add",t,e),this}function Va(t){const e=Je(this),{has:n,get:r}=ts(e);let s=n.call(e,t);s||(t=Je(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&pn(e,"delete",t,void 0),a}function Wa(){const t=Je(this),e=t.size!==0,n=t.clear();return e&&pn(t,"clear",void 0,void 0),n}function Ii(t,e){return function(r,s){const a=this,l=a.__v_raw,h=Je(l),c=e?Vo:t?Qo:Ot;return!t&&At(h,"iterate",Xn),l.forEach((y,g)=>r.call(s,c(y),c(g),a))}}function Di(t,e,n){return function(...r){const s=this.__v_raw,a=Je(s),l=_r(a),h=t==="entries"||t===Symbol.iterator&&l,c=t==="keys"&&l,y=s[t](...r),g=n?Vo:e?Qo:Ot;return!e&&At(a,"iterate",c?yo:Xn),{next(){const{value:b,done:R}=y.next();return R?{value:b,done:R}:{value:h?[g(b[0]),g(b[1])]:g(b),done:R}},[Symbol.iterator](){return this}}}}function kn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function hh(){const t={get(a){return Ai(this,a)},get size(){return Ri(this)},has:ji,add:qa,set:Ha,delete:Va,clear:Wa,forEach:Ii(!1,!1)},e={get(a){return Ai(this,a,!1,!0)},get size(){return Ri(this)},has:ji,add(a){return qa.call(this,a,!0)},set(a,l){return Ha.call(this,a,l,!0)},delete:Va,clear:Wa,forEach:Ii(!1,!0)},n={get(a){return Ai(this,a,!0)},get size(){return Ri(this,!0)},has(a){return ji.call(this,a,!0)},add:kn("add"),set:kn("set"),delete:kn("delete"),clear:kn("clear"),forEach:Ii(!0,!1)},r={get(a){return Ai(this,a,!0,!0)},get size(){return Ri(this,!0)},has(a){return ji.call(this,a,!0)},add:kn("add"),set:kn("set"),delete:kn("delete"),clear:kn("clear"),forEach:Ii(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Di(a,!1,!1),n[a]=Di(a,!0,!1),e[a]=Di(a,!1,!0),r[a]=Di(a,!0,!0)}),[t,n,e,r]}const[fh,dh,ph,gh]=hh();function Wo(t,e){const n=e?t?gh:ph:t?dh:fh;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ze(n,s)&&s in r?n:r,s,a)}const yh={get:Wo(!1,!1)},mh={get:Wo(!1,!0)},vh={get:Wo(!0,!1)};const su=new WeakMap,ou=new WeakMap,au=new WeakMap,_h=new WeakMap;function bh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wh(t){return t.__v_skip||!Object.isExtensible(t)?0:bh(Hc(t))}function zo(t){return Zn(t)?t:Jo(t,!1,lh,yh,su)}function kh(t){return Jo(t,!1,ch,mh,ou)}function lu(t){return Jo(t,!0,uh,vh,au)}function Jo(t,e,n,r,s){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const l=wh(t);if(l===0)return t;const h=new Proxy(t,l===2?r:n);return s.set(t,h),h}function br(t){return Zn(t)?br(t.__v_raw):!!(t&&t.__v_isReactive)}function Zn(t){return!!(t&&t.__v_isReadonly)}function zt(t){return!!(t&&t.__v_isShallow)}function Go(t){return t?!!t.__v_raw:!1}function Je(t){const e=t&&t.__v_raw;return e?Je(e):t}function xh(t){return!ze(t,"__v_skip")&&Object.isExtensible(t)&&ql(t,"__v_skip",!0),t}const Ot=t=>ft(t)?zo(t):t,Qo=t=>ft(t)?lu(t):t;function Tt(t){return t?t.__v_isRef===!0:!1}function Gn(t){return Eh(t,!1)}function Eh(t,e){return Tt(t)?t:new Sh(t,e)}class Sh{constructor(e,n){this.dep=new Ho,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Je(e),this._value=n?e:Ot(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Zn(e);e=r?e:Je(e),Rn(e,n)&&(this._rawValue=e,this._value=r?e:Ot(e),this.dep.trigger())}}function Oh(t){return Tt(t)?t.value:t}const Ph={get:(t,e,n)=>e==="__v_raw"?t:Oh(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Tt(s)&&!Tt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function uu(t){return br(t)?t:new Proxy(t,Ph)}class Th{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ho(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Yr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&st!==this)return Ql(this),!0}get value(){const e=this.dep.track();return Zl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ch(t,e,n=!1){let r,s;return Ce(t)?r=t:(r=t.get,s=t.set),new Th(r,s,n)}const $i={},Vi=new WeakMap;let zn;function Ah(t,e=!1,n=zn){if(n){let r=Vi.get(n);r||Vi.set(n,r=[]),r.push(t)}}function jh(t,e,n=nt){const{immediate:r,deep:s,once:a,scheduler:l,augmentJob:h,call:c}=n,y=ce=>s?ce:zt(ce)||s===!1||s===0?fn(ce,1):fn(ce);let g,b,R,V,se=!1,Z=!1;if(Tt(t)?(b=()=>t.value,se=zt(t)):br(t)?(b=()=>y(t),se=!0):xe(t)?(Z=!0,se=t.some(ce=>br(ce)||zt(ce)),b=()=>t.map(ce=>{if(Tt(ce))return ce.value;if(br(ce))return y(ce);if(Ce(ce))return c?c(ce,2):ce()})):Ce(t)?e?b=c?()=>c(t,2):t:b=()=>{if(R){$n();try{R()}finally{Ln()}}const ce=zn;zn=g;try{return c?c(t,3,[V]):t(V)}finally{zn=ce}}:b=sn,e&&s){const ce=b,Le=s===!0?1/0:s;b=()=>fn(ce(),Le)}const fe=eh(),_e=()=>{g.stop(),fe&&Fo(fe.effects,g)};if(a&&e){const ce=e;e=(...Le)=>{ce(...Le),_e()}}let Ae=Z?new Array(t.length).fill($i):$i;const Se=ce=>{if(!(!(g.flags&1)||!g.dirty&&!ce))if(e){const Le=g.run();if(s||se||(Z?Le.some((Xe,be)=>Rn(Xe,Ae[be])):Rn(Le,Ae))){R&&R();const Xe=zn;zn=g;try{const be=[Le,Ae===$i?void 0:Z&&Ae[0]===$i?[]:Ae,V];c?c(e,3,be):e(...be),Ae=Le}finally{zn=Xe}}}else g.run()};return h&&h(Se),g=new Jl(b),g.scheduler=l?()=>l(Se,!1):Se,V=ce=>Ah(ce,!1,g),R=g.onStop=()=>{const ce=Vi.get(g);if(ce){if(c)c(ce,4);else for(const Le of ce)Le();Vi.delete(g)}},e?r?Se(!0):Ae=g.run():l?l(Se.bind(null,!0),!0):g.run(),_e.pause=g.pause.bind(g),_e.resume=g.resume.bind(g),_e.stop=_e,_e}function fn(t,e=1/0,n){if(e<=0||!ft(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Tt(t))fn(t.value,e,n);else if(xe(t))for(let r=0;r<t.length;r++)fn(t[r],e,n);else if(Ul(t)||_r(t))t.forEach(r=>{fn(r,e,n)});else if(Nl(t)){for(const r in t)fn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&fn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ri(t,e,n,r){try{return r?t(...r):t()}catch(s){ns(s,e,n)}}function on(t,e,n,r){if(Ce(t)){const s=ri(t,e,n,r);return s&&Kl(s)&&s.catch(a=>{ns(a,e,n)}),s}if(xe(t)){const s=[];for(let a=0;a<t.length;a++)s.push(on(t[a],e,n,r));return s}}function ns(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||nt;if(e){let h=e.parent;const c=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const g=h.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](t,c,y)===!1)return}h=h.parent}if(a){$n(),ri(a,null,10,[t,c,y]),Ln();return}}Rh(t,n,s,r,l)}function Rh(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}let Zr=!1,mo=!1;const Dt=[];let nn=0;const wr=[];let Pn=null,pr=0;const cu=Promise.resolve();let Yo=null;function Ih(t){const e=Yo||cu;return t?e.then(this?t.bind(this):t):e}function Dh(t){let e=Zr?nn+1:0,n=Dt.length;for(;e<n;){const r=e+n>>>1,s=Dt[r],a=ei(s);a<t||a===t&&s.flags&2?e=r+1:n=r}return e}function Xo(t){if(!(t.flags&1)){const e=ei(t),n=Dt[Dt.length-1];!n||!(t.flags&2)&&e>=ei(n)?Dt.push(t):Dt.splice(Dh(e),0,t),t.flags|=1,hu()}}function hu(){!Zr&&!mo&&(mo=!0,Yo=cu.then(du))}function $h(t){xe(t)?wr.push(...t):Pn&&t.id===-1?Pn.splice(pr+1,0,t):t.flags&1||(wr.push(t),t.flags|=1),hu()}function za(t,e,n=Zr?nn+1:0){for(;n<Dt.length;n++){const r=Dt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Dt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function fu(t){if(wr.length){const e=[...new Set(wr)].sort((n,r)=>ei(n)-ei(r));if(wr.length=0,Pn){Pn.push(...e);return}for(Pn=e,pr=0;pr<Pn.length;pr++){const n=Pn[pr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Pn=null,pr=0}}const ei=t=>t.id==null?t.flags&2?-1:1/0:t.id;function du(t){mo=!1,Zr=!0;try{for(nn=0;nn<Dt.length;nn++){const e=Dt[nn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ri(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nn<Dt.length;nn++){const e=Dt[nn];e&&(e.flags&=-2)}nn=0,Dt.length=0,fu(),Zr=!1,Yo=null,(Dt.length||wr.length)&&du()}}let Ht=null,pu=null;function Wi(t){const e=Ht;return Ht=t,pu=t&&t.type.__scopeId||null,e}function Lh(t,e=Ht,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&nl(-1);const a=Wi(e);let l;try{l=t(...s)}finally{Wi(a),r._d&&nl(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function xn(t,e){if(Ht===null)return t;const n=as(Ht),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,l,h,c=nt]=e[s];a&&(Ce(a)&&(a={mounted:a,updated:a}),a.deep&&fn(l),r.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:c}))}return t}function Hn(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const h=s[l];a&&(h.oldValue=a[l].value);let c=h.dir[r];c&&($n(),on(c,n,8,[t.el,h,t,e]),Ln())}}const Fh=Symbol("_vte"),Mh=t=>t.__isTeleport;function Zo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Zo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function vo(t,e,n,r,s=!1){if(xe(t)){t.forEach((se,Z)=>vo(se,e&&(xe(e)?e[Z]:e),n,r,s));return}if(Vr(r)&&!s)return;const a=r.shapeFlag&4?as(r.component):r.el,l=s?null:a,{i:h,r:c}=t,y=e&&e.r,g=h.refs===nt?h.refs={}:h.refs,b=h.setupState,R=Je(b),V=b===nt?()=>!1:se=>ze(R,se);if(y!=null&&y!==c&&(mt(y)?(g[y]=null,V(y)&&(b[y]=null)):Tt(y)&&(y.value=null)),Ce(c))ri(c,h,12,[l,g]);else{const se=mt(c),Z=Tt(c);if(se||Z){const fe=()=>{if(t.f){const _e=se?V(c)?b[c]:g[c]:c.value;s?xe(_e)&&Fo(_e,a):xe(_e)?_e.includes(a)||_e.push(a):se?(g[c]=[a],V(c)&&(b[c]=g[c])):(c.value=[a],t.k&&(g[t.k]=c.value))}else se?(g[c]=l,V(c)&&(b[c]=l)):Z&&(c.value=l,t.k&&(g[t.k]=l))};l?(fe.id=-1,Bt(fe,n)):fe()}}}const Vr=t=>!!t.type.__asyncLoader,yu=t=>t.type.__isKeepAlive;function Uh(t,e){mu(t,"a",e)}function Kh(t,e){mu(t,"da",e)}function mu(t,e,n=Pt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(rs(e,r,n),n){let s=n.parent;for(;s&&s.parent;)yu(s.parent.vnode)&&Bh(r,e,n,s),s=s.parent}}function Bh(t,e,n,r){const s=rs(e,t,r,!0);vu(()=>{Fo(r[e],s)},n)}function rs(t,e,n=Pt,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...l)=>{$n();const h=ii(n),c=on(e,n,t,l);return h(),Ln(),c});return r?s.unshift(a):s.push(a),a}}const gn=t=>(e,n=Pt)=>{(!os||t==="sp")&&rs(t,(...r)=>e(...r),n)},Nh=gn("bm"),ea=gn("m"),qh=gn("bu"),Hh=gn("u"),Vh=gn("bum"),vu=gn("um"),Wh=gn("sp"),zh=gn("rtg"),Jh=gn("rtc");function Gh(t,e=Pt){rs("ec",t,e)}const Qh="components";function _o(t,e){return Xh(Qh,t,!0,e)||t}const Yh=Symbol.for("v-ndc");function Xh(t,e,n=!0,r=!1){const s=Ht||Pt;if(s){const a=s.type;{const h=Kf(a,!1);if(h&&(h===e||h===Jt(e)||h===Zi(Jt(e))))return a}const l=Ja(s[t]||a[t],e)||Ja(s.appContext[t],e);return!l&&r?a:l}}function Ja(t,e){return t&&(t[e]||t[Jt(e)]||t[Zi(Jt(e))])}function Bi(t,e,n,r){let s;const a=n,l=xe(t);if(l||mt(t)){const h=l&&br(t);let c=!1;h&&(c=!zt(t),t=es(t)),s=new Array(t.length);for(let y=0,g=t.length;y<g;y++)s[y]=e(c?Ot(t[y]):t[y],y,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let h=0;h<t;h++)s[h]=e(h+1,h,void 0,a)}else if(ft(t))if(t[Symbol.iterator])s=Array.from(t,(h,c)=>e(h,c,void 0,a));else{const h=Object.keys(t);s=new Array(h.length);for(let c=0,y=h.length;c<y;c++){const g=h[c];s[c]=e(t[g],g,c,a)}}else s=[];return s}const bo=t=>t?Uu(t)?as(t):bo(t.parent):null,Wr=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>bo(t.parent),$root:t=>bo(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ta(t),$forceUpdate:t=>t.f||(t.f=()=>{Xo(t.update)}),$nextTick:t=>t.n||(t.n=Ih.bind(t.proxy)),$watch:t=>wf.bind(t)}),Zs=(t,e)=>t!==nt&&!t.__isScriptSetup&&ze(t,e),Zh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:l,type:h,appContext:c}=t;let y;if(e[0]!=="$"){const V=l[e];if(V!==void 0)switch(V){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(Zs(r,e))return l[e]=1,r[e];if(s!==nt&&ze(s,e))return l[e]=2,s[e];if((y=t.propsOptions[0])&&ze(y,e))return l[e]=3,a[e];if(n!==nt&&ze(n,e))return l[e]=4,n[e];wo&&(l[e]=0)}}const g=Wr[e];let b,R;if(g)return e==="$attrs"&&At(t.attrs,"get",""),g(t);if((b=h.__cssModules)&&(b=b[e]))return b;if(n!==nt&&ze(n,e))return l[e]=4,n[e];if(R=c.config.globalProperties,ze(R,e))return R[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;return Zs(s,e)?(s[e]=n,!0):r!==nt&&ze(r,e)?(r[e]=n,!0):ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},l){let h;return!!n[l]||t!==nt&&ze(t,l)||Zs(e,l)||(h=a[0])&&ze(h,l)||ze(r,l)||ze(Wr,l)||ze(s.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ga(t){return xe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let wo=!0;function ef(t){const e=ta(t),n=t.proxy,r=t.ctx;wo=!1,e.beforeCreate&&Qa(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:h,provide:c,inject:y,created:g,beforeMount:b,mounted:R,beforeUpdate:V,updated:se,activated:Z,deactivated:fe,beforeDestroy:_e,beforeUnmount:Ae,destroyed:Se,unmounted:ce,render:Le,renderTracked:Xe,renderTriggered:be,errorCaptured:I,serverPrefetch:j,expose:W,inheritAttrs:ue,components:he,directives:ye,filters:je}=e;if(y&&tf(y,r,null),l)for(const ee in l){const ve=l[ee];Ce(ve)&&(r[ee]=ve.bind(n))}if(s){const ee=s.call(n,n);ft(ee)&&(t.data=zo(ee))}if(wo=!0,a)for(const ee in a){const ve=a[ee],pe=Ce(ve)?ve.bind(n,n):Ce(ve.get)?ve.get.bind(n,n):sn,rt=!Ce(ve)&&Ce(ve.set)?ve.set.bind(n):sn,Ye=Nf({get:pe,set:rt});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>Ye.value,set:ae=>Ye.value=ae})}if(h)for(const ee in h)_u(h[ee],r,n,ee);if(c){const ee=Ce(c)?c.call(n):c;Reflect.ownKeys(ee).forEach(ve=>{lf(ve,ee[ve])})}g&&Qa(g,t,"c");function Oe(ee,ve){xe(ve)?ve.forEach(pe=>ee(pe.bind(n))):ve&&ee(ve.bind(n))}if(Oe(Nh,b),Oe(ea,R),Oe(qh,V),Oe(Hh,se),Oe(Uh,Z),Oe(Kh,fe),Oe(Gh,I),Oe(Jh,Xe),Oe(zh,be),Oe(Vh,Ae),Oe(vu,ce),Oe(Wh,j),xe(W))if(W.length){const ee=t.exposed||(t.exposed={});W.forEach(ve=>{Object.defineProperty(ee,ve,{get:()=>n[ve],set:pe=>n[ve]=pe})})}else t.exposed||(t.exposed={});Le&&t.render===sn&&(t.render=Le),ue!=null&&(t.inheritAttrs=ue),he&&(t.components=he),ye&&(t.directives=ye),j&&gu(t)}function tf(t,e,n=sn){xe(t)&&(t=ko(t));for(const r in t){const s=t[r];let a;ft(s)?"default"in s?a=Ni(s.from||r,s.default,!0):a=Ni(s.from||r):a=Ni(s),Tt(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[r]=a}}function Qa(t,e,n){on(xe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _u(t,e,n,r){let s=r.includes(".")?Iu(n,r):()=>n[r];if(mt(t)){const a=e[t];Ce(a)&&to(s,a)}else if(Ce(t))to(s,t.bind(n));else if(ft(t))if(xe(t))t.forEach(a=>_u(a,e,n,r));else{const a=Ce(t.handler)?t.handler.bind(n):e[t.handler];Ce(a)&&to(s,a,t)}}function ta(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,h=a.get(e);let c;return h?c=h:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(y=>zi(c,y,l,!0)),zi(c,e,l)),ft(e)&&a.set(e,c),c}function zi(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&zi(t,a,n,!0),s&&s.forEach(l=>zi(t,l,n,!0));for(const l in e)if(!(r&&l==="expose")){const h=nf[l]||n&&n[l];t[l]=h?h(t[l],e[l]):e[l]}return t}const nf={data:Ya,props:Xa,emits:Xa,methods:Nr,computed:Nr,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:Nr,directives:Nr,watch:sf,provide:Ya,inject:rf};function Ya(t,e){return e?t?function(){return Ct(Ce(t)?t.call(this,this):t,Ce(e)?e.call(this,this):e)}:e:t}function rf(t,e){return Nr(ko(t),ko(e))}function ko(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function Nr(t,e){return t?Ct(Object.create(null),t,e):e}function Xa(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:Ct(Object.create(null),Ga(t),Ga(e??{})):e}function sf(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const r in e)n[r]=It(t[r],e[r]);return n}function bu(){return{app:null,config:{isNativeTag:Nc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let of=0;function af(t,e){return function(r,s=null){Ce(r)||(r=Ct({},r)),s!=null&&!ft(s)&&(s=null);const a=bu(),l=new WeakSet,h=[];let c=!1;const y=a.app={_uid:of++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:qf,get config(){return a.config},set config(g){},use(g,...b){return l.has(g)||(g&&Ce(g.install)?(l.add(g),g.install(y,...b)):Ce(g)&&(l.add(g),g(y,...b))),y},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),y},component(g,b){return b?(a.components[g]=b,y):a.components[g]},directive(g,b){return b?(a.directives[g]=b,y):a.directives[g]},mount(g,b,R){if(!c){const V=y._ceVNode||$t(r,s);return V.appContext=a,R===!0?R="svg":R===!1&&(R=void 0),b&&e?e(V,g):t(V,g,R),c=!0,y._container=g,g.__vue_app__=y,as(V.component)}},onUnmount(g){h.push(g)},unmount(){c&&(on(h,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(g,b){return a.provides[g]=b,y},runWithContext(g){const b=kr;kr=y;try{return g()}finally{kr=b}}};return y}}let kr=null;function lf(t,e){if(Pt){let n=Pt.provides;const r=Pt.parent&&Pt.parent.provides;r===n&&(n=Pt.provides=Object.create(r)),n[t]=e}}function Ni(t,e,n=!1){const r=Pt||Ht;if(r||kr){const s=kr?kr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ce(e)?e.call(r&&r.proxy):e}}const wu={},ku=()=>Object.create(wu),xu=t=>Object.getPrototypeOf(t)===wu;function uf(t,e,n,r=!1){const s={},a=ku();t.propsDefaults=Object.create(null),Eu(t,e,s,a);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);n?t.props=r?s:kh(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function cf(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,h=Je(s),[c]=t.propsOptions;let y=!1;if((r||l>0)&&!(l&16)){if(l&8){const g=t.vnode.dynamicProps;for(let b=0;b<g.length;b++){let R=g[b];if(is(t.emitsOptions,R))continue;const V=e[R];if(c)if(ze(a,R))V!==a[R]&&(a[R]=V,y=!0);else{const se=Jt(R);s[se]=xo(c,h,se,V,t,!1)}else V!==a[R]&&(a[R]=V,y=!0)}}}else{Eu(t,e,s,a)&&(y=!0);let g;for(const b in h)(!e||!ze(e,b)&&((g=Dn(b))===b||!ze(e,g)))&&(c?n&&(n[b]!==void 0||n[g]!==void 0)&&(s[b]=xo(c,h,b,void 0,t,!0)):delete s[b]);if(a!==h)for(const b in a)(!e||!ze(e,b))&&(delete a[b],y=!0)}y&&pn(t.attrs,"set","")}function Eu(t,e,n,r){const[s,a]=t.propsOptions;let l=!1,h;if(e)for(let c in e){if(Hr(c))continue;const y=e[c];let g;s&&ze(s,g=Jt(c))?!a||!a.includes(g)?n[g]=y:(h||(h={}))[g]=y:is(t.emitsOptions,c)||(!(c in r)||y!==r[c])&&(r[c]=y,l=!0)}if(a){const c=Je(n),y=h||nt;for(let g=0;g<a.length;g++){const b=a[g];n[b]=xo(s,c,b,y[b],t,!ze(y,b))}}return l}function xo(t,e,n,r,s,a){const l=t[n];if(l!=null){const h=ze(l,"default");if(h&&r===void 0){const c=l.default;if(l.type!==Function&&!l.skipFactory&&Ce(c)){const{propsDefaults:y}=s;if(n in y)r=y[n];else{const g=ii(s);r=y[n]=c.call(null,e),g()}}else r=c;s.ce&&s.ce._setProp(n,r)}l[0]&&(a&&!h?r=!1:l[1]&&(r===""||r===Dn(n))&&(r=!0))}return r}const hf=new WeakMap;function Su(t,e,n=!1){const r=n?hf:e.propsCache,s=r.get(t);if(s)return s;const a=t.props,l={},h=[];let c=!1;if(!Ce(t)){const g=b=>{c=!0;const[R,V]=Su(b,e,!0);Ct(l,R),V&&h.push(...V)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!c)return ft(t)&&r.set(t,vr),vr;if(xe(a))for(let g=0;g<a.length;g++){const b=Jt(a[g]);Za(b)&&(l[b]=nt)}else if(a)for(const g in a){const b=Jt(g);if(Za(b)){const R=a[g],V=l[b]=xe(R)||Ce(R)?{type:R}:Ct({},R),se=V.type;let Z=!1,fe=!0;if(xe(se))for(let _e=0;_e<se.length;++_e){const Ae=se[_e],Se=Ce(Ae)&&Ae.name;if(Se==="Boolean"){Z=!0;break}else Se==="String"&&(fe=!1)}else Z=Ce(se)&&se.name==="Boolean";V[0]=Z,V[1]=fe,(Z||ze(V,"default"))&&h.push(b)}}const y=[l,h];return ft(t)&&r.set(t,y),y}function Za(t){return t[0]!=="$"&&!Hr(t)}const Ou=t=>t[0]==="_"||t==="$stable",na=t=>xe(t)?t.map(rn):[rn(t)],ff=(t,e,n)=>{if(e._n)return e;const r=Lh((...s)=>na(e(...s)),n);return r._c=!1,r},Pu=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ou(s))continue;const a=t[s];if(Ce(a))e[s]=ff(s,a,r);else if(a!=null){const l=na(a);e[s]=()=>l}}},Tu=(t,e)=>{const n=na(e);t.slots.default=()=>n},Cu=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},df=(t,e,n)=>{const r=t.slots=ku();if(t.vnode.shapeFlag&32){const s=e._;s?(Cu(r,e,n),n&&ql(r,"_",s,!0)):Pu(e,r)}else e&&Tu(t,e)},pf=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,l=nt;if(r.shapeFlag&32){const h=e._;h?n&&h===1?a=!1:Cu(s,e,n):(a=!e.$stable,Pu(e,s)),l=e}else e&&(Tu(t,e),l={default:1});if(a)for(const h in s)!Ou(h)&&l[h]==null&&delete s[h]},Bt=Tf;function gf(t){return yf(t)}function yf(t,e){const n=Hl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:h,createComment:c,setText:y,setElementText:g,parentNode:b,nextSibling:R,setScopeId:V=sn,insertStaticContent:se}=t,Z=(v,k,D,M=null,B=null,N=null,X=void 0,J=null,H=!!k.dynamicChildren)=>{if(v===k)return;v&&!Ur(v,k)&&(M=Ze(v),ae(v,B,N,!0),v=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:K,ref:oe,shapeFlag:te}=k;switch(K){case ss:fe(v,k,D,M);break;case er:_e(v,k,D,M);break;case ro:v==null&&Ae(k,D,M,X);break;case Mt:he(v,k,D,M,B,N,X,J,H);break;default:te&1?Le(v,k,D,M,B,N,X,J,H):te&6?ye(v,k,D,M,B,N,X,J,H):(te&64||te&128)&&K.process(v,k,D,M,B,N,X,J,H,Fe)}oe!=null&&B&&vo(oe,v&&v.ref,N,k||v,!k)},fe=(v,k,D,M)=>{if(v==null)r(k.el=h(k.children),D,M);else{const B=k.el=v.el;k.children!==v.children&&y(B,k.children)}},_e=(v,k,D,M)=>{v==null?r(k.el=c(k.children||""),D,M):k.el=v.el},Ae=(v,k,D,M)=>{[v.el,v.anchor]=se(v.children,k,D,M,v.el,v.anchor)},Se=({el:v,anchor:k},D,M)=>{let B;for(;v&&v!==k;)B=R(v),r(v,D,M),v=B;r(k,D,M)},ce=({el:v,anchor:k})=>{let D;for(;v&&v!==k;)D=R(v),s(v),v=D;s(k)},Le=(v,k,D,M,B,N,X,J,H)=>{k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),v==null?Xe(k,D,M,B,N,X,J,H):j(v,k,B,N,X,J,H)},Xe=(v,k,D,M,B,N,X,J)=>{let H,K;const{props:oe,shapeFlag:te,transition:Y,dirs:ge}=v;if(H=v.el=l(v.type,N,oe&&oe.is,oe),te&8?g(H,v.children):te&16&&I(v.children,H,null,M,B,eo(v,N),X,J),ge&&Hn(v,null,M,"created"),be(H,v,v.scopeId,X,M),oe){for(const Re in oe)Re!=="value"&&!Hr(Re)&&a(H,Re,null,oe[Re],N,M);"value"in oe&&a(H,"value",null,oe.value,N),(K=oe.onVnodeBeforeMount)&&tn(K,M,v)}ge&&Hn(v,null,M,"beforeMount");const ke=mf(B,Y);ke&&Y.beforeEnter(H),r(H,k,D),((K=oe&&oe.onVnodeMounted)||ke||ge)&&Bt(()=>{K&&tn(K,M,v),ke&&Y.enter(H),ge&&Hn(v,null,M,"mounted")},B)},be=(v,k,D,M,B)=>{if(D&&V(v,D),M)for(let N=0;N<M.length;N++)V(v,M[N]);if(B){let N=B.subTree;if(k===N||$u(N.type)&&(N.ssContent===k||N.ssFallback===k)){const X=B.vnode;be(v,X,X.scopeId,X.slotScopeIds,B.parent)}}},I=(v,k,D,M,B,N,X,J,H=0)=>{for(let K=H;K<v.length;K++){const oe=v[K]=J?Tn(v[K]):rn(v[K]);Z(null,oe,k,D,M,B,N,X,J)}},j=(v,k,D,M,B,N,X)=>{const J=k.el=v.el;let{patchFlag:H,dynamicChildren:K,dirs:oe}=k;H|=v.patchFlag&16;const te=v.props||nt,Y=k.props||nt;let ge;if(D&&Vn(D,!1),(ge=Y.onVnodeBeforeUpdate)&&tn(ge,D,k,v),oe&&Hn(k,v,D,"beforeUpdate"),D&&Vn(D,!0),(te.innerHTML&&Y.innerHTML==null||te.textContent&&Y.textContent==null)&&g(J,""),K?W(v.dynamicChildren,K,J,D,M,eo(k,B),N):X||ve(v,k,J,null,D,M,eo(k,B),N,!1),H>0){if(H&16)ue(J,te,Y,D,B);else if(H&2&&te.class!==Y.class&&a(J,"class",null,Y.class,B),H&4&&a(J,"style",te.style,Y.style,B),H&8){const ke=k.dynamicProps;for(let Re=0;Re<ke.length;Re++){const Pe=ke[Re],et=te[Pe],Be=Y[Pe];(Be!==et||Pe==="value")&&a(J,Pe,et,Be,B,D)}}H&1&&v.children!==k.children&&g(J,k.children)}else!X&&K==null&&ue(J,te,Y,D,B);((ge=Y.onVnodeUpdated)||oe)&&Bt(()=>{ge&&tn(ge,D,k,v),oe&&Hn(k,v,D,"updated")},M)},W=(v,k,D,M,B,N,X)=>{for(let J=0;J<k.length;J++){const H=v[J],K=k[J],oe=H.el&&(H.type===Mt||!Ur(H,K)||H.shapeFlag&70)?b(H.el):D;Z(H,K,oe,null,M,B,N,X,!0)}},ue=(v,k,D,M,B)=>{if(k!==D){if(k!==nt)for(const N in k)!Hr(N)&&!(N in D)&&a(v,N,k[N],null,B,M);for(const N in D){if(Hr(N))continue;const X=D[N],J=k[N];X!==J&&N!=="value"&&a(v,N,J,X,B,M)}"value"in D&&a(v,"value",k.value,D.value,B)}},he=(v,k,D,M,B,N,X,J,H)=>{const K=k.el=v?v.el:h(""),oe=k.anchor=v?v.anchor:h("");let{patchFlag:te,dynamicChildren:Y,slotScopeIds:ge}=k;ge&&(J=J?J.concat(ge):ge),v==null?(r(K,D,M),r(oe,D,M),I(k.children||[],D,oe,B,N,X,J,H)):te>0&&te&64&&Y&&v.dynamicChildren?(W(v.dynamicChildren,Y,D,B,N,X,J),(k.key!=null||B&&k===B.subTree)&&Au(v,k,!0)):ve(v,k,D,oe,B,N,X,J,H)},ye=(v,k,D,M,B,N,X,J,H)=>{k.slotScopeIds=J,v==null?k.shapeFlag&512?B.ctx.activate(k,D,M,X,H):je(k,D,M,B,N,X,H):lt(v,k,H)},je=(v,k,D,M,B,N,X)=>{const J=v.component=$f(v,M,B);if(yu(v)&&(J.ctx.renderer=Fe),Lf(J,!1,X),J.asyncDep){if(B&&B.registerDep(J,Oe,X),!v.el){const H=J.subTree=$t(er);_e(null,H,k,D)}}else Oe(J,v,k,D,B,N,X)},lt=(v,k,D)=>{const M=k.component=v.component;if(Of(v,k,D))if(M.asyncDep&&!M.asyncResolved){ee(M,k,D);return}else M.next=k,M.update();else k.el=v.el,M.vnode=k},Oe=(v,k,D,M,B,N,X)=>{const J=()=>{if(v.isMounted){let{next:te,bu:Y,u:ge,parent:ke,vnode:Re}=v;{const dt=ju(v);if(dt){te&&(te.el=Re.el,ee(v,te,X)),dt.asyncDep.then(()=>{v.isUnmounted||J()});return}}let Pe=te,et;Vn(v,!1),te?(te.el=Re.el,ee(v,te,X)):te=Re,Y&&Ki(Y),(et=te.props&&te.props.onVnodeBeforeUpdate)&&tn(et,ke,te,Re),Vn(v,!0);const Be=no(v),Qe=v.subTree;v.subTree=Be,Z(Qe,Be,b(Qe.el),Ze(Qe),v,B,N),te.el=Be.el,Pe===null&&Pf(v,Be.el),ge&&Bt(ge,B),(et=te.props&&te.props.onVnodeUpdated)&&Bt(()=>tn(et,ke,te,Re),B)}else{let te;const{el:Y,props:ge}=k,{bm:ke,m:Re,parent:Pe,root:et,type:Be}=v,Qe=Vr(k);if(Vn(v,!1),ke&&Ki(ke),!Qe&&(te=ge&&ge.onVnodeBeforeMount)&&tn(te,Pe,k),Vn(v,!0),Y&&we){const dt=()=>{v.subTree=no(v),we(Y,v.subTree,v,B,null)};Qe&&Be.__asyncHydrate?Be.__asyncHydrate(Y,v,dt):dt()}else{et.ce&&et.ce._injectChildStyle(Be);const dt=v.subTree=no(v);Z(null,dt,D,M,v,B,N),k.el=dt.el}if(Re&&Bt(Re,B),!Qe&&(te=ge&&ge.onVnodeMounted)){const dt=k;Bt(()=>tn(te,Pe,dt),B)}(k.shapeFlag&256||Pe&&Vr(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&v.a&&Bt(v.a,B),v.isMounted=!0,k=D=M=null}};v.scope.on();const H=v.effect=new Jl(J);v.scope.off();const K=v.update=H.run.bind(H),oe=v.job=H.runIfDirty.bind(H);oe.i=v,oe.id=v.uid,H.scheduler=()=>Xo(oe),Vn(v,!0),K()},ee=(v,k,D)=>{k.component=v;const M=v.vnode.props;v.vnode=k,v.next=null,cf(v,k.props,M,D),pf(v,k.children,D),$n(),za(v),Ln()},ve=(v,k,D,M,B,N,X,J,H=!1)=>{const K=v&&v.children,oe=v?v.shapeFlag:0,te=k.children,{patchFlag:Y,shapeFlag:ge}=k;if(Y>0){if(Y&128){rt(K,te,D,M,B,N,X,J,H);return}else if(Y&256){pe(K,te,D,M,B,N,X,J,H);return}}ge&8?(oe&16&&We(K,B,N),te!==K&&g(D,te)):oe&16?ge&16?rt(K,te,D,M,B,N,X,J,H):We(K,B,N,!0):(oe&8&&g(D,""),ge&16&&I(te,D,M,B,N,X,J,H))},pe=(v,k,D,M,B,N,X,J,H)=>{v=v||vr,k=k||vr;const K=v.length,oe=k.length,te=Math.min(K,oe);let Y;for(Y=0;Y<te;Y++){const ge=k[Y]=H?Tn(k[Y]):rn(k[Y]);Z(v[Y],ge,D,null,B,N,X,J,H)}K>oe?We(v,B,N,!0,!1,te):I(k,D,M,B,N,X,J,H,te)},rt=(v,k,D,M,B,N,X,J,H)=>{let K=0;const oe=k.length;let te=v.length-1,Y=oe-1;for(;K<=te&&K<=Y;){const ge=v[K],ke=k[K]=H?Tn(k[K]):rn(k[K]);if(Ur(ge,ke))Z(ge,ke,D,null,B,N,X,J,H);else break;K++}for(;K<=te&&K<=Y;){const ge=v[te],ke=k[Y]=H?Tn(k[Y]):rn(k[Y]);if(Ur(ge,ke))Z(ge,ke,D,null,B,N,X,J,H);else break;te--,Y--}if(K>te){if(K<=Y){const ge=Y+1,ke=ge<oe?k[ge].el:M;for(;K<=Y;)Z(null,k[K]=H?Tn(k[K]):rn(k[K]),D,ke,B,N,X,J,H),K++}}else if(K>Y)for(;K<=te;)ae(v[K],B,N,!0),K++;else{const ge=K,ke=K,Re=new Map;for(K=ke;K<=Y;K++){const ht=k[K]=H?Tn(k[K]):rn(k[K]);ht.key!=null&&Re.set(ht.key,K)}let Pe,et=0;const Be=Y-ke+1;let Qe=!1,dt=0;const tt=new Array(Be);for(K=0;K<Be;K++)tt[K]=0;for(K=ge;K<=te;K++){const ht=v[K];if(et>=Be){ae(ht,B,N,!0);continue}let _t;if(ht.key!=null)_t=Re.get(ht.key);else for(Pe=ke;Pe<=Y;Pe++)if(tt[Pe-ke]===0&&Ur(ht,k[Pe])){_t=Pe;break}_t===void 0?ae(ht,B,N,!0):(tt[_t-ke]=K+1,_t>=dt?dt=_t:Qe=!0,Z(ht,k[_t],D,null,B,N,X,J,H),et++)}const de=Qe?vf(tt):vr;for(Pe=de.length-1,K=Be-1;K>=0;K--){const ht=ke+K,_t=k[ht],Fn=ht+1<oe?k[ht+1].el:M;tt[K]===0?Z(null,_t,D,Fn,B,N,X,J,H):Qe&&(Pe<0||K!==de[Pe]?Ye(_t,D,Fn,2):Pe--)}}},Ye=(v,k,D,M,B=null)=>{const{el:N,type:X,transition:J,children:H,shapeFlag:K}=v;if(K&6){Ye(v.component.subTree,k,D,M);return}if(K&128){v.suspense.move(k,D,M);return}if(K&64){X.move(v,k,D,Fe);return}if(X===Mt){r(N,k,D);for(let te=0;te<H.length;te++)Ye(H[te],k,D,M);r(v.anchor,k,D);return}if(X===ro){Se(v,k,D);return}if(M!==2&&K&1&&J)if(M===0)J.beforeEnter(N),r(N,k,D),Bt(()=>J.enter(N),B);else{const{leave:te,delayLeave:Y,afterLeave:ge}=J,ke=()=>r(N,k,D),Re=()=>{te(N,()=>{ke(),ge&&ge()})};Y?Y(N,ke,Re):Re()}else r(N,k,D)},ae=(v,k,D,M=!1,B=!1)=>{const{type:N,props:X,ref:J,children:H,dynamicChildren:K,shapeFlag:oe,patchFlag:te,dirs:Y,cacheIndex:ge}=v;if(te===-2&&(B=!1),J!=null&&vo(J,null,D,v,!0),ge!=null&&(k.renderCache[ge]=void 0),oe&256){k.ctx.deactivate(v);return}const ke=oe&1&&Y,Re=!Vr(v);let Pe;if(Re&&(Pe=X&&X.onVnodeBeforeUnmount)&&tn(Pe,k,v),oe&6)Ge(v.component,D,M);else{if(oe&128){v.suspense.unmount(D,M);return}ke&&Hn(v,null,k,"beforeUnmount"),oe&64?v.type.remove(v,k,D,Fe,M):K&&!K.hasOnce&&(N!==Mt||te>0&&te&64)?We(K,k,D,!1,!0):(N===Mt&&te&384||!B&&oe&16)&&We(H,k,D),M&&Ke(v)}(Re&&(Pe=X&&X.onVnodeUnmounted)||ke)&&Bt(()=>{Pe&&tn(Pe,k,v),ke&&Hn(v,null,k,"unmounted")},D)},Ke=v=>{const{type:k,el:D,anchor:M,transition:B}=v;if(k===Mt){pt(D,M);return}if(k===ro){ce(v);return}const N=()=>{s(D),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(v.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:J}=B,H=()=>X(D,N);J?J(v.el,N,H):H()}else N()},pt=(v,k)=>{let D;for(;v!==k;)D=R(v),s(v),v=D;s(k)},Ge=(v,k,D)=>{const{bum:M,scope:B,job:N,subTree:X,um:J,m:H,a:K}=v;el(H),el(K),M&&Ki(M),B.stop(),N&&(N.flags|=8,ae(X,v,k,D)),J&&Bt(J,k),Bt(()=>{v.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},We=(v,k,D,M=!1,B=!1,N=0)=>{for(let X=N;X<v.length;X++)ae(v[X],k,D,M,B)},Ze=v=>{if(v.shapeFlag&6)return Ze(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=R(v.anchor||v.el),D=k&&k[Fh];return D?R(D):k};let ut=!1;const q=(v,k,D)=>{v==null?k._vnode&&ae(k._vnode,null,null,!0):Z(k._vnode||null,v,k,null,null,null,D),k._vnode=v,ut||(ut=!0,za(),fu(),ut=!1)},Fe={p:Z,um:ae,m:Ye,r:Ke,mt:je,mc:I,pc:ve,pbc:W,n:Ze,o:t};let Ve,we;return{render:q,hydrate:Ve,createApp:af(q,Ve)}}function eo({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Au(t,e,n=!1){const r=t.children,s=e.children;if(xe(r)&&xe(s))for(let a=0;a<r.length;a++){const l=r[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=Tn(s[a]),h.el=l.el),!n&&h.patchFlag!==-2&&Au(l,h)),h.type===ss&&(h.el=l.el)}}function vf(t){const e=t.slice(),n=[0];let r,s,a,l,h;const c=t.length;for(r=0;r<c;r++){const y=t[r];if(y!==0){if(s=n[n.length-1],t[s]<y){e[r]=s,n.push(r);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,t[n[h]]<y?a=h+1:l=h;y<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}function ju(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ju(e)}function el(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _f=Symbol.for("v-scx"),bf=()=>Ni(_f);function to(t,e,n){return Ru(t,e,n)}function Ru(t,e,n=nt){const{immediate:r,deep:s,flush:a,once:l}=n,h=Ct({},n);let c;if(os)if(a==="sync"){const R=bf();c=R.__watcherHandles||(R.__watcherHandles=[])}else if(!e||r)h.once=!0;else{const R=()=>{};return R.stop=sn,R.resume=sn,R.pause=sn,R}const y=Pt;h.call=(R,V,se)=>on(R,y,V,se);let g=!1;a==="post"?h.scheduler=R=>{Bt(R,y&&y.suspense)}:a!=="sync"&&(g=!0,h.scheduler=(R,V)=>{V?R():Xo(R)}),h.augmentJob=R=>{e&&(R.flags|=4),g&&(R.flags|=2,y&&(R.id=y.uid,R.i=y))};const b=jh(t,e,h);return c&&c.push(b),b}function wf(t,e,n){const r=this.proxy,s=mt(t)?t.includes(".")?Iu(r,t):()=>r[t]:t.bind(r,r);let a;Ce(e)?a=e:(a=e.handler,n=e);const l=ii(this),h=Ru(s,a.bind(r),n);return l(),h}function Iu(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const kf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Dn(e)}Modifiers`];function xf(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||nt;let s=n;const a=e.startsWith("update:"),l=a&&kf(r,e.slice(7));l&&(l.trim&&(s=n.map(g=>mt(g)?g.trim():g)),l.number&&(s=n.map(fo)));let h,c=r[h=Js(e)]||r[h=Js(Jt(e))];!c&&a&&(c=r[h=Js(Dn(e))]),c&&on(c,t,6,s);const y=r[h+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,on(y,t,6,s)}}function Du(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let l={},h=!1;if(!Ce(t)){const c=y=>{const g=Du(y,e,!0);g&&(h=!0,Ct(l,g))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!a&&!h?(ft(t)&&r.set(t,null),null):(xe(a)?a.forEach(c=>l[c]=null):Ct(l,a),ft(t)&&r.set(t,l),l)}function is(t,e){return!t||!Qi(e)?!1:(e=e.slice(2).replace(/Once$/,""),ze(t,e[0].toLowerCase()+e.slice(1))||ze(t,Dn(e))||ze(t,e))}function no(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:l,attrs:h,emit:c,render:y,renderCache:g,props:b,data:R,setupState:V,ctx:se,inheritAttrs:Z}=t,fe=Wi(t);let _e,Ae;try{if(n.shapeFlag&4){const ce=s||r,Le=ce;_e=rn(y.call(Le,ce,g,b,V,R,se)),Ae=h}else{const ce=e;_e=rn(ce.length>1?ce(b,{attrs:h,slots:l,emit:c}):ce(b,null)),Ae=e.props?h:Ef(h)}}catch(ce){zr.length=0,ns(ce,t,1),_e=$t(er)}let Se=_e;if(Ae&&Z!==!1){const ce=Object.keys(Ae),{shapeFlag:Le}=Se;ce.length&&Le&7&&(a&&ce.some(Lo)&&(Ae=Sf(Ae,a)),Se=Er(Se,Ae,!1,!0))}return n.dirs&&(Se=Er(Se,null,!1,!0),Se.dirs=Se.dirs?Se.dirs.concat(n.dirs):n.dirs),n.transition&&Zo(Se,n.transition),_e=Se,Wi(fe),_e}const Ef=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qi(n))&&((e||(e={}))[n]=t[n]);return e},Sf=(t,e)=>{const n={};for(const r in t)(!Lo(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Of(t,e,n){const{props:r,children:s,component:a}=t,{props:l,children:h,patchFlag:c}=e,y=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?tl(r,l,y):!!l;if(c&8){const g=e.dynamicProps;for(let b=0;b<g.length;b++){const R=g[b];if(l[R]!==r[R]&&!is(y,R))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:r===l?!1:r?l?tl(r,l,y):!0:!!l;return!1}function tl(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!is(n,a))return!0}return!1}function Pf({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const $u=t=>t.__isSuspense;function Tf(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):$h(t)}const Mt=Symbol.for("v-fgt"),ss=Symbol.for("v-txt"),er=Symbol.for("v-cmt"),ro=Symbol.for("v-stc"),zr=[];let Vt=null;function He(t=!1){zr.push(Vt=t?null:[])}function Cf(){zr.pop(),Vt=zr[zr.length-1]||null}let ti=1;function nl(t){ti+=t,t<0&&Vt&&(Vt.hasOnce=!0)}function Lu(t){return t.dynamicChildren=ti>0?Vt||vr:null,Cf(),ti>0&&Vt&&Vt.push(t),t}function ot(t,e,n,r,s,a){return Lu(me(t,e,n,r,s,a,!0))}function mr(t,e,n,r,s){return Lu($t(t,e,n,r,s,!0))}function Fu(t){return t?t.__v_isVNode===!0:!1}function Ur(t,e){return t.type===e.type&&t.key===e.key}const Mu=({key:t})=>t??null,qi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?mt(t)||Tt(t)||Ce(t)?{i:Ht,r:t,k:e,f:!!n}:t:null);function me(t,e=null,n=null,r=0,s=null,a=t===Mt?0:1,l=!1,h=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mu(e),ref:e&&qi(e),scopeId:pu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return h?(ra(c,n),a&128&&t.normalize(c)):n&&(c.shapeFlag|=mt(n)?8:16),ti>0&&!l&&Vt&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Vt.push(c),c}const $t=Af;function Af(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===Yh)&&(t=er),Fu(t)){const h=Er(t,e,!0);return n&&ra(h,n),ti>0&&!a&&Vt&&(h.shapeFlag&6?Vt[Vt.indexOf(t)]=h:Vt.push(h)),h.patchFlag=-2,h}if(Bf(t)&&(t=t.__vccOpts),e){e=jf(e);let{class:h,style:c}=e;h&&!mt(h)&&(e.class=Ko(h)),ft(c)&&(Go(c)&&!xe(c)&&(c=Ct({},c)),e.style=Uo(c))}const l=mt(t)?1:$u(t)?128:Mh(t)?64:ft(t)?4:Ce(t)?2:0;return me(t,e,n,r,s,l,a,!0)}function jf(t){return t?Go(t)||xu(t)?Ct({},t):t:null}function Er(t,e,n=!1,r=!1){const{props:s,ref:a,patchFlag:l,children:h,transition:c}=t,y=e?Rf(s||{},e):s,g={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Mu(y),ref:e&&e.ref?n&&a?xe(a)?a.concat(qi(e)):[a,qi(e)]:qi(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mt?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Zo(g,c.clone(g)),g}function dn(t=" ",e=0){return $t(ss,null,t,e)}function vt(t="",e=!1){return e?(He(),mr(er,null,t)):$t(er,null,t)}function rn(t){return t==null||typeof t=="boolean"?$t(er):xe(t)?$t(Mt,null,t.slice()):Fu(t)?Tn(t):$t(ss,null,String(t))}function Tn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function ra(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(xe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ra(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!xu(e)?e._ctx=Ht:s===3&&Ht&&(Ht.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ce(e)?(e={default:e,_ctx:Ht},n=32):(e=String(e),r&64?(n=16,e=[dn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rf(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ko([e.class,r.class]));else if(s==="style")e.style=Uo([e.style,r.style]);else if(Qi(s)){const a=e[s],l=r[s];l&&a!==l&&!(xe(a)&&a.includes(l))&&(e[s]=a?[].concat(a,l):l)}else s!==""&&(e[s]=r[s])}return e}function tn(t,e,n,r=null){on(t,e,7,[n,r])}const If=bu();let Df=0;function $f(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||If,a={uid:Df++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Su(r,s),emitsOptions:Du(r,s),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:r.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=xf.bind(null,a),t.ce&&t.ce(a),a}let Pt=null,Ji,Eo;{const t=Hl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};Ji=e("__VUE_INSTANCE_SETTERS__",n=>Pt=n),Eo=e("__VUE_SSR_SETTERS__",n=>os=n)}const ii=t=>{const e=Pt;return Ji(t),t.scope.on(),()=>{t.scope.off(),Ji(e)}},rl=()=>{Pt&&Pt.scope.off(),Ji(null)};function Uu(t){return t.vnode.shapeFlag&4}let os=!1;function Lf(t,e=!1,n=!1){e&&Eo(e);const{props:r,children:s}=t.vnode,a=Uu(t);uf(t,r,a,e),df(t,s,n);const l=a?Ff(t,e):void 0;return e&&Eo(!1),l}function Ff(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Zh);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Uf(t):null,a=ii(t);$n();const l=ri(r,t,0,[t.props,s]);if(Ln(),a(),Kl(l)){if(Vr(t)||gu(t),l.then(rl,rl),e)return l.then(h=>{il(t,h,e)}).catch(h=>{ns(h,t,0)});t.asyncDep=l}else il(t,l,e)}else Ku(t,e)}function il(t,e,n){Ce(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=uu(e)),Ku(t,n)}let sl;function Ku(t,e,n){const r=t.type;if(!t.render){if(!e&&sl&&!r.render){const s=r.template||ta(t).template;if(s){const{isCustomElement:a,compilerOptions:l}=t.appContext.config,{delimiters:h,compilerOptions:c}=r,y=Ct(Ct({isCustomElement:a,delimiters:h},l),c);r.render=sl(s,y)}}t.render=r.render||sn}{const s=ii(t);$n();try{ef(t)}finally{Ln(),s()}}}const Mf={get(t,e){return At(t,"get",""),t[e]}};function Uf(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Mf),slots:t.slots,emit:t.emit,expose:e}}function as(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(uu(xh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Wr)return Wr[n](t)},has(e,n){return n in e||n in Wr}})):t.proxy}function Kf(t,e=!0){return Ce(t)?t.displayName||t.name:t.name||e&&t.__name}function Bf(t){return Ce(t)&&"__vccOpts"in t}const Nf=(t,e)=>Ch(t,e,os),qf="3.5.10";/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let So;const ol=typeof window<"u"&&window.trustedTypes;if(ol)try{So=ol.createPolicy("vue",{createHTML:t=>t})}catch{}const Bu=So?t=>So.createHTML(t):t=>t,Hf="http://www.w3.org/2000/svg",Vf="http://www.w3.org/1998/Math/MathML",hn=typeof document<"u"?document:null,al=hn&&hn.createElement("template"),Wf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?hn.createElementNS(Hf,t):e==="mathml"?hn.createElementNS(Vf,t):n?hn.createElement(t,{is:n}):hn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>hn.createTextNode(t),createComment:t=>hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,a){const l=n?n.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{al.innerHTML=Bu(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const h=al.content;if(r==="svg"||r==="mathml"){const c=h.firstChild;for(;c.firstChild;)h.appendChild(c.firstChild);h.removeChild(c)}e.insertBefore(h,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},zf=Symbol("_vtc");function Jf(t,e,n){const r=t[zf];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ll=Symbol("_vod"),Gf=Symbol("_vsh"),Qf=Symbol(""),Yf=/(^|;)\s*display\s*:/;function Xf(t,e,n){const r=t.style,s=mt(n);let a=!1;if(n&&!s){if(e)if(mt(e))for(const l of e.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&Hi(r,h,"")}else for(const l in e)n[l]==null&&Hi(r,l,"");for(const l in n)l==="display"&&(a=!0),Hi(r,l,n[l])}else if(s){if(e!==n){const l=r[Qf];l&&(n+=";"+l),r.cssText=n,a=Yf.test(n)}}else e&&t.removeAttribute("style");ll in t&&(t[ll]=a?r.display:"",t[Gf]&&(r.display="none"))}const ul=/\s*!important$/;function Hi(t,e,n){if(xe(n))n.forEach(r=>Hi(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Zf(t,e);ul.test(n)?t.setProperty(Dn(r),n.replace(ul,""),"important"):t[r]=n}}const cl=["Webkit","Moz","ms"],io={};function Zf(t,e){const n=io[e];if(n)return n;let r=Jt(e);if(r!=="filter"&&r in t)return io[e]=r;r=Zi(r);for(let s=0;s<cl.length;s++){const a=cl[s]+r;if(a in t)return io[e]=a}return e}const hl="http://www.w3.org/1999/xlink";function fl(t,e,n,r,s,a=Xc(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hl,e.slice(6,e.length)):t.setAttributeNS(hl,e,n):n==null||a&&!Vl(n)?t.removeAttribute(e):t.setAttribute(e,a?"":In(n)?String(n):n)}function dl(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Bu(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,h=n==null?t.type==="checkbox"?"on":"":String(n);(l!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Vl(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function gr(t,e,n,r){t.addEventListener(e,n,r)}function ed(t,e,n,r){t.removeEventListener(e,n,r)}const pl=Symbol("_vei");function td(t,e,n,r,s=null){const a=t[pl]||(t[pl]={}),l=a[e];if(r&&l)l.value=r;else{const[h,c]=nd(e);if(r){const y=a[e]=sd(r,s);gr(t,h,y,c)}else l&&(ed(t,h,l,c),a[e]=void 0)}}const gl=/(?:Once|Passive|Capture)$/;function nd(t){let e;if(gl.test(t)){e={};let r;for(;r=t.match(gl);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Dn(t.slice(2)),e]}let so=0;const rd=Promise.resolve(),id=()=>so||(rd.then(()=>so=0),so=Date.now());function sd(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;on(od(r,n.value),e,5,[r])};return n.value=t,n.attached=id(),n}function od(t,e){if(xe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const yl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ad=(t,e,n,r,s,a)=>{const l=s==="svg";e==="class"?Jf(t,r,l):e==="style"?Xf(t,n,r):Qi(e)?Lo(e)||td(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ld(t,e,r,l))?(dl(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fl(t,e,r,l,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mt(r))?dl(t,Jt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),fl(t,e,r,l))};function ld(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&yl(e)&&Ce(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return yl(e)&&mt(n)?!1:e in t}const ml=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xe(e)?n=>Ki(e,n):e};function ud(t){t.target.composing=!0}function vl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const oo=Symbol("_assign"),En={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[oo]=ml(s);const a=r||s.props&&s.props.type==="number";gr(t,e?"change":"input",l=>{if(l.target.composing)return;let h=t.value;n&&(h=h.trim()),a&&(h=fo(h)),t[oo](h)}),n&&gr(t,"change",()=>{t.value=t.value.trim()}),e||(gr(t,"compositionstart",ud),gr(t,"compositionend",vl),gr(t,"change",vl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:a}},l){if(t[oo]=ml(l),t.composing)return;const h=(a||t.type==="number")&&!/^0\d/.test(t.value)?fo(t.value):t.value,c=e??"";h!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},cd=["ctrl","shift","alt","meta"],hd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>cd.some(n=>t[`${n}Key`]&&!e.includes(n))},_l=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...a)=>{for(let l=0;l<e.length;l++){const h=hd[e[l]];if(h&&h(s,e))return}return t(s,...a)})},fd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dd=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const a=Dn(s.key);if(e.some(l=>l===a||fd[l]===a))return t(s)})},pd=Ct({patchProp:ad},Wf);let bl;function gd(){return bl||(bl=gf(pd))}const yd=(...t)=>{const e=gd().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=vd(r);if(!s)return;const a=e._component;!Ce(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=n(s,!1,md(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e};function md(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function vd(t){return mt(t)?document.querySelector(t):t}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _d(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var qu={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(Lt,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,l={},h=0,c={parse:function(I,j){var W=(j=j||{}).dynamicTyping||!1;if(be(W)&&(j.dynamicTypingFunction=W,W={}),j.dynamicTyping=W,j.transform=!!be(j.transform)&&j.transform,j.worker&&c.WORKERS_SUPPORTED){var ue=function(){if(!c.WORKERS_SUPPORTED)return!1;var ye=(lt=r.URL||r.webkitURL||null,Oe=n.toString(),c.BLOB_URL||(c.BLOB_URL=lt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Oe,")();"],{type:"text/javascript"})))),je=new r.Worker(ye),lt,Oe;return je.onmessage=Ae,je.id=h++,l[je.id]=je}();return ue.userStep=j.step,ue.userChunk=j.chunk,ue.userComplete=j.complete,ue.userError=j.error,j.step=be(j.step),j.chunk=be(j.chunk),j.complete=be(j.complete),j.error=be(j.error),delete j.worker,void ue.postMessage({input:I,config:j,workerId:ue.id})}var he=null;return c.NODE_STREAM_INPUT,typeof I=="string"?(I=function(ye){return ye.charCodeAt(0)===65279?ye.slice(1):ye}(I),he=j.download?new b(j):new V(j)):I.readable===!0&&be(I.read)&&be(I.on)?he=new se(j):(r.File&&I instanceof File||I instanceof Object)&&(he=new R(j)),he.stream(I)},unparse:function(I,j){var W=!1,ue=!0,he=",",ye=`\r
`,je='"',lt=je+je,Oe=!1,ee=null,ve=!1;(function(){if(typeof j=="object"){if(typeof j.delimiter!="string"||c.BAD_DELIMITERS.filter(function(ae){return j.delimiter.indexOf(ae)!==-1}).length||(he=j.delimiter),(typeof j.quotes=="boolean"||typeof j.quotes=="function"||Array.isArray(j.quotes))&&(W=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(Oe=j.skipEmptyLines),typeof j.newline=="string"&&(ye=j.newline),typeof j.quoteChar=="string"&&(je=j.quoteChar),typeof j.header=="boolean"&&(ue=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");ee=j.columns}j.escapeChar!==void 0&&(lt=j.escapeChar+je),(typeof j.escapeFormulae=="boolean"||j.escapeFormulae instanceof RegExp)&&(ve=j.escapeFormulae instanceof RegExp?j.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var pe=new RegExp(fe(je),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return rt(null,I,Oe);if(typeof I[0]=="object")return rt(ee||Object.keys(I[0]),I,Oe)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||ee),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),rt(I.fields||[],I.data||[],Oe);throw new Error("Unable to serialize unrecognized input");function rt(ae,Ke,pt){var Ge="";typeof ae=="string"&&(ae=JSON.parse(ae)),typeof Ke=="string"&&(Ke=JSON.parse(Ke));var We=Array.isArray(ae)&&0<ae.length,Ze=!Array.isArray(Ke[0]);if(We&&ue){for(var ut=0;ut<ae.length;ut++)0<ut&&(Ge+=he),Ge+=Ye(ae[ut],ut);0<Ke.length&&(Ge+=ye)}for(var q=0;q<Ke.length;q++){var Fe=We?ae.length:Ke[q].length,Ve=!1,we=We?Object.keys(Ke[q]).length===0:Ke[q].length===0;if(pt&&!We&&(Ve=pt==="greedy"?Ke[q].join("").trim()==="":Ke[q].length===1&&Ke[q][0].length===0),pt==="greedy"&&We){for(var v=[],k=0;k<Fe;k++){var D=Ze?ae[k]:k;v.push(Ke[q][D])}Ve=v.join("").trim()===""}if(!Ve){for(var M=0;M<Fe;M++){0<M&&!we&&(Ge+=he);var B=We&&Ze?ae[M]:M;Ge+=Ye(Ke[q][B],M)}q<Ke.length-1&&(!pt||0<Fe&&!we)&&(Ge+=ye)}}return Ge}function Ye(ae,Ke){if(ae==null)return"";if(ae.constructor===Date)return JSON.stringify(ae).slice(1,25);var pt=!1;ve&&typeof ae=="string"&&ve.test(ae)&&(ae="'"+ae,pt=!0);var Ge=ae.toString().replace(pe,lt);return(pt=pt||W===!0||typeof W=="function"&&W(ae,Ke)||Array.isArray(W)&&W[Ke]||function(We,Ze){for(var ut=0;ut<Ze.length;ut++)if(-1<We.indexOf(Ze[ut]))return!0;return!1}(Ge,c.BAD_DELIMITERS)||-1<Ge.indexOf(he)||Ge.charAt(0)===" "||Ge.charAt(Ge.length-1)===" ")?je+Ge+je:Ge}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=_e,c.ParserHandle=Z,c.NetworkStreamer=b,c.FileStreamer=R,c.StringStreamer=V,c.ReadableStreamStreamer=se,r.jQuery){var y=r.jQuery;y.fn.parse=function(I){var j=I.config||{},W=[];return this.each(function(ye){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var je=0;je<this.files.length;je++)W.push({file:this.files[je],inputElem:this,instanceConfig:y.extend({},j)})}),ue(),this;function ue(){if(W.length!==0){var ye,je,lt,Oe,ee=W[0];if(be(I.before)){var ve=I.before(ee.file,ee.inputElem);if(typeof ve=="object"){if(ve.action==="abort")return ye="AbortError",je=ee.file,lt=ee.inputElem,Oe=ve.reason,void(be(I.error)&&I.error({name:ye},je,lt,Oe));if(ve.action==="skip")return void he();typeof ve.config=="object"&&(ee.instanceConfig=y.extend(ee.instanceConfig,ve.config))}else if(ve==="skip")return void he()}var pe=ee.instanceConfig.complete;ee.instanceConfig.complete=function(rt){be(pe)&&pe(rt,ee.file,ee.inputElem),he()},c.parse(ee.file,ee.instanceConfig)}else be(I.complete)&&I.complete()}function he(){W.splice(0,1),ue()}}}function g(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(j){var W=Le(j);W.chunkSize=parseInt(W.chunkSize),j.step||j.chunk||(W.chunkSize=null),this._handle=new Z(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(j,W){if(this.isFirstChunk&&be(this._config.beforeFirstChunk)){var ue=this._config.beforeFirstChunk(j);ue!==void 0&&(j=ue)}this.isFirstChunk=!1,this._halted=!1;var he=this._partialLine+j;this._partialLine="";var ye=this._handle.parse(he,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var je=ye.meta.cursor;this._finished||(this._partialLine=he.substring(je-this._baseIndex),this._baseIndex=je),ye&&ye.data&&(this._rowCount+=ye.data.length);var lt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:ye,workerId:c.WORKER_ID,finished:lt});else if(be(this._config.chunk)&&!W){if(this._config.chunk(ye,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ye=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ye.data),this._completeResults.errors=this._completeResults.errors.concat(ye.errors),this._completeResults.meta=ye.meta),this._completed||!lt||!be(this._config.complete)||ye&&ye.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),lt||ye&&ye.meta.paused||this._nextChunk(),ye}this._halted=!0},this._sendError=function(j){be(this._config.error)?this._config.error(j):a&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:j,finished:!1})}}function b(I){var j;(I=I||{}).chunkSize||(I.chunkSize=c.RemoteChunkSize),g.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=Xe(this._chunkLoaded,this),j.onerror=Xe(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W=this._config.downloadRequestHeaders;for(var ue in W)j.setRequestHeader(ue,W[ue])}if(this._config.chunkSize){var he=this._start+this._config.chunkSize-1;j.setRequestHeader("Range","bytes="+this._start+"-"+he)}try{j.send(this._config.downloadRequestBody)}catch(ye){this._chunkError(ye.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:j.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(W){var ue=W.getResponseHeader("Content-Range");return ue===null?-1:parseInt(ue.substring(ue.lastIndexOf("/")+1))}(j),this.parseChunk(j.responseText)))},this._chunkError=function(W){var ue=j.statusText||W;this._sendError(new Error(ue))}}function R(I){var j,W;(I=I||{}).chunkSize||(I.chunkSize=c.LocalChunkSize),g.call(this,I);var ue=typeof FileReader<"u";this.stream=function(he){this._input=he,W=he.slice||he.webkitSlice||he.mozSlice,ue?((j=new FileReader).onload=Xe(this._chunkLoaded,this),j.onerror=Xe(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var he=this._input;if(this._config.chunkSize){var ye=Math.min(this._start+this._config.chunkSize,this._input.size);he=W.call(he,this._start,ye)}var je=j.readAsText(he,this._config.encoding);ue||this._chunkLoaded({target:{result:je}})},this._chunkLoaded=function(he){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(he.target.result)},this._chunkError=function(){this._sendError(j.error)}}function V(I){var j;g.call(this,I=I||{}),this.stream=function(W){return j=W,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var W,ue=this._config.chunkSize;return ue?(W=j.substring(0,ue),j=j.substring(ue)):(W=j,j=""),this._finished=!j,this.parseChunk(W)}}}function se(I){g.call(this,I=I||{});var j=[],W=!0,ue=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(he){this._input=he,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):W=!0},this._streamData=Xe(function(he){try{j.push(typeof he=="string"?he:he.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(ye){this._streamError(ye)}},this),this._streamError=Xe(function(he){this._streamCleanUp(),this._sendError(he)},this),this._streamEnd=Xe(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Xe(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Z(I){var j,W,ue,he=Math.pow(2,53),ye=-he,je=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,lt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Oe=this,ee=0,ve=0,pe=!1,rt=!1,Ye=[],ae={data:[],errors:[],meta:{}};if(be(I.step)){var Ke=I.step;I.step=function(q){if(ae=q,We())Ge();else{if(Ge(),ae.data.length===0)return;ee+=q.data.length,I.preview&&ee>I.preview?W.abort():(ae.data=ae.data[0],Ke(ae,Oe))}}}function pt(q){return I.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Ge(){return ae&&ue&&(ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),ue=!1),I.skipEmptyLines&&(ae.data=ae.data.filter(function(q){return!pt(q)})),We()&&function(){if(!ae)return;function q(Ve,we){be(I.transformHeader)&&(Ve=I.transformHeader(Ve,we)),Ye.push(Ve)}if(Array.isArray(ae.data[0])){for(var Fe=0;We()&&Fe<ae.data.length;Fe++)ae.data[Fe].forEach(q);ae.data.splice(0,1)}else ae.data.forEach(q)}(),function(){if(!ae||!I.header&&!I.dynamicTyping&&!I.transform)return ae;function q(Ve,we){var v,k=I.header?{}:[];for(v=0;v<Ve.length;v++){var D=v,M=Ve[v];I.header&&(D=v>=Ye.length?"__parsed_extra":Ye[v]),I.transform&&(M=I.transform(M,D)),M=Ze(D,M),D==="__parsed_extra"?(k[D]=k[D]||[],k[D].push(M)):k[D]=M}return I.header&&(v>Ye.length?ut("FieldMismatch","TooManyFields","Too many fields: expected "+Ye.length+" fields but parsed "+v,ve+we):v<Ye.length&&ut("FieldMismatch","TooFewFields","Too few fields: expected "+Ye.length+" fields but parsed "+v,ve+we)),k}var Fe=1;return!ae.data.length||Array.isArray(ae.data[0])?(ae.data=ae.data.map(q),Fe=ae.data.length):ae.data=q(ae.data,0),I.header&&ae.meta&&(ae.meta.fields=Ye),ve+=Fe,ae}()}function We(){return I.header&&Ye.length===0}function Ze(q,Fe){return Ve=q,I.dynamicTypingFunction&&I.dynamicTyping[Ve]===void 0&&(I.dynamicTyping[Ve]=I.dynamicTypingFunction(Ve)),(I.dynamicTyping[Ve]||I.dynamicTyping)===!0?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&(function(we){if(je.test(we)){var v=parseFloat(we);if(ye<v&&v<he)return!0}return!1}(Fe)?parseFloat(Fe):lt.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe;var Ve}function ut(q,Fe,Ve,we){var v={type:q,code:Fe,message:Ve};we!==void 0&&(v.row=we),ae.errors.push(v)}this.parse=function(q,Fe,Ve){var we=I.quoteChar||'"';if(I.newline||(I.newline=function(D,M){D=D.substring(0,1048576);var B=new RegExp(fe(M)+"([^]*?)"+fe(M),"gm"),N=(D=D.replace(B,"")).split("\r"),X=D.split(`
`),J=1<X.length&&X[0].length<N[0].length;if(N.length===1||J)return`
`;for(var H=0,K=0;K<N.length;K++)N[K][0]===`
`&&H++;return H>=N.length/2?`\r
`:"\r"}(q,we)),ue=!1,I.delimiter)be(I.delimiter)&&(I.delimiter=I.delimiter(q),ae.meta.delimiter=I.delimiter);else{var v=function(D,M,B,N,X){var J,H,K,oe;X=X||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var te=0;te<X.length;te++){var Y=X[te],ge=0,ke=0,Re=0;K=void 0;for(var Pe=new _e({comments:N,delimiter:Y,newline:M,preview:10}).parse(D),et=0;et<Pe.data.length;et++)if(B&&pt(Pe.data[et]))Re++;else{var Be=Pe.data[et].length;ke+=Be,K!==void 0?0<Be&&(ge+=Math.abs(Be-K),K=Be):K=Be}0<Pe.data.length&&(ke/=Pe.data.length-Re),(H===void 0||ge<=H)&&(oe===void 0||oe<ke)&&1.99<ke&&(H=ge,J=Y,oe=ke)}return{successful:!!(I.delimiter=J),bestDelimiter:J}}(q,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);v.successful?I.delimiter=v.bestDelimiter:(ue=!0,I.delimiter=c.DefaultDelimiter),ae.meta.delimiter=I.delimiter}var k=Le(I);return I.preview&&I.header&&k.preview++,j=q,W=new _e(k),ae=W.parse(j,Fe,Ve),Ge(),pe?{meta:{paused:!0}}:ae||{meta:{paused:!1}}},this.paused=function(){return pe},this.pause=function(){pe=!0,W.abort(),j=be(I.chunk)?"":j.substring(W.getCharIndex())},this.resume=function(){Oe.streamer._halted?(pe=!1,Oe.streamer.parseChunk(j,!0)):setTimeout(Oe.resume,3)},this.aborted=function(){return rt},this.abort=function(){rt=!0,W.abort(),ae.meta.aborted=!0,be(I.complete)&&I.complete(ae),j=""}}function fe(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _e(I){var j,W=(I=I||{}).delimiter,ue=I.newline,he=I.comments,ye=I.step,je=I.preview,lt=I.fastMode,Oe=j=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Oe=I.escapeChar),(typeof W!="string"||-1<c.BAD_DELIMITERS.indexOf(W))&&(W=","),he===W)throw new Error("Comment character same as delimiter");he===!0?he="#":(typeof he!="string"||-1<c.BAD_DELIMITERS.indexOf(he))&&(he=!1),ue!==`
`&&ue!=="\r"&&ue!==`\r
`&&(ue=`
`);var ee=0,ve=!1;this.parse=function(pe,rt,Ye){if(typeof pe!="string")throw new Error("Input must be a string");var ae=pe.length,Ke=W.length,pt=ue.length,Ge=he.length,We=be(ye),Ze=[],ut=[],q=[],Fe=ee=0;if(!pe)return Qe();if(I.header&&!rt){var Ve=pe.split(ue)[0].split(W),we=[],v={},k=!1;for(var D in Ve){var M=Ve[D];be(I.transformHeader)&&(M=I.transformHeader(M,D));var B=M,N=v[M]||0;for(0<N&&(k=!0,B=M+"_"+N),v[M]=N+1;we.includes(B);)B=B+"_"+N;we.push(B)}if(k){var X=pe.split(ue);X[0]=we.join(W),pe=X.join(ue)}}if(lt||lt!==!1&&pe.indexOf(j)===-1){for(var J=pe.split(ue),H=0;H<J.length;H++){if(q=J[H],ee+=q.length,H!==J.length-1)ee+=ue.length;else if(Ye)return Qe();if(!he||q.substring(0,Ge)!==he){if(We){if(Ze=[],Re(q.split(W)),dt(),ve)return Qe()}else Re(q.split(W));if(je&&je<=H)return Ze=Ze.slice(0,je),Qe(!0)}}return Qe()}for(var K=pe.indexOf(W,ee),oe=pe.indexOf(ue,ee),te=new RegExp(fe(Oe)+fe(j),"g"),Y=pe.indexOf(j,ee);;)if(pe[ee]!==j)if(he&&q.length===0&&pe.substring(ee,ee+Ge)===he){if(oe===-1)return Qe();ee=oe+pt,oe=pe.indexOf(ue,ee),K=pe.indexOf(W,ee)}else if(K!==-1&&(K<oe||oe===-1))q.push(pe.substring(ee,K)),ee=K+Ke,K=pe.indexOf(W,ee);else{if(oe===-1)break;if(q.push(pe.substring(ee,oe)),Be(oe+pt),We&&(dt(),ve))return Qe();if(je&&Ze.length>=je)return Qe(!0)}else for(Y=ee,ee++;;){if((Y=pe.indexOf(j,Y+1))===-1)return Ye||ut.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ze.length,index:ee}),et();if(Y===ae-1)return et(pe.substring(ee,Y).replace(te,j));if(j!==Oe||pe[Y+1]!==Oe){if(j===Oe||Y===0||pe[Y-1]!==Oe){K!==-1&&K<Y+1&&(K=pe.indexOf(W,Y+1)),oe!==-1&&oe<Y+1&&(oe=pe.indexOf(ue,Y+1));var ge=Pe(oe===-1?K:Math.min(K,oe));if(pe.substr(Y+1+ge,Ke)===W){q.push(pe.substring(ee,Y).replace(te,j)),pe[ee=Y+1+ge+Ke]!==j&&(Y=pe.indexOf(j,ee)),K=pe.indexOf(W,ee),oe=pe.indexOf(ue,ee);break}var ke=Pe(oe);if(pe.substring(Y+1+ke,Y+1+ke+pt)===ue){if(q.push(pe.substring(ee,Y).replace(te,j)),Be(Y+1+ke+pt),K=pe.indexOf(W,ee),Y=pe.indexOf(j,ee),We&&(dt(),ve))return Qe();if(je&&Ze.length>=je)return Qe(!0);break}ut.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ze.length,index:ee}),Y++}}else Y++}return et();function Re(tt){Ze.push(tt),Fe=ee}function Pe(tt){var de=0;if(tt!==-1){var ht=pe.substring(Y+1,tt);ht&&ht.trim()===""&&(de=ht.length)}return de}function et(tt){return Ye||(tt===void 0&&(tt=pe.substring(ee)),q.push(tt),ee=ae,Re(q),We&&dt()),Qe()}function Be(tt){ee=tt,Re(q),q=[],oe=pe.indexOf(ue,ee)}function Qe(tt){return{data:Ze,errors:ut,meta:{delimiter:W,linebreak:ue,aborted:ve,truncated:!!tt,cursor:Fe+(rt||0)}}}function dt(){ye(Qe()),Ze=[],ut=[]}},this.abort=function(){ve=!0},this.getCharIndex=function(){return ee}}function Ae(I){var j=I.data,W=l[j.workerId],ue=!1;if(j.error)W.userError(j.error,j.file);else if(j.results&&j.results.data){var he={abort:function(){ue=!0,Se(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(be(W.userStep)){for(var ye=0;ye<j.results.data.length&&(W.userStep({data:j.results.data[ye],errors:j.results.errors,meta:j.results.meta},he),!ue);ye++);delete j.results}else be(W.userChunk)&&(W.userChunk(j.results,he,j.file),delete j.results)}j.finished&&!ue&&Se(j.workerId,j.results)}function Se(I,j){var W=l[I];be(W.userComplete)&&W.userComplete(j),W.terminate(),delete l[I]}function ce(){throw new Error("Not implemented.")}function Le(I){if(typeof I!="object"||I===null)return I;var j=Array.isArray(I)?[]:{};for(var W in I)j[W]=Le(I[W]);return j}function Xe(I,j){return function(){I.apply(j,arguments)}}function be(I){return typeof I=="function"}return a&&(r.onmessage=function(I){var j=I.data;if(c.WORKER_ID===void 0&&j&&(c.WORKER_ID=j.workerId),typeof j.input=="string")r.postMessage({workerId:c.WORKER_ID,results:c.parse(j.input,j.config),finished:!0});else if(r.File&&j.input instanceof File||j.input instanceof Object){var W=c.parse(j.input,j.config);W&&r.postMessage({workerId:c.WORKER_ID,results:W,finished:!0})}}),(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(g.prototype)).constructor=R,(V.prototype=Object.create(V.prototype)).constructor=V,(se.prototype=Object.create(g.prototype)).constructor=se,c})})(qu);var bd=qu.exports;const wl=Nu(bd);var Hu={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Lt,function(){var n=function(i,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,u=1,f=arguments.length;u<f;u++)for(var d in o=arguments[u])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function s(i,o,u){for(var f,d=0,p=o.length;d<p;d++)!f&&d in o||((f=f||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(f||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lt,l=Object.keys,h=Array.isArray;function c(i,o){return typeof o!="object"||l(o).forEach(function(u){i[u]=o[u]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,g={}.hasOwnProperty;function b(i,o){return g.call(i,o)}function R(i,o){typeof o=="function"&&(o=o(y(i))),(typeof Reflect>"u"?l:Reflect.ownKeys)(o).forEach(function(u){se(i,u,o[u])})}var V=Object.defineProperty;function se(i,o,u,f){V(i,o,c(u&&b(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function Z(i){return{from:function(o){return i.prototype=Object.create(o.prototype),se(i.prototype,"constructor",i),{extend:R.bind(null,i.prototype)}}}}var fe=Object.getOwnPropertyDescriptor,_e=[].slice;function Ae(i,o,u){return _e.call(i,o,u)}function Se(i,o){return o(i)}function ce(i){if(!i)throw new Error("Assertion Failed")}function Le(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Xe(i,o){if(typeof o=="string"&&b(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var u=[],f=0,d=o.length;f<d;++f){var p=Xe(i,o[f]);u.push(p)}return u}var m=o.indexOf(".");if(m!==-1){var _=i[o.substr(0,m)];return _==null?void 0:Xe(_,o.substr(m+1))}}function be(i,o,u){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){ce(typeof u!="string"&&"length"in u);for(var f=0,d=o.length;f<d;++f)be(i,o[f],u[f])}else{var p,m,_=o.indexOf(".");_!==-1?(p=o.substr(0,_),(m=o.substr(_+1))===""?u===void 0?h(i)&&!isNaN(parseInt(p))?i.splice(p,1):delete i[p]:i[p]=u:be(_=!(_=i[p])||!b(i,p)?i[p]={}:_,m,u)):u===void 0?h(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=u}}function I(i){var o,u={};for(o in i)b(i,o)&&(u[o]=i[o]);return u}var j=[].concat;function W(i){return j.apply([],i)}var ln="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),ue=new Set(ln.map(function(i){return a[i]})),he=null;function ye(i){return he=new WeakMap,i=function o(u){if(!u||typeof u!="object")return u;var f=he.get(u);if(f)return f;if(h(u)){f=[],he.set(u,f);for(var d=0,p=u.length;d<p;++d)f.push(o(u[d]))}else if(ue.has(u.constructor))f=u;else{var m,_=y(u);for(m in f=_===Object.prototype?{}:Object.create(_),he.set(u,f),u)b(u,m)&&(f[m]=o(u[m]))}return f}(i),he=null,i}var je={}.toString;function lt(i){return je.call(i).slice(8,-1)}var Oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ee=typeof Oe=="symbol"?function(i){var o;return i!=null&&(o=i[Oe])&&o.apply(i)}:function(){return null};function ve(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var pe={};function rt(i){var o,u,f,d;if(arguments.length===1){if(h(i))return i.slice();if(this===pe&&typeof i=="string")return[i];if(d=ee(i)){for(u=[];!(f=d.next()).done;)u.push(f.value);return u}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(u=new Array(o);o--;)u[o]=i[o];return u}for(o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return u}var Ye=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Wt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),ae={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(i,o){this.name=i,this.message=o}function pt(i,o){return i+". Errors: "+Object.keys(o).map(function(u){return o[u].toString()}).filter(function(u,f,d){return d.indexOf(u)===f}).join(`
`)}function Ge(i,o,u,f){this.failures=o,this.failedKeys=f,this.successCount=u,this.message=pt(i,o)}function We(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(u){return o[u]}),this.failuresByPos=o,this.message=pt(i,this.failures)}Z(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Z(Ge).from(Ke),Z(We).from(Ke);var Ze=Wt.reduce(function(i,o){return i[o]=o+"Error",i},{}),ut=Ke,q=Wt.reduce(function(i,o){var u=o+"Error";function f(d,p){this.name=u,d?typeof d=="string"?(this.message="".concat(d).concat(p?`
 `+p:""),this.inner=p||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=ae[o]||u,this.inner=null)}return Z(f).from(ut),i[o]=f,i},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Fe=Y.reduce(function(i,o){return i[o+"Error"]=q[o],i},{}),Ve=Wt.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=q[o]),i},{});function we(){}function v(i){return i}function k(i,o){return i==null||i===v?o:function(u){return o(i(u))}}function D(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function M(i,o){return i===we?o:function(){var u=i.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?D(f,this.onsuccess):f),d&&(this.onerror=this.onerror?D(d,this.onerror):d),p!==void 0?p:u}}function B(i,o){return i===we?o:function(){i.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?D(u,this.onsuccess):u),f&&(this.onerror=this.onerror?D(f,this.onerror):f)}}function N(i,o){return i===we?o:function(u){var f=i.apply(this,arguments);c(u,f);var d=this.onsuccess,p=this.onerror;return this.onsuccess=null,this.onerror=null,u=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?D(d,this.onsuccess):d),p&&(this.onerror=this.onerror?D(p,this.onerror):p),f===void 0?u===void 0?void 0:u:c(f,u)}}function X(i,o){return i===we?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function J(i,o){return i===we?o:function(){var u=i.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,d=arguments.length,p=new Array(d);d--;)p[d]=arguments[d];return u.then(function(){return o.apply(f,p)})}return o.apply(this,arguments)}}Ve.ModifyError=Ge,Ve.DexieError=Ke,Ve.BulkError=We;var H=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function K(i){H=i}var oe={},te=100,ln=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),i]}(),Y=ln[0],Wt=ln[1],ln=ln[2],Wt=Wt&&Wt.then,ge=Y&&Y.constructor,ke=!!ln,Re=function(i,o){ht.push([i,o]),et&&(queueMicrotask(vc),et=!1)},Pe=!0,et=!0,Be=[],Qe=[],dt=v,tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},de=tt,ht=[],_t=0,Fn=[];function le(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=de;if(typeof i!="function"){if(i!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ms(this,this._value))}this._state=null,this._value=null,++o.ref,function u(f,d){try{d(function(p){if(f._state===null){if(p===f)throw new TypeError("A promise cannot be resolved with itself.");var m=f._lib&&rr();p&&typeof p.then=="function"?u(f,function(_,S){p instanceof le?p._then(_,S):p.then(_,S)}):(f._state=!0,f._value=p,ca(f)),m&&ir()}},ms.bind(null,f))}catch(p){ms(f,p)}}(this,i)}var ys={get:function(){var i=de,o=ci;function u(f,d){var p=this,m=!i.global&&(i!==de||o!==ci),_=m&&!mn(),S=new le(function(x,T){vs(p,new ua(fa(f,i,m,_),fa(d,i,m,_),x,T,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=oe,u},set:function(i){se(this,"then",i&&i.prototype===oe?ys:{get:function(){return i},set:ys.set})}};function ua(i,o,u,f,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=u,this.reject=f,this.psd=d}function ms(i,o){var u,f;Qe.push(o),i._state===null&&(u=i._lib&&rr(),o=dt(o),i._state=!1,i._value=o,f=i,Be.some(function(d){return d._value===f._value})||Be.push(f),ca(i),u&&ir())}function ca(i){var o=i._listeners;i._listeners=[];for(var u=0,f=o.length;u<f;++u)vs(i,o[u]);var d=i._PSD;--d.ref||d.finalize(),_t===0&&(++_t,Re(function(){--_t==0&&_s()},[]))}function vs(i,o){if(i._state!==null){var u=i._state?o.onFulfilled:o.onRejected;if(u===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++_t,Re(mc,[u,i,o])}else i._listeners.push(o)}function mc(i,o,u){try{var f,d=o._value;!o._state&&Qe.length&&(Qe=[]),f=H&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Qe.indexOf(d)!==-1||function(p){for(var m=Be.length;m;)if(Be[--m]._value===p._value)return Be.splice(m,1)}(o),u.resolve(f)}catch(p){u.reject(p)}finally{--_t==0&&_s(),--u.psd.ref||u.psd.finalize()}}function vc(){Mn(tt,function(){rr()&&ir()})}function rr(){var i=Pe;return et=Pe=!1,i}function ir(){var i,o,u;do for(;0<ht.length;)for(i=ht,ht=[],u=i.length,o=0;o<u;++o){var f=i[o];f[0].apply(null,f[1])}while(0<ht.length);et=Pe=!0}function _s(){var i=Be;Be=[],i.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var o=Fn.slice(0),u=o.length;u;)o[--u]()}function ai(i){return new le(oe,!1,i)}function ct(i,o){var u=de;return function(){var f=rr(),d=de;try{return vn(u,!0),i.apply(this,arguments)}catch(p){o&&o(p)}finally{vn(d,!1),f&&ir()}}}R(le.prototype,{then:ys,_then:function(i,o){vs(this,new ua(null,null,i,o,de))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,u=arguments[1];return typeof o=="function"?this.then(null,function(f){return(f instanceof o?u:ai)(f)}):this.then(null,function(f){return(f&&f.name===o?u:ai)(f)})},finally:function(i){return this.then(function(o){return le.resolve(i()).then(function(){return o})},function(o){return le.resolve(i()).then(function(){return ai(o)})})},timeout:function(i,o){var u=this;return i<1/0?new le(function(f,d){var p=setTimeout(function(){return d(new q.Timeout(o))},i);u.then(f,d).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(le.prototype,Symbol.toStringTag,"Dexie.Promise"),tt.env=ha(),R(le,{all:function(){var i=rt.apply(null,arguments).map(hi);return new le(function(o,u){i.length===0&&o([]);var f=i.length;i.forEach(function(d,p){return le.resolve(d).then(function(m){i[p]=m,--f||o(i)},u)})})},resolve:function(i){return i instanceof le?i:i&&typeof i.then=="function"?new le(function(o,u){i.then(o,u)}):new le(oe,!0,i)},reject:ai,race:function(){var i=rt.apply(null,arguments).map(hi);return new le(function(o,u){i.map(function(f){return le.resolve(f).then(o,u)})})},PSD:{get:function(){return de},set:function(i){return de=i}},totalEchoes:{get:function(){return ci}},newPSD:yn,usePSD:Mn,scheduler:{get:function(){return Re},set:function(i){Re=i}},rejectionMapper:{get:function(){return dt},set:function(i){dt=i}},follow:function(i,o){return new le(function(u,f){return yn(function(d,p){var m=de;m.unhandleds=[],m.onunhandled=p,m.finalize=D(function(){var _,S=this;_=function(){S.unhandleds.length===0?d():p(S.unhandleds[0])},Fn.push(function x(){_(),Fn.splice(Fn.indexOf(x),1)}),++_t,Re(function(){--_t==0&&_s()},[])},m.finalize),i()},o,u,f)})}}),ge&&(ge.allSettled&&se(le,"allSettled",function(){var i=rt.apply(null,arguments).map(hi);return new le(function(o){i.length===0&&o([]);var u=i.length,f=new Array(u);i.forEach(function(d,p){return le.resolve(d).then(function(m){return f[p]={status:"fulfilled",value:m}},function(m){return f[p]={status:"rejected",reason:m}}).then(function(){return--u||o(f)})})})}),ge.any&&typeof AggregateError<"u"&&se(le,"any",function(){var i=rt.apply(null,arguments).map(hi);return new le(function(o,u){i.length===0&&u(new AggregateError([]));var f=i.length,d=new Array(f);i.forEach(function(p,m){return le.resolve(p).then(function(_){return o(_)},function(_){d[m]=_,--f||u(new AggregateError(d))})})})}));var bt={awaits:0,echoes:0,id:0},_c=0,li=[],ui=0,ci=0,bc=0;function yn(i,o,u,f){var d=de,p=Object.create(d);return p.parent=d,p.ref=0,p.global=!1,p.id=++bc,tt.env,p.env=ke?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject}:{},o&&c(p,o),++d.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Mn(p,i,u,f),p.ref===0&&p.finalize(),f}function sr(){return bt.id||(bt.id=++_c),++bt.awaits,bt.echoes+=te,bt.id}function mn(){return!!bt.awaits&&(--bt.awaits==0&&(bt.id=0),bt.echoes=bt.awaits*te,!0)}function hi(i){return bt.echoes&&i&&i.constructor===ge?(sr(),i.then(function(o){return mn(),o},function(o){return mn(),gt(o)})):i}function wc(){var i=li[li.length-1];li.pop(),vn(i,!1)}function vn(i,o){var u,f=de;(o?!bt.echoes||ui++&&i===de:!ui||--ui&&i===de)||queueMicrotask(o?(function(d){++ci,bt.echoes&&--bt.echoes!=0||(bt.echoes=bt.awaits=bt.id=0),li.push(de),vn(d,!0)}).bind(null,i):wc),i!==de&&(de=i,f===tt&&(tt.env=ha()),ke&&(u=tt.env.Promise,o=i.env,(f.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),u.all=o.all,u.race=o.race,u.resolve=o.resolve,u.reject=o.reject,o.allSettled&&(u.allSettled=o.allSettled),o.any&&(u.any=o.any))))}function ha(){var i=a.Promise;return ke?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Mn(i,o,u,f,d){var p=de;try{return vn(i,!0),o(u,f,d)}finally{vn(p,!1)}}function fa(i,o,u,f){return typeof i!="function"?i:function(){var d=de;u&&sr(),vn(o,!0);try{return i.apply(this,arguments)}finally{vn(d,!1),f&&queueMicrotask(mn)}}}function bs(i){Promise===ge&&bt.echoes===0?ui===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Wt).indexOf("[native code]")===-1&&(sr=mn=we);var gt=le.reject,Un="￿",an="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",da="String expected.",or=[],fi="__dbnames",ws="readonly",ks="readwrite";function Kn(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var pa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function di(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=ye(o))[i],o}}function ga(){throw q.Type()}function Ne(i,o){try{var u=ya(i),f=ya(o);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x)if(d[x]!==p[x])return d[x]<p[x]?-1:1;return m===_?0:m<_?-1:1}(ma(i),ma(o));case"Array":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x){var T=Ne(d[x],p[x]);if(T!==0)return T}return m===_?0:m<_?-1:1}(i,o)}}catch{}return NaN}function ya(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=lt(i),i==="ArrayBuffer"?"binary":i)}function ma(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var va=(at.prototype._trans=function(i,o,u){var f=this._tx||de.trans,d=this.name,p=H&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function m(x,T,w){if(!w.schema[d])throw new q.NotFound("Table "+d+" not part of transaction");return o(w.idbtrans,w)}var _=rr();try{var S=f&&f.db._novip===this.db._novip?f===de.trans?f._promise(i,m,u):yn(function(){return f._promise(i,m,u)},{trans:f,transless:de.transless||de}):function x(T,w,C,E){if(T.idbdb&&(T._state.openComplete||de.letThrough||T._vip)){var P=T._createTransaction(w,C,T._dbSchema);try{P.create(),T._state.PR1398_maxLoop=3}catch(A){return A.name===Ze.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,E)})):gt(A)}return P._promise(w,function(A,O){return yn(function(){return de.trans=P,E(A,O,P)})}).then(function(A){if(w==="readwrite")try{P.idbtrans.commit()}catch{}return w==="readonly"?A:P._completion.then(function(){return A})})}if(T._state.openComplete)return gt(new q.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return gt(new q.DatabaseClosed);T.open().catch(we)}return T._state.dbReadyPromise.then(function(){return x(T,w,C,E)})}(this.db,i,[this.name],m);return p&&(S._consoleTask=p,S=S.catch(function(x){return console.trace(x),gt(x)})),S}finally{_&&ir()}},at.prototype.get=function(i,o){var u=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?gt(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:i}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},at.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(h(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=l(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&o.every(function(T){return 0<=S.keyPath.indexOf(T)})){for(var x=0;x<o.length;++x)if(o.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==Un){var m=u.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(x){return i[x]}))}!u&&H&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var f=this.schema.idxByName,d=this.db._deps.indexedDB;function p(S,x){return d.cmp(S,x)===0}var _=o.reduce(function(C,x){var T=C[0],w=C[1],C=f[x],E=i[x];return[T||C,T||!C?Kn(w,C&&C.multi?function(P){return P=Xe(P,x),h(P)&&P.some(function(A){return p(E,A)})}:function(P){return p(E,Xe(P,x))}):w]},[null,null]),m=_[0],_=_[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(_):u?this.filter(_):this.where(o).equals("")},at.prototype.filter=function(i){return this.toCollection().and(i)},at.prototype.count=function(i){return this.toCollection().count(i)},at.prototype.offset=function(i){return this.toCollection().offset(i)},at.prototype.limit=function(i){return this.toCollection().limit(i)},at.prototype.each=function(i){return this.toCollection().each(i)},at.prototype.toArray=function(i){return this.toCollection().toArray(i)},at.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},at.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,h(i)?"[".concat(i.join("+"),"]"):i))},at.prototype.reverse=function(){return this.toCollection().reverse()},at.prototype.mapToClass=function(i){var o,u=this.db,f=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof ga&&(function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function T(){this.constructor=S}n(S,x),S.prototype=x===null?Object.create(x):(T.prototype=x.prototype,new T)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),d.prototype.table=function(){return f},i=d);for(var p=new Set,m=i.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(S){return p.add(S)});function _(S){if(!S)return S;var x,T=Object.create(i.prototype);for(x in S)if(!p.has(x))try{T[x]=S[x]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),i},at.prototype.defineClass=function(){return this.mapToClass(function(i){c(this,i)})},at.prototype.add=function(i,o){var u=this,f=this.schema.primKey,d=f.auto,p=f.keyPath,m=i;return p&&d&&(m=di(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[m]})}).then(function(_){return _.numFailures?le.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{be(i,p,_)}catch{}return _})},at.prototype.update=function(i,o){return typeof i!="object"||h(i)?this.where(":id").equals(i).modify(o):(i=Xe(i,this.schema.primKey.keyPath),i===void 0?gt(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},at.prototype.put=function(i,o){var u=this,f=this.schema.primKey,d=f.auto,p=f.keyPath,m=i;return p&&d&&(m=di(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"put",values:[m],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?le.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{be(i,p,_)}catch{}return _})},at.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[i]})}).then(function(u){return u.numFailures?le.reject(u.failures[0]):void 0})},at.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:pa})}).then(function(o){return o.numFailures?le.reject(o.failures[0]):void 0})},at.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:i,trans:u}).then(function(f){return f.map(function(d){return o.hook.reading.fire(d)})})})},at.prototype.bulkAdd=function(i,o,u){var f=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=f.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(di(x)):i;return f.core.mutate({trans:m,type:"add",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new We("".concat(f.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),P)})})},at.prototype.bulkPut=function(i,o,u){var f=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=f.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(di(x)):i;return f.core.mutate({trans:m,type:"put",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new We("".concat(f.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),P)})})},at.prototype.bulkUpdate=function(i){var o=this,u=this.core,f=i.map(function(m){return m.key}),d=i.map(function(m){return m.changes}),p=[];return this._trans("readwrite",function(m){return u.getMany({trans:m,keys:f,cache:"clone"}).then(function(_){var S=[],x=[];i.forEach(function(w,C){var E=w.key,P=w.changes,A=_[C];if(A){for(var O=0,$=Object.keys(P);O<$.length;O++){var L=$[O],F=P[L];if(L===o.schema.primKey.keyPath){if(Ne(F,E)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else be(A,L,F)}p.push(C),S.push(E),x.push(A)}});var T=S.length;return u.mutate({trans:m,type:"put",keys:S,values:x,updates:{keys:f,changeSpecs:d}}).then(function(w){var C=w.numFailures,E=w.failures;if(C===0)return T;for(var P=0,A=Object.keys(E);P<A.length;P++){var O,$=A[P],L=p[Number($)];L!=null&&(O=E[$],delete E[$],E[L]=O)}throw new We("".concat(o.name,".bulkUpdate(): ").concat(C," of ").concat(T," operations failed"),E)})})})},at.prototype.bulkDelete=function(i){var o=this,u=i.length;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"delete",keys:i})}).then(function(m){var d=m.numFailures,p=m.lastResult,m=m.failures;if(d===0)return p;throw new We("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),m)})},at);function at(){}function Cr(i){function o(m,_){if(_){for(var S=arguments.length,x=new Array(S-1);--S;)x[S-1]=arguments[S];return u[m].subscribe.apply(null,x),i}if(typeof m=="string")return u[m]}var u={};o.addEventType=p;for(var f=1,d=arguments.length;f<d;++f)p(arguments[f]);return o;function p(m,_,S){if(typeof m!="object"){var x;_=_||X;var T={subscribers:[],fire:S=S||we,subscribe:function(w){T.subscribers.indexOf(w)===-1&&(T.subscribers.push(w),T.fire=_(T.fire,w))},unsubscribe:function(w){T.subscribers=T.subscribers.filter(function(C){return C!==w}),T.fire=T.subscribers.reduce(_,S)}};return u[m]=o[m]=T}l(x=m).forEach(function(w){var C=x[w];if(h(C))p(w,x[w][0],x[w][1]);else{if(C!=="asap")throw new q.InvalidArgument("Invalid event config");var E=p(w,v,function(){for(var P=arguments.length,A=new Array(P);P--;)A[P]=arguments[P];E.subscribers.forEach(function(O){Le(function(){O.apply(null,A)})})})}})}}function Ar(i,o){return Z(o).from({prototype:i}),o}function ar(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function xs(i,o){i.filter=Kn(i.filter,o)}function Es(i,o,u){var f=i.replayFilter;i.replayFilter=f?function(){return Kn(f(),o())}:o,i.justLimit=u&&!f}function pi(i,o){if(i.isPrimKey)return o.primaryKey;var u=o.getIndexByKeyPath(i.index);if(!u)throw new q.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return u}function _a(i,o,u){var f=pi(i,o.schema);return o.openCursor({trans:u,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:f,range:i.range}})}function gi(i,o,u,f){var d=i.replayFilter?Kn(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},m=function(_,S,x){var T,w;d&&!d(S,x,function(C){return S.stop(C)},function(C){return S.fail(C)})||((w=""+(T=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(T)),b(p,w)||(p[w]=!0,o(_,S,x)))};return Promise.all([i.or._iterate(m,u),ba(_a(i,f,u),i.algorithm,m,!i.keysOnly&&i.valueMapper)])}return ba(_a(i,f,u),Kn(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function ba(i,o,u,f){var d=ct(f?function(p,m,_){return u(f(p),m,_)}:u);return i.then(function(p){if(p)return p.start(function(){var m=function(){return p.continue()};o&&!o(p,function(_){return m=_},function(_){p.stop(_),m=we},function(_){p.fail(_),m=we})||d(p.value,p,function(_){return m=_}),m()})})}var ln=Symbol(),jr=(wa.prototype.execute=function(i){if(this.add!==void 0){var o=this.add;if(h(o))return s(s([],h(i)?i:[],!0),o).sort();if(typeof o=="number")return(Number(i)||0)+o;if(typeof o=="bigint")try{return BigInt(i)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var u=this.remove;if(h(u))return h(i)?i.filter(function(f){return!u.includes(f)}).sort():[];if(typeof u=="number")return Number(i)-u;if(typeof u=="bigint")try{return BigInt(i)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return o=(o=this.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof i=="string"&&i.startsWith(o)?this.replacePrefix[1]+i.substring(o.length):i},wa);function wa(i){Object.assign(this,i)}var kc=(qe.prototype._read=function(i,o){var u=this._ctx;return u.error?u.table._trans(null,gt.bind(null,u.error)):u.table._trans("readonly",i).then(o)},qe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,gt.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},qe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=Kn(o.algorithm,i)},qe.prototype._iterate=function(i,o){return gi(this._ctx,i,o,this._ctx.table.core)},qe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return i&&c(u,i),o._ctx=u,o},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(i){var o=this._ctx;return this._read(function(u){return gi(o,i,u,o.table.core)})},qe.prototype.count=function(i){var o=this;return this._read(function(u){var f=o._ctx,d=f.table.core;if(ar(f,!0))return d.count({trans:u,query:{index:pi(f,d.schema),range:f.range}}).then(function(m){return Math.min(m,f.limit)});var p=0;return gi(f,function(){return++p,!1},u,d).then(function(){return p})}).then(i)},qe.prototype.sortBy=function(i,o){var u=i.split(".").reverse(),f=u[0],d=u.length-1;function p(S,x){return x?p(S[u[x]],x-1):S[f]}var m=this._ctx.dir==="next"?1:-1;function _(S,x){return S=p(S,d),x=p(x,d),S<x?-m:x<S?m:0}return this.toArray(function(S){return S.sort(_)}).then(o)},qe.prototype.toArray=function(i){var o=this;return this._read(function(u){var f=o._ctx;if(f.dir==="next"&&ar(f,!0)&&0<f.limit){var d=f.valueMapper,p=pi(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:p,range:f.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var m=[];return gi(f,function(_){return m.push(_)},u,f.table.core).then(function(){return m})},i)},qe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,ar(o)?Es(o,function(){var u=i;return function(f,d){return u===0||(u===1?--u:d(function(){f.advance(u),u=0}),!1)}}):Es(o,function(){var u=i;return function(){return--u<0}})),this},qe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),Es(this._ctx,function(){var o=i;return function(u,f,d){return--o<=0&&f(d),0<=o}},!0),this},qe.prototype.until=function(i,o){return xs(this._ctx,function(u,f,d){return!i(u.value)||(f(d),o)}),this},qe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},qe.prototype.last=function(i){return this.reverse().first(i)},qe.prototype.filter=function(i){var o;return xs(this._ctx,function(u){return i(u.value)}),(o=this._ctx).isMatch=Kn(o.isMatch,i),this},qe.prototype.and=function(i){return this.filter(i)},qe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,f){i(f.key,f)})},qe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},qe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,f){i(f.primaryKey,f)})},qe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(f,d){u.push(d.key)}).then(function(){return u}).then(i)},qe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&ar(o,!0)&&0<o.limit)return this._read(function(f){var d=pi(o,o.table.core.schema);return o.table.core.query({trans:f,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(f){return f.result}).then(i);o.keysOnly=!o.isMatch;var u=[];return this.each(function(f,d){u.push(d.primaryKey)}).then(function(){return u}).then(i)},qe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},qe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},qe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},qe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return xs(this._ctx,function(d){var f=d.primaryKey.toString(),d=b(o,f);return o[f]=!0,!d}),this},qe.prototype.modify=function(i){var o=this,u=this._ctx;return this._write(function(f){var d,p,m;m=typeof i=="function"?i:(d=l(i),p=d.length,function(O){for(var $=!1,L=0;L<p;++L){var F=d[L],U=i[F],G=Xe(O,F);U instanceof jr?(be(O,F,U.execute(G)),$=!0):G!==U&&(be(O,F,U),$=!0)}return $});function _(O,F){var L=F.failures,F=F.numFailures;P+=O-F;for(var U=0,G=l(L);U<G.length;U++){var re=G[U];E.push(L[re])}}var S=u.table.core,x=S.schema.primaryKey,T=x.outbound,w=x.extractKey,C=o.db._options.modifyChunkSize||200,E=[],P=0,A=[];return o.clone().primaryKeys().then(function(O){function $(F){var U=Math.min(C,O.length-F);return S.getMany({trans:f,keys:O.slice(F,F+U),cache:"immutable"}).then(function(G){for(var re=[],Q=[],ne=T?[]:null,ie=[],z=0;z<U;++z){var Ee=G[z],Te={value:ye(Ee),primKey:O[F+z]};m.call(Te,Te.value,Te)!==!1&&(Te.value==null?ie.push(O[F+z]):T||Ne(w(Ee),w(Te.value))===0?(Q.push(Te.value),T&&ne.push(O[F+z])):(ie.push(O[F+z]),re.push(Te.value)))}return Promise.resolve(0<re.length&&S.mutate({trans:f,type:"add",values:re}).then(function(Me){for(var Ie in Me.failures)ie.splice(parseInt(Ie),1);_(re.length,Me)})).then(function(){return(0<Q.length||L&&typeof i=="object")&&S.mutate({trans:f,type:"put",keys:ne,values:Q,criteria:L,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<F}).then(function(Me){return _(Q.length,Me)})}).then(function(){return(0<ie.length||L&&i===Ss)&&S.mutate({trans:f,type:"delete",keys:ie,criteria:L,isAdditionalChunk:0<F}).then(function(Me){return _(ie.length,Me)})}).then(function(){return O.length>F+U&&$(F+C)})})}var L=ar(u)&&u.limit===1/0&&(typeof i!="function"||i===Ss)&&{index:u.index,range:u.range};return $(0).then(function(){if(0<E.length)throw new Ge("Error modifying one or more objects",E,P,A);return O.length})})})},qe.prototype.delete=function(){var i=this._ctx,o=i.range;return ar(i)&&(i.isPrimKey||o.type===3)?this._write(function(u){var f=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:u,query:{index:f,range:d}}).then(function(p){return i.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(m){var _=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Ge("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),p-m);return p-m})})}):this.modify(Ss)},qe);function qe(){}var Ss=function(i,o){return o.value=null};function xc(i,o){return i<o?-1:i===o?0:1}function Ec(i,o){return o<i?-1:i===o?0:1}function Kt(i,o,u){return i=i instanceof xa?new i.Collection(i):i,i._ctx.error=new(u||TypeError)(o),i}function lr(i){return new i.Collection(i,function(){return ka("")}).limit(0)}function yi(i,o,u,f){var d,p,m,_,S,x,T,w=u.length;if(!u.every(function(P){return typeof P=="string"}))return Kt(i,da);function C(P){d=P==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},p=P==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},m=P==="next"?xc:Ec;var A=u.map(function(O){return{lower:p(O),upper:d(O)}}).sort(function(O,$){return m(O.lower,$.lower)});_=A.map(function(O){return O.upper}),S=A.map(function(O){return O.lower}),T=(x=P)==="next"?"":f}C("next"),i=new i.Collection(i,function(){return _n(_[0],S[w-1]+f)}),i._ondirectionchange=function(P){C(P)};var E=0;return i._addAlgorithm(function(P,A,O){var $=P.key;if(typeof $!="string")return!1;var L=p($);if(o(L,S,E))return!0;for(var F=null,U=E;U<w;++U){var G=function(re,Q,ne,ie,z,Ee){for(var Te=Math.min(re.length,ie.length),Me=-1,Ie=0;Ie<Te;++Ie){var Gt=Q[Ie];if(Gt!==ie[Ie])return z(re[Ie],ne[Ie])<0?re.substr(0,Ie)+ne[Ie]+ne.substr(Ie+1):z(re[Ie],ie[Ie])<0?re.substr(0,Ie)+ie[Ie]+ne.substr(Ie+1):0<=Me?re.substr(0,Me)+Q[Me]+ne.substr(Me+1):null;z(re[Ie],Gt)<0&&(Me=Ie)}return Te<ie.length&&Ee==="next"?re+ne.substr(re.length):Te<re.length&&Ee==="prev"?re.substr(0,ne.length):Me<0?null:re.substr(0,Me)+ie[Me]+ne.substr(Me+1)}($,L,_[U],S[U],m,x);G===null&&F===null?E=U+1:(F===null||0<m(F,G))&&(F=G)}return A(F!==null?function(){P.continue(F+T)}:O),!1}),i}function _n(i,o,u,f){return{type:2,lower:i,upper:o,lowerOpen:u,upperOpen:f}}function ka(i){return{type:1,lower:i,upper:i}}var xa=(Object.defineProperty(wt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),wt.prototype.between=function(i,o,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(u||f)&&(!u||!f)?lr(this):new this.Collection(this,function(){return _n(i,o,!u,!f)})}catch{return Kt(this,an)}},wt.prototype.equals=function(i){return i==null?Kt(this,an):new this.Collection(this,function(){return ka(i)})},wt.prototype.above=function(i){return i==null?Kt(this,an):new this.Collection(this,function(){return _n(i,void 0,!0)})},wt.prototype.aboveOrEqual=function(i){return i==null?Kt(this,an):new this.Collection(this,function(){return _n(i,void 0,!1)})},wt.prototype.below=function(i){return i==null?Kt(this,an):new this.Collection(this,function(){return _n(void 0,i,!1,!0)})},wt.prototype.belowOrEqual=function(i){return i==null?Kt(this,an):new this.Collection(this,function(){return _n(void 0,i)})},wt.prototype.startsWith=function(i){return typeof i!="string"?Kt(this,da):this.between(i,i+Un,!0,!0)},wt.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):yi(this,function(o,u){return o.indexOf(u[0])===0},[i],Un)},wt.prototype.equalsIgnoreCase=function(i){return yi(this,function(o,u){return o===u[0]},[i],"")},wt.prototype.anyOfIgnoreCase=function(){var i=rt.apply(pe,arguments);return i.length===0?lr(this):yi(this,function(o,u){return u.indexOf(o)!==-1},i,"")},wt.prototype.startsWithAnyOfIgnoreCase=function(){var i=rt.apply(pe,arguments);return i.length===0?lr(this):yi(this,function(o,u){return u.some(function(f){return o.indexOf(f)===0})},i,Un)},wt.prototype.anyOf=function(){var i=this,o=rt.apply(pe,arguments),u=this._cmp;try{o.sort(u)}catch{return Kt(this,an)}if(o.length===0)return lr(this);var f=new this.Collection(this,function(){return _n(o[0],o[o.length-1])});f._ondirectionchange=function(p){u=p==="next"?i._ascending:i._descending,o.sort(u)};var d=0;return f._addAlgorithm(function(p,m,_){for(var S=p.key;0<u(S,o[d]);)if(++d===o.length)return m(_),!1;return u(S,o[d])===0||(m(function(){p.continue(o[d])}),!1)}),f},wt.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},wt.prototype.noneOf=function(){var i=rt.apply(pe,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Kt(this,an)}var o=i.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},wt.prototype.inAnyRange=function($,o){var u=this,f=this._cmp,d=this._ascending,p=this._descending,m=this._min,_=this._max;if($.length===0)return lr(this);if(!$.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&d(L[0],L[1])<=0}))return Kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var S=!o||o.includeLowers!==!1,x=o&&o.includeUppers===!0,T,w=d;function C(L,F){return w(L[0],F[0])}try{(T=$.reduce(function(L,F){for(var U=0,G=L.length;U<G;++U){var re=L[U];if(f(F[0],re[1])<0&&0<f(F[1],re[0])){re[0]=m(re[0],F[0]),re[1]=_(re[1],F[1]);break}}return U===G&&L.push(F),L},[])).sort(C)}catch{return Kt(this,an)}var E=0,P=x?function(L){return 0<d(L,T[E][1])}:function(L){return 0<=d(L,T[E][1])},A=S?function(L){return 0<p(L,T[E][0])}:function(L){return 0<=p(L,T[E][0])},O=P,$=new this.Collection(this,function(){return _n(T[0][0],T[T.length-1][1],!S,!x)});return $._ondirectionchange=function(L){w=L==="next"?(O=P,d):(O=A,p),T.sort(C)},$._addAlgorithm(function(L,F,U){for(var G,re=L.key;O(re);)if(++E===T.length)return F(U),!1;return!P(G=re)&&!A(G)||(u._cmp(re,T[E][1])===0||u._cmp(re,T[E][0])===0||F(function(){w===d?L.continue(T[E][0]):L.continue(T[E][1])}),!1)}),$},wt.prototype.startsWithAnyOf=function(){var i=rt.apply(pe,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?lr(this):this.inAnyRange(i.map(function(o){return[o,o+Un]})):Kt(this,"startsWithAnyOf() only works with strings")},wt);function wt(){}function Zt(i){return ct(function(o){return Rr(o),i(o.target.error),!1})}function Rr(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Ir="storagemutated",Os="x-storagemutated-1",bn=Cr(null,Ir),Sc=(en.prototype._lock=function(){return ce(!de.global),++this._reculock,this._reculock!==1||de.global||(de.lockOwnerFor=this),this},en.prototype._unlock=function(){if(ce(!de.global),--this._reculock==0)for(de.global||(de.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Mn(i[1],i[0])}catch{}}return this},en.prototype._locked=function(){return this._reculock&&de.lockOwnerFor!==this},en.prototype.create=function(i){var o=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(ce(!this.idbtrans),!i&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new q.DatabaseClosed(f);case"MissingAPIError":throw new q.MissingAPI(f.message,f);default:throw new q.OpenFailed(f)}if(!this.active)throw new q.TransactionInactive;return ce(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ct(function(d){Rr(d),o._reject(i.error)}),i.onabort=ct(function(d){Rr(d),o.active&&o._reject(new q.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=ct(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&bn.storagemutated.fire(i.mutatedParts)}),this},en.prototype._promise=function(i,o,u){var f=this;if(i==="readwrite"&&this.mode!=="readwrite")return gt(new q.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new q.TransactionInactive);if(this._locked())return new le(function(p,m){f._blockedFuncs.push([function(){f._promise(i,o,u).then(p,m)},de])});if(u)return yn(function(){var p=new le(function(m,_){f._lock();var S=o(m,_,f);S&&S.then&&S.then(m,_)});return p.finally(function(){return f._unlock()}),p._lib=!0,p});var d=new le(function(p,m){var _=o(p,m,f);_&&_.then&&_.then(p,m)});return d._lib=!0,d},en.prototype._root=function(){return this.parent?this.parent._root():this},en.prototype.waitFor=function(i){var o,u=this._root(),f=le.resolve(i);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],o=u.idbtrans.objectStore(u.storeNames[0]),function p(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(o.get(-1/0).onsuccess=p)}());var d=u._waitingFor;return new le(function(p,m){f.then(function(_){return u._waitingQueue.push(ct(p.bind(null,_)))},function(_){return u._waitingQueue.push(ct(m.bind(null,_)))}).finally(function(){u._waitingFor===d&&(u._waitingFor=null)})})},en.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},en.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,i))return o[i];var u=this.schema[i];if(!u)throw new q.NotFound("Table "+i+" not part of transaction");return u=new this.db.Table(i,u,this),u.core=this.db.core.table(i),o[i]=u},en);function en(){}function Ps(i,o,u,f,d,p,m){return{name:i,keyPath:o,unique:u,multi:f,auto:d,compound:p,src:(u&&!m?"&":"")+(f?"*":"")+(d?"++":"")+Ea(o)}}function Ea(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function Ts(i,o,u){return{name:i,primKey:o,indexes:u,mappedClass:null,idxByName:(f=function(d){return[d.name,d]},u.reduce(function(d,p,m){return m=f(p,m),m&&(d[m[0]]=m[1]),d},{}))};var f}var Dr=function(i){try{return i.only([[]]),Dr=function(){return[[]]},[[]]}catch{return Dr=function(){return Un},Un}};function Cs(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(u){return u[o]}:function(u){return Xe(u,o)}:function(u){return Xe(u,i)};var o}function Sa(i){return[].slice.call(i)}var Oc=0;function $r(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Pc(i,o,S){function f(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=O.lower,P=O.upper,A=O.lowerOpen,O=O.upperOpen;return E===void 0?P===void 0?null:o.upperBound(P,!!O):P===void 0?o.lowerBound(E,!!A):o.bound(E,P,!!A,!!O)}function d(C){var E,P=C.name;return{name:P,schema:C,mutate:function(A){var O=A.trans,$=A.type,L=A.keys,F=A.values,U=A.range;return new Promise(function(G,re){G=ct(G);var Q=O.objectStore(P),ne=Q.keyPath==null,ie=$==="put"||$==="add";if(!ie&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var z,Ee=(L||F||{length:1}).length;if(L&&F&&L.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Te(Rt){++Gt,Rr(Rt)}var Me=[],Ie=[],Gt=0;if($==="deleteRange"){if(U.type===4)return G({numFailures:Gt,failures:Ie,results:[],lastResult:void 0});U.type===3?Me.push(z=Q.clear()):Me.push(z=Q.delete(f(U)))}else{var ne=ie?ne?[F,L]:[F,null]:[L,null],De=ne[0],xt=ne[1];if(ie)for(var Et=0;Et<Ee;++Et)Me.push(z=xt&&xt[Et]!==void 0?Q[$](De[Et],xt[Et]):Q[$](De[Et])),z.onerror=Te;else for(Et=0;Et<Ee;++Et)Me.push(z=Q[$](De[Et])),z.onerror=Te}function Ci(Rt){Rt=Rt.target.result,Me.forEach(function(qn,zs){return qn.error!=null&&(Ie[zs]=qn.error)}),G({numFailures:Gt,failures:Ie,results:$==="delete"?L:Me.map(function(qn){return qn.result}),lastResult:Rt})}z.onerror=function(Rt){Te(Rt),Ci(Rt)},z.onsuccess=Ci})},getMany:function(A){var O=A.trans,$=A.keys;return new Promise(function(L,F){L=ct(L);for(var U,G=O.objectStore(P),re=$.length,Q=new Array(re),ne=0,ie=0,z=function(Me){Me=Me.target,Q[Me._pos]=Me.result,++ie===ne&&L(Q)},Ee=Zt(F),Te=0;Te<re;++Te)$[Te]!=null&&((U=G.get($[Te]))._pos=Te,U.onsuccess=z,U.onerror=Ee,++ne);ne===0&&L(Q)})},get:function(A){var O=A.trans,$=A.key;return new Promise(function(L,F){L=ct(L);var U=O.objectStore(P).get($);U.onsuccess=function(G){return L(G.target.result)},U.onerror=Zt(F)})},query:(E=x,function(A){return new Promise(function(O,$){O=ct(O);var L,F,U,ne=A.trans,G=A.values,re=A.limit,z=A.query,Q=re===1/0?void 0:re,ie=z.index,z=z.range,ne=ne.objectStore(P),ie=ie.isPrimaryKey?ne:ne.index(ie.name),z=f(z);if(re===0)return O({result:[]});E?((Q=G?ie.getAll(z,Q):ie.getAllKeys(z,Q)).onsuccess=function(Ee){return O({result:Ee.target.result})},Q.onerror=Zt($)):(L=0,F=!G&&"openKeyCursor"in ie?ie.openKeyCursor(z):ie.openCursor(z),U=[],F.onsuccess=function(Ee){var Te=F.result;return Te?(U.push(G?Te.value:Te.primaryKey),++L===re?O({result:U}):void Te.continue()):O({result:U})},F.onerror=Zt($))})}),openCursor:function(A){var O=A.trans,$=A.values,L=A.query,F=A.reverse,U=A.unique;return new Promise(function(G,re){G=ct(G);var ie=L.index,Q=L.range,ne=O.objectStore(P),ne=ie.isPrimaryKey?ne:ne.index(ie.name),ie=F?U?"prevunique":"prev":U?"nextunique":"next",z=!$&&"openKeyCursor"in ne?ne.openKeyCursor(f(Q),ie):ne.openCursor(f(Q),ie);z.onerror=Zt(re),z.onsuccess=ct(function(Ee){var Te,Me,Ie,Gt,De=z.result;De?(De.___id=++Oc,De.done=!1,Te=De.continue.bind(De),Me=(Me=De.continuePrimaryKey)&&Me.bind(De),Ie=De.advance.bind(De),Gt=function(){throw new Error("Cursor not stopped")},De.trans=O,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=ct(re),De.next=function(){var xt=this,Et=1;return this.start(function(){return Et--?xt.continue():xt.stop()}).then(function(){return xt})},De.start=function(xt){function Et(){if(z.result)try{xt()}catch(Rt){De.fail(Rt)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var Ci=new Promise(function(Rt,qn){Rt=ct(Rt),z.onerror=Zt(qn),De.fail=qn,De.stop=function(zs){De.stop=De.continue=De.continuePrimaryKey=De.advance=Gt,Rt(zs)}});return z.onsuccess=ct(function(Rt){z.onsuccess=Et,Et()}),De.continue=Te,De.continuePrimaryKey=Me,De.advance=Ie,Et(),Ci},G(De)):G(null)},re)})},count:function(A){var O=A.query,$=A.trans,L=O.index,F=O.range;return new Promise(function(U,G){var re=$.objectStore(P),Q=L.isPrimaryKey?re:re.index(L.name),re=f(F),Q=re?Q.count(re):Q.count();Q.onsuccess=ct(function(ne){return U(ne.target.result)}),Q.onerror=Zt(G)})}}}var p,m,_,T=(m=S,_=Sa((p=i).objectStoreNames),{schema:{name:p.name,tables:_.map(function(C){return m.objectStore(C)}).map(function(C){var E=C.keyPath,O=C.autoIncrement,P=h(E),A={},O={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:P,keyPath:E,autoIncrement:O,unique:!0,extractKey:Cs(E)},indexes:Sa(C.indexNames).map(function($){return C.index($)}).map(function(U){var L=U.name,F=U.unique,G=U.multiEntry,U=U.keyPath,G={name:L,compound:h(U),keyPath:U,unique:F,multiEntry:G,extractKey:Cs(U)};return A[$r(U)]=G}),getIndexByKeyPath:function($){return A[$r($)]}};return A[":id"]=O.primaryKey,E!=null&&(A[$r(E)]=O.primaryKey),O})},hasGetAll:0<_.length&&"getAll"in m.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=T.schema,x=T.hasGetAll,T=S.tables.map(d),w={};return T.forEach(function(C){return w[C.name]=C}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(C){if(!w[C])throw new Error("Table '".concat(C,"' not found"));return w[C]},MIN_KEY:-1/0,MAX_KEY:Dr(o),schema:S}}function Tc(i,o,u,f){var d=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=Pc(o,d,f),i.dbcore.reduce(function(p,m){return m=m.create,r(r({},p),m(p))},f))}}function mi(i,f){var u=f.db,f=Tc(i._middlewares,u,i._deps,f);i.core=f.dbcore,i.tables.forEach(function(d){var p=d.name;i.core.schema.tables.some(function(m){return m.name===p})&&(d.core=i.core.table(p),i[p]instanceof i.Table&&(i[p].core=d.core))})}function vi(i,o,u,f){u.forEach(function(d){var p=f[d];o.forEach(function(m){var _=function S(x,T){return fe(x,T)||(x=y(x))&&S(x,T)}(m,d);(!_||"value"in _&&_.value===void 0)&&(m===i.Transaction.prototype||m instanceof i.Transaction?se(m,d,{get:function(){return this.table(d)},set:function(S){V(this,d,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):m[d]=new i.Table(d,p))})})}function As(i,o){o.forEach(function(u){for(var f in u)u[f]instanceof i.Table&&delete u[f]})}function Cc(i,o){return i._cfg.version-o._cfg.version}function Ac(i,o,u,f){var d=i._dbSchema;u.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=Ts("$meta",Pa("")[0],[]),i._storeNames.push("$meta"));var p=i._createTransaction("readwrite",i._storeNames,d);p.create(u),p._completion.catch(f);var m=p._reject.bind(p),_=de.transless||de;yn(function(){return de.trans=p,de.transless=_,o!==0?(mi(i,u),x=o,((S=p).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(T){return T??x}):le.resolve(x)).then(function(T){return C=T,E=p,P=u,A=[],T=(w=i)._versions,O=w._dbSchema=bi(0,w.idbdb,P),(T=T.filter(function($){return $._cfg.version>=C})).length!==0?(T.forEach(function($){A.push(function(){var L=O,F=$._cfg.dbschema;wi(w,L,P),wi(w,F,P),O=w._dbSchema=F;var U=js(L,F);U.add.forEach(function(ie){Rs(P,ie[0],ie[1].primKey,ie[1].indexes)}),U.change.forEach(function(ie){if(ie.recreate)throw new q.Upgrade("Not yet support for changing primary key");var z=P.objectStore(ie.name);ie.add.forEach(function(Ee){return _i(z,Ee)}),ie.change.forEach(function(Ee){z.deleteIndex(Ee.name),_i(z,Ee)}),ie.del.forEach(function(Ee){return z.deleteIndex(Ee)})});var G=$._cfg.contentUpgrade;if(G&&$._cfg.version>C){mi(w,P),E._memoizedTables={};var re=I(F);U.del.forEach(function(ie){re[ie]=L[ie]}),As(w,[w.Transaction.prototype]),vi(w,[w.Transaction.prototype],l(re),re),E.schema=re;var Q,ne=Ye(G);return ne&&sr(),U=le.follow(function(){var ie;(Q=G(E))&&ne&&(ie=mn.bind(null,null),Q.then(ie,ie))}),Q&&typeof Q.then=="function"?le.resolve(Q):U.then(function(){return Q})}}),A.push(function(L){var F,U,G=$._cfg.dbschema;F=G,U=L,[].slice.call(U.db.objectStoreNames).forEach(function(re){return F[re]==null&&U.db.deleteObjectStore(re)}),As(w,[w.Transaction.prototype]),vi(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),E.schema=w._dbSchema}),A.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===$._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(F){return F!=="$meta"})):L.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return A.length?le.resolve(A.shift()(E.idbtrans)).then($):le.resolve()}().then(function(){Oa(O,P)})):le.resolve();var w,C,E,P,A,O}).catch(m)):(l(d).forEach(function(T){Rs(u,T,d[T].primKey,d[T].indexes)}),mi(i,u),void le.follow(function(){return i.on.populate.fire(p)}).catch(m));var S,x})}function jc(i,o){Oa(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var u=bi(0,i.idbdb,o);wi(i,i._dbSchema,o);for(var f=0,d=js(u,i._dbSchema).change;f<d.length;f++){var p=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(m.name);m.add.forEach(function(S){H&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(S.src)),_i(_,S)})}(d[f]);if(typeof p=="object")return p.value}}function js(i,o){var u,f={del:[],add:[],change:[]};for(u in i)o[u]||f.del.push(u);for(u in o){var d=i[u],p=o[u];if(d){var m={name:u,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||d.primKey.auto!==p.primKey.auto)m.recreate=!0,f.change.push(m);else{var _=d.idxByName,S=p.idxByName,x=void 0;for(x in _)S[x]||m.del.push(x);for(x in S){var T=_[x],w=S[x];T?T.src!==w.src&&m.change.push(w):m.add.push(w)}(0<m.del.length||0<m.add.length||0<m.change.length)&&f.change.push(m)}}else f.add.push([u,p])}return f}function Rs(i,o,u,f){var d=i.db.createObjectStore(o,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(p){return _i(d,p)}),d}function Oa(i,o){l(i).forEach(function(u){o.db.objectStoreNames.contains(u)||(H&&console.debug("Dexie: Creating missing table",u),Rs(o,u,i[u].primKey,i[u].indexes))})}function _i(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function bi(i,o,u){var f={};return Ae(o.objectStoreNames,0).forEach(function(d){for(var p=u.objectStore(d),m=Ps(Ea(x=p.keyPath),x||"",!0,!1,!!p.autoIncrement,x&&typeof x!="string",!0),_=[],S=0;S<p.indexNames.length;++S){var T=p.index(p.indexNames[S]),x=T.keyPath,T=Ps(T.name,x,!!T.unique,!!T.multiEntry,!1,x&&typeof x!="string",!1);_.push(T)}f[d]=Ts(d,m,_)}),f}function wi(i,o,u){for(var f=u.db.objectStoreNames,d=0;d<f.length;++d){var p=f[d],m=u.objectStore(p);i._hasGetAll="getAll"in m;for(var _=0;_<m.indexNames.length;++_){var S=m.indexNames[_],x=m.index(S).keyPath,T=typeof x=="string"?x:"["+Ae(x).join("+")+"]";!o[p]||(x=o[p].idxByName[T])&&(x.name=S,delete o[p].idxByName[T],o[p].idxByName[S]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Pa(i){return i.split(",").map(function(o,u){var f=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return Ps(f,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),h(d),u===0)})}var Rc=(ki.prototype._parseStoresSpec=function(i,o){l(i).forEach(function(u){if(i[u]!==null){var f=Pa(i[u]),d=f.shift();if(d.unique=!0,d.multi)throw new q.Schema("Primary key cannot be multi-valued");f.forEach(function(p){if(p.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),o[u]=Ts(u,d,f)}})},ki.prototype.stores=function(u){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,u):u;var u=o._versions,f={},d={};return u.forEach(function(p){c(f,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(f,d)}),o._dbSchema=d,As(o,[o._allTables,o,o.Transaction.prototype]),vi(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(d),d),o._storeNames=l(d),this},ki.prototype.upgrade=function(i){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||we,i),this},ki);function ki(){}function Is(i,o){var u=i._dbNamesDB;return u||(u=i._dbNamesDB=new un(fi,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Ds(i){return i&&typeof i.databases=="function"}function $s(i){return yn(function(){return de.letThrough=!0,i()})}function Ls(i){return!("from"in i)}var jt=function(i,o){if(!this){var u=new jt;return i&&"d"in i&&c(u,i),u}c(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Lr(i,o,u){var f=Ne(o,u);if(!isNaN(f)){if(0<f)throw RangeError();if(Ls(i))return c(i,{from:o,to:u,d:1});var d=i.l,f=i.r;if(Ne(u,i.from)<0)return d?Lr(d,o,u):i.l={from:o,to:u,d:1,l:null,r:null},Ca(i);if(0<Ne(o,i.to))return f?Lr(f,o,u):i.r={from:o,to:u,d:1,l:null,r:null},Ca(i);Ne(o,i.from)<0&&(i.from=o,i.l=null,i.d=f?f.d+1:1),0<Ne(u,i.to)&&(i.to=u,i.r=null,i.d=i.l?i.l.d+1:1),u=!i.r,d&&!i.l&&Fr(i,d),f&&u&&Fr(i,f)}}function Fr(i,o){Ls(o)||function u(f,S){var p=S.from,m=S.to,_=S.l,S=S.r;Lr(f,p,m),_&&u(f,_),S&&u(f,S)}(i,o)}function Ta(i,o){var u=xi(o),f=u.next();if(f.done)return!1;for(var d=f.value,p=xi(i),m=p.next(d.from),_=m.value;!f.done&&!m.done;){if(Ne(_.from,d.to)<=0&&0<=Ne(_.to,d.from))return!0;Ne(d.from,_.from)<0?d=(f=u.next(_.from)).value:_=(m=p.next(d.from)).value}return!1}function xi(i){var o=Ls(i)?null:{s:0,n:i};return{next:function(u){for(var f=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,f)for(;o.n.l&&Ne(u,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!f||Ne(u,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Ca(i){var o,u,f=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((u=i.l)===null||u===void 0?void 0:u.d)||0),d=1<f?"r":f<-1?"l":"";d&&(o=d=="r"?"l":"r",u=r({},i),f=i[d],i.from=f.from,i.to=f.to,i[d]=f[d],u[d]=f[o],(i[o]=u).d=Aa(u)),i.d=Aa(i)}function Aa(u){var o=u.r,u=u.l;return(o?u?Math.max(o.d,u.d):o.d:u?u.d:0)+1}function Ei(i,o){return l(o).forEach(function(u){i[u]?Fr(i[u],o[u]):i[u]=function f(d){var p,m,_={};for(p in d)b(d,p)&&(m=d[p],_[p]=!m||typeof m!="object"||ue.has(m.constructor)?m:f(m));return _}(o[u])}),i}function Fs(i,o){return i.all||o.all||Object.keys(i).some(function(u){return o[u]&&Ta(o[u],i[u])})}R(jt.prototype,((Wt={add:function(i){return Fr(this,i),this},addKey:function(i){return Lr(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(u){return Lr(o,u,u)}),this},hasKey:function(i){var o=xi(this).next(i).value;return o&&Ne(o.from,i)<=0&&0<=Ne(o.to,i)}})[Oe]=function(){return xi(this)},Wt));var Bn={},Ms={},Us=!1;function Si(i){Ei(Ms,i),Us||(Us=!0,setTimeout(function(){Us=!1,Ks(Ms,!(Ms={}))},0))}function Ks(i,o){o===void 0&&(o=!1);var u=new Set;if(i.all)for(var f=0,d=Object.values(Bn);f<d.length;f++)ja(m=d[f],i,u,o);else for(var p in i){var m,_=/^idb\:\/\/(.*)\/(.*)\//.exec(p);_&&(p=_[1],_=_[2],(m=Bn["idb://".concat(p,"/").concat(_)])&&ja(m,i,u,o))}u.forEach(function(S){return S()})}function ja(i,o,u,f){for(var d=[],p=0,m=Object.entries(i.queries.query);p<m.length;p++){for(var _=m[p],S=_[0],x=[],T=0,w=_[1];T<w.length;T++){var C=w[T];Fs(o,C.obsSet)?C.subscribers.forEach(function(O){return u.add(O)}):f&&x.push(C)}f&&d.push([S,x])}if(f)for(var E=0,P=d;E<P.length;E++){var A=P[E],S=A[0],x=A[1];i.queries.query[S]=x}}function Ic(i){var o=i._state,u=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?gt(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var f=o.openCanceller,d=Math.round(10*i.verno),p=!1;function m(){if(o.openCanceller!==f)throw new q.DatabaseClosed("db.open() was cancelled")}function _(){return new le(function(C,E){if(m(),!u)throw new q.MissingAPI;var P=i.name,A=o.autoSchema||!d?u.open(P):u.open(P,d);if(!A)throw new q.MissingAPI;A.onerror=Zt(E),A.onblocked=ct(i._fireOnBlocked),A.onupgradeneeded=ct(function(O){var $;T=A.transaction,o.autoSchema&&!i._options.allowEmptyDB?(A.onerror=Rr,T.abort(),A.result.close(),($=u.deleteDatabase(P)).onsuccess=$.onerror=ct(function(){E(new q.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(T.onerror=Zt(E),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=A.result,p&&jc(i,T),Ac(i,O/10,T,E))},E),A.onsuccess=ct(function(){T=null;var O,$,L,F,U,G=i.idbdb=A.result,re=Ae(G.objectStoreNames);if(0<re.length)try{var Q=G.transaction((F=re).length===1?F[0]:F,"readonly");if(o.autoSchema)$=G,L=Q,(O=i).verno=$.version/10,L=O._dbSchema=bi(0,$,L),O._storeNames=Ae($.objectStoreNames,0),vi(O,[O._allTables],l(L),L);else if(wi(i,i._dbSchema,Q),((U=js(bi(0,(U=i).idbdb,Q),U._dbSchema)).add.length||U.change.some(function(ne){return ne.add.length||ne.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),d=G.version+1,p=!0,C(_());mi(i,Q)}catch{}or.push(i),G.onversionchange=ct(function(ne){o.vcFired=!0,i.on("versionchange").fire(ne)}),G.onclose=ct(function(ne){i.on("close").fire(ne)}),w&&(U=i._deps,Q=P,G=U.indexedDB,U=U.IDBKeyRange,Ds(G)||Q===fi||Is(G,U).put({name:Q}).catch(we)),C()},E)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return le.reject(C)})}var S,x=o.dbReadyResolve,T=null,w=!1;return le.race([f,(typeof navigator>"u"?le.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function E(){return indexedDB.databases().finally(C)}S=setInterval(E,100),E()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(_)]).then(function(){return m(),o.onReadyBeingFired=[],le.resolve($s(function(){return i.on.ready.fire(i.vip)})).then(function C(){if(0<o.onReadyBeingFired.length){var E=o.onReadyBeingFired.reduce(J,we);return o.onReadyBeingFired=[],le.resolve($s(function(){return E(i.vip)})).then(C)}})}).finally(function(){o.openCanceller===f&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(C){o.dbOpenError=C;try{T&&T.abort()}catch{}return f===o.openCanceller&&i._close(),gt(C)}).finally(function(){o.openComplete=!0,x()}).then(function(){var C;return w&&(C={},i.tables.forEach(function(E){E.schema.indexes.forEach(function(P){P.name&&(C["idb://".concat(i.name,"/").concat(E.name,"/").concat(P.name)]=new jt(-1/0,[[[]]]))}),C["idb://".concat(i.name,"/").concat(E.name,"/")]=C["idb://".concat(i.name,"/").concat(E.name,"/:dels")]=new jt(-1/0,[[[]]])}),bn(Ir).fire(C),Ks(C,!0)),i})}function Bs(i){function o(p){return i.next(p)}var u=d(o),f=d(function(p){return i.throw(p)});function d(p){return function(S){var _=p(S),S=_.value;return _.done?S:S&&typeof S.then=="function"?S.then(u,f):h(S)?Promise.all(S).then(u,f):u(S)}}return d(o)()}function Oi(i,o,u){for(var f=h(i)?i.slice():[i],d=0;d<u;++d)f.push(o);return f}var Dc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var u=i.table(o),f=u.schema,d={},p=[];function m(w,C,E){var P=$r(w),A=d[P]=d[P]||[],O=w==null?0:typeof w=="string"?1:w.length,$=0<C,$=r(r({},E),{name:$?"".concat(P,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:$,keyTail:C,keyLength:O,extractKey:Cs(w),unique:!$&&E.unique});return A.push($),$.isPrimaryKey||p.push($),1<O&&m(O===2?w[0]:w.slice(0,O-1),C+1,E),A.sort(function(L,F){return L.keyTail-F.keyTail}),$}o=m(f.primaryKey.keyPath,0,f.primaryKey),d[":id"]=[o];for(var _=0,S=f.indexes;_<S.length;_++){var x=S[_];m(x.keyPath,0,x)}function T(w){var C,E=w.query.index;return E.isVirtual?r(r({},w),{query:{index:E.lowLevelIndex,range:(C=w.query.range,E=E.keyTail,{type:C.type===1?2:C.type,lower:Oi(C.lower,C.lowerOpen?i.MAX_KEY:i.MIN_KEY,E),lowerOpen:!0,upper:Oi(C.upper,C.upperOpen?i.MIN_KEY:i.MAX_KEY,E),upperOpen:!0})}}):w}return r(r({},u),{schema:r(r({},f),{primaryKey:o,indexes:p,getIndexByKeyPath:function(w){return(w=d[$r(w)])&&w[0]}}),count:function(w){return u.count(T(w))},query:function(w){return u.query(T(w))},openCursor:function(w){var C=w.query.index,E=C.keyTail,P=C.isVirtual,A=C.keyLength;return P?u.openCursor(T(w)).then(function($){return $&&O($)}):u.openCursor(w);function O($){return Object.create($,{continue:{value:function(L){L!=null?$.continue(Oi(L,w.reverse?i.MAX_KEY:i.MIN_KEY,E)):w.unique?$.continue($.key.slice(0,A).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,E)):$.continue()}},continuePrimaryKey:{value:function(L,F){$.continuePrimaryKey(Oi(L,i.MAX_KEY,E),F)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var L=$.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return $.value}}})}}})}})}};function Ns(i,o,u,f){return u=u||{},f=f||"",l(i).forEach(function(d){var p,m,_;b(o,d)?(p=i[d],m=o[d],typeof p=="object"&&typeof m=="object"&&p&&m?(_=lt(p))!==lt(m)?u[f+d]=o[d]:_==="Object"?Ns(p,m,u,f+d+"."):p!==m&&(u[f+d]=o[d]):p!==m&&(u[f+d]=o[d])):u[f+d]=void 0}),l(o).forEach(function(d){b(i,d)||(u[f+d]=o[d])}),u}function qs(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var $c={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var u=i.table(o),f=u.schema.primaryKey;return r(r({},u),{mutate:function(d){var p=de.trans,m=p.table(o).hook,_=m.deleting,S=m.creating,x=m.updating;switch(d.type){case"add":if(S.fire===we)break;return p._promise("readwrite",function(){return T(d)},!0);case"put":if(S.fire===we&&x.fire===we)break;return p._promise("readwrite",function(){return T(d)},!0);case"delete":if(_.fire===we)break;return p._promise("readwrite",function(){return T(d)},!0);case"deleteRange":if(_.fire===we)break;return p._promise("readwrite",function(){return function w(C,E,P){return u.query({trans:C,values:!1,query:{index:f,range:E},limit:P}).then(function(A){var O=A.result;return T({type:"delete",keys:O,trans:C}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):O.length<P?{failures:[],numFailures:0,lastResult:void 0}:w(C,r(r({},E),{lower:O[O.length-1],lowerOpen:!0}),P)})})}(d.trans,d.range,1e4)},!0)}return u.mutate(d);function T(w){var C,E,P,A=de.trans,O=w.keys||qs(f,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:O}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),C=u,P=O,((E=w).type==="add"?Promise.resolve([]):C.getMany({trans:E.trans,keys:P,cache:"immutable"})).then(function($){var L=O.map(function(F,U){var G,re,Q,ne=$[U],ie={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(ie,F,ne,A):w.type==="add"||ne===void 0?(G=S.fire.call(ie,F,w.values[U],A),F==null&&G!=null&&(w.keys[U]=F=G,f.outbound||be(w.values[U],f.keyPath,F))):(G=Ns(ne,w.values[U]),(re=x.fire.call(ie,G,F,ne,A))&&(Q=w.values[U],Object.keys(re).forEach(function(z){b(Q,z)?Q[z]=re[z]:be(Q,z,re[z])}))),ie});return u.mutate(w).then(function(F){for(var U=F.failures,G=F.results,re=F.numFailures,F=F.lastResult,Q=0;Q<O.length;++Q){var ne=(G||O)[Q],ie=L[Q];ne==null?ie.onerror&&ie.onerror(U[Q]):ie.onsuccess&&ie.onsuccess(w.type==="put"&&$[Q]?w.values[Q]:ne)}return{failures:U,results:G,numFailures:re,lastResult:F}}).catch(function(F){return L.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}}})}})}};function Ra(i,o,u){try{if(!o||o.keys.length<i.length)return null;for(var f=[],d=0,p=0;d<o.keys.length&&p<i.length;++d)Ne(o.keys[d],i[p])===0&&(f.push(u?ye(o.values[d]):o.values[d]),++p);return f.length===i.length?f:null}catch{return null}}var Lc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var u=i.table(o);return r(r({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var d=Ra(f.keys,f.trans._cache,f.cache==="clone");return d?le.resolve(d):u.getMany(f).then(function(p){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ye(p):p},p})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function Ia(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Da(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Fc={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,u=new jt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(f,d,p){if(de.subscr&&d!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(de.querier));return i.transaction(f,d,p)},table:function(f){var d=i.table(f),p=d.schema,m=p.primaryKey,w=p.indexes,_=m.extractKey,S=m.outbound,x=m.autoIncrement&&w.filter(function(E){return E.compound&&E.keyPath.includes(m.keyPath)}),T=r(r({},d),{mutate:function(E){function P(z){return z="idb://".concat(o,"/").concat(f,"/").concat(z),F[z]||(F[z]=new jt)}var A,O,$,L=E.trans,F=E.mutatedParts||(E.mutatedParts={}),U=P(""),G=P(":dels"),re=E.type,ie=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[qs(m,E).filter(function(z){return z}),E.values]:[],Q=ie[0],ne=ie[1],ie=E.trans._cache;return h(Q)?(U.addKeys(Q),(ie=re==="delete"||Q.length===ne.length?Ra(Q,ie):null)||G.addKeys(Q),(ie||ne)&&(A=P,O=ie,$=ne,p.indexes.forEach(function(z){var Ee=A(z.name||"");function Te(Ie){return Ie!=null?z.extractKey(Ie):null}function Me(Ie){return z.multiEntry&&h(Ie)?Ie.forEach(function(Gt){return Ee.addKey(Gt)}):Ee.addKey(Ie)}(O||$).forEach(function(Ie,xt){var De=O&&Te(O[xt]),xt=$&&Te($[xt]);Ne(De,xt)!==0&&(De!=null&&Me(De),xt!=null&&Me(xt))})}))):Q?(ne={from:Q.lower,to:Q.upper},G.add(ne),U.add(ne)):(U.add(u),G.add(u),p.indexes.forEach(function(z){return P(z.name).add(u)})),d.mutate(E).then(function(z){return!Q||E.type!=="add"&&E.type!=="put"||(U.addKeys(z.results),x&&x.forEach(function(Ee){var Te=E.values.map(function(Ie){return Ee.extractKey(Ie)}),Me=Ee.keyPath.findIndex(function(Ie){return Ie===m.keyPath});z.results.forEach(function(Ie){return Te[Me]=Ie}),P(Ee.name).addKeys(Te)})),L.mutatedParts=Ei(L.mutatedParts||{},F),z})}}),w=function(P){var A=P.query,P=A.index,A=A.range;return[P,new jt((P=A.lower)!==null&&P!==void 0?P:i.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:i.MAX_KEY)]},C={get:function(E){return[m,new jt(E.key)]},getMany:function(E){return[m,new jt().addKeys(E.keys)]},count:w,query:w,openCursor:w};return l(C).forEach(function(E){T[E]=function(P){var A=de.subscr,O=!!A,$=Ia(de,d)&&Da(E,P)?P.obsSet={}:A;if(O){var L=function(ne){return ne="idb://".concat(o,"/").concat(f,"/").concat(ne),$[ne]||($[ne]=new jt)},F=L(""),U=L(":dels"),A=C[E](P),O=A[0],A=A[1];if((E==="query"&&O.isPrimaryKey&&!P.values?U:L(O.name||"")).add(A),!O.isPrimaryKey){if(E!=="count"){var G=E==="query"&&S&&P.values&&d.query(r(r({},P),{values:!1}));return d[E].apply(this,arguments).then(function(ne){if(E==="query"){if(S&&P.values)return G.then(function(Te){return Te=Te.result,F.addKeys(Te),ne});var ie=P.values?ne.result.map(_):ne.result;(P.values?F:U).addKeys(ie)}else if(E==="openCursor"){var z=ne,Ee=P.values;return z&&Object.create(z,{key:{get:function(){return U.addKey(z.primaryKey),z.key}},primaryKey:{get:function(){var Te=z.primaryKey;return U.addKey(Te),Te}},value:{get:function(){return Ee&&F.addKey(z.primaryKey),z.value}}})}return ne})}U.add(u)}}return d[E].apply(this,arguments)}}),T}})}};function $a(i,o,u){if(u.numFailures===0)return o;if(o.type==="deleteRange")return null;var f=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return u.numFailures===f?null:(o=r({},o),h(o.keys)&&(o.keys=o.keys.filter(function(d,p){return!(p in u.failures)})),"values"in o&&h(o.values)&&(o.values=o.values.filter(function(d,p){return!(p in u.failures)})),o)}function Hs(i,o){return u=i,((f=o).lower===void 0||(f.lowerOpen?0<Ne(u,f.lower):0<=Ne(u,f.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?Ne(i,o.upper)<0:Ne(i,o.upper)<=0));var u,f}function La(i,o,C,f,d,p){if(!C||C.length===0)return i;var m=o.query.index,_=m.multiEntry,S=o.query.range,x=f.schema.primaryKey.extractKey,T=m.extractKey,w=(m.lowLevelIndex||m).extractKey,C=C.reduce(function(E,P){var A=E,O=[];if(P.type==="add"||P.type==="put")for(var $=new jt,L=P.values.length-1;0<=L;--L){var F,U=P.values[L],G=x(U);$.hasKey(G)||(F=T(U),(_&&h(F)?F.some(function(ie){return Hs(ie,S)}):Hs(F,S))&&($.addKey(G),O.push(U)))}switch(P.type){case"add":A=E.concat(o.values?O:O.map(function(z){return x(z)}));break;case"put":var re=new jt().addKeys(P.values.map(function(z){return x(z)})),A=E.filter(function(z){return!re.hasKey(o.values?x(z):z)}).concat(o.values?O:O.map(function(z){return x(z)}));break;case"delete":var Q=new jt().addKeys(P.keys);A=E.filter(function(z){return!Q.hasKey(o.values?x(z):z)});break;case"deleteRange":var ne=P.range;A=E.filter(function(z){return!Hs(x(z),ne)})}return A},i);return C===i?i:(C.sort(function(E,P){return Ne(w(E),w(P))||Ne(x(E),x(P))}),o.limit&&o.limit<1/0&&(C.length>o.limit?C.length=o.limit:i.length===o.limit&&C.length<o.limit&&(d.dirty=!0)),p?Object.freeze(C):C)}function Fa(i,o){return Ne(i.lower,o.lower)===0&&Ne(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Mc(i,o){return function(u,f,d,p){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=Ne(u,f))===0){if(d&&p)return 0;if(d)return 1;if(p)return-1}return f}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(u,f,d,p){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=Ne(u,f))===0){if(d&&p)return 0;if(d)return-1;if(p)return 1}return f}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function Uc(i,o,u,f){i.subscribers.add(u),f.addEventListener("abort",function(){var d,p;i.subscribers.delete(u),i.subscribers.size===0&&(d=i,p=o,setTimeout(function(){d.subscribers.size===0&&ve(p,d)},3e3))})}var Kc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(u,f,d){var p,m,_=i.transaction(u,f,d);return f==="readwrite"&&(m=(p=new AbortController).signal,d=function(S){return function(){if(p.abort(),f==="readwrite"){for(var x=new Set,T=0,w=u;T<w.length;T++){var C=w[T],E=Bn["idb://".concat(o,"/").concat(C)];if(E){var P=i.table(C),A=E.optimisticOps.filter(function(Ee){return Ee.trans===_});if(_._explicit&&S&&_.mutatedParts)for(var O=0,$=Object.values(E.queries.query);O<$.length;O++)for(var L=0,F=(re=$[O]).slice();L<F.length;L++)Fs((Q=F[L]).obsSet,_.mutatedParts)&&(ve(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)}));else if(0<A.length){E.optimisticOps=E.optimisticOps.filter(function(Ee){return Ee.trans!==_});for(var U=0,G=Object.values(E.queries.query);U<G.length;U++)for(var re,Q,ne,ie=0,z=(re=G[U]).slice();ie<z.length;ie++)(Q=z[ie]).res!=null&&_.mutatedParts&&(S&&!Q.dirty?(ne=Object.isFrozen(Q.res),ne=La(Q.res,Q.req,A,P,Q,ne),Q.dirty?(ve(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})):ne!==Q.res&&(Q.res=ne,Q.promise=le.resolve({result:ne}))):(Q.dirty&&ve(re,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})))}}}x.forEach(function(Ee){return Ee()})}}},_.addEventListener("abort",d(!1),{signal:m}),_.addEventListener("error",d(!1),{signal:m}),_.addEventListener("complete",d(!0),{signal:m})),_},table:function(u){var f=i.table(u),d=f.schema.primaryKey;return r(r({},f),{mutate:function(p){var m=de.trans;if(d.outbound||m.db._options.cache==="disabled"||m.explicit)return f.mutate(p);var _=Bn["idb://".concat(o,"/").concat(u)];return _?(m=f.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||qs(d,p).some(function(S){return S==null}))?(_.optimisticOps.push(p),p.mutatedParts&&Si(p.mutatedParts),m.then(function(S){0<S.numFailures&&(ve(_.optimisticOps,p),(S=$a(0,p,S))&&_.optimisticOps.push(S),p.mutatedParts&&Si(p.mutatedParts))}),m.catch(function(){ve(_.optimisticOps,p),p.mutatedParts&&Si(p.mutatedParts)})):m.then(function(S){var x=$a(0,r(r({},p),{values:p.values.map(function(E,w){var C,E=(C=d.keyPath)!==null&&C!==void 0&&C.includes(".")?ye(E):r({},E);return be(E,d.keyPath,S.results[w]),E})}),S);_.optimisticOps.push(x),queueMicrotask(function(){return p.mutatedParts&&Si(p.mutatedParts)})}),m):f.mutate(p)},query:function(p){if(!Ia(de,f)||!Da("query",p))return f.query(p);var m=((x=de.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",w=de,_=w.requery,S=w.signal,x=function(P,A,O,$){var L=Bn["idb://".concat(P,"/").concat(A)];if(!L)return[];if(!(A=L.queries[O]))return[null,!1,L,null];var F=A[($.query?$.query.index.name:null)||""];if(!F)return[null,!1,L,null];switch(O){case"query":var U=F.find(function(G){return G.req.limit===$.limit&&G.req.values===$.values&&Fa(G.req.query.range,$.query.range)});return U?[U,!0,L,F]:[F.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=$.limit&&(!$.values||G.req.values)&&Mc(G.req.query.range,$.query.range)}),!1,L,F];case"count":return U=F.find(function(G){return Fa(G.req.query.range,$.query.range)}),[U,!!U,L,F]}}(o,u,"query",p),T=x[0],w=x[1],C=x[2],E=x[3];return T&&w?T.obsSet=p.obsSet:(w=f.query(p).then(function(P){var A=P.result;if(T&&(T.res=A),m){for(var O=0,$=A.length;O<$;++O)Object.freeze(A[O]);Object.freeze(A)}else P.result=ye(A);return P}).catch(function(P){return E&&T&&ve(E,T),Promise.reject(P)}),T={obsSet:p.obsSet,promise:w,subscribers:new Set,type:"query",req:p,dirty:!1},E?E.push(T):(E=[T],(C=C||(Bn["idb://".concat(o,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=E)),Uc(T,E,_,S),T.promise.then(function(P){return{result:La(P.result,p,C==null?void 0:C.optimisticOps,f,T,m)}})}})}})}};function Pi(i,o){return new Proxy(i,{get:function(u,f,d){return f==="db"?o:Reflect.get(u,f,d)}})}var un=(yt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new q.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,u=o.filter(function(f){return f._cfg.version===i})[0];return u||(u=new this.Version(i),o.push(u),o.sort(Cc),u.stores({}),this._state.autoSchema=!1,u)},yt.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?i():new le(function(u,f){if(o._state.openComplete)return f(new q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void f(new q.DatabaseClosed);o.open().catch(we)}o._state.dbReadyPromise.then(u,f)}).then(i)},yt.prototype.use=function(i){var o=i.stack,u=i.create,f=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:u,level:f??10,name:d}),i.sort(function(p,m){return p.level-m.level}),this},yt.prototype.unuse=function(i){var o=i.stack,u=i.name,f=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return f?d.create!==f:!!u&&d.name!==u})),this},yt.prototype.open=function(){var i=this;return Mn(tt,function(){return Ic(i)})},yt.prototype._close=function(){var i=this._state,o=or.indexOf(this);if(0<=o&&or.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new le(function(u){i.dbReadyResolve=u}),i.openCanceller=new le(function(u,f){i.cancelOpen=f}))},yt.prototype.close=function(u){var o=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new q.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new q.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},yt.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new le(function(d,p){function m(){o.close(i);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=ct(function(){var S,x,T;S=o._deps,x=o.name,T=S.indexedDB,S=S.IDBKeyRange,Ds(T)||x===fi||Is(T,S).delete(x).catch(we),d()}),_.onerror=Zt(p),_.onblocked=o._fireOnBlocked}if(u)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(m):m()})},yt.prototype.backendDB=function(){return this.idbdb},yt.prototype.isOpen=function(){return this.idbdb!==null},yt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(yt.prototype,"tables",{get:function(){var i=this;return l(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),yt.prototype.transaction=function(){var i=(function(o,u,f){var d=arguments.length;if(d<2)throw new q.InvalidArgument("Too few arguments");for(var p=new Array(d-1);--d;)p[d-1]=arguments[d];return f=p.pop(),[o,W(p),f]}).apply(this,arguments);return this._transaction.apply(this,i)},yt.prototype._transaction=function(i,o,u){var f=this,d=de.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var p,m,_=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(m=o.map(function(x){if(x=x instanceof f.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),i=="r"||i===ws)p=ws;else{if(i!="rw"&&i!=ks)throw new q.InvalidArgument("Invalid transaction mode: "+i);p=ks}if(d){if(d.mode===ws&&p===ks){if(!_)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&m.forEach(function(x){if(d&&d.storeNames.indexOf(x)===-1){if(!_)throw new q.SubTransaction("Table "+x+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(x){return d?d._promise(null,function(T,w){w(x)}):gt(x)}var S=(function x(T,w,C,E,P){return le.resolve().then(function(){var A=de.transless||de,O=T._createTransaction(w,C,T._dbSchema,E);if(O.explicit=!0,A={trans:O,transless:A},E)O.idbtrans=E.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(F){return F.name===Ze.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,null,P)})):gt(F)}var $,L=Ye(P);return L&&sr(),A=le.follow(function(){var F;($=P.call(O,O))&&(L?(F=mn.bind(null,null),$.then(F,F)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Bs($)))},A),($&&typeof $.then=="function"?le.resolve($).then(function(F){return O.active?F:gt(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return $})).then(function(F){return E&&O._resolve(),O._completion.then(function(){return F})}).catch(function(F){return O._reject(F),gt(F)})})}).bind(null,this,p,m,d,u);return d?d._promise(p,S,"lock"):de.trans?Mn(de.transless,function(){return f._whenReady(S)}):this._whenReady(S)},yt.prototype.table=function(i){if(!b(this._allTables,i))throw new q.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},yt);function yt(i,o){var u=this;this._middlewares={},this.verno=0;var f=yt.dependencies;this._options=o=r({addons:yt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},f=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,p,m,_,S,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};x.dbReadyPromise=new le(function(w){x.dbReadyResolve=w}),x.openCanceller=new le(function(w,C){x.cancelOpen=C}),this._state=x,this.name=i,this.on=Cr(this,"populate","blocked","versionchange","close",{ready:[J,we]}),this.on.ready.subscribe=Se(this.on.ready.subscribe,function(w){return function(C,E){yt.vip(function(){var P,A=u._state;A.openComplete?(A.dbOpenError||le.resolve().then(C),E&&w(C)):A.onReadyBeingFired?(A.onReadyBeingFired.push(C),E&&w(C)):(w(C),P=u,E||w(function O(){P.on.ready.unsubscribe(C),P.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,Ar(kc.prototype,function($,O){this.db=d;var E=pa,P=null;if(O)try{E=O()}catch(L){P=L}var A=$._ctx,O=A.table,$=O.hook.reading.fire;this._ctx={table:O,index:A.index,isPrimKey:!A.index||O.schema.primKey.keyPath&&A.index===O.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:A.or,valueMapper:$!==v?$:null}})),this.Table=(p=this,Ar(va.prototype,function(w,C,E){this.db=p,this._tx=E,this.name=w,this.schema=C,this.hook=p._allTables[w]?p._allTables[w].hook:Cr(null,{creating:[M,we],reading:[k,v],updating:[N,we],deleting:[B,we]})})),this.Transaction=(m=this,Ar(Sc.prototype,function(w,C,E,P,A){var O=this;this.db=m,this.mode=w,this.storeNames=C,this.schema=E,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=Cr(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le(function($,L){O._resolve=$,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function($){var L=O.active;return O.active=!1,O.on.error.fire($),O.parent?O.parent._reject($):L&&O.idbtrans&&O.idbtrans.abort(),gt($)})})),this.Version=(_=this,Ar(Rc.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,Ar(xa.prototype,function(w,C,E){if(this.db=S,this._ctx={table:w,index:C===":id"?null:C,or:E},this._cmp=this._ascending=Ne,this._descending=function(P,A){return Ne(A,P)},this._max=function(P,A){return 0<Ne(P,A)?P:A},this._min=function(P,A){return Ne(P,A)<0?P:A},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Dr(o.IDBKeyRange),this._createTransaction=function(w,C,E,P){return new u.Transaction(w,C,E,u._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(w){u.on("blocked").fire(w),or.filter(function(C){return C.name===u.name&&C!==u&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(w)})},this.use(Lc),this.use(Kc),this.use(Fc),this.use(Dc),this.use($c);var T=new Proxy(this,{get:function(w,C,E){if(C==="_vip")return!0;if(C==="table")return function(A){return Pi(u.table(A),T)};var P=Reflect.get(w,C,E);return P instanceof va?Pi(P,T):C==="tables"?P.map(function(A){return Pi(A,T)}):C==="_createTransaction"?function(){return Pi(P.apply(this,arguments),T)}:P}});this.vip=T,f.forEach(function(w){return w(u)})}var Ti,Wt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Bc=(Vs.prototype.subscribe=function(i,o,u){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:u})},Vs.prototype[Wt]=function(){return this},Vs);function Vs(i){this._subscribe=i}try{Ti={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Ti={indexedDB:null,IDBKeyRange:null}}function Ma(i){var o,u=!1,f=new Bc(function(d){var p=Ye(i),m,_=!1,S={},x={},T={get closed(){return _},unsubscribe:function(){_||(_=!0,m&&m.abort(),w&&bn.storagemutated.unsubscribe(E))}};d.start&&d.start(T);var w=!1,C=function(){return bs(P)},E=function(A){Ei(S,A),Fs(x,S)&&C()},P=function(){var A,O,$;!_&&Ti.indexedDB&&(S={},A={},m&&m.abort(),m=new AbortController,$=function(L){var F=rr();try{p&&sr();var U=yn(i,L);return U=p?U.finally(mn):U}finally{F&&ir()}}(O={subscr:A,signal:m.signal,requery:C,querier:i,trans:null}),Promise.resolve($).then(function(L){u=!0,o=L,_||O.signal.aborted||(S={},function(F){for(var U in F)if(b(F,U))return;return 1}(x=A)||w||(bn(Ir,E),w=!0),bs(function(){return!_&&d.next&&d.next(L)}))},function(L){u=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||bs(function(){_||d.error&&d.error(L)})}))};return setTimeout(C,0),T});return f.hasValue=function(){return u},f.getValue=function(){return o},f}var Nn=un;function Ws(i){var o=wn;try{wn=!0,bn.storagemutated.fire(i),Ks(i,!0)}finally{wn=o}}R(Nn,r(r({},Ve),{delete:function(i){return new Nn(i,{addons:[]}).delete()},exists:function(i){return new Nn(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Nn.dependencies,u=o.indexedDB,o=o.IDBKeyRange,(Ds(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(d){return d.name}).filter(function(d){return d!==fi})}):Is(u,o).toCollection().primaryKeys()).then(i)}catch{return gt(new q.MissingAPI)}var o,u},defineClass:function(){return function(i){c(this,i)}},ignoreTransaction:function(i){return de.trans?Mn(de.transless,i):i()},vip:$s,async:function(i){return function(){try{var o=Bs(i.apply(this,arguments));return o&&typeof o.then=="function"?o:le.resolve(o)}catch(u){return gt(u)}}},spawn:function(i,o,u){try{var f=Bs(i.apply(u,o||[]));return f&&typeof f.then=="function"?f:le.resolve(f)}catch(d){return gt(d)}},currentTransaction:{get:function(){return de.trans||null}},waitFor:function(i,o){return o=le.resolve(typeof i=="function"?Nn.ignoreTransaction(i):i).timeout(o||6e4),de.trans?de.trans.waitFor(o):o},Promise:le,debug:{get:function(){return H},set:function(i){K(i)}},derive:Z,extend:c,props:R,override:Se,Events:Cr,on:bn,liveQuery:Ma,extendObservabilitySet:Ei,getByKeyPath:Xe,setByKeyPath:be,delByKeyPath:function(i,o){typeof o=="string"?be(i,o,void 0):"length"in o&&[].map.call(o,function(u){be(i,u,void 0)})},shallowClone:I,deepClone:ye,getObjectDiff:Ns,cmp:Ne,asap:Le,minKey:-1/0,addons:[],connections:or,errnames:Ze,dependencies:Ti,cache:Bn,semVer:"4.0.8",version:"4.0.8".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,u){return i+o/Math.pow(10,2*u)})})),Nn.maxKey=Dr(Nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(bn(Ir,function(i){wn||(i=new CustomEvent(Os,{detail:i}),wn=!0,dispatchEvent(i),wn=!1)}),addEventListener(Os,function(i){i=i.detail,wn||Ws(i)}));var ur,wn=!1,Ua=function(){};return typeof BroadcastChannel<"u"&&((Ua=function(){(ur=new BroadcastChannel(Os)).onmessage=function(i){return i.data&&Ws(i.data)}})(),typeof ur.unref=="function"&&ur.unref(),bn(Ir,function(i){wn||ur.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!un.disableBfCache&&i.persisted){H&&console.debug("Dexie: handling persisted pagehide"),ur!=null&&ur.close();for(var o=0,u=or;o<u.length;o++)u[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!un.disableBfCache&&i.persisted&&(H&&console.debug("Dexie: handling persisted pageshow"),Ua(),Ws({all:new jt(-1/0,[[]])}))})),le.rejectionMapper=function(i,o){return!i||i instanceof Ke||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Fe[i.name]?i:(o=new Fe[i.name](o||i.message,i),"stack"in i&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},K(H),r(un,Object.freeze({__proto__:null,Dexie:un,liveQuery:Ma,Entity:ga,cmp:Ne,PropModSymbol:ln,PropModification:jr,replacePrefix:function(i,o){return new jr({replacePrefix:[i,o]})},add:function(i){return new jr({add:i})},remove:function(i){return new jr({remove:i})},default:un,RangeSet:jt,mergeRanges:Fr,rangesOverlap:Ta}),{default:un}),un})})(Hu);var wd=Hu.exports;const Oo=Nu(wd),kl=Symbol.for("Dexie"),Po=globalThis[kl]||(globalThis[kl]=Oo);if(Oo.semVer!==Po.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Oo.semVer} and ${Po.semVer}`);const jn=new Po("DictionaryDB");jn.version(1).stores({words:"id,type,chinese,romaji,classification,audioid,english",definitions:"defid,wordid,partofspeech,def_chinese,def_english"});async function kd(){try{const e=await(await fetch("./src/assets/taigiwords.csv")).text(),r=await(await fetch("./src/assets/taigidefs.csv")).text();wl.parse(e,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await jn.words.clear(),await jn.words.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}}),wl.parse(r,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await jn.definitions.clear(),await jn.definitions.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}})}catch(t){console.error("Error loading CSV file:",t)}}async function Vu(t){let e=window.speechSynthesis.getVoices();e.length===0&&(await new Promise(r=>window.speechSynthesis.addEventListener("voiceschanged",r,{once:!0})),e=window.speechSynthesis.getVoices());const n=new SpeechSynthesisUtterance(t);n.lang="zh-TW",n.voice=e.find(r=>r.name==="Meijia"),window.speechSynthesis.speak(n)}async function Wu(t){let e=window.speechSynthesis.getVoices();e.length===0&&(await new Promise(s=>window.speechSynthesis.addEventListener("voiceschanged",s,{once:!0})),e=window.speechSynthesis.getVoices());const n=e.filter(s=>s.lang==="en-US");console.log(n);const r=new SpeechSynthesisUtterance(t);r.lang="en-US",r.voice=e.find(s=>s.name==="Samantha"),window.speechSynthesis.speak(r)}const ls=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},xd={},Ed={class:"icon-play-container"};function Sd(t,e){return He(),ot("div",Ed,e[0]||(e[0]=[me("svg",{class:"play-audio",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.9177 4.9473L19.4897 4.3313L18.2577 5.1873L18.6857 5.8023C21.3027 9.5713 21.3027 14.4363 18.6857 18.1973L18.2577 18.8123L19.4887 19.6693L19.9177 19.0533C22.8497 14.8393 22.8497 9.1703 19.9177 4.9473Z",fill:"black"}),me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.2312 7.6226L16.8582 6.9716L15.5572 7.7166L15.9292 8.3676C17.2142 10.6126 17.2142 13.3966 15.9302 15.6336L15.5562 16.2836L16.8572 17.0306L17.2312 16.3806C18.7792 13.6836 18.7792 10.3276 17.2312 7.6226Z",fill:"black"}),me("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.0788 7.564H2.3848V8.064C2.3828 10.688 2.3828 13.312 2.3848 15.937V16.436H7.0788L11.2048 20.013H12.6678V3.987H11.2048L7.0788 7.564Z",fill:"black"})],-1)]))}const Jr=ls(xd,[["render",Sd],["__scopeId","data-v-554ed3b0"]]),Od={props:{audioID:{type:String,required:!0}},components:{IconPlayAudio:Jr},data(){return{isPlaying:!1,baseSrc:"src/assets/audio_taigi/"}},computed:{fullSrc(){return`${this.baseSrc}${getAudioFolder(this.audioid)}/${audioid}.mp3`}},methods:{togglePlay(){const t=this.$refs.audio;this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying},audioEnded(){this.isPlaying=!1,console.log("Audio has finished playing.")},getAudioFolder(t){if(console.log(t),t){const e=parseInt(t.match(/^(\d+)\(/)[1]);return e<1e3?"0":e>=1e3&&e<2e3?"1":e>=2e3&&e<3e3?"2":e>=3e3&&e<4e3?"3":e>=4e3&&e<5e3?"4":e>=5e3&&e<6e3?"5":e>=6e3&&e<7e3?"6":e>=7e3&&e<8e3?"7":e>=8e3&&e<9e3?"8":e>=9e3&&e<1e4?"9":e>=1e4&&e<11e3?"10":e>=11e3&&e<12e3?"11":e>=12e3&&e<13e3?"12":e>=13e3&&e<14e3?"13":e>=14e3&&e<15e3?"14":e>=15e3&&e<16e3?"15":e>=16e3&&e<17e3?"16":e>=17e3&&e<18e3?"17":e>=18e3&&e<19e3?"18":e>=19e3&&e<2e4?"19":e>=2e4&&e<21e3?"20":e>=21e3&&e<22e3?"21":e>=22e3&&e<23e3?"22":e>=23e3&&e<24e3?"23":e>=24e3&&e<25e3?"24":e>=25e3&&e<26e3?"25":e>=26e3&&e<27e3?"26":e>=27e3&&e<28e3?"27":e>=28e3&&e<29e3?"28":"Out of range"}}},mounted(){this.$refs.audio},beforeDestroy(){this.$refs.audio}},Pd={class:"audio-player"},Td=["src"];function Cd(t,e,n,r,s,a){const l=_o("IconPlayAudio");return He(),ot("div",Pd,[me("audio",{ref:"audio",src:`${this.baseSrc}${a.getAudioFolder(n.audioID)}/${n.audioID}.mp3`,onEnded:e[0]||(e[0]=(...h)=>a.audioEnded&&a.audioEnded(...h))},null,40,Td),$t(l,{onClick:a.togglePlay},null,8,["onClick"])])}const zu=ls(Od,[["render",Cd],["__scopeId","data-v-68cbd314"]]),Ad="modulepreload",jd=function(t){return"/taigi-dict-app/"+t},xl={},Sr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=jd(c),c in xl)return;xl[c]=!0;const y=c.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Ad,y||(b.as="script"),b.crossOrigin="",b.href=c,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((R,V)=>{b.addEventListener("load",R),b.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Rd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ia extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Id extends ia{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dd extends ia{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $d extends ia{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var To;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(To||(To={}));var Ld=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};class Fd{constructor(e,{headers:n={},customFetch:r,region:s=To.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Rd(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Ld(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:l}=n;let h={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(h["x-region"]=c);let y;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(h["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(h["Content-Type"]="application/json",y=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:y}).catch(se=>{throw new Id(se)}),b=g.headers.get("x-relay-error");if(b&&b==="true")throw new Dd(g);if(!g.ok)throw new $d(g);let R=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),V;return R==="application/json"?V=yield g.json():R==="application/octet-stream"?V=yield g.blob():R==="text/event-stream"?V=g:R==="multipart/form-data"?V=yield g.formData():V=yield g.text(),{data:V,error:null}}catch(s){return{data:null,error:s}}})}}var Ut={},sa={},us={},si={},cs={},hs={},Md=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Or=Md();const Ud=Or.fetch,Ju=Or.fetch.bind(Or),Gu=Or.Headers,Kd=Or.Request,Bd=Or.Response,Pr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gu,Request:Kd,Response:Bd,default:Ju,fetch:Ud},Symbol.toStringTag,{value:"Module"})),Nd=_d(Pr);var fs={};Object.defineProperty(fs,"__esModule",{value:!0});class qd extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}fs.default=qd;var Qu=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hs,"__esModule",{value:!0});const Hd=Qu(Nd),Vd=Qu(fs);let Wd=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Hd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,h,c;let y=null,g=null,b=null,R=a.status,V=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _e=await a.text();_e===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=_e:g=JSON.parse(_e))}const Z=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),fe=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");Z&&fe&&fe.length>1&&(b=parseInt(fe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,R=406,V="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const Z=await a.text();try{y=JSON.parse(Z),Array.isArray(y)&&a.status===404&&(g=[],y=null,R=200,V="OK")}catch{a.status===404&&Z===""?(R=204,V="No Content"):y={message:Z}}if(y&&this.isMaybeSingle&&(!((c=y==null?void 0:y.details)===null||c===void 0)&&c.includes("0 rows"))&&(y=null,R=200,V="OK"),y&&this.shouldThrowOnError)throw new Vd.default(y)}return{error:y,data:g,count:b,status:R,statusText:V}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,h,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};hs.default=Wd;var zd=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cs,"__esModule",{value:!0});const Jd=zd(hs);let Gd=class extends Jd.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",h=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var h;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${y}"; options=${c};`,l==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};cs.default=Gd;var Qd=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(si,"__esModule",{value:!0});const Yd=Qd(cs);let Xd=class extends Yd.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${l}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};si.default=Xd;var Zd=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(us,"__esModule",{value:!0});const Kr=Zd(si);let ep=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",l),r&&(this.headers.Prefer=`count=${r}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((h,c)=>h.concat(Object.keys(c)),[]);if(l.length>0){const h=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",h.join(","))}}return new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const l="POST",h=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),s&&h.push(`count=${s}`),a||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const c=e.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(c.length>0){const y=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new Kr.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Kr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};us.default=ep;var ds={},ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.version=void 0;ps.version="0.0.0-automated";Object.defineProperty(ds,"__esModule",{value:!0});ds.DEFAULT_HEADERS=void 0;const tp=ps;ds.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tp.version}`};var Yu=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sa,"__esModule",{value:!0});const np=Yu(us),rp=Yu(si),ip=ds;let sp=class Xu{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},ip.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new np.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let l;const h=new URL(`${this.url}/rpc/${e}`);let c;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{h.searchParams.append(g,b)})):(l="POST",c=n);const y=Object.assign({},this.headers);return a&&(y.Prefer=`count=${a}`),new rp.default({method:l,url:h,headers:y,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};sa.default=sp;var Tr=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const Zu=Tr(sa);Ut.PostgrestClient=Zu.default;const ec=Tr(us);Ut.PostgrestQueryBuilder=ec.default;const tc=Tr(si);Ut.PostgrestFilterBuilder=tc.default;const nc=Tr(cs);Ut.PostgrestTransformBuilder=nc.default;const rc=Tr(hs);Ut.PostgrestBuilder=rc.default;const ic=Tr(fs);Ut.PostgrestError=ic.default;var op=Ut.default={PostgrestClient:Zu.default,PostgrestQueryBuilder:ec.default,PostgrestFilterBuilder:tc.default,PostgrestTransformBuilder:nc.default,PostgrestBuilder:rc.default,PostgrestError:ic.default};const{PostgrestClient:ap,PostgrestQueryBuilder:_y,PostgrestFilterBuilder:by,PostgrestTransformBuilder:wy,PostgrestBuilder:ky}=op,lp="2.10.7",up={"X-Client-Info":`realtime-js/${lp}`},cp="1.0.0",sc=1e4,hp=1e3;var xr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xr||(xr={}));var Nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Nt||(Nt={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var Co;(function(t){t.websocket="websocket"})(Co||(Co={}));var Qn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Qn||(Qn={}));class fp{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const h=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+a));l=l+a;const y=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:h,event:c,payload:y}}}class oc{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const El=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,l)=>(a[l]=dp(l,t,e,s),a),{})},dp=(t,e,n,r)=>{const s=e.find(h=>h.name===t),a=s==null?void 0:s.type,l=n[t];return a&&!r.includes(a)?ac(a,l):Ao(l)},ac=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mp(e,n)}switch(t){case it.bool:return pp(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return gp(e);case it.json:case it.jsonb:return yp(e);case it.timestamp:return vp(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Ao(e);default:return Ao(e)}},Ao=t=>t,pp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mp=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(h=>ac(e,h))}return t},vp=t=>typeof t=="string"?t.replace(" ","T"):t,lc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ao{constructor(e,n,r={},s=sc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sl;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sl||(Sl={}));class Gr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gr.syncState(this.state,s,a,l),this.pendingDiffs.forEach(c=>{this.state=Gr.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gr.syncDiff(this.state,s,a,l),h())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),l=this.transformState(n),h={},c={};return this.map(a,(y,g)=>{l[y]||(c[y]=g)}),this.map(l,(y,g)=>{const b=a[y];if(b){const R=g.map(fe=>fe.presence_ref),V=b.map(fe=>fe.presence_ref),se=g.filter(fe=>V.indexOf(fe.presence_ref)<0),Z=b.filter(fe=>R.indexOf(fe.presence_ref)<0);se.length>0&&(h[y]=se),Z.length>0&&(c[y]=Z)}else h[y]=g}),this.syncDiff(a,{joins:h,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(h,c)=>{var y;const g=(y=e[h])!==null&&y!==void 0?y:[];if(e[h]=this.cloneDeep(c),g.length>0){const b=e[h].map(V=>V.presence_ref),R=g.filter(V=>b.indexOf(V.presence_ref)<0);e[h].unshift(...R)}r(h,g,c)}),this.map(l,(h,c)=>{let y=e[h];if(!y)return;const g=c.map(b=>b.presence_ref);y=y.filter(b=>g.indexOf(b.presence_ref)<0),e[h]=y,s(h,y,c),y.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ol;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ol||(Ol={}));var Pl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Pl||(Pl={}));var Tl;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tl||(Tl={}));class oa{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ao(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new oc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Gr(this),this.broadcastEndpointURL=lc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:h}}=this.params;this._onError(g=>e&&e("CHANNEL_ERROR",g)),this._onClose(()=>e&&e("CLOSED"));const c={},y={broadcast:a,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:h};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:y},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:g})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),g===void 0){e&&e("SUBSCRIBED");return}else{const R=this.bindings.postgres_changes,V=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,se=[];for(let Z=0;Z<V;Z++){const fe=R[Z],{filter:{event:_e,schema:Ae,table:Se,filter:ce}}=fe,Le=g&&g[Z];if(Le&&Le.event===_e&&Le.schema===Ae&&Le.table===Se&&Le.filter===ce)se.push(Object.assign(Object.assign({},fe),{id:Le.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=se,e&&e("SUBSCRIBED");return}}).receive("error",g=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,h,c;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(h=(l=this.params)===null||l===void 0?void 0:l.config)===null||h===void 0?void 0:h.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),y.receive("ok",()=>a("ok")),y.receive("error",()=>a("error")),y.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new ao(this,Yt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ao(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const l=e.toLocaleLowerCase(),{close:h,error:c,leave:y,join:g}=Yt;if(r&&[h,c,y,g].indexOf(l)>=0&&r!==this._joinRef())return;let R=this._onMessage(l,n,r);if(n&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(V=>{var se,Z,fe;return((se=V.filter)===null||se===void 0?void 0:se.event)==="*"||((fe=(Z=V.filter)===null||Z===void 0?void 0:Z.event)===null||fe===void 0?void 0:fe.toLocaleLowerCase())===l}).map(V=>V.callback(R,r)):(a=this.bindings[l])===null||a===void 0||a.filter(V=>{var se,Z,fe,_e,Ae,Se;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in V){const ce=V.id,Le=(se=V.filter)===null||se===void 0?void 0:se.event;return ce&&((Z=n.ids)===null||Z===void 0?void 0:Z.includes(ce))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((fe=n.data)===null||fe===void 0?void 0:fe.type.toLocaleLowerCase()))}else{const ce=(Ae=(_e=V==null?void 0:V.filter)===null||_e===void 0?void 0:_e.event)===null||Ae===void 0?void 0:Ae.toLocaleLowerCase();return ce==="*"||ce===((Se=n==null?void 0:n.event)===null||Se===void 0?void 0:Se.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===l}).map(V=>{if(typeof R=="object"&&"ids"in R){const se=R.data,{schema:Z,table:fe,commit_timestamp:_e,type:Ae,errors:Se}=se;R=Object.assign(Object.assign({},{schema:Z,table:fe,commit_timestamp:_e,eventType:Ae,new:{},old:{},errors:Se}),this._getPayloadRecords(se))}V.callback(R,r)})}_isClosed(){return this.state===Nt.closed}_isJoined(){return this.state===Nt.joined}_isJoining(){return this.state===Nt.joining}_isLeaving(){return this.state===Nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&oa.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=El(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=El(e.columns,e.old_record)),n}}const _p=()=>{},bp=typeof WebSocket<"u",wp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kp{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=up,this.params={},this.timeout=sc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_p,this.conn=null,this.sendBuffer=[],this.serializer=new fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...h)=>Sr(async()=>{const{default:c}=await Promise.resolve().then(()=>Pr);return{default:c}},void 0).then(({default:c})=>c(...h)):l=fetch,(...h)=>l(...h)},this.endPoint=`${e}/${Co.websocket}`,this.httpEndpoint=lc(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,l)=>l(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new oc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(bp){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new xp(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Sr(async()=>{const{default:e}=await import("./browser-2kW66FM6.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case xr.connecting:return Qn.Connecting;case xr.open:return Qn.Open;case xr.closing:return Qn.Closing;default:return Qn.Closed}}isConnected(){return this.connectionState()===Qn.Open}channel(e,n={config:{}}){const r=new oa(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,l=()=>{this.encode(e,h=>{var c;(c=this.conn)===null||c===void 0||c.send(h)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cp}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:l}=n;(l&&l===this.pendingHeartbeatRef||s===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,a),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,a,l)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([wp],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class xp{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class aa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function kt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ep extends aa{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jo extends aa{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Sp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};const uc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Op=()=>Sp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sr(()=>Promise.resolve().then(()=>Pr),void 0)).Response:Response}),Ro=t=>{if(Array.isArray(t))return t.map(n=>Ro(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Ro(r)}),e};var tr=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};const lo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pp=(t,e,n)=>tr(void 0,void 0,void 0,function*(){const r=yield Op();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Ep(lo(s),t.status||500))}).catch(s=>{e(new jo(lo(s),s))}):e(new jo(lo(t),t))}),Tp=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function oi(t,e,n,r,s,a){return tr(this,void 0,void 0,function*(){return new Promise((l,h)=>{t(n,Tp(e,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Pp(c,h,r))})})}function Gi(t,e,n,r){return tr(this,void 0,void 0,function*(){return oi(t,"GET",e,n,r)})}function Cn(t,e,n,r,s){return tr(this,void 0,void 0,function*(){return oi(t,"POST",e,r,s,n)})}function Cp(t,e,n,r,s){return tr(this,void 0,void 0,function*(){return oi(t,"PUT",e,r,s,n)})}function Ap(t,e,n,r){return tr(this,void 0,void 0,function*(){return oi(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cc(t,e,n,r,s){return tr(this,void 0,void 0,function*(){return oi(t,"DELETE",e,r,s,n)})}var Ft=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};const jp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rp{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=uc(s)}uploadOrUpdate(e,n,r,s){return Ft(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Cl),s);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,h["cache-control"]=`max-age=${l.cacheControl}`,h["content-type"]=l.contentType,c&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const y=this._removeEmptyFolders(n),g=this._getFinalPath(y),b=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:h},l!=null&&l.duplex?{duplex:l.duplex}:{})),R=yield b.json();return b.ok?{data:{path:y,id:R.Id,fullPath:R.Key},error:null}:{data:null,error:R}}catch(a){if(kt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ft(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${l}`);h.searchParams.set("token",n);try{let c;const y=Object.assign({upsert:Cl.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",y.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",y.cacheControl)):(c=r,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const b=yield this.fetch(h.toString(),{method:"PUT",body:c,headers:g}),R=yield b.json();return b.ok?{data:{path:a,fullPath:R.Key},error:null}:{data:null,error:R}}catch(c){if(kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Ft(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Cn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+a.url),h=l.searchParams.get("token");if(!h)throw new aa("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:h},error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Cn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Cn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ft(this,void 0,void 0,function*(){try{const s=yield Cn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}download(e,n){return Ft(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Gi(this.fetch,`${this.url}/${s}/${h}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(kt(h))return{data:null,error:h};throw h}})}info(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Gi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ro(r),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}exists(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ap(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(kt(r)&&r instanceof jo){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let y=s.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${y}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ft(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jp),n),{prefix:e||""});return{data:yield Cn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ip="2.7.1",Dp={"X-Client-Info":`storage-js/${Ip}`};var hr=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};class $p{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dp),n),this.fetch=uc(r)}listBuckets(){return hr(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(kt(e))return{data:null,error:e};throw e}})}getBucket(e){return hr(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return hr(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return hr(this,void 0,void 0,function*(){try{return{data:yield Cp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return hr(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return hr(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}})}}class Lp extends $p{constructor(e,n={},r){super(e,n,r)}from(e){return new Rp(this.url,this.headers,e,this.fetch)}}const Fp="2.46.1";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const Mp={"X-Client-Info":`supabase-js-${qr}/${Fp}`},Up={headers:Mp},Kp={schema:"public"},Bp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Np={};var qp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};const Hp=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ju:e=fetch,(...n)=>e(...n)},Vp=()=>typeof Headers>"u"?Gu:Headers,Wp=(t,e,n)=>{const r=Hp(n),s=Vp();return(a,l)=>qp(void 0,void 0,void 0,function*(){var h;const c=(h=yield e())!==null&&h!==void 0?h:t;let y=new s(l==null?void 0:l.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},l),{headers:y}))})};var zp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};function Jp(t){return t.replace(/\/$/,"")}function Gp(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:l,auth:h,realtime:c,global:y}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},y),a),accessToken:()=>zp(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const hc="2.65.1",Qp="http://localhost:9999",Yp="supabase.auth.token",Xp={"X-Client-Info":`gotrue-js/${hc}`},Al=10,Io="X-Supabase-Api-Version",fc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Zp(t){return Math.round(Date.now()/1e3)+t}function eg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qt=()=>typeof document<"u",Wn={tested:!1,writable:!1},Qr=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wn.tested)return Wn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wn.tested=!0,Wn.writable=!0}catch{Wn.tested=!0,Wn.writable=!1}return Wn.writable};function uo(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const dc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Li=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fi=async(t,e)=>{await t.removeItem(e)};function ng(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,a,l,h,c,y,g=0;for(t=t.replace("-","+").replace("_","/");g<t.length;)l=e.indexOf(t.charAt(g++)),h=e.indexOf(t.charAt(g++)),c=e.indexOf(t.charAt(g++)),y=e.indexOf(t.charAt(g++)),r=l<<2|h>>4,s=(h&15)<<4|c>>2,a=(c&3)<<6|y,n=n+String.fromCharCode(r),c!=64&&s!=0&&(n=n+String.fromCharCode(s)),y!=64&&a!=0&&(n=n+String.fromCharCode(a));return n}class gs{constructor(){this.promise=new gs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}gs.promiseConstructor=Promise;function jl(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(ng(r))}async function rg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ig(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function sg(t){return("0"+t.toString(16)).substr(-2)}function og(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,sg).join("")}async function ag(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function lg(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ug(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ag(t);return lg(n)}async function fr(t,e,n=!1){const r=og();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await pc(t,`${e}-code-verifier`,s);const a=await ug(r);return[a,r===a?"plain":"s256"]}const cg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hg(t){const e=t.headers.get(Io);if(!e||!e.match(cg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class la extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class fg extends la{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function dg(t){return $e(t)&&t.name==="AuthApiError"}class gc extends la{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class nr extends la{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Sn extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pg(t){return $e(t)&&t.name==="AuthSessionMissingError"}class co extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mi extends nr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ui extends nr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rl extends nr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Do extends nr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ho(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Il extends nr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var gg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Jn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yg=[502,503,504];async function Dl(t){var e;if(!tg(t))throw new Do(Jn(t),0);if(yg.includes(t.status))throw new Do(Jn(t),t.status);let n;try{n=await t.json()}catch(a){throw new gc(Jn(a),a)}let r;const s=hg(t);if(s&&s.getTime()>=fc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Il(Jn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Il(Jn(n),t.status,n.weak_password.reasons);throw new fg(Jn(n),t.status||500,r)}const mg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Io]||(a[Io]=fc["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const h=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await vg(t,e,n+h,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function vg(t,e,n,r,s,a){const l=mg(e,r,s,a);let h;try{h=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Do(Jn(c),0)}if(h.ok||await Dl(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(c){await Dl(c)}}function On(t){var e;let n=null;kg(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Zp(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function $l(t){const e=On(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function An(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _g(t){return{data:t,error:null}}function bg(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,l=gg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},l);return{data:{properties:h,user:c},error:null}}function wg(t){return t}function kg(t){return t.access_token&&t.refresh_token&&t.expires_in}var xg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Eg{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:An})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xg(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:An})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,l,h,c;try{const y={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:wg});if(g.error)throw g.error;const b=await g.json(),R=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,V=(c=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&c!==void 0?c:[];return V.length>0&&(V.forEach(se=>{const Z=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),fe=JSON.parse(se.split(";")[1].split("=")[1]);y[`${fe}Page`]=Z}),y.total=parseInt(R)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:An})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:An})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:An})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const Sg={getItem:t=>Qr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Qr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Qr()&&globalThis.localStorage.removeItem(t)}};function Ll(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Og(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dr={debug:!!(globalThis&&Qr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pg extends yc{}async function Tg(t,e,n){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(dr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}Og();const Cg={url:Qp,storageKey:Yp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Br=30*1e3,Fl=3;async function Ml(t,e,n){return await n()}class ni{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ni.nextInstanceID,ni.nextInstanceID+=1,this.instanceID>0&&Qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Cg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Eg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dc(s.fetch),this.lock=s.lock||Ml,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Tg:this.lock=Ml,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Qr()?this.storage=Sg:(this.memoryStorage={},this.storage=Ll(this.memoryStorage)):(this.memoryStorage={},this.storage=Ll(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Qt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new gc("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:On}),{data:l,error:h}=a;if(h||!l)return{data:{user:null,session:null},error:h};const c=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:y,session:c},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:g,password:b,options:R}=e;let V=null,se=null;this.flowType==="pkce"&&([V,se]=await fr(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R==null?void 0:R.emailRedirectTo,body:{email:g,password:b,data:(n=R==null?void 0:R.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken},code_challenge:V,code_challenge_method:se},xform:On})}else if("phone"in e){const{phone:g,password:b,options:R}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(r=R==null?void 0:R.data)!==null&&r!==void 0?r:{},channel:(s=R==null?void 0:R.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken}},xform:On})}else throw new Mi("You must provide either an email or phone number and a password");const{data:l,error:h}=a;if(h||!l)return{data:{user:null,session:null},error:h};const c=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:y,session:c},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$l})}else if("phone"in e){const{phone:a,password:l,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$l})}else throw new Mi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new co}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Li(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:On});if(await Fi(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new co}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:l}=e,h=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:On}),{data:c,error:y}=h;return y?{data:{user:null,session:null},error:y}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new co}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:y})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,l;try{if("email"in e){const{email:h,options:c}=e;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await fr(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:c}=e,{data:y,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:g}}throw new Mi("You must provide either an email or phone number.")}catch(h){if($e(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:h}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:On});if(h)throw h;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,y=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:y,session:c},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await fr(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:_g})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sn;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:l,error:h}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:h}}throw new Mi("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,y,g)=>(!l&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,y,g))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:An}):await this._useSession(async n=>{var r,s,a;const{data:l,error:h}=n;if(h)throw h;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:An})})}catch(n){if($e(n))return pg(n)&&(await this._removeSession(),await Fi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Sn;const l=s.session;let h=null,c=null;this.flowType==="pkce"&&e.email!=null&&([h,c]=await fr(this.storage,this.storageKey));const{data:y,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:c}),jwt:l.access_token,xform:An});if(g)throw g;return l.user=y.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return jl(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const l=jl(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:h,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:h}=n;if(h)throw h;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sn;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Qt())throw new Ui("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ui("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Rl("Not a valid PKCE flow url.");const n=uo(window.location.href);if(e){if(!n.code)throw new Rl("No code detected.");const{data:Ae,error:Se}=await this._exchangeCodeForSession(n.code);if(Se)throw Se;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:Ae.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Ui(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:h,expires_at:c,token_type:y}=n;if(!a||!h||!l||!y)throw new Ui("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(h);let R=g+b;c&&(R=parseInt(c));const V=R-g;V*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${b}s`);const se=R-b;g-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,R,g):g-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",se,R,g);const{data:Z,error:fe}=await this._getUser(a);if(fe)throw fe;const _e={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:R,refresh_token:l,token_type:y,user:Z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_e,redirectType:n.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=uo(window.location.href);return!!(Qt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=uo(window.location.href),n=await Li(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:h}=await this.admin.signOut(l,e);if(h&&!(dg(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Fi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=eg(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await fr(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var l,h,c,y,g;const{data:b,error:R}=a;if(R)throw R;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",V,{headers:this.headers,jwt:(g=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ig(async s=>(s>0&&await rg(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:On})),(s,a)=>{const l=200*Math.pow(2,s);return a&&ho(a)&&Date.now()+l-r<Br})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Li(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Al;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Al}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:l}=await this._callRefreshToken(r.refresh_token);l&&(console.error(l),ho(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new gs;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Sn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(s,"error",a),$e(a)){const l={session:null,error:a};return ho(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Fi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Br}ms, refresh threshold is ${Fl} ticks`),s<=Fl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await fr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(h.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:y}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:l,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:h})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(s.access_token);let h=null;l.aal&&(h=l.aal);let c=h;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=l.amr||[];return{data:{currentLevel:h,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}}ni.nextInstanceID=0;const Ag=ni;class jg extends Ag{constructor(e){super(e)}}var Rg=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function c(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,c)}y((r=r.apply(t,e||[])).next())})};class Ig{constructor(e,n,r){var s,a,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=Jp(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Kp,realtime:Np,auth:Object.assign(Object.assign({},Bp),{storageKey:c}),global:Up},g=Gp(r??{},y);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=Wp(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new ap(`${h}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new Fd(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Lp(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Rg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:l,lock:h,debug:c},y,g){var b;const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jg({url:this.authUrl,headers:Object.assign(Object.assign({},R),y),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:h,debug:c,fetch:g,hasCustomAuthorizationHeader:(b="Authorization"in this.headers)!==null&&b!==void 0?b:!1})}_initRealtimeClient(e){return new kp(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dg=(t,e,n)=>new Ig(t,e,n),$g="https://oqwvljqwtearyepyaslo.supabase.co",Lg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xd3ZsanF3dGVhcnllcHlhc2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEwODA1NjIsImV4cCI6MjA0NjY1NjU2Mn0.31HmSCfXawvkzhevPCaKWoVCZyD_elcQOCtgFWJMRKI",Yn=Dg($g,Lg),Fg={components:{AudioPlayerTaigi:zu,IconPlayAudio:Jr},setup(){const t=Gn([]),e=Gn(""),n=Gn(null),r=Gn(!1),s=Gn({partofspeech:"",def_english:"",def_chinese:""});return{words:t,searchQuery:e,word:n,showDialog:r,newDefinition:s,fetchWords:async()=>{const{data:Z,error:fe}=await Yn.from("words").select("id, english, definitions (defid, def_english)");fe?console.error(fe):t.value=Z},clearInput:()=>{e.value="",t.value=[]},openEditDialog:Z=>{r.value=!0,n.value=Z},closeDialog:()=>{r.value=!1},updateWord:async()=>{const{data:Z,error:fe}=await Yn.from("words").upsert({id:n.value.id,chinese:n.value.chinese,romaji:n.value.romaji,classification:n.value.classification,english:n.value.english});fe?console.error("Error updating word:",fe.message):console.log("Word updated successfully:",Z)},updateDefinition:async(Z,fe)=>{const _e=n.value.definitions[fe],{data:Ae,error:Se}=await Yn.from("definitions").upsert({defid:Z,wordid:n.value.id,partofspeech:_e.partofspeech,def_english:_e.def_english,def_chinese:_e.def_chinese});Se?console.error("Error updating definition:",Se.message):console.log("Definition updated successfully:",Ae)},searchWords:async()=>{const{data:Z,error:fe}=await Yn.from("words").select("id, english, chinese, romaji, audioid, taiwanese, english_mknoll, definitions (defid, def_english, def_chinese)").or(`chinese.ilike.%${e.value}%,english.ilike.%${e.value}%, english_mknoll.ilike.%${e.value}%`);fe?console.error(fe):t.value=Z},readChinese:Z=>Vu(Z),readEnglish:Z=>Wu(Z),resetVoice:()=>window.speechSynthesis.cancel()}}},Mg={id:"supasearch"},Ug={class:"search-words"},Kg={class:"search-actions"},Bg={key:0,class:"results-count"},Ng={class:"results"},qg={class:"word"},Hg={key:0,class:"word-item word-taigi"},Vg={key:1,class:"word-item word-taigi"},Wg={key:2,class:"word-item word-chinese"},zg={key:0,class:"word-item word-english"},Jg={key:1,class:"word-item word-english"},Gg=["onClick"],Qg={key:0,class:"edit-dialog"},Yg={key:0},Xg=["onSubmit"],Zg=["onUpdate:modelValue"],ey=["onUpdate:modelValue"],ty=["onUpdate:modelValue"];function ny(t,e,n,r,s,a){const l=_o("AudioPlayerTaigi"),h=_o("IconPlayAudio");return He(),ot("div",Mg,[me("div",Ug,[xn(me("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>r.searchQuery=c),onKeyup:e[1]||(e[1]=dd((...c)=>r.searchWords&&r.searchWords(...c),["enter"])),placeholder:"Search for a word...",class:"text-field search-words-text-field"},null,544),[[En,r.searchQuery]]),me("div",Kg,[me("button",{onClick:e[2]||(e[2]=(...c)=>r.searchWords&&r.searchWords(...c))},"Search"),me("button",{onClick:e[3]||(e[3]=(...c)=>r.clearInput&&r.clearInput(...c))},"Clear"),me("button",{onClick:e[4]||(e[4]=(...c)=>r.resetVoice&&r.resetVoice(...c))},"Reset Voice")]),r.words.length?(He(),ot("div",Bg,St(r.words.length)+" results found ",1)):vt("",!0)]),me("ul",Ng,[(He(!0),ot(Mt,null,Bi(r.words,c=>(He(),ot("li",{key:c.id,class:"entry"},[me("div",qg,[c.romaji!=null?(He(),ot("div",Hg,[dn(St(c.romaji)+" ",1),c.audioid?(He(),mr(l,{key:0,audioID:c.audioid},null,8,["audioID"])):vt("",!0)])):vt("",!0),c.taiwanese!=null?(He(),ot("div",Vg,St(c.taiwanese),1)):vt("",!0),c.chinese!=null?(He(),ot("div",Wg,[dn(St(c.chinese)+" ",1),$t(h,{onClick:y=>r.readChinese(c.chinese)},null,8,["onClick"])])):vt("",!0)]),c.english!=null?(He(),ot("div",zg,[dn(St(c.english)+" ",1),$t(h,{onClick:y=>r.readEnglish(c.english)},null,8,["onClick"])])):vt("",!0),c.english_mknoll!=null?(He(),ot("div",Jg,[dn(St(c.english_mknoll)+" ",1),$t(h,{onClick:y=>r.readEnglish(c.english_mknoll)},null,8,["onClick"])])):vt("",!0),me("ul",null,[(He(!0),ot(Mt,null,Bi(c.definitions,y=>(He(),ot("li",{key:y.id},[me("ul",null,[me("li",null,St(y.def_english),1),me("li",null,St(y.def_chinese),1)])]))),128))]),me("button",{class:"edit-word",onClick:y=>r.openEditDialog(c)}," Edit word ",8,Gg)]))),128))]),r.showDialog?(He(),ot("div",Qg,[me("button",{onClick:e[5]||(e[5]=(...c)=>r.closeDialog&&r.closeDialog(...c))},"Close"),me("form",{onSubmit:e[10]||(e[10]=_l((...c)=>r.updateWord&&r.updateWord(...c),["prevent"]))},[me("div",null,[e[11]||(e[11]=me("label",{for:"romaji"},"Romaji",-1)),xn(me("input",{"onUpdate:modelValue":e[6]||(e[6]=c=>r.word.romaji=c),type:"text",id:"romaji"},null,512),[[En,r.word.romaji]])]),me("div",null,[e[12]||(e[12]=me("label",{for:"english"},"English",-1)),xn(me("input",{"onUpdate:modelValue":e[7]||(e[7]=c=>r.word.english=c),type:"text",id:"english"},null,512),[[En,r.word.english]])]),me("div",null,[e[13]||(e[13]=me("label",{for:"chinese"},"Chinese",-1)),xn(me("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>r.word.chinese=c),type:"text",id:"chinese"},null,512),[[En,r.word.chinese]])]),me("div",null,[e[14]||(e[14]=me("label",{for:"classification"},"Classification:",-1)),xn(me("input",{"onUpdate:modelValue":e[9]||(e[9]=c=>r.word.classification=c),type:"text",id:"classification"},null,512),[[En,r.word.classification]])]),e[15]||(e[15]=me("button",{type:"submit"},"Save Word",-1))],32),r.word.definitions.length>0?(He(),ot("div",Yg,[(He(!0),ot(Mt,null,Bi(r.word.definitions,(c,y)=>(He(),ot("div",{key:c.defid},[me("form",{onSubmit:_l(g=>r.updateDefinition(c.defid,y),["prevent"])},[me("div",null,[e[16]||(e[16]=me("label",{for:"def_english"},"English Definition:",-1)),xn(me("textarea",{"onUpdate:modelValue":g=>c.def_english=g,id:"def_english"},null,8,Zg),[[En,c.def_english]])]),me("div",null,[e[17]||(e[17]=me("label",{for:"def_chinese"},"Chinese Definition:",-1)),xn(me("input",{"onUpdate:modelValue":g=>c.def_chinese=g,type:"text",id:"def_chinese"},null,8,ey),[[En,c.def_chinese]])]),me("div",null,[e[18]||(e[18]=me("label",{for:"partofspeech"},"Part of Speech:",-1)),xn(me("input",{"onUpdate:modelValue":g=>c.partofspeech=g,type:"text",id:"partofspeech"},null,8,ty),[[En,c.partofspeech]])]),e[19]||(e[19]=me("button",{type:"submit"},"Save Definition",-1))],40,Xg)]))),128))])):vt("",!0)])):vt("",!0)])}const ry=ls(Fg,[["render",ny],["__scopeId","data-v-8cb4fe8d"]]),iy={key:0,class:"rw"},sy={class:"rw-words"},oy={class:"rw-words-main"},ay={key:0,class:"rw-word-item rw-taigi"},ly={key:1,class:"rw-word-item rw-taigi"},uy={key:2,class:"rw-word-item rw-chinese"},cy={key:0,class:"rw-word-item rw-english"},hy={key:1,class:"rw-word-item rw-english"},fy={__name:"RandomWord",setup(t){const e=Gn(null),n=async()=>{try{const{count:a}=await Yn.from("words").select("*",{count:"exact",head:!0}),l=Math.floor(Math.random()*a),{data:h,error:c}=await Yn.from("words").select("*").range(l,l).limit(1);if(c)throw new Error(c.message);const y=h[0],{data:g,error:b}=await Yn.from("definitions").select("*").eq("wordid",y.id);if(b)throw new Error(b.message);y.definitions=g,e.value=y,console.log(e)}catch(a){console.error("Error fetching random word and definitions:",a.message)}};ea(n);const r=async a=>{Vu(a)},s=async a=>{Wu(a)};return(a,l)=>e.value?(He(),ot("div",iy,[l[3]||(l[3]=me("h4",null,"Random word",-1)),me("div",sy,[me("div",oy,[e.value.taiwanese?(He(),ot("div",ay,St(e.value.taiwanese),1)):vt("",!0),e.value.romaji?(He(),ot("div",ly,[dn(St(e.value.romaji)+" ",1),e.value.audioid?(He(),mr(zu,{key:0,audioID:e.value.audioid},null,8,["audioID"])):vt("",!0)])):vt("",!0),e.value.chinese?(He(),ot("div",uy,[dn(St(e.value.chinese)+" ",1),e.value.chinese?(He(),mr(Jr,{key:0,onClick:l[0]||(l[0]=h=>r(e.value.chinese))})):vt("",!0)])):vt("",!0)]),e.value.english?(He(),ot("div",cy,[dn(St(e.value.english)+" ",1),e.value.english?(He(),mr(Jr,{key:0,onClick:l[1]||(l[1]=h=>s(e.value.english))})):vt("",!0)])):vt("",!0),e.value.english_mknoll?(He(),ot("div",hy,[dn(St(e.value.english_mknoll)+" ",1),e.value.english_mknoll?(He(),mr(Jr,{key:0,onClick:l[2]||(l[2]=h=>s(e.value.english_mknoll))})):vt("",!0)])):vt("",!0)]),(He(!0),ot(Mt,null,Bi(e.value.definitions,(h,c)=>(He(),ot("div",{key:h.defid,class:"rw-definitions"},[me("ul",null,[me("li",null,St(h.def_chinese),1),me("li",null,St(h.def_english),1)])]))),128)),me("button",{onClick:n},"Next word")])):vt("",!0)}},dy=ls(fy,[["__scopeId","data-v-167e203e"]]),py={__name:"App",setup(t){const e=Gn(!1);return ea(async()=>{e.value=await jn.words.count()>0&&await jn.definitions.count()>0,console.log(jn),e.value?console.log("Data is available in IndexedDB."):(console.log("No data in IndexedDB."),kd())}),(n,r)=>(He(),ot(Mt,null,[r[0]||(r[0]=me("header",null,[me("div")],-1)),me("main",null,[$t(ry),$t(dy)]),r[1]||(r[1]=me("footer",null,null,-1))],64))}};yd(py).mount("#app");export{Nu as g};
