(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $o(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const tt={},yr=[],an=()=>{},Vc=()=>!1,Xi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Lo=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Fo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Wc=Object.prototype.hasOwnProperty,We=(t,e)=>Wc.call(t,e),xe=Array.isArray,mr=t=>ni(t)==="[object Map]",Zi=t=>ni(t)==="[object Set]",Ba=t=>ni(t)==="[object Date]",Pe=t=>typeof t=="function",mt=t=>typeof t=="string",un=t=>typeof t=="symbol",ot=t=>t!==null&&typeof t=="object",Bu=t=>(ot(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),Nu=Object.prototype.toString,ni=t=>Nu.call(t),zc=t=>ni(t).slice(8,-1),qu=t=>ni(t)==="[object Object]",Mo=t=>mt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hr=$o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),es=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Jc=/-(\w)/g,Jt=es(t=>t.replace(Jc,(e,n)=>n?n.toUpperCase():"")),Gc=/\B([A-Z])/g,Dn=es(t=>t.replace(Gc,"-$1").toLowerCase()),ts=es(t=>t.charAt(0).toUpperCase()+t.slice(1)),Qs=es(t=>t?`on${ts(t)}`:""),In=(t,e)=>!Object.is(t,e),Bi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Hu=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},po=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Na;const Vu=()=>Na||(Na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uo(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=mt(r)?Zc(r):Uo(r);if(s)for(const a in s)e[a]=s[a]}return e}else if(mt(t)||ot(t))return t}const Qc=/;(?![^(]*\))/g,Yc=/:([^]+)/,Xc=/\/\*[^]*?\*\//g;function Zc(t){const e={};return t.replace(Xc,"").split(Qc).forEach(n=>{if(n){const r=n.split(Yc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ko(t){let e="";if(mt(t))e=t;else if(xe(t))for(let n=0;n<t.length;n++){const r=Ko(t[n]);r&&(e+=r+" ")}else if(ot(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const eh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",th=$o(eh);function Wu(t){return!!t||t===""}function nh(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ns(t[r],e[r]);return n}function ns(t,e){if(t===e)return!0;let n=Ba(t),r=Ba(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=un(t),r=un(e),n||r)return t===e;if(n=xe(t),r=xe(e),n||r)return n&&r?nh(t,e):!1;if(n=ot(t),r=ot(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,a=Object.keys(e).length;if(s!==a)return!1;for(const u in t){const c=t.hasOwnProperty(u),h=e.hasOwnProperty(u);if(c&&!h||!c&&h||!ns(t[u],e[u]))return!1}}return String(t)===String(e)}function zu(t,e){return t.findIndex(n=>ns(n,e))}const Ju=t=>!!(t&&t.__v_isRef===!0),Dt=t=>mt(t)?t:t==null?"":xe(t)||ot(t)&&(t.toString===Nu||!Pe(t.toString))?Ju(t)?Dt(t.value):JSON.stringify(t,Gu,2):String(t),Gu=(t,e)=>Ju(e)?Gu(t,e.value):mr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],a)=>(n[Ys(r,a)+" =>"]=s,n),{})}:Zi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ys(n))}:un(e)?Ys(e):ot(e)&&!xe(e)&&!qu(e)?String(e):e,Ys=(t,e="")=>{var n;return un(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nt;class rh{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nt,!e&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Nt;try{return Nt=this,e()}finally{Nt=n}}}on(){Nt=this}off(){Nt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function ih(){return Nt}let it;const Xs=new WeakSet;class Qu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nt&&Nt.active&&Nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xs.has(this)&&(Xs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qa(this),Zu(this);const e=it,n=Zt;it=this,Zt=!0;try{return this.fn()}finally{el(this),it=e,Zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)qo(e);this.deps=this.depsTail=void 0,qa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){go(this)&&this.run()}get dirty(){return go(this)}}let Yu=0,pr;function Xu(t){t.flags|=8,t.next=pr,pr=t}function Bo(){Yu++}function No(){if(--Yu>0)return;let t;for(;pr;){let e=pr,n;for(;e;)e.flags&1||(e.flags&=-9),e=e.next;for(e=pr,pr=void 0;e;){if(n=e.next,e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Zu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function el(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),qo(r),sh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function go(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(tl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function tl(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Qr))return;t.globalVersion=Qr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!go(t)){t.flags&=-3;return}const n=it,r=Zt;it=t,Zt=!0;try{Zu(t);const s=t.fn(t._value);(e.version===0||In(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{it=n,Zt=r,el(t),t.flags&=-3}}function qo(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)qo(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function sh(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Zt=!0;const nl=[];function $n(){nl.push(Zt),Zt=!1}function Ln(){const t=nl.pop();Zt=t===void 0?!0:t}function qa(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=it;it=void 0;try{e()}finally{it=n}}}let Qr=0;class oh{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ho{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!it||!Zt||it===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==it)n=this.activeLink=new oh(it,this),it.deps?(n.prevDep=it.depsTail,it.depsTail.nextDep=n,it.depsTail=n):it.deps=it.depsTail=n,rl(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=it.depsTail,n.nextDep=void 0,it.depsTail.nextDep=n,it.depsTail=n,it.deps===n&&(it.deps=r)}return n}trigger(e){this.version++,Qr++,this.notify(e)}notify(e){Bo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{No()}}}function rl(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)rl(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const yo=new WeakMap,Yn=Symbol(""),mo=Symbol(""),Yr=Symbol("");function At(t,e,n){if(Zt&&it){let r=yo.get(t);r||yo.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ho),s.target=t,s.map=r,s.key=n),s.track()}}function vn(t,e,n,r,s,a){const u=yo.get(t);if(!u){Qr++;return}const c=h=>{h&&h.trigger()};if(Bo(),e==="clear")u.forEach(c);else{const h=xe(t),y=h&&Mo(n);if(h&&n==="length"){const p=Number(r);u.forEach((b,P)=>{(P==="length"||P===Yr||!un(P)&&P>=p)&&c(b)})}else switch(n!==void 0&&c(u.get(n)),y&&c(u.get(Yr)),e){case"add":h?y&&c(u.get("length")):(c(u.get(Yn)),mr(t)&&c(u.get(mo)));break;case"delete":h||(c(u.get(Yn)),mr(t)&&c(u.get(mo)));break;case"set":mr(t)&&c(u.get(Yn));break}}No()}function lr(t){const e=ze(t);return e===t?e:(At(e,"iterate",Yr),zt(t)?e:e.map(Et))}function rs(t){return At(t=ze(t),"iterate",Yr),t}const ah={__proto__:null,[Symbol.iterator](){return Zs(this,Symbol.iterator,Et)},concat(...t){return lr(this).concat(...t.map(e=>xe(e)?lr(e):e))},entries(){return Zs(this,"entries",t=>(t[1]=Et(t[1]),t))},every(t,e){return dn(this,"every",t,e,void 0,arguments)},filter(t,e){return dn(this,"filter",t,e,n=>n.map(Et),arguments)},find(t,e){return dn(this,"find",t,e,Et,arguments)},findIndex(t,e){return dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return dn(this,"findLast",t,e,Et,arguments)},findLastIndex(t,e){return dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return eo(this,"includes",t)},indexOf(...t){return eo(this,"indexOf",t)},join(t){return lr(this).join(t)},lastIndexOf(...t){return eo(this,"lastIndexOf",t)},map(t,e){return dn(this,"map",t,e,void 0,arguments)},pop(){return Mr(this,"pop")},push(...t){return Mr(this,"push",t)},reduce(t,...e){return Ha(this,"reduce",t,e)},reduceRight(t,...e){return Ha(this,"reduceRight",t,e)},shift(){return Mr(this,"shift")},some(t,e){return dn(this,"some",t,e,void 0,arguments)},splice(...t){return Mr(this,"splice",t)},toReversed(){return lr(this).toReversed()},toSorted(t){return lr(this).toSorted(t)},toSpliced(...t){return lr(this).toSpliced(...t)},unshift(...t){return Mr(this,"unshift",t)},values(){return Zs(this,"values",Et)}};function Zs(t,e,n){const r=rs(t),s=r[e]();return r!==t&&!zt(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const uh=Array.prototype;function dn(t,e,n,r,s,a){const u=rs(t),c=u!==t&&!zt(t),h=u[e];if(h!==uh[e]){const b=h.apply(t,a);return c?Et(b):b}let y=n;u!==t&&(c?y=function(b,P){return n.call(this,Et(b),P,t)}:n.length>2&&(y=function(b,P){return n.call(this,b,P,t)}));const p=h.call(u,y,r);return c&&s?s(p):p}function Ha(t,e,n,r){const s=rs(t);let a=n;return s!==t&&(zt(t)?n.length>3&&(a=function(u,c,h){return n.call(this,u,c,h,t)}):a=function(u,c,h){return n.call(this,u,Et(c),h,t)}),s[e](a,...r)}function eo(t,e,n){const r=ze(t);At(r,"iterate",Yr);const s=r[e](...n);return(s===-1||s===!1)&&Go(n[0])?(n[0]=ze(n[0]),r[e](...n)):s}function Mr(t,e,n=[]){$n(),Bo();const r=ze(t)[e].apply(t,n);return No(),Ln(),r}const lh=$o("__proto__,__v_isRef,__isVue"),il=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(un));function ch(t){un(t)||(t=String(t));const e=ze(this);return At(e,"has",t),e.hasOwnProperty(t)}class sl{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?xh:ll:a?ul:al).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=xe(e);if(!s){let h;if(u&&(h=ah[n]))return h;if(n==="hasOwnProperty")return ch}const c=Reflect.get(e,n,Pt(e)?e:r);return(un(n)?il.has(n):lh(n))||(s||At(e,"get",n),a)?c:Pt(c)?u&&Mo(n)?c:c.value:ot(c)?s?cl(c):zo(c):c}}class ol extends sl{constructor(e=!1){super(!1,e)}set(e,n,r,s){let a=e[n];if(!this._isShallow){const h=Xn(a);if(!zt(r)&&!Xn(r)&&(a=ze(a),r=ze(r)),!xe(e)&&Pt(a)&&!Pt(r))return h?!1:(a.value=r,!0)}const u=xe(e)&&Mo(n)?Number(n)<e.length:We(e,n),c=Reflect.set(e,n,r,Pt(e)?e:s);return e===ze(s)&&(u?In(r,a)&&vn(e,"set",n,r):vn(e,"add",n,r)),c}deleteProperty(e,n){const r=We(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&vn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!un(n)||!il.has(n))&&At(e,"has",n),r}ownKeys(e){return At(e,"iterate",xe(e)?"length":Yn),Reflect.ownKeys(e)}}class hh extends sl{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const fh=new ol,dh=new hh,ph=new ol(!0);const Vo=t=>t,is=t=>Reflect.getPrototypeOf(t);function ji(t,e,n=!1,r=!1){t=t.__v_raw;const s=ze(t),a=ze(e);n||(In(e,a)&&At(s,"get",e),At(s,"get",a));const{has:u}=is(s),c=r?Vo:n?Qo:Et;if(u.call(s,e))return c(t.get(e));if(u.call(s,a))return c(t.get(a));t!==s&&t.get(e)}function Ri(t,e=!1){const n=this.__v_raw,r=ze(n),s=ze(t);return e||(In(t,s)&&At(r,"has",t),At(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ii(t,e=!1){return t=t.__v_raw,!e&&At(ze(t),"iterate",Yn),Reflect.get(t,"size",t)}function Va(t,e=!1){!e&&!zt(t)&&!Xn(t)&&(t=ze(t));const n=ze(this);return is(n).has.call(n,t)||(n.add(t),vn(n,"add",t,t)),this}function Wa(t,e,n=!1){!n&&!zt(e)&&!Xn(e)&&(e=ze(e));const r=ze(this),{has:s,get:a}=is(r);let u=s.call(r,t);u||(t=ze(t),u=s.call(r,t));const c=a.call(r,t);return r.set(t,e),u?In(e,c)&&vn(r,"set",t,e):vn(r,"add",t,e),this}function za(t){const e=ze(this),{has:n,get:r}=is(e);let s=n.call(e,t);s||(t=ze(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&vn(e,"delete",t,void 0),a}function Ja(){const t=ze(this),e=t.size!==0,n=t.clear();return e&&vn(t,"clear",void 0,void 0),n}function Di(t,e){return function(r,s){const a=this,u=a.__v_raw,c=ze(u),h=e?Vo:t?Qo:Et;return!t&&At(c,"iterate",Yn),u.forEach((y,p)=>r.call(s,h(y),h(p),a))}}function $i(t,e,n){return function(...r){const s=this.__v_raw,a=ze(s),u=mr(a),c=t==="entries"||t===Symbol.iterator&&u,h=t==="keys"&&u,y=s[t](...r),p=n?Vo:e?Qo:Et;return!e&&At(a,"iterate",h?mo:Yn),{next(){const{value:b,done:P}=y.next();return P?{value:b,done:P}:{value:c?[p(b[0]),p(b[1])]:p(b),done:P}},[Symbol.iterator](){return this}}}}function On(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function gh(){const t={get(a){return ji(this,a)},get size(){return Ii(this)},has:Ri,add:Va,set:Wa,delete:za,clear:Ja,forEach:Di(!1,!1)},e={get(a){return ji(this,a,!1,!0)},get size(){return Ii(this)},has:Ri,add(a){return Va.call(this,a,!0)},set(a,u){return Wa.call(this,a,u,!0)},delete:za,clear:Ja,forEach:Di(!1,!0)},n={get(a){return ji(this,a,!0)},get size(){return Ii(this,!0)},has(a){return Ri.call(this,a,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Di(!0,!1)},r={get(a){return ji(this,a,!0,!0)},get size(){return Ii(this,!0)},has(a){return Ri.call(this,a,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Di(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=$i(a,!1,!1),n[a]=$i(a,!0,!1),e[a]=$i(a,!1,!0),r[a]=$i(a,!0,!0)}),[t,n,e,r]}const[yh,mh,vh,_h]=gh();function Wo(t,e){const n=e?t?_h:vh:t?mh:yh;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(We(n,s)&&s in r?n:r,s,a)}const bh={get:Wo(!1,!1)},wh={get:Wo(!1,!0)},kh={get:Wo(!0,!1)};const al=new WeakMap,ul=new WeakMap,ll=new WeakMap,xh=new WeakMap;function Eh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sh(t){return t.__v_skip||!Object.isExtensible(t)?0:Eh(zc(t))}function zo(t){return Xn(t)?t:Jo(t,!1,fh,bh,al)}function Oh(t){return Jo(t,!1,ph,wh,ul)}function cl(t){return Jo(t,!0,dh,kh,ll)}function Jo(t,e,n,r,s){if(!ot(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const u=Sh(t);if(u===0)return t;const c=new Proxy(t,u===2?r:n);return s.set(t,c),c}function vr(t){return Xn(t)?vr(t.__v_raw):!!(t&&t.__v_isReactive)}function Xn(t){return!!(t&&t.__v_isReadonly)}function zt(t){return!!(t&&t.__v_isShallow)}function Go(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function Th(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&Hu(t,"__v_skip",!0),t}const Et=t=>ot(t)?zo(t):t,Qo=t=>ot(t)?cl(t):t;function Pt(t){return t?t.__v_isRef===!0:!1}function Ph(t){return Ch(t,!1)}function Ch(t,e){return Pt(t)?t:new Ah(t,e)}class Ah{constructor(e,n){this.dep=new Ho,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:Et(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Xn(e);e=r?e:ze(e),In(e,n)&&(this._rawValue=e,this._value=r?e:Et(e),this.dep.trigger())}}function jh(t){return Pt(t)?t.value:t}const Rh={get:(t,e,n)=>e==="__v_raw"?t:jh(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Pt(s)&&!Pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function hl(t){return vr(t)?t:new Proxy(t,Rh)}class Ih{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ho(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Xu(this),!0}get value(){const e=this.dep.track();return tl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Dh(t,e,n=!1){let r,s;return Pe(t)?r=t:(r=t.get,s=t.set),new Ih(r,s,n)}const Li={},Vi=new WeakMap;let zn;function $h(t,e=!1,n=zn){if(n){let r=Vi.get(n);r||Vi.set(n,r=[]),r.push(t)}}function Lh(t,e,n=tt){const{immediate:r,deep:s,once:a,scheduler:u,augmentJob:c,call:h}=n,y=ce=>s?ce:zt(ce)||s===!1||s===0?mn(ce,1):mn(ce);let p,b,P,V,se=!1,le=!1;if(Pt(t)?(b=()=>t.value,se=zt(t)):vr(t)?(b=()=>y(t),se=!0):xe(t)?(le=!0,se=t.some(ce=>vr(ce)||zt(ce)),b=()=>t.map(ce=>{if(Pt(ce))return ce.value;if(vr(ce))return y(ce);if(Pe(ce))return h?h(ce,2):ce()})):Pe(t)?e?b=h?()=>h(t,2):t:b=()=>{if(P){$n();try{P()}finally{Ln()}}const ce=zn;zn=p;try{return h?h(t,3,[V]):t(V)}finally{zn=ce}}:b=an,e&&s){const ce=b,Le=s===!0?1/0:s;b=()=>mn(ce(),Le)}const ve=ih(),we=()=>{p.stop(),ve&&Fo(ve.effects,p)};if(a&&e){const ce=e;e=(...Le)=>{ce(...Le),we()}}let je=le?new Array(t.length).fill(Li):Li;const Re=ce=>{if(!(!(p.flags&1)||!p.dirty&&!ce))if(e){const Le=p.run();if(s||se||(le?Le.some((Ye,_e)=>In(Ye,je[_e])):In(Le,je))){P&&P();const Ye=zn;zn=p;try{const _e=[Le,je===Li?void 0:le&&je[0]===Li?[]:je,V];h?h(e,3,_e):e(..._e),je=Le}finally{zn=Ye}}}else p.run()};return c&&c(Re),p=new Qu(b),p.scheduler=u?()=>u(Re,!1):Re,V=ce=>$h(ce,!1,p),P=p.onStop=()=>{const ce=Vi.get(p);if(ce){if(h)h(ce,4);else for(const Le of ce)Le();Vi.delete(p)}},e?r?Re(!0):je=p.run():u?u(Re.bind(null,!0),!0):p.run(),we.pause=p.pause.bind(p),we.resume=p.resume.bind(p),we.stop=we,we}function mn(t,e=1/0,n){if(e<=0||!ot(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Pt(t))mn(t.value,e,n);else if(xe(t))for(let r=0;r<t.length;r++)mn(t[r],e,n);else if(Zi(t)||mr(t))t.forEach(r=>{mn(r,e,n)});else if(qu(t)){for(const r in t)mn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&mn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ri(t,e,n,r){try{return r?t(...r):t()}catch(s){ss(s,e,n)}}function ln(t,e,n,r){if(Pe(t)){const s=ri(t,e,n,r);return s&&Bu(s)&&s.catch(a=>{ss(a,e,n)}),s}if(xe(t)){const s=[];for(let a=0;a<t.length;a++)s.push(ln(t[a],e,n,r));return s}}function ss(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||tt;if(e){let c=e.parent;const h=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const p=c.ec;if(p){for(let b=0;b<p.length;b++)if(p[b](t,h,y)===!1)return}c=c.parent}if(a){$n(),ri(a,null,10,[t,h,y]),Ln();return}}Fh(t,n,s,r,u)}function Fh(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}let Xr=!1,vo=!1;const $t=[];let rn=0;const _r=[];let Cn=null,dr=0;const fl=Promise.resolve();let Yo=null;function Mh(t){const e=Yo||fl;return t?e.then(this?t.bind(this):t):e}function Uh(t){let e=Xr?rn+1:0,n=$t.length;for(;e<n;){const r=e+n>>>1,s=$t[r],a=Zr(s);a<t||a===t&&s.flags&2?e=r+1:n=r}return e}function Xo(t){if(!(t.flags&1)){const e=Zr(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Zr(n)?$t.push(t):$t.splice(Uh(e),0,t),t.flags|=1,dl()}}function dl(){!Xr&&!vo&&(vo=!0,Yo=fl.then(gl))}function Kh(t){xe(t)?_r.push(...t):Cn&&t.id===-1?Cn.splice(dr+1,0,t):t.flags&1||(_r.push(t),t.flags|=1),dl()}function Ga(t,e,n=Xr?rn+1:0){for(;n<$t.length;n++){const r=$t[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$t.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function pl(t){if(_r.length){const e=[...new Set(_r)].sort((n,r)=>Zr(n)-Zr(r));if(_r.length=0,Cn){Cn.push(...e);return}for(Cn=e,dr=0;dr<Cn.length;dr++){const n=Cn[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Cn=null,dr=0}}const Zr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function gl(t){vo=!1,Xr=!0;try{for(rn=0;rn<$t.length;rn++){const e=$t[rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ri(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rn<$t.length;rn++){const e=$t[rn];e&&(e.flags&=-2)}rn=0,$t.length=0,pl(),Xr=!1,Yo=null,($t.length||_r.length)&&gl()}}let Ht=null,yl=null;function Wi(t){const e=Ht;return Ht=t,yl=t&&t.type.__scopeId||null,e}function Bh(t,e=Ht,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&iu(-1);const a=Wi(e);let u;try{u=t(...s)}finally{Wi(a),r._d&&iu(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function sn(t,e){if(Ht===null)return t;const n=cs(Ht),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,u,c,h=tt]=e[s];a&&(Pe(a)&&(a={mounted:a,updated:a}),a.deep&&mn(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:c,modifiers:h}))}return t}function Hn(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let u=0;u<s.length;u++){const c=s[u];a&&(c.oldValue=a[u].value);let h=c.dir[r];h&&($n(),ln(h,n,8,[t.el,c,t,e]),Ln())}}const Nh=Symbol("_vte"),qh=t=>t.__isTeleport;function Zo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Zo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ml(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function _o(t,e,n,r,s=!1){if(xe(t)){t.forEach((se,le)=>_o(se,e&&(xe(e)?e[le]:e),n,r,s));return}if(Vr(r)&&!s)return;const a=r.shapeFlag&4?cs(r.component):r.el,u=s?null:a,{i:c,r:h}=t,y=e&&e.r,p=c.refs===tt?c.refs={}:c.refs,b=c.setupState,P=ze(b),V=b===tt?()=>!1:se=>We(P,se);if(y!=null&&y!==h&&(mt(y)?(p[y]=null,V(y)&&(b[y]=null)):Pt(y)&&(y.value=null)),Pe(h))ri(h,c,12,[u,p]);else{const se=mt(h),le=Pt(h);if(se||le){const ve=()=>{if(t.f){const we=se?V(h)?b[h]:p[h]:h.value;s?xe(we)&&Fo(we,a):xe(we)?we.includes(a)||we.push(a):se?(p[h]=[a],V(h)&&(b[h]=p[h])):(h.value=[a],t.k&&(p[t.k]=h.value))}else se?(p[h]=u,V(h)&&(b[h]=u)):le&&(h.value=u,t.k&&(p[t.k]=u))};u?(ve.id=-1,Kt(ve,n)):ve()}}}const Vr=t=>!!t.type.__asyncLoader,vl=t=>t.type.__isKeepAlive;function Hh(t,e){_l(t,"a",e)}function Vh(t,e){_l(t,"da",e)}function _l(t,e,n=Ot){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(os(e,r,n),n){let s=n.parent;for(;s&&s.parent;)vl(s.parent.vnode)&&Wh(r,e,n,s),s=s.parent}}function Wh(t,e,n,r){const s=os(e,t,r,!0);wl(()=>{Fo(r[e],s)},n)}function os(t,e,n=Ot,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...u)=>{$n();const c=ii(n),h=ln(e,n,t,u);return c(),Ln(),h});return r?s.unshift(a):s.push(a),a}}const _n=t=>(e,n=Ot)=>{(!ls||t==="sp")&&os(t,(...r)=>e(...r),n)},zh=_n("bm"),bl=_n("m"),Jh=_n("bu"),Gh=_n("u"),Qh=_n("bum"),wl=_n("um"),Yh=_n("sp"),Xh=_n("rtg"),Zh=_n("rtc");function ef(t,e=Ot){os("ec",t,e)}const tf="components";function zi(t,e){return rf(tf,t,!0,e)||t}const nf=Symbol.for("v-ndc");function rf(t,e,n=!0,r=!1){const s=Ht||Ot;if(s){const a=s.type;{const c=Vf(a,!1);if(c&&(c===e||c===Jt(e)||c===ts(Jt(e))))return a}const u=Qa(s[t]||a[t],e)||Qa(s.appContext[t],e);return!u&&r?a:u}}function Qa(t,e){return t&&(t[e]||t[Jt(e)]||t[ts(Jt(e))])}function br(t,e,n,r){let s;const a=n,u=xe(t);if(u||mt(t)){const c=u&&vr(t);let h=!1;c&&(h=!zt(t),t=rs(t)),s=new Array(t.length);for(let y=0,p=t.length;y<p;y++)s[y]=e(h?Et(t[y]):t[y],y,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,a)}else if(ot(t))if(t[Symbol.iterator])s=Array.from(t,(c,h)=>e(c,h,void 0,a));else{const c=Object.keys(t);s=new Array(c.length);for(let h=0,y=c.length;h<y;h++){const p=c[h];s[h]=e(t[p],p,h,a)}}else s=[];return s}const bo=t=>t?Nl(t)?cs(t):bo(t.parent):null,Wr=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>bo(t.parent),$root:t=>bo(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ea(t),$forceUpdate:t=>t.f||(t.f=()=>{Xo(t.update)}),$nextTick:t=>t.n||(t.n=Mh.bind(t.proxy)),$watch:t=>Of.bind(t)}),to=(t,e)=>t!==tt&&!t.__isScriptSetup&&We(t,e),sf={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:u,type:c,appContext:h}=t;let y;if(e[0]!=="$"){const V=u[e];if(V!==void 0)switch(V){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(to(r,e))return u[e]=1,r[e];if(s!==tt&&We(s,e))return u[e]=2,s[e];if((y=t.propsOptions[0])&&We(y,e))return u[e]=3,a[e];if(n!==tt&&We(n,e))return u[e]=4,n[e];wo&&(u[e]=0)}}const p=Wr[e];let b,P;if(p)return e==="$attrs"&&At(t.attrs,"get",""),p(t);if((b=c.__cssModules)&&(b=b[e]))return b;if(n!==tt&&We(n,e))return u[e]=4,n[e];if(P=h.config.globalProperties,We(P,e))return P[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;return to(s,e)?(s[e]=n,!0):r!==tt&&We(r,e)?(r[e]=n,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},u){let c;return!!n[u]||t!==tt&&We(t,u)||to(e,u)||(c=a[0])&&We(c,u)||We(r,u)||We(Wr,u)||We(s.config.globalProperties,u)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:We(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ya(t){return xe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let wo=!0;function of(t){const e=ea(t),n=t.proxy,r=t.ctx;wo=!1,e.beforeCreate&&Xa(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:u,watch:c,provide:h,inject:y,created:p,beforeMount:b,mounted:P,beforeUpdate:V,updated:se,activated:le,deactivated:ve,beforeDestroy:we,beforeUnmount:je,destroyed:Re,unmounted:ce,render:Le,renderTracked:Ye,renderTriggered:_e,errorCaptured:I,serverPrefetch:R,expose:W,inheritAttrs:ue,components:he,directives:ye,filters:Ce}=e;if(y&&af(y,r,null),u)for(const Z in u){const me=u[Z];Pe(me)&&(r[Z]=me.bind(n))}if(s){const Z=s.call(n,n);ot(Z)&&(t.data=zo(Z))}if(wo=!0,a)for(const Z in a){const me=a[Z],pe=Pe(me)?me.bind(n,n):Pe(me.get)?me.get.bind(n,n):an,nt=!Pe(me)&&Pe(me.set)?me.set.bind(n):an,Qe=zf({get:pe,set:nt});Object.defineProperty(r,Z,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:oe=>Qe.value=oe})}if(c)for(const Z in c)kl(c[Z],r,n,Z);if(h){const Z=Pe(h)?h.call(n):h;Reflect.ownKeys(Z).forEach(me=>{df(me,Z[me])})}p&&Xa(p,t,"c");function Se(Z,me){xe(me)?me.forEach(pe=>Z(pe.bind(n))):me&&Z(me.bind(n))}if(Se(zh,b),Se(bl,P),Se(Jh,V),Se(Gh,se),Se(Hh,le),Se(Vh,ve),Se(ef,I),Se(Zh,Ye),Se(Xh,_e),Se(Qh,je),Se(wl,ce),Se(Yh,R),xe(W))if(W.length){const Z=t.exposed||(t.exposed={});W.forEach(me=>{Object.defineProperty(Z,me,{get:()=>n[me],set:pe=>n[me]=pe})})}else t.exposed||(t.exposed={});Le&&t.render===an&&(t.render=Le),ue!=null&&(t.inheritAttrs=ue),he&&(t.components=he),ye&&(t.directives=ye),R&&ml(t)}function af(t,e,n=an){xe(t)&&(t=ko(t));for(const r in t){const s=t[r];let a;ot(s)?"default"in s?a=Ni(s.from||r,s.default,!0):a=Ni(s.from||r):a=Ni(s),Pt(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function Xa(t,e,n){ln(xe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function kl(t,e,n,r){let s=r.includes(".")?Ll(n,r):()=>n[r];if(mt(t)){const a=e[t];Pe(a)&&ro(s,a)}else if(Pe(t))ro(s,t.bind(n));else if(ot(t))if(xe(t))t.forEach(a=>kl(a,e,n,r));else{const a=Pe(t.handler)?t.handler.bind(n):e[t.handler];Pe(a)&&ro(s,a,t)}}function ea(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:u}}=t.appContext,c=a.get(e);let h;return c?h=c:!s.length&&!n&&!r?h=e:(h={},s.length&&s.forEach(y=>Ji(h,y,u,!0)),Ji(h,e,u)),ot(e)&&a.set(e,h),h}function Ji(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&Ji(t,a,n,!0),s&&s.forEach(u=>Ji(t,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const c=uf[u]||n&&n[u];t[u]=c?c(t[u],e[u]):e[u]}return t}const uf={data:Za,props:eu,emits:eu,methods:Nr,computed:Nr,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:Nr,directives:Nr,watch:cf,provide:Za,inject:lf};function Za(t,e){return e?t?function(){return Ct(Pe(t)?t.call(this,this):t,Pe(e)?e.call(this,this):e)}:e:t}function lf(t,e){return Nr(ko(t),ko(e))}function ko(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function Nr(t,e){return t?Ct(Object.create(null),t,e):e}function eu(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:Ct(Object.create(null),Ya(t),Ya(e??{})):e}function cf(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const r in e)n[r]=It(t[r],e[r]);return n}function xl(){return{app:null,config:{isNativeTag:Vc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hf=0;function ff(t,e){return function(r,s=null){Pe(r)||(r=Ct({},r)),s!=null&&!ot(s)&&(s=null);const a=xl(),u=new WeakSet,c=[];let h=!1;const y=a.app={_uid:hf++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Jf,get config(){return a.config},set config(p){},use(p,...b){return u.has(p)||(p&&Pe(p.install)?(u.add(p),p.install(y,...b)):Pe(p)&&(u.add(p),p(y,...b))),y},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),y},component(p,b){return b?(a.components[p]=b,y):a.components[p]},directive(p,b){return b?(a.directives[p]=b,y):a.directives[p]},mount(p,b,P){if(!h){const V=y._ceVNode||Tt(r,s);return V.appContext=a,P===!0?P="svg":P===!1&&(P=void 0),b&&e?e(V,p):t(V,p,P),h=!0,y._container=p,p.__vue_app__=y,cs(V.component)}},onUnmount(p){c.push(p)},unmount(){h&&(ln(c,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(p,b){return a.provides[p]=b,y},runWithContext(p){const b=wr;wr=y;try{return p()}finally{wr=b}}};return y}}let wr=null;function df(t,e){if(Ot){let n=Ot.provides;const r=Ot.parent&&Ot.parent.provides;r===n&&(n=Ot.provides=Object.create(r)),n[t]=e}}function Ni(t,e,n=!1){const r=Ot||Ht;if(r||wr){const s=wr?wr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}const El={},Sl=()=>Object.create(El),Ol=t=>Object.getPrototypeOf(t)===El;function pf(t,e,n,r=!1){const s={},a=Sl();t.propsDefaults=Object.create(null),Tl(t,e,s,a);for(const u in t.propsOptions[0])u in s||(s[u]=void 0);n?t.props=r?s:Oh(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function gf(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:u}}=t,c=ze(s),[h]=t.propsOptions;let y=!1;if((r||u>0)&&!(u&16)){if(u&8){const p=t.vnode.dynamicProps;for(let b=0;b<p.length;b++){let P=p[b];if(as(t.emitsOptions,P))continue;const V=e[P];if(h)if(We(a,P))V!==a[P]&&(a[P]=V,y=!0);else{const se=Jt(P);s[se]=xo(h,c,se,V,t,!1)}else V!==a[P]&&(a[P]=V,y=!0)}}}else{Tl(t,e,s,a)&&(y=!0);let p;for(const b in c)(!e||!We(e,b)&&((p=Dn(b))===b||!We(e,p)))&&(h?n&&(n[b]!==void 0||n[p]!==void 0)&&(s[b]=xo(h,c,b,void 0,t,!0)):delete s[b]);if(a!==c)for(const b in a)(!e||!We(e,b))&&(delete a[b],y=!0)}y&&vn(t.attrs,"set","")}function Tl(t,e,n,r){const[s,a]=t.propsOptions;let u=!1,c;if(e)for(let h in e){if(Hr(h))continue;const y=e[h];let p;s&&We(s,p=Jt(h))?!a||!a.includes(p)?n[p]=y:(c||(c={}))[p]=y:as(t.emitsOptions,h)||(!(h in r)||y!==r[h])&&(r[h]=y,u=!0)}if(a){const h=ze(n),y=c||tt;for(let p=0;p<a.length;p++){const b=a[p];n[b]=xo(s,h,b,y[b],t,!We(y,b))}}return u}function xo(t,e,n,r,s,a){const u=t[n];if(u!=null){const c=We(u,"default");if(c&&r===void 0){const h=u.default;if(u.type!==Function&&!u.skipFactory&&Pe(h)){const{propsDefaults:y}=s;if(n in y)r=y[n];else{const p=ii(s);r=y[n]=h.call(null,e),p()}}else r=h;s.ce&&s.ce._setProp(n,r)}u[0]&&(a&&!c?r=!1:u[1]&&(r===""||r===Dn(n))&&(r=!0))}return r}const yf=new WeakMap;function Pl(t,e,n=!1){const r=n?yf:e.propsCache,s=r.get(t);if(s)return s;const a=t.props,u={},c=[];let h=!1;if(!Pe(t)){const p=b=>{h=!0;const[P,V]=Pl(b,e,!0);Ct(u,P),V&&c.push(...V)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!a&&!h)return ot(t)&&r.set(t,yr),yr;if(xe(a))for(let p=0;p<a.length;p++){const b=Jt(a[p]);tu(b)&&(u[b]=tt)}else if(a)for(const p in a){const b=Jt(p);if(tu(b)){const P=a[p],V=u[b]=xe(P)||Pe(P)?{type:P}:Ct({},P),se=V.type;let le=!1,ve=!0;if(xe(se))for(let we=0;we<se.length;++we){const je=se[we],Re=Pe(je)&&je.name;if(Re==="Boolean"){le=!0;break}else Re==="String"&&(ve=!1)}else le=Pe(se)&&se.name==="Boolean";V[0]=le,V[1]=ve,(le||We(V,"default"))&&c.push(b)}}const y=[u,c];return ot(t)&&r.set(t,y),y}function tu(t){return t[0]!=="$"&&!Hr(t)}const Cl=t=>t[0]==="_"||t==="$stable",ta=t=>xe(t)?t.map(on):[on(t)],mf=(t,e,n)=>{if(e._n)return e;const r=Bh((...s)=>ta(e(...s)),n);return r._c=!1,r},Al=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Cl(s))continue;const a=t[s];if(Pe(a))e[s]=mf(s,a,r);else if(a!=null){const u=ta(a);e[s]=()=>u}}},jl=(t,e)=>{const n=ta(e);t.slots.default=()=>n},Rl=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},vf=(t,e,n)=>{const r=t.slots=Sl();if(t.vnode.shapeFlag&32){const s=e._;s?(Rl(r,e,n),n&&Hu(r,"_",s,!0)):Al(e,r)}else e&&jl(t,e)},_f=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,u=tt;if(r.shapeFlag&32){const c=e._;c?n&&c===1?a=!1:Rl(s,e,n):(a=!e.$stable,Al(e,s)),u=e}else e&&(jl(t,e),u={default:1});if(a)for(const c in s)!Cl(c)&&u[c]==null&&delete s[c]},Kt=If;function bf(t){return wf(t)}function wf(t,e){const n=Vu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:u,createText:c,createComment:h,setText:y,setElementText:p,parentNode:b,nextSibling:P,setScopeId:V=an,insertStaticContent:se}=t,le=(v,k,D,M=null,B=null,N=null,X=void 0,J=null,H=!!k.dynamicChildren)=>{if(v===k)return;v&&!Ur(v,k)&&(M=Xe(v),oe(v,B,N,!0),v=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:ee}=k;switch(K){case us:ve(v,k,D,M);break;case Zn:we(v,k,D,M);break;case so:v==null&&je(k,D,M,X);break;case St:he(v,k,D,M,B,N,X,J,H);break;default:ee&1?Le(v,k,D,M,B,N,X,J,H):ee&6?ye(v,k,D,M,B,N,X,J,H):(ee&64||ee&128)&&K.process(v,k,D,M,B,N,X,J,H,Fe)}ie!=null&&B&&_o(ie,v&&v.ref,N,k||v,!k)},ve=(v,k,D,M)=>{if(v==null)r(k.el=c(k.children),D,M);else{const B=k.el=v.el;k.children!==v.children&&y(B,k.children)}},we=(v,k,D,M)=>{v==null?r(k.el=h(k.children||""),D,M):k.el=v.el},je=(v,k,D,M)=>{[v.el,v.anchor]=se(v.children,k,D,M,v.el,v.anchor)},Re=({el:v,anchor:k},D,M)=>{let B;for(;v&&v!==k;)B=P(v),r(v,D,M),v=B;r(k,D,M)},ce=({el:v,anchor:k})=>{let D;for(;v&&v!==k;)D=P(v),s(v),v=D;s(k)},Le=(v,k,D,M,B,N,X,J,H)=>{k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),v==null?Ye(k,D,M,B,N,X,J,H):R(v,k,B,N,X,J,H)},Ye=(v,k,D,M,B,N,X,J)=>{let H,K;const{props:ie,shapeFlag:ee,transition:Y,dirs:ge}=v;if(H=v.el=u(v.type,N,ie&&ie.is,ie),ee&8?p(H,v.children):ee&16&&I(v.children,H,null,M,B,no(v,N),X,J),ge&&Hn(v,null,M,"created"),_e(H,v,v.scopeId,X,M),ie){for(const Ae in ie)Ae!=="value"&&!Hr(Ae)&&a(H,Ae,null,ie[Ae],N,M);"value"in ie&&a(H,"value",null,ie.value,N),(K=ie.onVnodeBeforeMount)&&nn(K,M,v)}ge&&Hn(v,null,M,"beforeMount");const ke=kf(B,Y);ke&&Y.beforeEnter(H),r(H,k,D),((K=ie&&ie.onVnodeMounted)||ke||ge)&&Kt(()=>{K&&nn(K,M,v),ke&&Y.enter(H),ge&&Hn(v,null,M,"mounted")},B)},_e=(v,k,D,M,B)=>{if(D&&V(v,D),M)for(let N=0;N<M.length;N++)V(v,M[N]);if(B){let N=B.subTree;if(k===N||Ml(N.type)&&(N.ssContent===k||N.ssFallback===k)){const X=B.vnode;_e(v,X,X.scopeId,X.slotScopeIds,B.parent)}}},I=(v,k,D,M,B,N,X,J,H=0)=>{for(let K=H;K<v.length;K++){const ie=v[K]=J?An(v[K]):on(v[K]);le(null,ie,k,D,M,B,N,X,J)}},R=(v,k,D,M,B,N,X)=>{const J=k.el=v.el;let{patchFlag:H,dynamicChildren:K,dirs:ie}=k;H|=v.patchFlag&16;const ee=v.props||tt,Y=k.props||tt;let ge;if(D&&Vn(D,!1),(ge=Y.onVnodeBeforeUpdate)&&nn(ge,D,k,v),ie&&Hn(k,v,D,"beforeUpdate"),D&&Vn(D,!0),(ee.innerHTML&&Y.innerHTML==null||ee.textContent&&Y.textContent==null)&&p(J,""),K?W(v.dynamicChildren,K,J,D,M,no(k,B),N):X||me(v,k,J,null,D,M,no(k,B),N,!1),H>0){if(H&16)ue(J,ee,Y,D,B);else if(H&2&&ee.class!==Y.class&&a(J,"class",null,Y.class,B),H&4&&a(J,"style",ee.style,Y.style,B),H&8){const ke=k.dynamicProps;for(let Ae=0;Ae<ke.length;Ae++){const Oe=ke[Ae],Ze=ee[Oe],Be=Y[Oe];(Be!==Ze||Oe==="value")&&a(J,Oe,Ze,Be,B,D)}}H&1&&v.children!==k.children&&p(J,k.children)}else!X&&K==null&&ue(J,ee,Y,D,B);((ge=Y.onVnodeUpdated)||ie)&&Kt(()=>{ge&&nn(ge,D,k,v),ie&&Hn(k,v,D,"updated")},M)},W=(v,k,D,M,B,N,X)=>{for(let J=0;J<k.length;J++){const H=v[J],K=k[J],ie=H.el&&(H.type===St||!Ur(H,K)||H.shapeFlag&70)?b(H.el):D;le(H,K,ie,null,M,B,N,X,!0)}},ue=(v,k,D,M,B)=>{if(k!==D){if(k!==tt)for(const N in k)!Hr(N)&&!(N in D)&&a(v,N,k[N],null,B,M);for(const N in D){if(Hr(N))continue;const X=D[N],J=k[N];X!==J&&N!=="value"&&a(v,N,J,X,B,M)}"value"in D&&a(v,"value",k.value,D.value,B)}},he=(v,k,D,M,B,N,X,J,H)=>{const K=k.el=v?v.el:c(""),ie=k.anchor=v?v.anchor:c("");let{patchFlag:ee,dynamicChildren:Y,slotScopeIds:ge}=k;ge&&(J=J?J.concat(ge):ge),v==null?(r(K,D,M),r(ie,D,M),I(k.children||[],D,ie,B,N,X,J,H)):ee>0&&ee&64&&Y&&v.dynamicChildren?(W(v.dynamicChildren,Y,D,B,N,X,J),(k.key!=null||B&&k===B.subTree)&&Il(v,k,!0)):me(v,k,D,ie,B,N,X,J,H)},ye=(v,k,D,M,B,N,X,J,H)=>{k.slotScopeIds=J,v==null?k.shapeFlag&512?B.ctx.activate(k,D,M,X,H):Ce(k,D,M,B,N,X,H):at(v,k,H)},Ce=(v,k,D,M,B,N,X)=>{const J=v.component=Kf(v,M,B);if(vl(v)&&(J.ctx.renderer=Fe),Bf(J,!1,X),J.asyncDep){if(B&&B.registerDep(J,Se,X),!v.el){const H=J.subTree=Tt(Zn);we(null,H,k,D)}}else Se(J,v,k,D,B,N,X)},at=(v,k,D)=>{const M=k.component=v.component;if(jf(v,k,D))if(M.asyncDep&&!M.asyncResolved){Z(M,k,D);return}else M.next=k,M.update();else k.el=v.el,M.vnode=k},Se=(v,k,D,M,B,N,X)=>{const J=()=>{if(v.isMounted){let{next:ee,bu:Y,u:ge,parent:ke,vnode:Ae}=v;{const ft=Dl(v);if(ft){ee&&(ee.el=Ae.el,Z(v,ee,X)),ft.asyncDep.then(()=>{v.isUnmounted||J()});return}}let Oe=ee,Ze;Vn(v,!1),ee?(ee.el=Ae.el,Z(v,ee,X)):ee=Ae,Y&&Bi(Y),(Ze=ee.props&&ee.props.onVnodeBeforeUpdate)&&nn(Ze,ke,ee,Ae),Vn(v,!0);const Be=io(v),Ge=v.subTree;v.subTree=Be,le(Ge,Be,b(Ge.el),Xe(Ge),v,B,N),ee.el=Be.el,Oe===null&&Rf(v,Be.el),ge&&Kt(ge,B),(Ze=ee.props&&ee.props.onVnodeUpdated)&&Kt(()=>nn(Ze,ke,ee,Ae),B)}else{let ee;const{el:Y,props:ge}=k,{bm:ke,m:Ae,parent:Oe,root:Ze,type:Be}=v,Ge=Vr(k);if(Vn(v,!1),ke&&Bi(ke),!Ge&&(ee=ge&&ge.onVnodeBeforeMount)&&nn(ee,Oe,k),Vn(v,!0),Y&&be){const ft=()=>{v.subTree=io(v),be(Y,v.subTree,v,B,null)};Ge&&Be.__asyncHydrate?Be.__asyncHydrate(Y,v,ft):ft()}else{Ze.ce&&Ze.ce._injectChildStyle(Be);const ft=v.subTree=io(v);le(null,ft,D,M,v,B,N),k.el=ft.el}if(Ae&&Kt(Ae,B),!Ge&&(ee=ge&&ge.onVnodeMounted)){const ft=k;Kt(()=>nn(ee,Oe,ft),B)}(k.shapeFlag&256||Oe&&Vr(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&v.a&&Kt(v.a,B),v.isMounted=!0,k=D=M=null}};v.scope.on();const H=v.effect=new Qu(J);v.scope.off();const K=v.update=H.run.bind(H),ie=v.job=H.runIfDirty.bind(H);ie.i=v,ie.id=v.uid,H.scheduler=()=>Xo(ie),Vn(v,!0),K()},Z=(v,k,D)=>{k.component=v;const M=v.vnode.props;v.vnode=k,v.next=null,gf(v,k.props,M,D),_f(v,k.children,D),$n(),Ga(v),Ln()},me=(v,k,D,M,B,N,X,J,H=!1)=>{const K=v&&v.children,ie=v?v.shapeFlag:0,ee=k.children,{patchFlag:Y,shapeFlag:ge}=k;if(Y>0){if(Y&128){nt(K,ee,D,M,B,N,X,J,H);return}else if(Y&256){pe(K,ee,D,M,B,N,X,J,H);return}}ge&8?(ie&16&&Ve(K,B,N),ee!==K&&p(D,ee)):ie&16?ge&16?nt(K,ee,D,M,B,N,X,J,H):Ve(K,B,N,!0):(ie&8&&p(D,""),ge&16&&I(ee,D,M,B,N,X,J,H))},pe=(v,k,D,M,B,N,X,J,H)=>{v=v||yr,k=k||yr;const K=v.length,ie=k.length,ee=Math.min(K,ie);let Y;for(Y=0;Y<ee;Y++){const ge=k[Y]=H?An(k[Y]):on(k[Y]);le(v[Y],ge,D,null,B,N,X,J,H)}K>ie?Ve(v,B,N,!0,!1,ee):I(k,D,M,B,N,X,J,H,ee)},nt=(v,k,D,M,B,N,X,J,H)=>{let K=0;const ie=k.length;let ee=v.length-1,Y=ie-1;for(;K<=ee&&K<=Y;){const ge=v[K],ke=k[K]=H?An(k[K]):on(k[K]);if(Ur(ge,ke))le(ge,ke,D,null,B,N,X,J,H);else break;K++}for(;K<=ee&&K<=Y;){const ge=v[ee],ke=k[Y]=H?An(k[Y]):on(k[Y]);if(Ur(ge,ke))le(ge,ke,D,null,B,N,X,J,H);else break;ee--,Y--}if(K>ee){if(K<=Y){const ge=Y+1,ke=ge<ie?k[ge].el:M;for(;K<=Y;)le(null,k[K]=H?An(k[K]):on(k[K]),D,ke,B,N,X,J,H),K++}}else if(K>Y)for(;K<=ee;)oe(v[K],B,N,!0),K++;else{const ge=K,ke=K,Ae=new Map;for(K=ke;K<=Y;K++){const ht=k[K]=H?An(k[K]):on(k[K]);ht.key!=null&&Ae.set(ht.key,K)}let Oe,Ze=0;const Be=Y-ke+1;let Ge=!1,ft=0;const et=new Array(Be);for(K=0;K<Be;K++)et[K]=0;for(K=ge;K<=ee;K++){const ht=v[K];if(Ze>=Be){oe(ht,B,N,!0);continue}let vt;if(ht.key!=null)vt=Ae.get(ht.key);else for(Oe=ke;Oe<=Y;Oe++)if(et[Oe-ke]===0&&Ur(ht,k[Oe])){vt=Oe;break}vt===void 0?oe(ht,B,N,!0):(et[vt-ke]=K+1,vt>=ft?ft=vt:Ge=!0,le(ht,k[vt],D,null,B,N,X,J,H),Ze++)}const fe=Ge?xf(et):yr;for(Oe=fe.length-1,K=Be-1;K>=0;K--){const ht=ke+K,vt=k[ht],Fn=ht+1<ie?k[ht+1].el:M;et[K]===0?le(null,vt,D,Fn,B,N,X,J,H):Ge&&(Oe<0||K!==fe[Oe]?Qe(vt,D,Fn,2):Oe--)}}},Qe=(v,k,D,M,B=null)=>{const{el:N,type:X,transition:J,children:H,shapeFlag:K}=v;if(K&6){Qe(v.component.subTree,k,D,M);return}if(K&128){v.suspense.move(k,D,M);return}if(K&64){X.move(v,k,D,Fe);return}if(X===St){r(N,k,D);for(let ee=0;ee<H.length;ee++)Qe(H[ee],k,D,M);r(v.anchor,k,D);return}if(X===so){Re(v,k,D);return}if(M!==2&&K&1&&J)if(M===0)J.beforeEnter(N),r(N,k,D),Kt(()=>J.enter(N),B);else{const{leave:ee,delayLeave:Y,afterLeave:ge}=J,ke=()=>r(N,k,D),Ae=()=>{ee(N,()=>{ke(),ge&&ge()})};Y?Y(N,ke,Ae):Ae()}else r(N,k,D)},oe=(v,k,D,M=!1,B=!1)=>{const{type:N,props:X,ref:J,children:H,dynamicChildren:K,shapeFlag:ie,patchFlag:ee,dirs:Y,cacheIndex:ge}=v;if(ee===-2&&(B=!1),J!=null&&_o(J,null,D,v,!0),ge!=null&&(k.renderCache[ge]=void 0),ie&256){k.ctx.deactivate(v);return}const ke=ie&1&&Y,Ae=!Vr(v);let Oe;if(Ae&&(Oe=X&&X.onVnodeBeforeUnmount)&&nn(Oe,k,v),ie&6)Je(v.component,D,M);else{if(ie&128){v.suspense.unmount(D,M);return}ke&&Hn(v,null,k,"beforeUnmount"),ie&64?v.type.remove(v,k,D,Fe,M):K&&!K.hasOnce&&(N!==St||ee>0&&ee&64)?Ve(K,k,D,!1,!0):(N===St&&ee&384||!B&&ie&16)&&Ve(H,k,D),M&&Ke(v)}(Ae&&(Oe=X&&X.onVnodeUnmounted)||ke)&&Kt(()=>{Oe&&nn(Oe,k,v),ke&&Hn(v,null,k,"unmounted")},D)},Ke=v=>{const{type:k,el:D,anchor:M,transition:B}=v;if(k===St){dt(D,M);return}if(k===so){ce(v);return}const N=()=>{s(D),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(v.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:J}=B,H=()=>X(D,N);J?J(v.el,N,H):H()}else N()},dt=(v,k)=>{let D;for(;v!==k;)D=P(v),s(v),v=D;s(k)},Je=(v,k,D)=>{const{bum:M,scope:B,job:N,subTree:X,um:J,m:H,a:K}=v;nu(H),nu(K),M&&Bi(M),B.stop(),N&&(N.flags|=8,oe(X,v,k,D)),J&&Kt(J,k),Kt(()=>{v.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Ve=(v,k,D,M=!1,B=!1,N=0)=>{for(let X=N;X<v.length;X++)oe(v[X],k,D,M,B)},Xe=v=>{if(v.shapeFlag&6)return Xe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=P(v.anchor||v.el),D=k&&k[Nh];return D?P(D):k};let ut=!1;const q=(v,k,D)=>{v==null?k._vnode&&oe(k._vnode,null,null,!0):le(k._vnode||null,v,k,null,null,null,D),k._vnode=v,ut||(ut=!0,Ga(),pl(),ut=!1)},Fe={p:le,um:oe,m:Qe,r:Ke,mt:Ce,mc:I,pc:me,pbc:W,n:Xe,o:t};let He,be;return{render:q,hydrate:He,createApp:ff(q,He)}}function no({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function kf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Il(t,e,n=!1){const r=t.children,s=e.children;if(xe(r)&&xe(s))for(let a=0;a<r.length;a++){const u=r[a];let c=s[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[a]=An(s[a]),c.el=u.el),!n&&c.patchFlag!==-2&&Il(u,c)),c.type===us&&(c.el=u.el)}}function xf(t){const e=t.slice(),n=[0];let r,s,a,u,c;const h=t.length;for(r=0;r<h;r++){const y=t[r];if(y!==0){if(s=n[n.length-1],t[s]<y){e[r]=s,n.push(r);continue}for(a=0,u=n.length-1;a<u;)c=a+u>>1,t[n[c]]<y?a=c+1:u=c;y<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function Dl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Dl(e)}function nu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ef=Symbol.for("v-scx"),Sf=()=>Ni(Ef);function ro(t,e,n){return $l(t,e,n)}function $l(t,e,n=tt){const{immediate:r,deep:s,flush:a,once:u}=n,c=Ct({},n);let h;if(ls)if(a==="sync"){const P=Sf();h=P.__watcherHandles||(P.__watcherHandles=[])}else if(!e||r)c.once=!0;else{const P=()=>{};return P.stop=an,P.resume=an,P.pause=an,P}const y=Ot;c.call=(P,V,se)=>ln(P,y,V,se);let p=!1;a==="post"?c.scheduler=P=>{Kt(P,y&&y.suspense)}:a!=="sync"&&(p=!0,c.scheduler=(P,V)=>{V?P():Xo(P)}),c.augmentJob=P=>{e&&(P.flags|=4),p&&(P.flags|=2,y&&(P.id=y.uid,P.i=y))};const b=Lh(t,e,c);return h&&h.push(b),b}function Of(t,e,n){const r=this.proxy,s=mt(t)?t.includes(".")?Ll(r,t):()=>r[t]:t.bind(r,r);let a;Pe(e)?a=e:(a=e.handler,n=e);const u=ii(this),c=$l(s,a.bind(r),n);return u(),c}function Ll(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Tf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Dn(e)}Modifiers`];function Pf(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||tt;let s=n;const a=e.startsWith("update:"),u=a&&Tf(r,e.slice(7));u&&(u.trim&&(s=n.map(p=>mt(p)?p.trim():p)),u.number&&(s=n.map(po)));let c,h=r[c=Qs(e)]||r[c=Qs(Jt(e))];!h&&a&&(h=r[c=Qs(Dn(e))]),h&&ln(h,t,6,s);const y=r[c+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,ln(y,t,6,s)}}function Fl(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let u={},c=!1;if(!Pe(t)){const h=y=>{const p=Fl(y,e,!0);p&&(c=!0,Ct(u,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!a&&!c?(ot(t)&&r.set(t,null),null):(xe(a)?a.forEach(h=>u[h]=null):Ct(u,a),ot(t)&&r.set(t,u),u)}function as(t,e){return!t||!Xi(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,Dn(e))||We(t,e))}function io(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:u,attrs:c,emit:h,render:y,renderCache:p,props:b,data:P,setupState:V,ctx:se,inheritAttrs:le}=t,ve=Wi(t);let we,je;try{if(n.shapeFlag&4){const ce=s||r,Le=ce;we=on(y.call(Le,ce,p,b,V,P,se)),je=c}else{const ce=e;we=on(ce.length>1?ce(b,{attrs:c,slots:u,emit:h}):ce(b,null)),je=e.props?c:Cf(c)}}catch(ce){zr.length=0,ss(ce,t,1),we=Tt(Zn)}let Re=we;if(je&&le!==!1){const ce=Object.keys(je),{shapeFlag:Le}=Re;ce.length&&Le&7&&(a&&ce.some(Lo)&&(je=Af(je,a)),Re=Er(Re,je,!1,!0))}return n.dirs&&(Re=Er(Re,null,!1,!0),Re.dirs=Re.dirs?Re.dirs.concat(n.dirs):n.dirs),n.transition&&Zo(Re,n.transition),we=Re,Wi(ve),we}const Cf=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xi(n))&&((e||(e={}))[n]=t[n]);return e},Af=(t,e)=>{const n={};for(const r in t)(!Lo(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function jf(t,e,n){const{props:r,children:s,component:a}=t,{props:u,children:c,patchFlag:h}=e,y=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?ru(r,u,y):!!u;if(h&8){const p=e.dynamicProps;for(let b=0;b<p.length;b++){const P=p[b];if(u[P]!==r[P]&&!as(y,P))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===u?!1:r?u?ru(r,u,y):!0:!!u;return!1}function ru(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!as(n,a))return!0}return!1}function Rf({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ml=t=>t.__isSuspense;function If(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):Kh(t)}const St=Symbol.for("v-fgt"),us=Symbol.for("v-txt"),Zn=Symbol.for("v-cmt"),so=Symbol.for("v-stc"),zr=[];let Vt=null;function ct(t=!1){zr.push(Vt=t?null:[])}function Df(){zr.pop(),Vt=zr[zr.length-1]||null}let ei=1;function iu(t){ei+=t,t<0&&Vt&&(Vt.hasOnce=!0)}function Ul(t){return t.dynamicChildren=ei>0?Vt||yr:null,Df(),ei>0&&Vt&&Vt.push(t),t}function yt(t,e,n,r,s,a){return Ul(de(t,e,n,r,s,a,!0))}function na(t,e,n,r,s){return Ul(Tt(t,e,n,r,s,!0))}function Kl(t){return t?t.__v_isVNode===!0:!1}function Ur(t,e){return t.type===e.type&&t.key===e.key}const Bl=({key:t})=>t??null,qi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?mt(t)||Pt(t)||Pe(t)?{i:Ht,r:t,k:e,f:!!n}:t:null);function de(t,e=null,n=null,r=0,s=null,a=t===St?0:1,u=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Bl(e),ref:e&&qi(e),scopeId:yl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return c?(ra(h,n),a&128&&t.normalize(h)):n&&(h.shapeFlag|=mt(n)?8:16),ei>0&&!u&&Vt&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Vt.push(h),h}const Tt=$f;function $f(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===nf)&&(t=Zn),Kl(t)){const c=Er(t,e,!0);return n&&ra(c,n),ei>0&&!a&&Vt&&(c.shapeFlag&6?Vt[Vt.indexOf(t)]=c:Vt.push(c)),c.patchFlag=-2,c}if(Wf(t)&&(t=t.__vccOpts),e){e=Lf(e);let{class:c,style:h}=e;c&&!mt(c)&&(e.class=Ko(c)),ot(h)&&(Go(h)&&!xe(h)&&(h=Ct({},h)),e.style=Uo(h))}const u=mt(t)?1:Ml(t)?128:qh(t)?64:ot(t)?4:Pe(t)?2:0;return de(t,e,n,r,s,u,a,!0)}function Lf(t){return t?Go(t)||Ol(t)?Ct({},t):t:null}function Er(t,e,n=!1,r=!1){const{props:s,ref:a,patchFlag:u,children:c,transition:h}=t,y=e?Ff(s||{},e):s,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Bl(y),ref:e&&e.ref?n&&a?xe(a)?a.concat(qi(e)):[a,qi(e)]:qi(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==St?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&r&&Zo(p,h.clone(p)),p}function Xt(t=" ",e=0){return Tt(us,null,t,e)}function gr(t="",e=!1){return e?(ct(),na(Zn,null,t)):Tt(Zn,null,t)}function on(t){return t==null||typeof t=="boolean"?Tt(Zn):xe(t)?Tt(St,null,t.slice()):Kl(t)?An(t):Tt(us,null,String(t))}function An(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function ra(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(xe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ra(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Ol(e)?e._ctx=Ht:s===3&&Ht&&(Ht.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Ht},n=32):(e=String(e),r&64?(n=16,e=[Xt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ff(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ko([e.class,r.class]));else if(s==="style")e.style=Uo([e.style,r.style]);else if(Xi(s)){const a=e[s],u=r[s];u&&a!==u&&!(xe(a)&&a.includes(u))&&(e[s]=a?[].concat(a,u):u)}else s!==""&&(e[s]=r[s])}return e}function nn(t,e,n,r=null){ln(t,e,7,[n,r])}const Mf=xl();let Uf=0;function Kf(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Mf,a={uid:Uf++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new rh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pl(r,s),emitsOptions:Fl(r,s),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Pf.bind(null,a),t.ce&&t.ce(a),a}let Ot=null,Gi,Eo;{const t=Vu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),a=>{s.length>1?s.forEach(u=>u(a)):s[0](a)}};Gi=e("__VUE_INSTANCE_SETTERS__",n=>Ot=n),Eo=e("__VUE_SSR_SETTERS__",n=>ls=n)}const ii=t=>{const e=Ot;return Gi(t),t.scope.on(),()=>{t.scope.off(),Gi(e)}},su=()=>{Ot&&Ot.scope.off(),Gi(null)};function Nl(t){return t.vnode.shapeFlag&4}let ls=!1;function Bf(t,e=!1,n=!1){e&&Eo(e);const{props:r,children:s}=t.vnode,a=Nl(t);pf(t,r,a,e),vf(t,s,n);const u=a?Nf(t,e):void 0;return e&&Eo(!1),u}function Nf(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,sf);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Hf(t):null,a=ii(t);$n();const u=ri(r,t,0,[t.props,s]);if(Ln(),a(),Bu(u)){if(Vr(t)||ml(t),u.then(su,su),e)return u.then(c=>{ou(t,c,e)}).catch(c=>{ss(c,t,0)});t.asyncDep=u}else ou(t,u,e)}else ql(t,e)}function ou(t,e,n){Pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ot(e)&&(t.setupState=hl(e)),ql(t,n)}let au;function ql(t,e,n){const r=t.type;if(!t.render){if(!e&&au&&!r.render){const s=r.template||ea(t).template;if(s){const{isCustomElement:a,compilerOptions:u}=t.appContext.config,{delimiters:c,compilerOptions:h}=r,y=Ct(Ct({isCustomElement:a,delimiters:c},u),h);r.render=au(s,y)}}t.render=r.render||an}{const s=ii(t);$n();try{of(t)}finally{Ln(),s()}}}const qf={get(t,e){return At(t,"get",""),t[e]}};function Hf(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qf),slots:t.slots,emit:t.emit,expose:e}}function cs(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(hl(Th(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Wr)return Wr[n](t)},has(e,n){return n in e||n in Wr}})):t.proxy}function Vf(t,e=!0){return Pe(t)?t.displayName||t.name:t.name||e&&t.__name}function Wf(t){return Pe(t)&&"__vccOpts"in t}const zf=(t,e)=>Dh(t,e,ls),Jf="3.5.10";/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let So;const uu=typeof window<"u"&&window.trustedTypes;if(uu)try{So=uu.createPolicy("vue",{createHTML:t=>t})}catch{}const Hl=So?t=>So.createHTML(t):t=>t,Gf="http://www.w3.org/2000/svg",Qf="http://www.w3.org/1998/Math/MathML",yn=typeof document<"u"?document:null,lu=yn&&yn.createElement("template"),Yf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?yn.createElementNS(Gf,t):e==="mathml"?yn.createElementNS(Qf,t):n?yn.createElement(t,{is:n}):yn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>yn.createTextNode(t),createComment:t=>yn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,a){const u=n?n.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{lu.innerHTML=Hl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=lu.content;if(r==="svg"||r==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Xf=Symbol("_vtc");function Zf(t,e,n){const r=t[Xf];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const cu=Symbol("_vod"),ed=Symbol("_vsh"),td=Symbol(""),nd=/(^|;)\s*display\s*:/;function rd(t,e,n){const r=t.style,s=mt(n);let a=!1;if(n&&!s){if(e)if(mt(e))for(const u of e.split(";")){const c=u.slice(0,u.indexOf(":")).trim();n[c]==null&&Hi(r,c,"")}else for(const u in e)n[u]==null&&Hi(r,u,"");for(const u in n)u==="display"&&(a=!0),Hi(r,u,n[u])}else if(s){if(e!==n){const u=r[td];u&&(n+=";"+u),r.cssText=n,a=nd.test(n)}}else e&&t.removeAttribute("style");cu in t&&(t[cu]=a?r.display:"",t[ed]&&(r.display="none"))}const hu=/\s*!important$/;function Hi(t,e,n){if(xe(n))n.forEach(r=>Hi(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=id(t,e);hu.test(n)?t.setProperty(Dn(r),n.replace(hu,""),"important"):t[r]=n}}const fu=["Webkit","Moz","ms"],oo={};function id(t,e){const n=oo[e];if(n)return n;let r=Jt(e);if(r!=="filter"&&r in t)return oo[e]=r;r=ts(r);for(let s=0;s<fu.length;s++){const a=fu[s]+r;if(a in t)return oo[e]=a}return e}const du="http://www.w3.org/1999/xlink";function pu(t,e,n,r,s,a=th(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(du,e.slice(6,e.length)):t.setAttributeNS(du,e,n):n==null||a&&!Wu(n)?t.removeAttribute(e):t.setAttribute(e,a?"":un(n)?String(n):n)}function gu(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hl(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(u!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Wu(n):n==null&&u==="string"?(n="",a=!0):u==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function Gn(t,e,n,r){t.addEventListener(e,n,r)}function sd(t,e,n,r){t.removeEventListener(e,n,r)}const yu=Symbol("_vei");function od(t,e,n,r,s=null){const a=t[yu]||(t[yu]={}),u=a[e];if(r&&u)u.value=r;else{const[c,h]=ad(e);if(r){const y=a[e]=cd(r,s);Gn(t,c,y,h)}else u&&(sd(t,c,u,h),a[e]=void 0)}}const mu=/(?:Once|Passive|Capture)$/;function ad(t){let e;if(mu.test(t)){e={};let r;for(;r=t.match(mu);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Dn(t.slice(2)),e]}let ao=0;const ud=Promise.resolve(),ld=()=>ao||(ud.then(()=>ao=0),ao=Date.now());function cd(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ln(hd(r,n.value),e,5,[r])};return n.value=t,n.attached=ld(),n}function hd(t,e){if(xe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const vu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,fd=(t,e,n,r,s,a)=>{const u=s==="svg";e==="class"?Zf(t,r,u):e==="style"?rd(t,n,r):Xi(e)?Lo(e)||od(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dd(t,e,r,u))?(gu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&pu(t,e,r,u,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mt(r))?gu(t,Jt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),pu(t,e,r,u))};function dd(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&vu(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return vu(e)&&mt(n)?!1:e in t}const Qi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xe(e)?n=>Bi(e,n):e};function pd(t){t.target.composing=!0}function _u(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const kr=Symbol("_assign"),gn={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[kr]=Qi(s);const a=r||s.props&&s.props.type==="number";Gn(t,e?"change":"input",u=>{if(u.target.composing)return;let c=t.value;n&&(c=c.trim()),a&&(c=po(c)),t[kr](c)}),n&&Gn(t,"change",()=>{t.value=t.value.trim()}),e||(Gn(t,"compositionstart",pd),Gn(t,"compositionend",_u),Gn(t,"change",_u))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:a}},u){if(t[kr]=Qi(u),t.composing)return;const c=(a||t.type==="number")&&!/^0\d/.test(t.value)?po(t.value):t.value,h=e??"";c!==h&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===h)||(t.value=h))}},gd={deep:!0,created(t,e,n){t[kr]=Qi(n),Gn(t,"change",()=>{const r=t._modelValue,s=yd(t),a=t.checked,u=t[kr];if(xe(r)){const c=zu(r,s),h=c!==-1;if(a&&!h)u(r.concat(s));else if(!a&&h){const y=[...r];y.splice(c,1),u(y)}}else if(Zi(r)){const c=new Set(r);a?c.add(s):c.delete(s),u(c)}else u(Vl(t,a))})},mounted:bu,beforeUpdate(t,e,n){t[kr]=Qi(n),bu(t,e,n)}};function bu(t,{value:e},n){t._modelValue=e;let r;xe(e)?r=zu(e,n.props.value)>-1:Zi(e)?r=e.has(n.props.value):r=ns(e,Vl(t,!0)),t.checked!==r&&(t.checked=r)}function yd(t){return"_value"in t?t._value:t.value}function Vl(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const md=["ctrl","shift","alt","meta"],vd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>md.some(n=>t[`${n}Key`]&&!e.includes(n))},wu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...a)=>{for(let u=0;u<e.length;u++){const c=vd[e[u]];if(c&&c(s,e))return}return t(s,...a)})},_d={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wl=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const a=Dn(s.key);if(e.some(u=>u===a||_d[u]===a))return t(s)})},bd=Ct({patchProp:fd},Yf);let ku;function wd(){return ku||(ku=bf(bd))}const kd=(...t)=>{const e=wd().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ed(r);if(!s)return;const a=e._component;!Pe(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const u=n(s,!1,xd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),u},e};function xd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ed(t){return mt(t)?document.querySelector(t):t}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sd(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Jl={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(Lt,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,u={},c=0,h={parse:function(I,R){var W=(R=R||{}).dynamicTyping||!1;if(_e(W)&&(R.dynamicTypingFunction=W,W={}),R.dynamicTyping=W,R.transform=!!_e(R.transform)&&R.transform,R.worker&&h.WORKERS_SUPPORTED){var ue=function(){if(!h.WORKERS_SUPPORTED)return!1;var ye=(at=r.URL||r.webkitURL||null,Se=n.toString(),h.BLOB_URL||(h.BLOB_URL=at.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Se,")();"],{type:"text/javascript"})))),Ce=new r.Worker(ye),at,Se;return Ce.onmessage=je,Ce.id=c++,u[Ce.id]=Ce}();return ue.userStep=R.step,ue.userChunk=R.chunk,ue.userComplete=R.complete,ue.userError=R.error,R.step=_e(R.step),R.chunk=_e(R.chunk),R.complete=_e(R.complete),R.error=_e(R.error),delete R.worker,void ue.postMessage({input:I,config:R,workerId:ue.id})}var he=null;return h.NODE_STREAM_INPUT,typeof I=="string"?(I=function(ye){return ye.charCodeAt(0)===65279?ye.slice(1):ye}(I),he=R.download?new b(R):new V(R)):I.readable===!0&&_e(I.read)&&_e(I.on)?he=new se(R):(r.File&&I instanceof File||I instanceof Object)&&(he=new P(R)),he.stream(I)},unparse:function(I,R){var W=!1,ue=!0,he=",",ye=`\r
`,Ce='"',at=Ce+Ce,Se=!1,Z=null,me=!1;(function(){if(typeof R=="object"){if(typeof R.delimiter!="string"||h.BAD_DELIMITERS.filter(function(oe){return R.delimiter.indexOf(oe)!==-1}).length||(he=R.delimiter),(typeof R.quotes=="boolean"||typeof R.quotes=="function"||Array.isArray(R.quotes))&&(W=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(Se=R.skipEmptyLines),typeof R.newline=="string"&&(ye=R.newline),typeof R.quoteChar=="string"&&(Ce=R.quoteChar),typeof R.header=="boolean"&&(ue=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");Z=R.columns}R.escapeChar!==void 0&&(at=R.escapeChar+Ce),(typeof R.escapeFormulae=="boolean"||R.escapeFormulae instanceof RegExp)&&(me=R.escapeFormulae instanceof RegExp?R.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var pe=new RegExp(ve(Ce),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return nt(null,I,Se);if(typeof I[0]=="object")return nt(Z||Object.keys(I[0]),I,Se)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||Z),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),nt(I.fields||[],I.data||[],Se);throw new Error("Unable to serialize unrecognized input");function nt(oe,Ke,dt){var Je="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof Ke=="string"&&(Ke=JSON.parse(Ke));var Ve=Array.isArray(oe)&&0<oe.length,Xe=!Array.isArray(Ke[0]);if(Ve&&ue){for(var ut=0;ut<oe.length;ut++)0<ut&&(Je+=he),Je+=Qe(oe[ut],ut);0<Ke.length&&(Je+=ye)}for(var q=0;q<Ke.length;q++){var Fe=Ve?oe.length:Ke[q].length,He=!1,be=Ve?Object.keys(Ke[q]).length===0:Ke[q].length===0;if(dt&&!Ve&&(He=dt==="greedy"?Ke[q].join("").trim()==="":Ke[q].length===1&&Ke[q][0].length===0),dt==="greedy"&&Ve){for(var v=[],k=0;k<Fe;k++){var D=Xe?oe[k]:k;v.push(Ke[q][D])}He=v.join("").trim()===""}if(!He){for(var M=0;M<Fe;M++){0<M&&!be&&(Je+=he);var B=Ve&&Xe?oe[M]:M;Je+=Qe(Ke[q][B],M)}q<Ke.length-1&&(!dt||0<Fe&&!be)&&(Je+=ye)}}return Je}function Qe(oe,Ke){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var dt=!1;me&&typeof oe=="string"&&me.test(oe)&&(oe="'"+oe,dt=!0);var Je=oe.toString().replace(pe,at);return(dt=dt||W===!0||typeof W=="function"&&W(oe,Ke)||Array.isArray(W)&&W[Ke]||function(Ve,Xe){for(var ut=0;ut<Xe.length;ut++)if(-1<Ve.indexOf(Xe[ut]))return!0;return!1}(Je,h.BAD_DELIMITERS)||-1<Je.indexOf(he)||Je.charAt(0)===" "||Je.charAt(Je.length-1)===" ")?Ce+Je+Ce:Je}}};if(h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!s&&!!r.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=we,h.ParserHandle=le,h.NetworkStreamer=b,h.FileStreamer=P,h.StringStreamer=V,h.ReadableStreamStreamer=se,r.jQuery){var y=r.jQuery;y.fn.parse=function(I){var R=I.config||{},W=[];return this.each(function(ye){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var Ce=0;Ce<this.files.length;Ce++)W.push({file:this.files[Ce],inputElem:this,instanceConfig:y.extend({},R)})}),ue(),this;function ue(){if(W.length!==0){var ye,Ce,at,Se,Z=W[0];if(_e(I.before)){var me=I.before(Z.file,Z.inputElem);if(typeof me=="object"){if(me.action==="abort")return ye="AbortError",Ce=Z.file,at=Z.inputElem,Se=me.reason,void(_e(I.error)&&I.error({name:ye},Ce,at,Se));if(me.action==="skip")return void he();typeof me.config=="object"&&(Z.instanceConfig=y.extend(Z.instanceConfig,me.config))}else if(me==="skip")return void he()}var pe=Z.instanceConfig.complete;Z.instanceConfig.complete=function(nt){_e(pe)&&pe(nt,Z.file,Z.inputElem),he()},h.parse(Z.file,Z.instanceConfig)}else _e(I.complete)&&I.complete()}function he(){W.splice(0,1),ue()}}}function p(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var W=Le(R);W.chunkSize=parseInt(W.chunkSize),R.step||R.chunk||(W.chunkSize=null),this._handle=new le(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(R,W){if(this.isFirstChunk&&_e(this._config.beforeFirstChunk)){var ue=this._config.beforeFirstChunk(R);ue!==void 0&&(R=ue)}this.isFirstChunk=!1,this._halted=!1;var he=this._partialLine+R;this._partialLine="";var ye=this._handle.parse(he,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Ce=ye.meta.cursor;this._finished||(this._partialLine=he.substring(Ce-this._baseIndex),this._baseIndex=Ce),ye&&ye.data&&(this._rowCount+=ye.data.length);var at=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:ye,workerId:h.WORKER_ID,finished:at});else if(_e(this._config.chunk)&&!W){if(this._config.chunk(ye,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ye=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ye.data),this._completeResults.errors=this._completeResults.errors.concat(ye.errors),this._completeResults.meta=ye.meta),this._completed||!at||!_e(this._config.complete)||ye&&ye.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),at||ye&&ye.meta.paused||this._nextChunk(),ye}this._halted=!0},this._sendError=function(R){_e(this._config.error)?this._config.error(R):a&&this._config.error&&r.postMessage({workerId:h.WORKER_ID,error:R,finished:!1})}}function b(I){var R;(I=I||{}).chunkSize||(I.chunkSize=h.RemoteChunkSize),p.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),s||(R.onload=Ye(this._chunkLoaded,this),R.onerror=Ye(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W=this._config.downloadRequestHeaders;for(var ue in W)R.setRequestHeader(ue,W[ue])}if(this._config.chunkSize){var he=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+he)}try{R.send(this._config.downloadRequestBody)}catch(ye){this._chunkError(ye.message)}s&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(W){var ue=W.getResponseHeader("Content-Range");return ue===null?-1:parseInt(ue.substring(ue.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(W){var ue=R.statusText||W;this._sendError(new Error(ue))}}function P(I){var R,W;(I=I||{}).chunkSize||(I.chunkSize=h.LocalChunkSize),p.call(this,I);var ue=typeof FileReader<"u";this.stream=function(he){this._input=he,W=he.slice||he.webkitSlice||he.mozSlice,ue?((R=new FileReader).onload=Ye(this._chunkLoaded,this),R.onerror=Ye(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var he=this._input;if(this._config.chunkSize){var ye=Math.min(this._start+this._config.chunkSize,this._input.size);he=W.call(he,this._start,ye)}var Ce=R.readAsText(he,this._config.encoding);ue||this._chunkLoaded({target:{result:Ce}})},this._chunkLoaded=function(he){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(he.target.result)},this._chunkError=function(){this._sendError(R.error)}}function V(I){var R;p.call(this,I=I||{}),this.stream=function(W){return R=W,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var W,ue=this._config.chunkSize;return ue?(W=R.substring(0,ue),R=R.substring(ue)):(W=R,R=""),this._finished=!R,this.parseChunk(W)}}}function se(I){p.call(this,I=I||{});var R=[],W=!0,ue=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(he){this._input=he,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):W=!0},this._streamData=Ye(function(he){try{R.push(typeof he=="string"?he:he.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(ye){this._streamError(ye)}},this),this._streamError=Ye(function(he){this._streamCleanUp(),this._sendError(he)},this),this._streamEnd=Ye(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Ye(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(I){var R,W,ue,he=Math.pow(2,53),ye=-he,Ce=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,at=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Z=0,me=0,pe=!1,nt=!1,Qe=[],oe={data:[],errors:[],meta:{}};if(_e(I.step)){var Ke=I.step;I.step=function(q){if(oe=q,Ve())Je();else{if(Je(),oe.data.length===0)return;Z+=q.data.length,I.preview&&Z>I.preview?W.abort():(oe.data=oe.data[0],Ke(oe,Se))}}}function dt(q){return I.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Je(){return oe&&ue&&(ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),ue=!1),I.skipEmptyLines&&(oe.data=oe.data.filter(function(q){return!dt(q)})),Ve()&&function(){if(!oe)return;function q(He,be){_e(I.transformHeader)&&(He=I.transformHeader(He,be)),Qe.push(He)}if(Array.isArray(oe.data[0])){for(var Fe=0;Ve()&&Fe<oe.data.length;Fe++)oe.data[Fe].forEach(q);oe.data.splice(0,1)}else oe.data.forEach(q)}(),function(){if(!oe||!I.header&&!I.dynamicTyping&&!I.transform)return oe;function q(He,be){var v,k=I.header?{}:[];for(v=0;v<He.length;v++){var D=v,M=He[v];I.header&&(D=v>=Qe.length?"__parsed_extra":Qe[v]),I.transform&&(M=I.transform(M,D)),M=Xe(D,M),D==="__parsed_extra"?(k[D]=k[D]||[],k[D].push(M)):k[D]=M}return I.header&&(v>Qe.length?ut("FieldMismatch","TooManyFields","Too many fields: expected "+Qe.length+" fields but parsed "+v,me+be):v<Qe.length&&ut("FieldMismatch","TooFewFields","Too few fields: expected "+Qe.length+" fields but parsed "+v,me+be)),k}var Fe=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(q),Fe=oe.data.length):oe.data=q(oe.data,0),I.header&&oe.meta&&(oe.meta.fields=Qe),me+=Fe,oe}()}function Ve(){return I.header&&Qe.length===0}function Xe(q,Fe){return He=q,I.dynamicTypingFunction&&I.dynamicTyping[He]===void 0&&(I.dynamicTyping[He]=I.dynamicTypingFunction(He)),(I.dynamicTyping[He]||I.dynamicTyping)===!0?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&(function(be){if(Ce.test(be)){var v=parseFloat(be);if(ye<v&&v<he)return!0}return!1}(Fe)?parseFloat(Fe):at.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe;var He}function ut(q,Fe,He,be){var v={type:q,code:Fe,message:He};be!==void 0&&(v.row=be),oe.errors.push(v)}this.parse=function(q,Fe,He){var be=I.quoteChar||'"';if(I.newline||(I.newline=function(D,M){D=D.substring(0,1048576);var B=new RegExp(ve(M)+"([^]*?)"+ve(M),"gm"),N=(D=D.replace(B,"")).split("\r"),X=D.split(`
`),J=1<X.length&&X[0].length<N[0].length;if(N.length===1||J)return`
`;for(var H=0,K=0;K<N.length;K++)N[K][0]===`
`&&H++;return H>=N.length/2?`\r
`:"\r"}(q,be)),ue=!1,I.delimiter)_e(I.delimiter)&&(I.delimiter=I.delimiter(q),oe.meta.delimiter=I.delimiter);else{var v=function(D,M,B,N,X){var J,H,K,ie;X=X||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ee=0;ee<X.length;ee++){var Y=X[ee],ge=0,ke=0,Ae=0;K=void 0;for(var Oe=new we({comments:N,delimiter:Y,newline:M,preview:10}).parse(D),Ze=0;Ze<Oe.data.length;Ze++)if(B&&dt(Oe.data[Ze]))Ae++;else{var Be=Oe.data[Ze].length;ke+=Be,K!==void 0?0<Be&&(ge+=Math.abs(Be-K),K=Be):K=Be}0<Oe.data.length&&(ke/=Oe.data.length-Ae),(H===void 0||ge<=H)&&(ie===void 0||ie<ke)&&1.99<ke&&(H=ge,J=Y,ie=ke)}return{successful:!!(I.delimiter=J),bestDelimiter:J}}(q,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);v.successful?I.delimiter=v.bestDelimiter:(ue=!0,I.delimiter=h.DefaultDelimiter),oe.meta.delimiter=I.delimiter}var k=Le(I);return I.preview&&I.header&&k.preview++,R=q,W=new we(k),oe=W.parse(R,Fe,He),Je(),pe?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return pe},this.pause=function(){pe=!0,W.abort(),R=_e(I.chunk)?"":R.substring(W.getCharIndex())},this.resume=function(){Se.streamer._halted?(pe=!1,Se.streamer.parseChunk(R,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,W.abort(),oe.meta.aborted=!0,_e(I.complete)&&I.complete(oe),R=""}}function ve(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function we(I){var R,W=(I=I||{}).delimiter,ue=I.newline,he=I.comments,ye=I.step,Ce=I.preview,at=I.fastMode,Se=R=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Se=I.escapeChar),(typeof W!="string"||-1<h.BAD_DELIMITERS.indexOf(W))&&(W=","),he===W)throw new Error("Comment character same as delimiter");he===!0?he="#":(typeof he!="string"||-1<h.BAD_DELIMITERS.indexOf(he))&&(he=!1),ue!==`
`&&ue!=="\r"&&ue!==`\r
`&&(ue=`
`);var Z=0,me=!1;this.parse=function(pe,nt,Qe){if(typeof pe!="string")throw new Error("Input must be a string");var oe=pe.length,Ke=W.length,dt=ue.length,Je=he.length,Ve=_e(ye),Xe=[],ut=[],q=[],Fe=Z=0;if(!pe)return Ge();if(I.header&&!nt){var He=pe.split(ue)[0].split(W),be=[],v={},k=!1;for(var D in He){var M=He[D];_e(I.transformHeader)&&(M=I.transformHeader(M,D));var B=M,N=v[M]||0;for(0<N&&(k=!0,B=M+"_"+N),v[M]=N+1;be.includes(B);)B=B+"_"+N;be.push(B)}if(k){var X=pe.split(ue);X[0]=be.join(W),pe=X.join(ue)}}if(at||at!==!1&&pe.indexOf(R)===-1){for(var J=pe.split(ue),H=0;H<J.length;H++){if(q=J[H],Z+=q.length,H!==J.length-1)Z+=ue.length;else if(Qe)return Ge();if(!he||q.substring(0,Je)!==he){if(Ve){if(Xe=[],Ae(q.split(W)),ft(),me)return Ge()}else Ae(q.split(W));if(Ce&&Ce<=H)return Xe=Xe.slice(0,Ce),Ge(!0)}}return Ge()}for(var K=pe.indexOf(W,Z),ie=pe.indexOf(ue,Z),ee=new RegExp(ve(Se)+ve(R),"g"),Y=pe.indexOf(R,Z);;)if(pe[Z]!==R)if(he&&q.length===0&&pe.substring(Z,Z+Je)===he){if(ie===-1)return Ge();Z=ie+dt,ie=pe.indexOf(ue,Z),K=pe.indexOf(W,Z)}else if(K!==-1&&(K<ie||ie===-1))q.push(pe.substring(Z,K)),Z=K+Ke,K=pe.indexOf(W,Z);else{if(ie===-1)break;if(q.push(pe.substring(Z,ie)),Be(ie+dt),Ve&&(ft(),me))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0)}else for(Y=Z,Z++;;){if((Y=pe.indexOf(R,Y+1))===-1)return Qe||ut.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Xe.length,index:Z}),Ze();if(Y===oe-1)return Ze(pe.substring(Z,Y).replace(ee,R));if(R!==Se||pe[Y+1]!==Se){if(R===Se||Y===0||pe[Y-1]!==Se){K!==-1&&K<Y+1&&(K=pe.indexOf(W,Y+1)),ie!==-1&&ie<Y+1&&(ie=pe.indexOf(ue,Y+1));var ge=Oe(ie===-1?K:Math.min(K,ie));if(pe.substr(Y+1+ge,Ke)===W){q.push(pe.substring(Z,Y).replace(ee,R)),pe[Z=Y+1+ge+Ke]!==R&&(Y=pe.indexOf(R,Z)),K=pe.indexOf(W,Z),ie=pe.indexOf(ue,Z);break}var ke=Oe(ie);if(pe.substring(Y+1+ke,Y+1+ke+dt)===ue){if(q.push(pe.substring(Z,Y).replace(ee,R)),Be(Y+1+ke+dt),K=pe.indexOf(W,Z),Y=pe.indexOf(R,Z),Ve&&(ft(),me))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0);break}ut.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Xe.length,index:Z}),Y++}}else Y++}return Ze();function Ae(et){Xe.push(et),Fe=Z}function Oe(et){var fe=0;if(et!==-1){var ht=pe.substring(Y+1,et);ht&&ht.trim()===""&&(fe=ht.length)}return fe}function Ze(et){return Qe||(et===void 0&&(et=pe.substring(Z)),q.push(et),Z=oe,Ae(q),Ve&&ft()),Ge()}function Be(et){Z=et,Ae(q),q=[],ie=pe.indexOf(ue,Z)}function Ge(et){return{data:Xe,errors:ut,meta:{delimiter:W,linebreak:ue,aborted:me,truncated:!!et,cursor:Fe+(nt||0)}}}function ft(){ye(Ge()),Xe=[],ut=[]}},this.abort=function(){me=!0},this.getCharIndex=function(){return Z}}function je(I){var R=I.data,W=u[R.workerId],ue=!1;if(R.error)W.userError(R.error,R.file);else if(R.results&&R.results.data){var he={abort:function(){ue=!0,Re(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(_e(W.userStep)){for(var ye=0;ye<R.results.data.length&&(W.userStep({data:R.results.data[ye],errors:R.results.errors,meta:R.results.meta},he),!ue);ye++);delete R.results}else _e(W.userChunk)&&(W.userChunk(R.results,he,R.file),delete R.results)}R.finished&&!ue&&Re(R.workerId,R.results)}function Re(I,R){var W=u[I];_e(W.userComplete)&&W.userComplete(R),W.terminate(),delete u[I]}function ce(){throw new Error("Not implemented.")}function Le(I){if(typeof I!="object"||I===null)return I;var R=Array.isArray(I)?[]:{};for(var W in I)R[W]=Le(I[W]);return R}function Ye(I,R){return function(){I.apply(R,arguments)}}function _e(I){return typeof I=="function"}return a&&(r.onmessage=function(I){var R=I.data;if(h.WORKER_ID===void 0&&R&&(h.WORKER_ID=R.workerId),typeof R.input=="string")r.postMessage({workerId:h.WORKER_ID,results:h.parse(R.input,R.config),finished:!0});else if(r.File&&R.input instanceof File||R.input instanceof Object){var W=h.parse(R.input,R.config);W&&r.postMessage({workerId:h.WORKER_ID,results:W,finished:!0})}}),(b.prototype=Object.create(p.prototype)).constructor=b,(P.prototype=Object.create(p.prototype)).constructor=P,(V.prototype=Object.create(V.prototype)).constructor=V,(se.prototype=Object.create(p.prototype)).constructor=se,h})})(Jl);var Od=Jl.exports;const xu=zl(Od);var Gl={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Lt,function(){var n=function(i,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,l=1,f=arguments.length;l<f;l++)for(var d in o=arguments[l])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function s(i,o,l){for(var f,d=0,g=o.length;d<g;d++)!f&&d in o||((f=f||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(f||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lt,u=Object.keys,c=Array.isArray;function h(i,o){return typeof o!="object"||u(o).forEach(function(l){i[l]=o[l]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,p={}.hasOwnProperty;function b(i,o){return p.call(i,o)}function P(i,o){typeof o=="function"&&(o=o(y(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(o).forEach(function(l){se(i,l,o[l])})}var V=Object.defineProperty;function se(i,o,l,f){V(i,o,h(l&&b(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},f))}function le(i){return{from:function(o){return i.prototype=Object.create(o.prototype),se(i.prototype,"constructor",i),{extend:P.bind(null,i.prototype)}}}}var ve=Object.getOwnPropertyDescriptor,we=[].slice;function je(i,o,l){return we.call(i,o,l)}function Re(i,o){return o(i)}function ce(i){if(!i)throw new Error("Assertion Failed")}function Le(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Ye(i,o){if(typeof o=="string"&&b(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var l=[],f=0,d=o.length;f<d;++f){var g=Ye(i,o[f]);l.push(g)}return l}var m=o.indexOf(".");if(m!==-1){var _=i[o.substr(0,m)];return _==null?void 0:Ye(_,o.substr(m+1))}}function _e(i,o,l){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){ce(typeof l!="string"&&"length"in l);for(var f=0,d=o.length;f<d;++f)_e(i,o[f],l[f])}else{var g,m,_=o.indexOf(".");_!==-1?(g=o.substr(0,_),(m=o.substr(_+1))===""?l===void 0?c(i)&&!isNaN(parseInt(g))?i.splice(g,1):delete i[g]:i[g]=l:_e(_=!(_=i[g])||!b(i,g)?i[g]={}:_,m,l)):l===void 0?c(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=l}}function I(i){var o,l={};for(o in i)b(i,o)&&(l[o]=i[o]);return l}var R=[].concat;function W(i){return R.apply([],i)}var hn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),ue=new Set(hn.map(function(i){return a[i]})),he=null;function ye(i){return he=new WeakMap,i=function o(l){if(!l||typeof l!="object")return l;var f=he.get(l);if(f)return f;if(c(l)){f=[],he.set(l,f);for(var d=0,g=l.length;d<g;++d)f.push(o(l[d]))}else if(ue.has(l.constructor))f=l;else{var m,_=y(l);for(m in f=_===Object.prototype?{}:Object.create(_),he.set(l,f),l)b(l,m)&&(f[m]=o(l[m]))}return f}(i),he=null,i}var Ce={}.toString;function at(i){return Ce.call(i).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof Se=="symbol"?function(i){var o;return i!=null&&(o=i[Se])&&o.apply(i)}:function(){return null};function me(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var pe={};function nt(i){var o,l,f,d;if(arguments.length===1){if(c(i))return i.slice();if(this===pe&&typeof i=="string")return[i];if(d=Z(i)){for(l=[];!(f=d.next()).done;)l.push(f.value);return l}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(l=new Array(o);o--;)l[o]=i[o];return l}for(o=arguments.length,l=new Array(o);o--;)l[o]=arguments[o];return l}var Qe=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Wt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(i,o){this.name=i,this.message=o}function dt(i,o){return i+". Errors: "+Object.keys(o).map(function(l){return o[l].toString()}).filter(function(l,f,d){return d.indexOf(l)===f}).join(`
`)}function Je(i,o,l,f){this.failures=o,this.failedKeys=f,this.successCount=l,this.message=dt(i,o)}function Ve(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(l){return o[l]}),this.failuresByPos=o,this.message=dt(i,this.failures)}le(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Je).from(Ke),le(Ve).from(Ke);var Xe=Wt.reduce(function(i,o){return i[o]=o+"Error",i},{}),ut=Ke,q=Wt.reduce(function(i,o){var l=o+"Error";function f(d,g){this.name=l,d?typeof d=="string"?(this.message="".concat(d).concat(g?`
 `+g:""),this.inner=g||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=oe[o]||l,this.inner=null)}return le(f).from(ut),i[o]=f,i},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Fe=Y.reduce(function(i,o){return i[o+"Error"]=q[o],i},{}),He=Wt.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=q[o]),i},{});function be(){}function v(i){return i}function k(i,o){return i==null||i===v?o:function(l){return o(i(l))}}function D(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function M(i,o){return i===be?o:function(){var l=i.apply(this,arguments);l!==void 0&&(arguments[0]=l);var f=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var g=o.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?D(f,this.onsuccess):f),d&&(this.onerror=this.onerror?D(d,this.onerror):d),g!==void 0?g:l}}function B(i,o){return i===be?o:function(){i.apply(this,arguments);var l=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?D(l,this.onsuccess):l),f&&(this.onerror=this.onerror?D(f,this.onerror):f)}}function N(i,o){return i===be?o:function(l){var f=i.apply(this,arguments);h(l,f);var d=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,l=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?D(d,this.onsuccess):d),g&&(this.onerror=this.onerror?D(g,this.onerror):g),f===void 0?l===void 0?void 0:l:h(f,l)}}function X(i,o){return i===be?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function J(i,o){return i===be?o:function(){var l=i.apply(this,arguments);if(l&&typeof l.then=="function"){for(var f=this,d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return l.then(function(){return o.apply(f,g)})}return o.apply(this,arguments)}}He.ModifyError=Je,He.DexieError=Ke,He.BulkError=Ve;var H=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function K(i){H=i}var ie={},ee=100,hn=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),i]}(),Y=hn[0],Wt=hn[1],hn=hn[2],Wt=Wt&&Wt.then,ge=Y&&Y.constructor,ke=!!hn,Ae=function(i,o){ht.push([i,o]),Ze&&(queueMicrotask(wc),Ze=!1)},Oe=!0,Ze=!0,Be=[],Ge=[],ft=v,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},fe=et,ht=[],vt=0,Fn=[];function ae(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=fe;if(typeof i!="function"){if(i!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&_s(this,this._value))}this._state=null,this._value=null,++o.ref,function l(f,d){try{d(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var m=f._lib&&nr();g&&typeof g.then=="function"?l(f,function(_,S){g instanceof ae?g._then(_,S):g.then(_,S)}):(f._state=!0,f._value=g,ha(f)),m&&rr()}},_s.bind(null,f))}catch(g){_s(f,g)}}(this,i)}var vs={get:function(){var i=fe,o=hi;function l(f,d){var g=this,m=!i.global&&(i!==fe||o!==hi),_=m&&!wn(),S=new ae(function(x,C){bs(g,new ca(da(f,i,m,_),da(d,i,m,_),x,C,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return l.prototype=ie,l},set:function(i){se(this,"then",i&&i.prototype===ie?vs:{get:function(){return i},set:vs.set})}};function ca(i,o,l,f,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=l,this.reject=f,this.psd=d}function _s(i,o){var l,f;Ge.push(o),i._state===null&&(l=i._lib&&nr(),o=ft(o),i._state=!1,i._value=o,f=i,Be.some(function(d){return d._value===f._value})||Be.push(f),ha(i),l&&rr())}function ha(i){var o=i._listeners;i._listeners=[];for(var l=0,f=o.length;l<f;++l)bs(i,o[l]);var d=i._PSD;--d.ref||d.finalize(),vt===0&&(++vt,Ae(function(){--vt==0&&ws()},[]))}function bs(i,o){if(i._state!==null){var l=i._state?o.onFulfilled:o.onRejected;if(l===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++vt,Ae(bc,[l,i,o])}else i._listeners.push(o)}function bc(i,o,l){try{var f,d=o._value;!o._state&&Ge.length&&(Ge=[]),f=H&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Ge.indexOf(d)!==-1||function(g){for(var m=Be.length;m;)if(Be[--m]._value===g._value)return Be.splice(m,1)}(o),l.resolve(f)}catch(g){l.reject(g)}finally{--vt==0&&ws(),--l.psd.ref||l.psd.finalize()}}function wc(){Mn(et,function(){nr()&&rr()})}function nr(){var i=Oe;return Ze=Oe=!1,i}function rr(){var i,o,l;do for(;0<ht.length;)for(i=ht,ht=[],l=i.length,o=0;o<l;++o){var f=i[o];f[0].apply(null,f[1])}while(0<ht.length);Ze=Oe=!0}function ws(){var i=Be;Be=[],i.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var o=Fn.slice(0),l=o.length;l;)o[--l]()}function ui(i){return new ae(ie,!1,i)}function lt(i,o){var l=fe;return function(){var f=nr(),d=fe;try{return kn(l,!0),i.apply(this,arguments)}catch(g){o&&o(g)}finally{kn(d,!1),f&&rr()}}}P(ae.prototype,{then:vs,_then:function(i,o){bs(this,new ca(null,null,i,o,fe))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,l=arguments[1];return typeof o=="function"?this.then(null,function(f){return(f instanceof o?l:ui)(f)}):this.then(null,function(f){return(f&&f.name===o?l:ui)(f)})},finally:function(i){return this.then(function(o){return ae.resolve(i()).then(function(){return o})},function(o){return ae.resolve(i()).then(function(){return ui(o)})})},timeout:function(i,o){var l=this;return i<1/0?new ae(function(f,d){var g=setTimeout(function(){return d(new q.Timeout(o))},i);l.then(f,d).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(ae.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=fa(),P(ae,{all:function(){var i=nt.apply(null,arguments).map(fi);return new ae(function(o,l){i.length===0&&o([]);var f=i.length;i.forEach(function(d,g){return ae.resolve(d).then(function(m){i[g]=m,--f||o(i)},l)})})},resolve:function(i){return i instanceof ae?i:i&&typeof i.then=="function"?new ae(function(o,l){i.then(o,l)}):new ae(ie,!0,i)},reject:ui,race:function(){var i=nt.apply(null,arguments).map(fi);return new ae(function(o,l){i.map(function(f){return ae.resolve(f).then(o,l)})})},PSD:{get:function(){return fe},set:function(i){return fe=i}},totalEchoes:{get:function(){return hi}},newPSD:bn,usePSD:Mn,scheduler:{get:function(){return Ae},set:function(i){Ae=i}},rejectionMapper:{get:function(){return ft},set:function(i){ft=i}},follow:function(i,o){return new ae(function(l,f){return bn(function(d,g){var m=fe;m.unhandleds=[],m.onunhandled=g,m.finalize=D(function(){var _,S=this;_=function(){S.unhandleds.length===0?d():g(S.unhandleds[0])},Fn.push(function x(){_(),Fn.splice(Fn.indexOf(x),1)}),++vt,Ae(function(){--vt==0&&ws()},[])},m.finalize),i()},o,l,f)})}}),ge&&(ge.allSettled&&se(ae,"allSettled",function(){var i=nt.apply(null,arguments).map(fi);return new ae(function(o){i.length===0&&o([]);var l=i.length,f=new Array(l);i.forEach(function(d,g){return ae.resolve(d).then(function(m){return f[g]={status:"fulfilled",value:m}},function(m){return f[g]={status:"rejected",reason:m}}).then(function(){return--l||o(f)})})})}),ge.any&&typeof AggregateError<"u"&&se(ae,"any",function(){var i=nt.apply(null,arguments).map(fi);return new ae(function(o,l){i.length===0&&l(new AggregateError([]));var f=i.length,d=new Array(f);i.forEach(function(g,m){return ae.resolve(g).then(function(_){return o(_)},function(_){d[m]=_,--f||l(new AggregateError(d))})})})}));var _t={awaits:0,echoes:0,id:0},kc=0,li=[],ci=0,hi=0,xc=0;function bn(i,o,l,f){var d=fe,g=Object.create(d);return g.parent=d,g.ref=0,g.global=!1,g.id=++xc,et.env,g.env=ke?{Promise:ae,PromiseProp:{value:ae,configurable:!0,writable:!0},all:ae.all,race:ae.race,allSettled:ae.allSettled,any:ae.any,resolve:ae.resolve,reject:ae.reject}:{},o&&h(g,o),++d.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Mn(g,i,l,f),g.ref===0&&g.finalize(),f}function ir(){return _t.id||(_t.id=++kc),++_t.awaits,_t.echoes+=ee,_t.id}function wn(){return!!_t.awaits&&(--_t.awaits==0&&(_t.id=0),_t.echoes=_t.awaits*ee,!0)}function fi(i){return _t.echoes&&i&&i.constructor===ge?(ir(),i.then(function(o){return wn(),o},function(o){return wn(),pt(o)})):i}function Ec(){var i=li[li.length-1];li.pop(),kn(i,!1)}function kn(i,o){var l,f=fe;(o?!_t.echoes||ci++&&i===fe:!ci||--ci&&i===fe)||queueMicrotask(o?(function(d){++hi,_t.echoes&&--_t.echoes!=0||(_t.echoes=_t.awaits=_t.id=0),li.push(fe),kn(d,!0)}).bind(null,i):Ec),i!==fe&&(fe=i,f===et&&(et.env=fa()),ke&&(l=et.env.Promise,o=i.env,(f.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),l.all=o.all,l.race=o.race,l.resolve=o.resolve,l.reject=o.reject,o.allSettled&&(l.allSettled=o.allSettled),o.any&&(l.any=o.any))))}function fa(){var i=a.Promise;return ke?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Mn(i,o,l,f,d){var g=fe;try{return kn(i,!0),o(l,f,d)}finally{kn(g,!1)}}function da(i,o,l,f){return typeof i!="function"?i:function(){var d=fe;l&&ir(),kn(o,!0);try{return i.apply(this,arguments)}finally{kn(d,!1),f&&queueMicrotask(wn)}}}function ks(i){Promise===ge&&_t.echoes===0?ci===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Wt).indexOf("[native code]")===-1&&(ir=wn=be);var pt=ae.reject,Un="￿",cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pa="String expected.",sr=[],di="__dbnames",xs="readonly",Es="readwrite";function Kn(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var ga={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pi(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=ye(o))[i],o}}function ya(){throw q.Type()}function Ne(i,o){try{var l=ma(i),f=ma(o);if(l!==f)return l==="Array"?1:f==="Array"?-1:l==="binary"?1:f==="binary"?-1:l==="string"?1:f==="string"?-1:l==="Date"?1:f!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,g){for(var m=d.length,_=g.length,S=m<_?m:_,x=0;x<S;++x)if(d[x]!==g[x])return d[x]<g[x]?-1:1;return m===_?0:m<_?-1:1}(va(i),va(o));case"Array":return function(d,g){for(var m=d.length,_=g.length,S=m<_?m:_,x=0;x<S;++x){var C=Ne(d[x],g[x]);if(C!==0)return C}return m===_?0:m<_?-1:1}(i,o)}}catch{}return NaN}function ma(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=at(i),i==="ArrayBuffer"?"binary":i)}function va(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var _a=(st.prototype._trans=function(i,o,l){var f=this._tx||fe.trans,d=this.name,g=H&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function m(x,C,w){if(!w.schema[d])throw new q.NotFound("Table "+d+" not part of transaction");return o(w.idbtrans,w)}var _=nr();try{var S=f&&f.db._novip===this.db._novip?f===fe.trans?f._promise(i,m,l):bn(function(){return f._promise(i,m,l)},{trans:f,transless:fe.transless||fe}):function x(C,w,A,E){if(C.idbdb&&(C._state.openComplete||fe.letThrough||C._vip)){var T=C._createTransaction(w,A,C._dbSchema);try{T.create(),C._state.PR1398_maxLoop=3}catch(j){return j.name===Xe.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return x(C,w,A,E)})):pt(j)}return T._promise(w,function(j,O){return bn(function(){return fe.trans=T,E(j,O,T)})}).then(function(j){if(w==="readwrite")try{T.idbtrans.commit()}catch{}return w==="readonly"?j:T._completion.then(function(){return j})})}if(C._state.openComplete)return pt(new q.DatabaseClosed(C._state.dbOpenError));if(!C._state.isBeingOpened){if(!C._state.autoOpen)return pt(new q.DatabaseClosed);C.open().catch(be)}return C._state.dbReadyPromise.then(function(){return x(C,w,A,E)})}(this.db,i,[this.name],m);return g&&(S._consoleTask=g,S=S.catch(function(x){return console.trace(x),pt(x)})),S}finally{_&&rr()}},st.prototype.get=function(i,o){var l=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?pt(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return l.core.get({trans:f,key:i}).then(function(d){return l.hook.reading.fire(d)})}).then(o)},st.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(c(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=u(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&o.every(function(C){return 0<=S.keyPath.indexOf(C)})){for(var x=0;x<o.length;++x)if(o.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(l&&this.db._maxKey!==Un){var m=l.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(x){return i[x]}))}!l&&H&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var f=this.schema.idxByName,d=this.db._deps.indexedDB;function g(S,x){return d.cmp(S,x)===0}var _=o.reduce(function(A,x){var C=A[0],w=A[1],A=f[x],E=i[x];return[C||A,C||!A?Kn(w,A&&A.multi?function(T){return T=Ye(T,x),c(T)&&T.some(function(j){return g(E,j)})}:function(T){return g(E,Ye(T,x))}):w]},[null,null]),m=_[0],_=_[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(_):l?this.filter(_):this.where(o).equals("")},st.prototype.filter=function(i){return this.toCollection().and(i)},st.prototype.count=function(i){return this.toCollection().count(i)},st.prototype.offset=function(i){return this.toCollection().offset(i)},st.prototype.limit=function(i){return this.toCollection().limit(i)},st.prototype.each=function(i){return this.toCollection().each(i)},st.prototype.toArray=function(i){return this.toCollection().toArray(i)},st.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},st.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,c(i)?"[".concat(i.join("+"),"]"):i))},st.prototype.reverse=function(){return this.toCollection().reverse()},st.prototype.mapToClass=function(i){var o,l=this.db,f=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof ya&&(function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function C(){this.constructor=S}n(S,x),S.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),d.prototype.table=function(){return f},i=d);for(var g=new Set,m=i.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(S){return g.add(S)});function _(S){if(!S)return S;var x,C=Object.create(i.prototype);for(x in S)if(!g.has(x))try{C[x]=S[x]}catch{}return C}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),i},st.prototype.defineClass=function(){return this.mapToClass(function(i){h(this,i)})},st.prototype.add=function(i,o){var l=this,f=this.schema.primKey,d=f.auto,g=f.keyPath,m=i;return g&&d&&(m=pi(g)(i)),this._trans("readwrite",function(_){return l.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[m]})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(g)try{_e(i,g,_)}catch{}return _})},st.prototype.update=function(i,o){return typeof i!="object"||c(i)?this.where(":id").equals(i).modify(o):(i=Ye(i,this.schema.primKey.keyPath),i===void 0?pt(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},st.prototype.put=function(i,o){var l=this,f=this.schema.primKey,d=f.auto,g=f.keyPath,m=i;return g&&d&&(m=pi(g)(i)),this._trans("readwrite",function(_){return l.core.mutate({trans:_,type:"put",values:[m],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(g)try{_e(i,g,_)}catch{}return _})},st.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"delete",keys:[i]})}).then(function(l){return l.numFailures?ae.reject(l.failures[0]):void 0})},st.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:ga})}).then(function(o){return o.numFailures?ae.reject(o.failures[0]):void 0})},st.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(l){return o.core.getMany({keys:i,trans:l}).then(function(f){return f.map(function(d){return o.hook.reading.fire(d)})})})},st.prototype.bulkAdd=function(i,o,l){var f=this,d=Array.isArray(o)?o:void 0,g=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(m){var x=f.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(pi(x)):i;return f.core.mutate({trans:m,type:"add",keys:d,values:x,wantResults:g}).then(function(T){var w=T.numFailures,A=T.results,E=T.lastResult,T=T.failures;if(w===0)return g?A:E;throw new Ve("".concat(f.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),T)})})},st.prototype.bulkPut=function(i,o,l){var f=this,d=Array.isArray(o)?o:void 0,g=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(m){var x=f.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(pi(x)):i;return f.core.mutate({trans:m,type:"put",keys:d,values:x,wantResults:g}).then(function(T){var w=T.numFailures,A=T.results,E=T.lastResult,T=T.failures;if(w===0)return g?A:E;throw new Ve("".concat(f.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),T)})})},st.prototype.bulkUpdate=function(i){var o=this,l=this.core,f=i.map(function(m){return m.key}),d=i.map(function(m){return m.changes}),g=[];return this._trans("readwrite",function(m){return l.getMany({trans:m,keys:f,cache:"clone"}).then(function(_){var S=[],x=[];i.forEach(function(w,A){var E=w.key,T=w.changes,j=_[A];if(j){for(var O=0,$=Object.keys(T);O<$.length;O++){var L=$[O],F=T[L];if(L===o.schema.primKey.keyPath){if(Ne(F,E)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else _e(j,L,F)}g.push(A),S.push(E),x.push(j)}});var C=S.length;return l.mutate({trans:m,type:"put",keys:S,values:x,updates:{keys:f,changeSpecs:d}}).then(function(w){var A=w.numFailures,E=w.failures;if(A===0)return C;for(var T=0,j=Object.keys(E);T<j.length;T++){var O,$=j[T],L=g[Number($)];L!=null&&(O=E[$],delete E[$],E[L]=O)}throw new Ve("".concat(o.name,".bulkUpdate(): ").concat(A," of ").concat(C," operations failed"),E)})})})},st.prototype.bulkDelete=function(i){var o=this,l=i.length;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"delete",keys:i})}).then(function(m){var d=m.numFailures,g=m.lastResult,m=m.failures;if(d===0)return g;throw new Ve("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(l," operations failed"),m)})},st);function st(){}function Cr(i){function o(m,_){if(_){for(var S=arguments.length,x=new Array(S-1);--S;)x[S-1]=arguments[S];return l[m].subscribe.apply(null,x),i}if(typeof m=="string")return l[m]}var l={};o.addEventType=g;for(var f=1,d=arguments.length;f<d;++f)g(arguments[f]);return o;function g(m,_,S){if(typeof m!="object"){var x;_=_||X;var C={subscribers:[],fire:S=S||be,subscribe:function(w){C.subscribers.indexOf(w)===-1&&(C.subscribers.push(w),C.fire=_(C.fire,w))},unsubscribe:function(w){C.subscribers=C.subscribers.filter(function(A){return A!==w}),C.fire=C.subscribers.reduce(_,S)}};return l[m]=o[m]=C}u(x=m).forEach(function(w){var A=x[w];if(c(A))g(w,x[w][0],x[w][1]);else{if(A!=="asap")throw new q.InvalidArgument("Invalid event config");var E=g(w,v,function(){for(var T=arguments.length,j=new Array(T);T--;)j[T]=arguments[T];E.subscribers.forEach(function(O){Le(function(){O.apply(null,j)})})})}})}}function Ar(i,o){return le(o).from({prototype:i}),o}function or(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function Ss(i,o){i.filter=Kn(i.filter,o)}function Os(i,o,l){var f=i.replayFilter;i.replayFilter=f?function(){return Kn(f(),o())}:o,i.justLimit=l&&!f}function gi(i,o){if(i.isPrimKey)return o.primaryKey;var l=o.getIndexByKeyPath(i.index);if(!l)throw new q.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return l}function ba(i,o,l){var f=gi(i,o.schema);return o.openCursor({trans:l,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:f,range:i.range}})}function yi(i,o,l,f){var d=i.replayFilter?Kn(i.filter,i.replayFilter()):i.filter;if(i.or){var g={},m=function(_,S,x){var C,w;d&&!d(S,x,function(A){return S.stop(A)},function(A){return S.fail(A)})||((w=""+(C=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(C)),b(g,w)||(g[w]=!0,o(_,S,x)))};return Promise.all([i.or._iterate(m,l),wa(ba(i,f,l),i.algorithm,m,!i.keysOnly&&i.valueMapper)])}return wa(ba(i,f,l),Kn(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function wa(i,o,l,f){var d=lt(f?function(g,m,_){return l(f(g),m,_)}:l);return i.then(function(g){if(g)return g.start(function(){var m=function(){return g.continue()};o&&!o(g,function(_){return m=_},function(_){g.stop(_),m=be},function(_){g.fail(_),m=be})||d(g.value,g,function(_){return m=_}),m()})})}var hn=Symbol(),jr=(ka.prototype.execute=function(i){if(this.add!==void 0){var o=this.add;if(c(o))return s(s([],c(i)?i:[],!0),o).sort();if(typeof o=="number")return(Number(i)||0)+o;if(typeof o=="bigint")try{return BigInt(i)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var l=this.remove;if(c(l))return c(i)?i.filter(function(f){return!l.includes(f)}).sort():[];if(typeof l=="number")return Number(i)-l;if(typeof l=="bigint")try{return BigInt(i)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}return o=(o=this.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof i=="string"&&i.startsWith(o)?this.replacePrefix[1]+i.substring(o.length):i},ka);function ka(i){Object.assign(this,i)}var Sc=(qe.prototype._read=function(i,o){var l=this._ctx;return l.error?l.table._trans(null,pt.bind(null,l.error)):l.table._trans("readonly",i).then(o)},qe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,pt.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},qe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=Kn(o.algorithm,i)},qe.prototype._iterate=function(i,o){return yi(this._ctx,i,o,this._ctx.table.core)},qe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return i&&h(l,i),o._ctx=l,o},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(i){var o=this._ctx;return this._read(function(l){return yi(o,i,l,o.table.core)})},qe.prototype.count=function(i){var o=this;return this._read(function(l){var f=o._ctx,d=f.table.core;if(or(f,!0))return d.count({trans:l,query:{index:gi(f,d.schema),range:f.range}}).then(function(m){return Math.min(m,f.limit)});var g=0;return yi(f,function(){return++g,!1},l,d).then(function(){return g})}).then(i)},qe.prototype.sortBy=function(i,o){var l=i.split(".").reverse(),f=l[0],d=l.length-1;function g(S,x){return x?g(S[l[x]],x-1):S[f]}var m=this._ctx.dir==="next"?1:-1;function _(S,x){return S=g(S,d),x=g(x,d),S<x?-m:x<S?m:0}return this.toArray(function(S){return S.sort(_)}).then(o)},qe.prototype.toArray=function(i){var o=this;return this._read(function(l){var f=o._ctx;if(f.dir==="next"&&or(f,!0)&&0<f.limit){var d=f.valueMapper,g=gi(f,f.table.core.schema);return f.table.core.query({trans:l,limit:f.limit,values:!0,query:{index:g,range:f.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var m=[];return yi(f,function(_){return m.push(_)},l,f.table.core).then(function(){return m})},i)},qe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,or(o)?Os(o,function(){var l=i;return function(f,d){return l===0||(l===1?--l:d(function(){f.advance(l),l=0}),!1)}}):Os(o,function(){var l=i;return function(){return--l<0}})),this},qe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),Os(this._ctx,function(){var o=i;return function(l,f,d){return--o<=0&&f(d),0<=o}},!0),this},qe.prototype.until=function(i,o){return Ss(this._ctx,function(l,f,d){return!i(l.value)||(f(d),o)}),this},qe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},qe.prototype.last=function(i){return this.reverse().first(i)},qe.prototype.filter=function(i){var o;return Ss(this._ctx,function(l){return i(l.value)}),(o=this._ctx).isMatch=Kn(o.isMatch,i),this},qe.prototype.and=function(i){return this.filter(i)},qe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,f){i(f.key,f)})},qe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},qe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,f){i(f.primaryKey,f)})},qe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var l=[];return this.each(function(f,d){l.push(d.key)}).then(function(){return l}).then(i)},qe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&or(o,!0)&&0<o.limit)return this._read(function(f){var d=gi(o,o.table.core.schema);return o.table.core.query({trans:f,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(f){return f.result}).then(i);o.keysOnly=!o.isMatch;var l=[];return this.each(function(f,d){l.push(d.primaryKey)}).then(function(){return l}).then(i)},qe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},qe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},qe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},qe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return Ss(this._ctx,function(d){var f=d.primaryKey.toString(),d=b(o,f);return o[f]=!0,!d}),this},qe.prototype.modify=function(i){var o=this,l=this._ctx;return this._write(function(f){var d,g,m;m=typeof i=="function"?i:(d=u(i),g=d.length,function(O){for(var $=!1,L=0;L<g;++L){var F=d[L],U=i[F],G=Ye(O,F);U instanceof jr?(_e(O,F,U.execute(G)),$=!0):G!==U&&(_e(O,F,U),$=!0)}return $});function _(O,F){var L=F.failures,F=F.numFailures;T+=O-F;for(var U=0,G=u(L);U<G.length;U++){var ne=G[U];E.push(L[ne])}}var S=l.table.core,x=S.schema.primaryKey,C=x.outbound,w=x.extractKey,A=o.db._options.modifyChunkSize||200,E=[],T=0,j=[];return o.clone().primaryKeys().then(function(O){function $(F){var U=Math.min(A,O.length-F);return S.getMany({trans:f,keys:O.slice(F,F+U),cache:"immutable"}).then(function(G){for(var ne=[],Q=[],te=C?[]:null,re=[],z=0;z<U;++z){var Ee=G[z],Te={value:ye(Ee),primKey:O[F+z]};m.call(Te,Te.value,Te)!==!1&&(Te.value==null?re.push(O[F+z]):C||Ne(w(Ee),w(Te.value))===0?(Q.push(Te.value),C&&te.push(O[F+z])):(re.push(O[F+z]),ne.push(Te.value)))}return Promise.resolve(0<ne.length&&S.mutate({trans:f,type:"add",values:ne}).then(function(Me){for(var Ie in Me.failures)re.splice(parseInt(Ie),1);_(ne.length,Me)})).then(function(){return(0<Q.length||L&&typeof i=="object")&&S.mutate({trans:f,type:"put",keys:te,values:Q,criteria:L,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<F}).then(function(Me){return _(Q.length,Me)})}).then(function(){return(0<re.length||L&&i===Ts)&&S.mutate({trans:f,type:"delete",keys:re,criteria:L,isAdditionalChunk:0<F}).then(function(Me){return _(re.length,Me)})}).then(function(){return O.length>F+U&&$(F+A)})})}var L=or(l)&&l.limit===1/0&&(typeof i!="function"||i===Ts)&&{index:l.index,range:l.range};return $(0).then(function(){if(0<E.length)throw new Je("Error modifying one or more objects",E,T,j);return O.length})})})},qe.prototype.delete=function(){var i=this._ctx,o=i.range;return or(i)&&(i.isPrimKey||o.type===3)?this._write(function(l){var f=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:l,query:{index:f,range:d}}).then(function(g){return i.table.core.mutate({trans:l,type:"deleteRange",range:d}).then(function(m){var _=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Je("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),g-m);return g-m})})}):this.modify(Ts)},qe);function qe(){}var Ts=function(i,o){return o.value=null};function Oc(i,o){return i<o?-1:i===o?0:1}function Tc(i,o){return o<i?-1:i===o?0:1}function Ut(i,o,l){return i=i instanceof Ea?new i.Collection(i):i,i._ctx.error=new(l||TypeError)(o),i}function ar(i){return new i.Collection(i,function(){return xa("")}).limit(0)}function mi(i,o,l,f){var d,g,m,_,S,x,C,w=l.length;if(!l.every(function(T){return typeof T=="string"}))return Ut(i,pa);function A(T){d=T==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},g=T==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},m=T==="next"?Oc:Tc;var j=l.map(function(O){return{lower:g(O),upper:d(O)}}).sort(function(O,$){return m(O.lower,$.lower)});_=j.map(function(O){return O.upper}),S=j.map(function(O){return O.lower}),C=(x=T)==="next"?"":f}A("next"),i=new i.Collection(i,function(){return xn(_[0],S[w-1]+f)}),i._ondirectionchange=function(T){A(T)};var E=0;return i._addAlgorithm(function(T,j,O){var $=T.key;if(typeof $!="string")return!1;var L=g($);if(o(L,S,E))return!0;for(var F=null,U=E;U<w;++U){var G=function(ne,Q,te,re,z,Ee){for(var Te=Math.min(ne.length,re.length),Me=-1,Ie=0;Ie<Te;++Ie){var Gt=Q[Ie];if(Gt!==re[Ie])return z(ne[Ie],te[Ie])<0?ne.substr(0,Ie)+te[Ie]+te.substr(Ie+1):z(ne[Ie],re[Ie])<0?ne.substr(0,Ie)+re[Ie]+te.substr(Ie+1):0<=Me?ne.substr(0,Me)+Q[Me]+te.substr(Me+1):null;z(ne[Ie],Gt)<0&&(Me=Ie)}return Te<re.length&&Ee==="next"?ne+te.substr(ne.length):Te<ne.length&&Ee==="prev"?ne.substr(0,te.length):Me<0?null:ne.substr(0,Me)+re[Me]+te.substr(Me+1)}($,L,_[U],S[U],m,x);G===null&&F===null?E=U+1:(F===null||0<m(F,G))&&(F=G)}return j(F!==null?function(){T.continue(F+C)}:O),!1}),i}function xn(i,o,l,f){return{type:2,lower:i,upper:o,lowerOpen:l,upperOpen:f}}function xa(i){return{type:1,lower:i,upper:i}}var Ea=(Object.defineProperty(bt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),bt.prototype.between=function(i,o,l,f){l=l!==!1,f=f===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(l||f)&&(!l||!f)?ar(this):new this.Collection(this,function(){return xn(i,o,!l,!f)})}catch{return Ut(this,cn)}},bt.prototype.equals=function(i){return i==null?Ut(this,cn):new this.Collection(this,function(){return xa(i)})},bt.prototype.above=function(i){return i==null?Ut(this,cn):new this.Collection(this,function(){return xn(i,void 0,!0)})},bt.prototype.aboveOrEqual=function(i){return i==null?Ut(this,cn):new this.Collection(this,function(){return xn(i,void 0,!1)})},bt.prototype.below=function(i){return i==null?Ut(this,cn):new this.Collection(this,function(){return xn(void 0,i,!1,!0)})},bt.prototype.belowOrEqual=function(i){return i==null?Ut(this,cn):new this.Collection(this,function(){return xn(void 0,i)})},bt.prototype.startsWith=function(i){return typeof i!="string"?Ut(this,pa):this.between(i,i+Un,!0,!0)},bt.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):mi(this,function(o,l){return o.indexOf(l[0])===0},[i],Un)},bt.prototype.equalsIgnoreCase=function(i){return mi(this,function(o,l){return o===l[0]},[i],"")},bt.prototype.anyOfIgnoreCase=function(){var i=nt.apply(pe,arguments);return i.length===0?ar(this):mi(this,function(o,l){return l.indexOf(o)!==-1},i,"")},bt.prototype.startsWithAnyOfIgnoreCase=function(){var i=nt.apply(pe,arguments);return i.length===0?ar(this):mi(this,function(o,l){return l.some(function(f){return o.indexOf(f)===0})},i,Un)},bt.prototype.anyOf=function(){var i=this,o=nt.apply(pe,arguments),l=this._cmp;try{o.sort(l)}catch{return Ut(this,cn)}if(o.length===0)return ar(this);var f=new this.Collection(this,function(){return xn(o[0],o[o.length-1])});f._ondirectionchange=function(g){l=g==="next"?i._ascending:i._descending,o.sort(l)};var d=0;return f._addAlgorithm(function(g,m,_){for(var S=g.key;0<l(S,o[d]);)if(++d===o.length)return m(_),!1;return l(S,o[d])===0||(m(function(){g.continue(o[d])}),!1)}),f},bt.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},bt.prototype.noneOf=function(){var i=nt.apply(pe,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ut(this,cn)}var o=i.reduce(function(l,f){return l?l.concat([[l[l.length-1][1],f]]):[[-1/0,f]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},bt.prototype.inAnyRange=function($,o){var l=this,f=this._cmp,d=this._ascending,g=this._descending,m=this._min,_=this._max;if($.length===0)return ar(this);if(!$.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&d(L[0],L[1])<=0}))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var S=!o||o.includeLowers!==!1,x=o&&o.includeUppers===!0,C,w=d;function A(L,F){return w(L[0],F[0])}try{(C=$.reduce(function(L,F){for(var U=0,G=L.length;U<G;++U){var ne=L[U];if(f(F[0],ne[1])<0&&0<f(F[1],ne[0])){ne[0]=m(ne[0],F[0]),ne[1]=_(ne[1],F[1]);break}}return U===G&&L.push(F),L},[])).sort(A)}catch{return Ut(this,cn)}var E=0,T=x?function(L){return 0<d(L,C[E][1])}:function(L){return 0<=d(L,C[E][1])},j=S?function(L){return 0<g(L,C[E][0])}:function(L){return 0<=g(L,C[E][0])},O=T,$=new this.Collection(this,function(){return xn(C[0][0],C[C.length-1][1],!S,!x)});return $._ondirectionchange=function(L){w=L==="next"?(O=T,d):(O=j,g),C.sort(A)},$._addAlgorithm(function(L,F,U){for(var G,ne=L.key;O(ne);)if(++E===C.length)return F(U),!1;return!T(G=ne)&&!j(G)||(l._cmp(ne,C[E][1])===0||l._cmp(ne,C[E][0])===0||F(function(){w===d?L.continue(C[E][0]):L.continue(C[E][1])}),!1)}),$},bt.prototype.startsWithAnyOf=function(){var i=nt.apply(pe,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?ar(this):this.inAnyRange(i.map(function(o){return[o,o+Un]})):Ut(this,"startsWithAnyOf() only works with strings")},bt);function bt(){}function en(i){return lt(function(o){return Rr(o),i(o.target.error),!1})}function Rr(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Ir="storagemutated",Ps="x-storagemutated-1",En=Cr(null,Ir),Pc=(tn.prototype._lock=function(){return ce(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},tn.prototype._unlock=function(){if(ce(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Mn(i[1],i[0])}catch{}}return this},tn.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},tn.prototype.create=function(i){var o=this;if(!this.mode)return this;var l=this.db.idbdb,f=this.db._state.dbOpenError;if(ce(!this.idbtrans),!i&&!l)switch(f&&f.name){case"DatabaseClosedError":throw new q.DatabaseClosed(f);case"MissingAPIError":throw new q.MissingAPI(f.message,f);default:throw new q.OpenFailed(f)}if(!this.active)throw new q.TransactionInactive;return ce(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=lt(function(d){Rr(d),o._reject(i.error)}),i.onabort=lt(function(d){Rr(d),o.active&&o._reject(new q.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=lt(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&En.storagemutated.fire(i.mutatedParts)}),this},tn.prototype._promise=function(i,o,l){var f=this;if(i==="readwrite"&&this.mode!=="readwrite")return pt(new q.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new q.TransactionInactive);if(this._locked())return new ae(function(g,m){f._blockedFuncs.push([function(){f._promise(i,o,l).then(g,m)},fe])});if(l)return bn(function(){var g=new ae(function(m,_){f._lock();var S=o(m,_,f);S&&S.then&&S.then(m,_)});return g.finally(function(){return f._unlock()}),g._lib=!0,g});var d=new ae(function(g,m){var _=o(g,m,f);_&&_.then&&_.then(g,m)});return d._lib=!0,d},tn.prototype._root=function(){return this.parent?this.parent._root():this},tn.prototype.waitFor=function(i){var o,l=this._root(),f=ae.resolve(i);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return f}):(l._waitingFor=f,l._waitingQueue=[],o=l.idbtrans.objectStore(l.storeNames[0]),function g(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(o.get(-1/0).onsuccess=g)}());var d=l._waitingFor;return new ae(function(g,m){f.then(function(_){return l._waitingQueue.push(lt(g.bind(null,_)))},function(_){return l._waitingQueue.push(lt(m.bind(null,_)))}).finally(function(){l._waitingFor===d&&(l._waitingFor=null)})})},tn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},tn.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,i))return o[i];var l=this.schema[i];if(!l)throw new q.NotFound("Table "+i+" not part of transaction");return l=new this.db.Table(i,l,this),l.core=this.db.core.table(i),o[i]=l},tn);function tn(){}function Cs(i,o,l,f,d,g,m){return{name:i,keyPath:o,unique:l,multi:f,auto:d,compound:g,src:(l&&!m?"&":"")+(f?"*":"")+(d?"++":"")+Sa(o)}}function Sa(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function As(i,o,l){return{name:i,primKey:o,indexes:l,mappedClass:null,idxByName:(f=function(d){return[d.name,d]},l.reduce(function(d,g,m){return m=f(g,m),m&&(d[m[0]]=m[1]),d},{}))};var f}var Dr=function(i){try{return i.only([[]]),Dr=function(){return[[]]},[[]]}catch{return Dr=function(){return Un},Un}};function js(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(l){return l[o]}:function(l){return Ye(l,o)}:function(l){return Ye(l,i)};var o}function Oa(i){return[].slice.call(i)}var Cc=0;function $r(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Ac(i,o,S){function f(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=O.lower,T=O.upper,j=O.lowerOpen,O=O.upperOpen;return E===void 0?T===void 0?null:o.upperBound(T,!!O):T===void 0?o.lowerBound(E,!!j):o.bound(E,T,!!j,!!O)}function d(A){var E,T=A.name;return{name:T,schema:A,mutate:function(j){var O=j.trans,$=j.type,L=j.keys,F=j.values,U=j.range;return new Promise(function(G,ne){G=lt(G);var Q=O.objectStore(T),te=Q.keyPath==null,re=$==="put"||$==="add";if(!re&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var z,Ee=(L||F||{length:1}).length;if(L&&F&&L.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Te(Rt){++Gt,Rr(Rt)}var Me=[],Ie=[],Gt=0;if($==="deleteRange"){if(U.type===4)return G({numFailures:Gt,failures:Ie,results:[],lastResult:void 0});U.type===3?Me.push(z=Q.clear()):Me.push(z=Q.delete(f(U)))}else{var te=re?te?[F,L]:[F,null]:[L,null],De=te[0],kt=te[1];if(re)for(var xt=0;xt<Ee;++xt)Me.push(z=kt&&kt[xt]!==void 0?Q[$](De[xt],kt[xt]):Q[$](De[xt])),z.onerror=Te;else for(xt=0;xt<Ee;++xt)Me.push(z=Q[$](De[xt])),z.onerror=Te}function Ai(Rt){Rt=Rt.target.result,Me.forEach(function(qn,Gs){return qn.error!=null&&(Ie[Gs]=qn.error)}),G({numFailures:Gt,failures:Ie,results:$==="delete"?L:Me.map(function(qn){return qn.result}),lastResult:Rt})}z.onerror=function(Rt){Te(Rt),Ai(Rt)},z.onsuccess=Ai})},getMany:function(j){var O=j.trans,$=j.keys;return new Promise(function(L,F){L=lt(L);for(var U,G=O.objectStore(T),ne=$.length,Q=new Array(ne),te=0,re=0,z=function(Me){Me=Me.target,Q[Me._pos]=Me.result,++re===te&&L(Q)},Ee=en(F),Te=0;Te<ne;++Te)$[Te]!=null&&((U=G.get($[Te]))._pos=Te,U.onsuccess=z,U.onerror=Ee,++te);te===0&&L(Q)})},get:function(j){var O=j.trans,$=j.key;return new Promise(function(L,F){L=lt(L);var U=O.objectStore(T).get($);U.onsuccess=function(G){return L(G.target.result)},U.onerror=en(F)})},query:(E=x,function(j){return new Promise(function(O,$){O=lt(O);var L,F,U,te=j.trans,G=j.values,ne=j.limit,z=j.query,Q=ne===1/0?void 0:ne,re=z.index,z=z.range,te=te.objectStore(T),re=re.isPrimaryKey?te:te.index(re.name),z=f(z);if(ne===0)return O({result:[]});E?((Q=G?re.getAll(z,Q):re.getAllKeys(z,Q)).onsuccess=function(Ee){return O({result:Ee.target.result})},Q.onerror=en($)):(L=0,F=!G&&"openKeyCursor"in re?re.openKeyCursor(z):re.openCursor(z),U=[],F.onsuccess=function(Ee){var Te=F.result;return Te?(U.push(G?Te.value:Te.primaryKey),++L===ne?O({result:U}):void Te.continue()):O({result:U})},F.onerror=en($))})}),openCursor:function(j){var O=j.trans,$=j.values,L=j.query,F=j.reverse,U=j.unique;return new Promise(function(G,ne){G=lt(G);var re=L.index,Q=L.range,te=O.objectStore(T),te=re.isPrimaryKey?te:te.index(re.name),re=F?U?"prevunique":"prev":U?"nextunique":"next",z=!$&&"openKeyCursor"in te?te.openKeyCursor(f(Q),re):te.openCursor(f(Q),re);z.onerror=en(ne),z.onsuccess=lt(function(Ee){var Te,Me,Ie,Gt,De=z.result;De?(De.___id=++Cc,De.done=!1,Te=De.continue.bind(De),Me=(Me=De.continuePrimaryKey)&&Me.bind(De),Ie=De.advance.bind(De),Gt=function(){throw new Error("Cursor not stopped")},De.trans=O,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=lt(ne),De.next=function(){var kt=this,xt=1;return this.start(function(){return xt--?kt.continue():kt.stop()}).then(function(){return kt})},De.start=function(kt){function xt(){if(z.result)try{kt()}catch(Rt){De.fail(Rt)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var Ai=new Promise(function(Rt,qn){Rt=lt(Rt),z.onerror=en(qn),De.fail=qn,De.stop=function(Gs){De.stop=De.continue=De.continuePrimaryKey=De.advance=Gt,Rt(Gs)}});return z.onsuccess=lt(function(Rt){z.onsuccess=xt,xt()}),De.continue=Te,De.continuePrimaryKey=Me,De.advance=Ie,xt(),Ai},G(De)):G(null)},ne)})},count:function(j){var O=j.query,$=j.trans,L=O.index,F=O.range;return new Promise(function(U,G){var ne=$.objectStore(T),Q=L.isPrimaryKey?ne:ne.index(L.name),ne=f(F),Q=ne?Q.count(ne):Q.count();Q.onsuccess=lt(function(te){return U(te.target.result)}),Q.onerror=en(G)})}}}var g,m,_,C=(m=S,_=Oa((g=i).objectStoreNames),{schema:{name:g.name,tables:_.map(function(A){return m.objectStore(A)}).map(function(A){var E=A.keyPath,O=A.autoIncrement,T=c(E),j={},O={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:T,keyPath:E,autoIncrement:O,unique:!0,extractKey:js(E)},indexes:Oa(A.indexNames).map(function($){return A.index($)}).map(function(U){var L=U.name,F=U.unique,G=U.multiEntry,U=U.keyPath,G={name:L,compound:c(U),keyPath:U,unique:F,multiEntry:G,extractKey:js(U)};return j[$r(U)]=G}),getIndexByKeyPath:function($){return j[$r($)]}};return j[":id"]=O.primaryKey,E!=null&&(j[$r(E)]=O.primaryKey),O})},hasGetAll:0<_.length&&"getAll"in m.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=C.schema,x=C.hasGetAll,C=S.tables.map(d),w={};return C.forEach(function(A){return w[A.name]=A}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(A){if(!w[A])throw new Error("Table '".concat(A,"' not found"));return w[A]},MIN_KEY:-1/0,MAX_KEY:Dr(o),schema:S}}function jc(i,o,l,f){var d=l.IDBKeyRange;return l.indexedDB,{dbcore:(f=Ac(o,d,f),i.dbcore.reduce(function(g,m){return m=m.create,r(r({},g),m(g))},f))}}function vi(i,f){var l=f.db,f=jc(i._middlewares,l,i._deps,f);i.core=f.dbcore,i.tables.forEach(function(d){var g=d.name;i.core.schema.tables.some(function(m){return m.name===g})&&(d.core=i.core.table(g),i[g]instanceof i.Table&&(i[g].core=d.core))})}function _i(i,o,l,f){l.forEach(function(d){var g=f[d];o.forEach(function(m){var _=function S(x,C){return ve(x,C)||(x=y(x))&&S(x,C)}(m,d);(!_||"value"in _&&_.value===void 0)&&(m===i.Transaction.prototype||m instanceof i.Transaction?se(m,d,{get:function(){return this.table(d)},set:function(S){V(this,d,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):m[d]=new i.Table(d,g))})})}function Rs(i,o){o.forEach(function(l){for(var f in l)l[f]instanceof i.Table&&delete l[f]})}function Rc(i,o){return i._cfg.version-o._cfg.version}function Ic(i,o,l,f){var d=i._dbSchema;l.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=As("$meta",Pa("")[0],[]),i._storeNames.push("$meta"));var g=i._createTransaction("readwrite",i._storeNames,d);g.create(l),g._completion.catch(f);var m=g._reject.bind(g),_=fe.transless||fe;bn(function(){return fe.trans=g,fe.transless=_,o!==0?(vi(i,l),x=o,((S=g).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(C){return C??x}):ae.resolve(x)).then(function(C){return A=C,E=g,T=l,j=[],C=(w=i)._versions,O=w._dbSchema=wi(0,w.idbdb,T),(C=C.filter(function($){return $._cfg.version>=A})).length!==0?(C.forEach(function($){j.push(function(){var L=O,F=$._cfg.dbschema;ki(w,L,T),ki(w,F,T),O=w._dbSchema=F;var U=Is(L,F);U.add.forEach(function(re){Ds(T,re[0],re[1].primKey,re[1].indexes)}),U.change.forEach(function(re){if(re.recreate)throw new q.Upgrade("Not yet support for changing primary key");var z=T.objectStore(re.name);re.add.forEach(function(Ee){return bi(z,Ee)}),re.change.forEach(function(Ee){z.deleteIndex(Ee.name),bi(z,Ee)}),re.del.forEach(function(Ee){return z.deleteIndex(Ee)})});var G=$._cfg.contentUpgrade;if(G&&$._cfg.version>A){vi(w,T),E._memoizedTables={};var ne=I(F);U.del.forEach(function(re){ne[re]=L[re]}),Rs(w,[w.Transaction.prototype]),_i(w,[w.Transaction.prototype],u(ne),ne),E.schema=ne;var Q,te=Qe(G);return te&&ir(),U=ae.follow(function(){var re;(Q=G(E))&&te&&(re=wn.bind(null,null),Q.then(re,re))}),Q&&typeof Q.then=="function"?ae.resolve(Q):U.then(function(){return Q})}}),j.push(function(L){var F,U,G=$._cfg.dbschema;F=G,U=L,[].slice.call(U.db.objectStoreNames).forEach(function(ne){return F[ne]==null&&U.db.deleteObjectStore(ne)}),Rs(w,[w.Transaction.prototype]),_i(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),E.schema=w._dbSchema}),j.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===$._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(F){return F!=="$meta"})):L.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return j.length?ae.resolve(j.shift()(E.idbtrans)).then($):ae.resolve()}().then(function(){Ta(O,T)})):ae.resolve();var w,A,E,T,j,O}).catch(m)):(u(d).forEach(function(C){Ds(l,C,d[C].primKey,d[C].indexes)}),vi(i,l),void ae.follow(function(){return i.on.populate.fire(g)}).catch(m));var S,x})}function Dc(i,o){Ta(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var l=wi(0,i.idbdb,o);ki(i,i._dbSchema,o);for(var f=0,d=Is(l,i._dbSchema).change;f<d.length;f++){var g=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(m.name);m.add.forEach(function(S){H&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(S.src)),bi(_,S)})}(d[f]);if(typeof g=="object")return g.value}}function Is(i,o){var l,f={del:[],add:[],change:[]};for(l in i)o[l]||f.del.push(l);for(l in o){var d=i[l],g=o[l];if(d){var m={name:l,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||d.primKey.auto!==g.primKey.auto)m.recreate=!0,f.change.push(m);else{var _=d.idxByName,S=g.idxByName,x=void 0;for(x in _)S[x]||m.del.push(x);for(x in S){var C=_[x],w=S[x];C?C.src!==w.src&&m.change.push(w):m.add.push(w)}(0<m.del.length||0<m.add.length||0<m.change.length)&&f.change.push(m)}}else f.add.push([l,g])}return f}function Ds(i,o,l,f){var d=i.db.createObjectStore(o,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return f.forEach(function(g){return bi(d,g)}),d}function Ta(i,o){u(i).forEach(function(l){o.db.objectStoreNames.contains(l)||(H&&console.debug("Dexie: Creating missing table",l),Ds(o,l,i[l].primKey,i[l].indexes))})}function bi(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function wi(i,o,l){var f={};return je(o.objectStoreNames,0).forEach(function(d){for(var g=l.objectStore(d),m=Cs(Sa(x=g.keyPath),x||"",!0,!1,!!g.autoIncrement,x&&typeof x!="string",!0),_=[],S=0;S<g.indexNames.length;++S){var C=g.index(g.indexNames[S]),x=C.keyPath,C=Cs(C.name,x,!!C.unique,!!C.multiEntry,!1,x&&typeof x!="string",!1);_.push(C)}f[d]=As(d,m,_)}),f}function ki(i,o,l){for(var f=l.db.objectStoreNames,d=0;d<f.length;++d){var g=f[d],m=l.objectStore(g);i._hasGetAll="getAll"in m;for(var _=0;_<m.indexNames.length;++_){var S=m.indexNames[_],x=m.index(S).keyPath,C=typeof x=="string"?x:"["+je(x).join("+")+"]";!o[g]||(x=o[g].idxByName[C])&&(x.name=S,delete o[g].idxByName[C],o[g].idxByName[S]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Pa(i){return i.split(",").map(function(o,l){var f=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return Cs(f,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),c(d),l===0)})}var $c=(xi.prototype._parseStoresSpec=function(i,o){u(i).forEach(function(l){if(i[l]!==null){var f=Pa(i[l]),d=f.shift();if(d.unique=!0,d.multi)throw new q.Schema("Primary key cannot be multi-valued");f.forEach(function(g){if(g.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),o[l]=As(l,d,f)}})},xi.prototype.stores=function(l){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,l):l;var l=o._versions,f={},d={};return l.forEach(function(g){h(f,g._cfg.storesSource),d=g._cfg.dbschema={},g._parseStoresSpec(f,d)}),o._dbSchema=d,Rs(o,[o._allTables,o,o.Transaction.prototype]),_i(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],u(d),d),o._storeNames=u(d),this},xi.prototype.upgrade=function(i){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||be,i),this},xi);function xi(){}function $s(i,o){var l=i._dbNamesDB;return l||(l=i._dbNamesDB=new fn(di,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Ls(i){return i&&typeof i.databases=="function"}function Fs(i){return bn(function(){return fe.letThrough=!0,i()})}function Ms(i){return!("from"in i)}var jt=function(i,o){if(!this){var l=new jt;return i&&"d"in i&&h(l,i),l}h(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Lr(i,o,l){var f=Ne(o,l);if(!isNaN(f)){if(0<f)throw RangeError();if(Ms(i))return h(i,{from:o,to:l,d:1});var d=i.l,f=i.r;if(Ne(l,i.from)<0)return d?Lr(d,o,l):i.l={from:o,to:l,d:1,l:null,r:null},Aa(i);if(0<Ne(o,i.to))return f?Lr(f,o,l):i.r={from:o,to:l,d:1,l:null,r:null},Aa(i);Ne(o,i.from)<0&&(i.from=o,i.l=null,i.d=f?f.d+1:1),0<Ne(l,i.to)&&(i.to=l,i.r=null,i.d=i.l?i.l.d+1:1),l=!i.r,d&&!i.l&&Fr(i,d),f&&l&&Fr(i,f)}}function Fr(i,o){Ms(o)||function l(f,S){var g=S.from,m=S.to,_=S.l,S=S.r;Lr(f,g,m),_&&l(f,_),S&&l(f,S)}(i,o)}function Ca(i,o){var l=Ei(o),f=l.next();if(f.done)return!1;for(var d=f.value,g=Ei(i),m=g.next(d.from),_=m.value;!f.done&&!m.done;){if(Ne(_.from,d.to)<=0&&0<=Ne(_.to,d.from))return!0;Ne(d.from,_.from)<0?d=(f=l.next(_.from)).value:_=(m=g.next(d.from)).value}return!1}function Ei(i){var o=Ms(i)?null:{s:0,n:i};return{next:function(l){for(var f=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,f)for(;o.n.l&&Ne(l,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!f||Ne(l,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Aa(i){var o,l,f=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((l=i.l)===null||l===void 0?void 0:l.d)||0),d=1<f?"r":f<-1?"l":"";d&&(o=d=="r"?"l":"r",l=r({},i),f=i[d],i.from=f.from,i.to=f.to,i[d]=f[d],l[d]=f[o],(i[o]=l).d=ja(l)),i.d=ja(i)}function ja(l){var o=l.r,l=l.l;return(o?l?Math.max(o.d,l.d):o.d:l?l.d:0)+1}function Si(i,o){return u(o).forEach(function(l){i[l]?Fr(i[l],o[l]):i[l]=function f(d){var g,m,_={};for(g in d)b(d,g)&&(m=d[g],_[g]=!m||typeof m!="object"||ue.has(m.constructor)?m:f(m));return _}(o[l])}),i}function Us(i,o){return i.all||o.all||Object.keys(i).some(function(l){return o[l]&&Ca(o[l],i[l])})}P(jt.prototype,((Wt={add:function(i){return Fr(this,i),this},addKey:function(i){return Lr(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(l){return Lr(o,l,l)}),this},hasKey:function(i){var o=Ei(this).next(i).value;return o&&Ne(o.from,i)<=0&&0<=Ne(o.to,i)}})[Se]=function(){return Ei(this)},Wt));var Bn={},Ks={},Bs=!1;function Oi(i){Si(Ks,i),Bs||(Bs=!0,setTimeout(function(){Bs=!1,Ns(Ks,!(Ks={}))},0))}function Ns(i,o){o===void 0&&(o=!1);var l=new Set;if(i.all)for(var f=0,d=Object.values(Bn);f<d.length;f++)Ra(m=d[f],i,l,o);else for(var g in i){var m,_=/^idb\:\/\/(.*)\/(.*)\//.exec(g);_&&(g=_[1],_=_[2],(m=Bn["idb://".concat(g,"/").concat(_)])&&Ra(m,i,l,o))}l.forEach(function(S){return S()})}function Ra(i,o,l,f){for(var d=[],g=0,m=Object.entries(i.queries.query);g<m.length;g++){for(var _=m[g],S=_[0],x=[],C=0,w=_[1];C<w.length;C++){var A=w[C];Us(o,A.obsSet)?A.subscribers.forEach(function(O){return l.add(O)}):f&&x.push(A)}f&&d.push([S,x])}if(f)for(var E=0,T=d;E<T.length;E++){var j=T[E],S=j[0],x=j[1];i.queries.query[S]=x}}function Lc(i){var o=i._state,l=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?pt(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var f=o.openCanceller,d=Math.round(10*i.verno),g=!1;function m(){if(o.openCanceller!==f)throw new q.DatabaseClosed("db.open() was cancelled")}function _(){return new ae(function(A,E){if(m(),!l)throw new q.MissingAPI;var T=i.name,j=o.autoSchema||!d?l.open(T):l.open(T,d);if(!j)throw new q.MissingAPI;j.onerror=en(E),j.onblocked=lt(i._fireOnBlocked),j.onupgradeneeded=lt(function(O){var $;C=j.transaction,o.autoSchema&&!i._options.allowEmptyDB?(j.onerror=Rr,C.abort(),j.result.close(),($=l.deleteDatabase(T)).onsuccess=$.onerror=lt(function(){E(new q.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(C.onerror=en(E),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=j.result,g&&Dc(i,C),Ic(i,O/10,C,E))},E),j.onsuccess=lt(function(){C=null;var O,$,L,F,U,G=i.idbdb=j.result,ne=je(G.objectStoreNames);if(0<ne.length)try{var Q=G.transaction((F=ne).length===1?F[0]:F,"readonly");if(o.autoSchema)$=G,L=Q,(O=i).verno=$.version/10,L=O._dbSchema=wi(0,$,L),O._storeNames=je($.objectStoreNames,0),_i(O,[O._allTables],u(L),L);else if(ki(i,i._dbSchema,Q),((U=Is(wi(0,(U=i).idbdb,Q),U._dbSchema)).add.length||U.change.some(function(te){return te.add.length||te.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),d=G.version+1,g=!0,A(_());vi(i,Q)}catch{}sr.push(i),G.onversionchange=lt(function(te){o.vcFired=!0,i.on("versionchange").fire(te)}),G.onclose=lt(function(te){i.on("close").fire(te)}),w&&(U=i._deps,Q=T,G=U.indexedDB,U=U.IDBKeyRange,Ls(G)||Q===di||$s(G,U).put({name:Q}).catch(be)),A()},E)}).catch(function(A){switch(A==null?void 0:A.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return ae.reject(A)})}var S,x=o.dbReadyResolve,C=null,w=!1;return ae.race([f,(typeof navigator>"u"?ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function E(){return indexedDB.databases().finally(A)}S=setInterval(E,100),E()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(_)]).then(function(){return m(),o.onReadyBeingFired=[],ae.resolve(Fs(function(){return i.on.ready.fire(i.vip)})).then(function A(){if(0<o.onReadyBeingFired.length){var E=o.onReadyBeingFired.reduce(J,be);return o.onReadyBeingFired=[],ae.resolve(Fs(function(){return E(i.vip)})).then(A)}})}).finally(function(){o.openCanceller===f&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(A){o.dbOpenError=A;try{C&&C.abort()}catch{}return f===o.openCanceller&&i._close(),pt(A)}).finally(function(){o.openComplete=!0,x()}).then(function(){var A;return w&&(A={},i.tables.forEach(function(E){E.schema.indexes.forEach(function(T){T.name&&(A["idb://".concat(i.name,"/").concat(E.name,"/").concat(T.name)]=new jt(-1/0,[[[]]]))}),A["idb://".concat(i.name,"/").concat(E.name,"/")]=A["idb://".concat(i.name,"/").concat(E.name,"/:dels")]=new jt(-1/0,[[[]]])}),En(Ir).fire(A),Ns(A,!0)),i})}function qs(i){function o(g){return i.next(g)}var l=d(o),f=d(function(g){return i.throw(g)});function d(g){return function(S){var _=g(S),S=_.value;return _.done?S:S&&typeof S.then=="function"?S.then(l,f):c(S)?Promise.all(S).then(l,f):l(S)}}return d(o)()}function Ti(i,o,l){for(var f=c(i)?i.slice():[i],d=0;d<l;++d)f.push(o);return f}var Fc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),f=l.schema,d={},g=[];function m(w,A,E){var T=$r(w),j=d[T]=d[T]||[],O=w==null?0:typeof w=="string"?1:w.length,$=0<A,$=r(r({},E),{name:$?"".concat(T,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:$,keyTail:A,keyLength:O,extractKey:js(w),unique:!$&&E.unique});return j.push($),$.isPrimaryKey||g.push($),1<O&&m(O===2?w[0]:w.slice(0,O-1),A+1,E),j.sort(function(L,F){return L.keyTail-F.keyTail}),$}o=m(f.primaryKey.keyPath,0,f.primaryKey),d[":id"]=[o];for(var _=0,S=f.indexes;_<S.length;_++){var x=S[_];m(x.keyPath,0,x)}function C(w){var A,E=w.query.index;return E.isVirtual?r(r({},w),{query:{index:E.lowLevelIndex,range:(A=w.query.range,E=E.keyTail,{type:A.type===1?2:A.type,lower:Ti(A.lower,A.lowerOpen?i.MAX_KEY:i.MIN_KEY,E),lowerOpen:!0,upper:Ti(A.upper,A.upperOpen?i.MIN_KEY:i.MAX_KEY,E),upperOpen:!0})}}):w}return r(r({},l),{schema:r(r({},f),{primaryKey:o,indexes:g,getIndexByKeyPath:function(w){return(w=d[$r(w)])&&w[0]}}),count:function(w){return l.count(C(w))},query:function(w){return l.query(C(w))},openCursor:function(w){var A=w.query.index,E=A.keyTail,T=A.isVirtual,j=A.keyLength;return T?l.openCursor(C(w)).then(function($){return $&&O($)}):l.openCursor(w);function O($){return Object.create($,{continue:{value:function(L){L!=null?$.continue(Ti(L,w.reverse?i.MAX_KEY:i.MIN_KEY,E)):w.unique?$.continue($.key.slice(0,j).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,E)):$.continue()}},continuePrimaryKey:{value:function(L,F){$.continuePrimaryKey(Ti(L,i.MAX_KEY,E),F)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var L=$.key;return j===1?L[0]:L.slice(0,j)}},value:{get:function(){return $.value}}})}}})}})}};function Hs(i,o,l,f){return l=l||{},f=f||"",u(i).forEach(function(d){var g,m,_;b(o,d)?(g=i[d],m=o[d],typeof g=="object"&&typeof m=="object"&&g&&m?(_=at(g))!==at(m)?l[f+d]=o[d]:_==="Object"?Hs(g,m,l,f+d+"."):g!==m&&(l[f+d]=o[d]):g!==m&&(l[f+d]=o[d])):l[f+d]=void 0}),u(o).forEach(function(d){b(i,d)||(l[f+d]=o[d])}),l}function Vs(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var Mc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),f=l.schema.primaryKey;return r(r({},l),{mutate:function(d){var g=fe.trans,m=g.table(o).hook,_=m.deleting,S=m.creating,x=m.updating;switch(d.type){case"add":if(S.fire===be)break;return g._promise("readwrite",function(){return C(d)},!0);case"put":if(S.fire===be&&x.fire===be)break;return g._promise("readwrite",function(){return C(d)},!0);case"delete":if(_.fire===be)break;return g._promise("readwrite",function(){return C(d)},!0);case"deleteRange":if(_.fire===be)break;return g._promise("readwrite",function(){return function w(A,E,T){return l.query({trans:A,values:!1,query:{index:f,range:E},limit:T}).then(function(j){var O=j.result;return C({type:"delete",keys:O,trans:A}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):O.length<T?{failures:[],numFailures:0,lastResult:void 0}:w(A,r(r({},E),{lower:O[O.length-1],lowerOpen:!0}),T)})})}(d.trans,d.range,1e4)},!0)}return l.mutate(d);function C(w){var A,E,T,j=fe.trans,O=w.keys||Vs(f,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:O}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),A=l,T=O,((E=w).type==="add"?Promise.resolve([]):A.getMany({trans:E.trans,keys:T,cache:"immutable"})).then(function($){var L=O.map(function(F,U){var G,ne,Q,te=$[U],re={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(re,F,te,j):w.type==="add"||te===void 0?(G=S.fire.call(re,F,w.values[U],j),F==null&&G!=null&&(w.keys[U]=F=G,f.outbound||_e(w.values[U],f.keyPath,F))):(G=Hs(te,w.values[U]),(ne=x.fire.call(re,G,F,te,j))&&(Q=w.values[U],Object.keys(ne).forEach(function(z){b(Q,z)?Q[z]=ne[z]:_e(Q,z,ne[z])}))),re});return l.mutate(w).then(function(F){for(var U=F.failures,G=F.results,ne=F.numFailures,F=F.lastResult,Q=0;Q<O.length;++Q){var te=(G||O)[Q],re=L[Q];te==null?re.onerror&&re.onerror(U[Q]):re.onsuccess&&re.onsuccess(w.type==="put"&&$[Q]?w.values[Q]:te)}return{failures:U,results:G,numFailures:ne,lastResult:F}}).catch(function(F){return L.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}}})}})}};function Ia(i,o,l){try{if(!o||o.keys.length<i.length)return null;for(var f=[],d=0,g=0;d<o.keys.length&&g<i.length;++d)Ne(o.keys[d],i[g])===0&&(f.push(l?ye(o.values[d]):o.values[d]),++g);return f.length===i.length?f:null}catch{return null}}var Uc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var l=i.table(o);return r(r({},l),{getMany:function(f){if(!f.cache)return l.getMany(f);var d=Ia(f.keys,f.trans._cache,f.cache==="clone");return d?ae.resolve(d):l.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ye(g):g},g})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),l.mutate(f)}})}}}};function Da(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function $a(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kc={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,l=new jt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(f,d,g){if(fe.subscr&&d!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return i.transaction(f,d,g)},table:function(f){var d=i.table(f),g=d.schema,m=g.primaryKey,w=g.indexes,_=m.extractKey,S=m.outbound,x=m.autoIncrement&&w.filter(function(E){return E.compound&&E.keyPath.includes(m.keyPath)}),C=r(r({},d),{mutate:function(E){function T(z){return z="idb://".concat(o,"/").concat(f,"/").concat(z),F[z]||(F[z]=new jt)}var j,O,$,L=E.trans,F=E.mutatedParts||(E.mutatedParts={}),U=T(""),G=T(":dels"),ne=E.type,re=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[Vs(m,E).filter(function(z){return z}),E.values]:[],Q=re[0],te=re[1],re=E.trans._cache;return c(Q)?(U.addKeys(Q),(re=ne==="delete"||Q.length===te.length?Ia(Q,re):null)||G.addKeys(Q),(re||te)&&(j=T,O=re,$=te,g.indexes.forEach(function(z){var Ee=j(z.name||"");function Te(Ie){return Ie!=null?z.extractKey(Ie):null}function Me(Ie){return z.multiEntry&&c(Ie)?Ie.forEach(function(Gt){return Ee.addKey(Gt)}):Ee.addKey(Ie)}(O||$).forEach(function(Ie,kt){var De=O&&Te(O[kt]),kt=$&&Te($[kt]);Ne(De,kt)!==0&&(De!=null&&Me(De),kt!=null&&Me(kt))})}))):Q?(te={from:Q.lower,to:Q.upper},G.add(te),U.add(te)):(U.add(l),G.add(l),g.indexes.forEach(function(z){return T(z.name).add(l)})),d.mutate(E).then(function(z){return!Q||E.type!=="add"&&E.type!=="put"||(U.addKeys(z.results),x&&x.forEach(function(Ee){var Te=E.values.map(function(Ie){return Ee.extractKey(Ie)}),Me=Ee.keyPath.findIndex(function(Ie){return Ie===m.keyPath});z.results.forEach(function(Ie){return Te[Me]=Ie}),T(Ee.name).addKeys(Te)})),L.mutatedParts=Si(L.mutatedParts||{},F),z})}}),w=function(T){var j=T.query,T=j.index,j=j.range;return[T,new jt((T=j.lower)!==null&&T!==void 0?T:i.MIN_KEY,(j=j.upper)!==null&&j!==void 0?j:i.MAX_KEY)]},A={get:function(E){return[m,new jt(E.key)]},getMany:function(E){return[m,new jt().addKeys(E.keys)]},count:w,query:w,openCursor:w};return u(A).forEach(function(E){C[E]=function(T){var j=fe.subscr,O=!!j,$=Da(fe,d)&&$a(E,T)?T.obsSet={}:j;if(O){var L=function(te){return te="idb://".concat(o,"/").concat(f,"/").concat(te),$[te]||($[te]=new jt)},F=L(""),U=L(":dels"),j=A[E](T),O=j[0],j=j[1];if((E==="query"&&O.isPrimaryKey&&!T.values?U:L(O.name||"")).add(j),!O.isPrimaryKey){if(E!=="count"){var G=E==="query"&&S&&T.values&&d.query(r(r({},T),{values:!1}));return d[E].apply(this,arguments).then(function(te){if(E==="query"){if(S&&T.values)return G.then(function(Te){return Te=Te.result,F.addKeys(Te),te});var re=T.values?te.result.map(_):te.result;(T.values?F:U).addKeys(re)}else if(E==="openCursor"){var z=te,Ee=T.values;return z&&Object.create(z,{key:{get:function(){return U.addKey(z.primaryKey),z.key}},primaryKey:{get:function(){var Te=z.primaryKey;return U.addKey(Te),Te}},value:{get:function(){return Ee&&F.addKey(z.primaryKey),z.value}}})}return te})}U.add(l)}}return d[E].apply(this,arguments)}}),C}})}};function La(i,o,l){if(l.numFailures===0)return o;if(o.type==="deleteRange")return null;var f=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return l.numFailures===f?null:(o=r({},o),c(o.keys)&&(o.keys=o.keys.filter(function(d,g){return!(g in l.failures)})),"values"in o&&c(o.values)&&(o.values=o.values.filter(function(d,g){return!(g in l.failures)})),o)}function Ws(i,o){return l=i,((f=o).lower===void 0||(f.lowerOpen?0<Ne(l,f.lower):0<=Ne(l,f.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?Ne(i,o.upper)<0:Ne(i,o.upper)<=0));var l,f}function Fa(i,o,A,f,d,g){if(!A||A.length===0)return i;var m=o.query.index,_=m.multiEntry,S=o.query.range,x=f.schema.primaryKey.extractKey,C=m.extractKey,w=(m.lowLevelIndex||m).extractKey,A=A.reduce(function(E,T){var j=E,O=[];if(T.type==="add"||T.type==="put")for(var $=new jt,L=T.values.length-1;0<=L;--L){var F,U=T.values[L],G=x(U);$.hasKey(G)||(F=C(U),(_&&c(F)?F.some(function(re){return Ws(re,S)}):Ws(F,S))&&($.addKey(G),O.push(U)))}switch(T.type){case"add":j=E.concat(o.values?O:O.map(function(z){return x(z)}));break;case"put":var ne=new jt().addKeys(T.values.map(function(z){return x(z)})),j=E.filter(function(z){return!ne.hasKey(o.values?x(z):z)}).concat(o.values?O:O.map(function(z){return x(z)}));break;case"delete":var Q=new jt().addKeys(T.keys);j=E.filter(function(z){return!Q.hasKey(o.values?x(z):z)});break;case"deleteRange":var te=T.range;j=E.filter(function(z){return!Ws(x(z),te)})}return j},i);return A===i?i:(A.sort(function(E,T){return Ne(w(E),w(T))||Ne(x(E),x(T))}),o.limit&&o.limit<1/0&&(A.length>o.limit?A.length=o.limit:i.length===o.limit&&A.length<o.limit&&(d.dirty=!0)),g?Object.freeze(A):A)}function Ma(i,o){return Ne(i.lower,o.lower)===0&&Ne(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Bc(i,o){return function(l,f,d,g){if(l===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=Ne(l,f))===0){if(d&&g)return 0;if(d)return 1;if(g)return-1}return f}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(l,f,d,g){if(l===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=Ne(l,f))===0){if(d&&g)return 0;if(d)return-1;if(g)return 1}return f}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function Nc(i,o,l,f){i.subscribers.add(l),f.addEventListener("abort",function(){var d,g;i.subscribers.delete(l),i.subscribers.size===0&&(d=i,g=o,setTimeout(function(){d.subscribers.size===0&&me(g,d)},3e3))})}var qc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(l,f,d){var g,m,_=i.transaction(l,f,d);return f==="readwrite"&&(m=(g=new AbortController).signal,d=function(S){return function(){if(g.abort(),f==="readwrite"){for(var x=new Set,C=0,w=l;C<w.length;C++){var A=w[C],E=Bn["idb://".concat(o,"/").concat(A)];if(E){var T=i.table(A),j=E.optimisticOps.filter(function(Ee){return Ee.trans===_});if(_._explicit&&S&&_.mutatedParts)for(var O=0,$=Object.values(E.queries.query);O<$.length;O++)for(var L=0,F=(ne=$[O]).slice();L<F.length;L++)Us((Q=F[L]).obsSet,_.mutatedParts)&&(me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)}));else if(0<j.length){E.optimisticOps=E.optimisticOps.filter(function(Ee){return Ee.trans!==_});for(var U=0,G=Object.values(E.queries.query);U<G.length;U++)for(var ne,Q,te,re=0,z=(ne=G[U]).slice();re<z.length;re++)(Q=z[re]).res!=null&&_.mutatedParts&&(S&&!Q.dirty?(te=Object.isFrozen(Q.res),te=Fa(Q.res,Q.req,j,T,Q,te),Q.dirty?(me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})):te!==Q.res&&(Q.res=te,Q.promise=ae.resolve({result:te}))):(Q.dirty&&me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})))}}}x.forEach(function(Ee){return Ee()})}}},_.addEventListener("abort",d(!1),{signal:m}),_.addEventListener("error",d(!1),{signal:m}),_.addEventListener("complete",d(!0),{signal:m})),_},table:function(l){var f=i.table(l),d=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var m=fe.trans;if(d.outbound||m.db._options.cache==="disabled"||m.explicit)return f.mutate(g);var _=Bn["idb://".concat(o,"/").concat(l)];return _?(m=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Vs(d,g).some(function(S){return S==null}))?(_.optimisticOps.push(g),g.mutatedParts&&Oi(g.mutatedParts),m.then(function(S){0<S.numFailures&&(me(_.optimisticOps,g),(S=La(0,g,S))&&_.optimisticOps.push(S),g.mutatedParts&&Oi(g.mutatedParts))}),m.catch(function(){me(_.optimisticOps,g),g.mutatedParts&&Oi(g.mutatedParts)})):m.then(function(S){var x=La(0,r(r({},g),{values:g.values.map(function(E,w){var A,E=(A=d.keyPath)!==null&&A!==void 0&&A.includes(".")?ye(E):r({},E);return _e(E,d.keyPath,S.results[w]),E})}),S);_.optimisticOps.push(x),queueMicrotask(function(){return g.mutatedParts&&Oi(g.mutatedParts)})}),m):f.mutate(g)},query:function(g){if(!Da(fe,f)||!$a("query",g))return f.query(g);var m=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",w=fe,_=w.requery,S=w.signal,x=function(T,j,O,$){var L=Bn["idb://".concat(T,"/").concat(j)];if(!L)return[];if(!(j=L.queries[O]))return[null,!1,L,null];var F=j[($.query?$.query.index.name:null)||""];if(!F)return[null,!1,L,null];switch(O){case"query":var U=F.find(function(G){return G.req.limit===$.limit&&G.req.values===$.values&&Ma(G.req.query.range,$.query.range)});return U?[U,!0,L,F]:[F.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=$.limit&&(!$.values||G.req.values)&&Bc(G.req.query.range,$.query.range)}),!1,L,F];case"count":return U=F.find(function(G){return Ma(G.req.query.range,$.query.range)}),[U,!!U,L,F]}}(o,l,"query",g),C=x[0],w=x[1],A=x[2],E=x[3];return C&&w?C.obsSet=g.obsSet:(w=f.query(g).then(function(T){var j=T.result;if(C&&(C.res=j),m){for(var O=0,$=j.length;O<$;++O)Object.freeze(j[O]);Object.freeze(j)}else T.result=ye(j);return T}).catch(function(T){return E&&C&&me(E,C),Promise.reject(T)}),C={obsSet:g.obsSet,promise:w,subscribers:new Set,type:"query",req:g,dirty:!1},E?E.push(C):(E=[C],(A=A||(Bn["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=E)),Nc(C,E,_,S),C.promise.then(function(T){return{result:Fa(T.result,g,A==null?void 0:A.optimisticOps,f,C,m)}})}})}})}};function Pi(i,o){return new Proxy(i,{get:function(l,f,d){return f==="db"?o:Reflect.get(l,f,d)}})}var fn=(gt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new q.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,l=o.filter(function(f){return f._cfg.version===i})[0];return l||(l=new this.Version(i),o.push(l),o.sort(Rc),l.stores({}),this._state.autoSchema=!1,l)},gt.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?i():new ae(function(l,f){if(o._state.openComplete)return f(new q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void f(new q.DatabaseClosed);o.open().catch(be)}o._state.dbReadyPromise.then(l,f)}).then(i)},gt.prototype.use=function(i){var o=i.stack,l=i.create,f=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:l,level:f??10,name:d}),i.sort(function(g,m){return g.level-m.level}),this},gt.prototype.unuse=function(i){var o=i.stack,l=i.name,f=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return f?d.create!==f:!!l&&d.name!==l})),this},gt.prototype.open=function(){var i=this;return Mn(et,function(){return Lc(i)})},gt.prototype._close=function(){var i=this._state,o=sr.indexOf(this);if(0<=o&&sr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new ae(function(l){i.dbReadyResolve=l}),i.openCanceller=new ae(function(l,f){i.cancelOpen=f}))},gt.prototype.close=function(l){var o=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;o?(l.isBeingOpened&&l.cancelOpen(new q.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new q.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},gt.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ae(function(d,g){function m(){o.close(i);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=lt(function(){var S,x,C;S=o._deps,x=o.name,C=S.indexedDB,S=S.IDBKeyRange,Ls(C)||x===di||$s(C,S).delete(x).catch(be),d()}),_.onerror=en(g),_.onblocked=o._fireOnBlocked}if(l)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(m):m()})},gt.prototype.backendDB=function(){return this.idbdb},gt.prototype.isOpen=function(){return this.idbdb!==null},gt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gt.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),gt.prototype.transaction=function(){var i=(function(o,l,f){var d=arguments.length;if(d<2)throw new q.InvalidArgument("Too few arguments");for(var g=new Array(d-1);--d;)g[d-1]=arguments[d];return f=g.pop(),[o,W(g),f]}).apply(this,arguments);return this._transaction.apply(this,i)},gt.prototype._transaction=function(i,o,l){var f=this,d=fe.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var g,m,_=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(m=o.map(function(x){if(x=x instanceof f.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),i=="r"||i===xs)g=xs;else{if(i!="rw"&&i!=Es)throw new q.InvalidArgument("Invalid transaction mode: "+i);g=Es}if(d){if(d.mode===xs&&g===Es){if(!_)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&m.forEach(function(x){if(d&&d.storeNames.indexOf(x)===-1){if(!_)throw new q.SubTransaction("Table "+x+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(x){return d?d._promise(null,function(C,w){w(x)}):pt(x)}var S=(function x(C,w,A,E,T){return ae.resolve().then(function(){var j=fe.transless||fe,O=C._createTransaction(w,A,C._dbSchema,E);if(O.explicit=!0,j={trans:O,transless:j},E)O.idbtrans=E.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,C._state.PR1398_maxLoop=3}catch(F){return F.name===Xe.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return x(C,w,A,null,T)})):pt(F)}var $,L=Qe(T);return L&&ir(),j=ae.follow(function(){var F;($=T.call(O,O))&&(L?(F=wn.bind(null,null),$.then(F,F)):typeof $.next=="function"&&typeof $.throw=="function"&&($=qs($)))},j),($&&typeof $.then=="function"?ae.resolve($).then(function(F){return O.active?F:pt(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):j.then(function(){return $})).then(function(F){return E&&O._resolve(),O._completion.then(function(){return F})}).catch(function(F){return O._reject(F),pt(F)})})}).bind(null,this,g,m,d,l);return d?d._promise(g,S,"lock"):fe.trans?Mn(fe.transless,function(){return f._whenReady(S)}):this._whenReady(S)},gt.prototype.table=function(i){if(!b(this._allTables,i))throw new q.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},gt);function gt(i,o){var l=this;this._middlewares={},this.verno=0;var f=gt.dependencies;this._options=o=r({addons:gt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},f=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,g,m,_,S,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};x.dbReadyPromise=new ae(function(w){x.dbReadyResolve=w}),x.openCanceller=new ae(function(w,A){x.cancelOpen=A}),this._state=x,this.name=i,this.on=Cr(this,"populate","blocked","versionchange","close",{ready:[J,be]}),this.on.ready.subscribe=Re(this.on.ready.subscribe,function(w){return function(A,E){gt.vip(function(){var T,j=l._state;j.openComplete?(j.dbOpenError||ae.resolve().then(A),E&&w(A)):j.onReadyBeingFired?(j.onReadyBeingFired.push(A),E&&w(A)):(w(A),T=l,E||w(function O(){T.on.ready.unsubscribe(A),T.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,Ar(Sc.prototype,function($,O){this.db=d;var E=ga,T=null;if(O)try{E=O()}catch(L){T=L}var j=$._ctx,O=j.table,$=O.hook.reading.fire;this._ctx={table:O,index:j.index,isPrimKey:!j.index||O.schema.primKey.keyPath&&j.index===O.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:j.or,valueMapper:$!==v?$:null}})),this.Table=(g=this,Ar(_a.prototype,function(w,A,E){this.db=g,this._tx=E,this.name=w,this.schema=A,this.hook=g._allTables[w]?g._allTables[w].hook:Cr(null,{creating:[M,be],reading:[k,v],updating:[N,be],deleting:[B,be]})})),this.Transaction=(m=this,Ar(Pc.prototype,function(w,A,E,T,j){var O=this;this.db=m,this.mode=w,this.storeNames=A,this.schema=E,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=Cr(this,"complete","error","abort"),this.parent=j||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ae(function($,L){O._resolve=$,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function($){var L=O.active;return O.active=!1,O.on.error.fire($),O.parent?O.parent._reject($):L&&O.idbtrans&&O.idbtrans.abort(),pt($)})})),this.Version=(_=this,Ar($c.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,Ar(Ea.prototype,function(w,A,E){if(this.db=S,this._ctx={table:w,index:A===":id"?null:A,or:E},this._cmp=this._ascending=Ne,this._descending=function(T,j){return Ne(j,T)},this._max=function(T,j){return 0<Ne(T,j)?T:j},this._min=function(T,j){return Ne(T,j)<0?T:j},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Dr(o.IDBKeyRange),this._createTransaction=function(w,A,E,T){return new l.Transaction(w,A,E,l._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(w){l.on("blocked").fire(w),sr.filter(function(A){return A.name===l.name&&A!==l&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(w)})},this.use(Uc),this.use(qc),this.use(Kc),this.use(Fc),this.use(Mc);var C=new Proxy(this,{get:function(w,A,E){if(A==="_vip")return!0;if(A==="table")return function(j){return Pi(l.table(j),C)};var T=Reflect.get(w,A,E);return T instanceof _a?Pi(T,C):A==="tables"?T.map(function(j){return Pi(j,C)}):A==="_createTransaction"?function(){return Pi(T.apply(this,arguments),C)}:T}});this.vip=C,f.forEach(function(w){return w(l)})}var Ci,Wt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hc=(zs.prototype.subscribe=function(i,o,l){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:l})},zs.prototype[Wt]=function(){return this},zs);function zs(i){this._subscribe=i}try{Ci={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Ci={indexedDB:null,IDBKeyRange:null}}function Ua(i){var o,l=!1,f=new Hc(function(d){var g=Qe(i),m,_=!1,S={},x={},C={get closed(){return _},unsubscribe:function(){_||(_=!0,m&&m.abort(),w&&En.storagemutated.unsubscribe(E))}};d.start&&d.start(C);var w=!1,A=function(){return ks(T)},E=function(j){Si(S,j),Us(x,S)&&A()},T=function(){var j,O,$;!_&&Ci.indexedDB&&(S={},j={},m&&m.abort(),m=new AbortController,$=function(L){var F=nr();try{g&&ir();var U=bn(i,L);return U=g?U.finally(wn):U}finally{F&&rr()}}(O={subscr:j,signal:m.signal,requery:A,querier:i,trans:null}),Promise.resolve($).then(function(L){l=!0,o=L,_||O.signal.aborted||(S={},function(F){for(var U in F)if(b(F,U))return;return 1}(x=j)||w||(En(Ir,E),w=!0),ks(function(){return!_&&d.next&&d.next(L)}))},function(L){l=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||ks(function(){_||d.error&&d.error(L)})}))};return setTimeout(A,0),C});return f.hasValue=function(){return l},f.getValue=function(){return o},f}var Nn=fn;function Js(i){var o=Sn;try{Sn=!0,En.storagemutated.fire(i),Ns(i,!0)}finally{Sn=o}}P(Nn,r(r({},He),{delete:function(i){return new Nn(i,{addons:[]}).delete()},exists:function(i){return new Nn(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Nn.dependencies,l=o.indexedDB,o=o.IDBKeyRange,(Ls(l)?Promise.resolve(l.databases()).then(function(f){return f.map(function(d){return d.name}).filter(function(d){return d!==di})}):$s(l,o).toCollection().primaryKeys()).then(i)}catch{return pt(new q.MissingAPI)}var o,l},defineClass:function(){return function(i){h(this,i)}},ignoreTransaction:function(i){return fe.trans?Mn(fe.transless,i):i()},vip:Fs,async:function(i){return function(){try{var o=qs(i.apply(this,arguments));return o&&typeof o.then=="function"?o:ae.resolve(o)}catch(l){return pt(l)}}},spawn:function(i,o,l){try{var f=qs(i.apply(l,o||[]));return f&&typeof f.then=="function"?f:ae.resolve(f)}catch(d){return pt(d)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(i,o){return o=ae.resolve(typeof i=="function"?Nn.ignoreTransaction(i):i).timeout(o||6e4),fe.trans?fe.trans.waitFor(o):o},Promise:ae,debug:{get:function(){return H},set:function(i){K(i)}},derive:le,extend:h,props:P,override:Re,Events:Cr,on:En,liveQuery:Ua,extendObservabilitySet:Si,getByKeyPath:Ye,setByKeyPath:_e,delByKeyPath:function(i,o){typeof o=="string"?_e(i,o,void 0):"length"in o&&[].map.call(o,function(l){_e(i,l,void 0)})},shallowClone:I,deepClone:ye,getObjectDiff:Hs,cmp:Ne,asap:Le,minKey:-1/0,addons:[],connections:sr,errnames:Xe,dependencies:Ci,cache:Bn,semVer:"4.0.8",version:"4.0.8".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,l){return i+o/Math.pow(10,2*l)})})),Nn.maxKey=Dr(Nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(En(Ir,function(i){Sn||(i=new CustomEvent(Ps,{detail:i}),Sn=!0,dispatchEvent(i),Sn=!1)}),addEventListener(Ps,function(i){i=i.detail,Sn||Js(i)}));var ur,Sn=!1,Ka=function(){};return typeof BroadcastChannel<"u"&&((Ka=function(){(ur=new BroadcastChannel(Ps)).onmessage=function(i){return i.data&&Js(i.data)}})(),typeof ur.unref=="function"&&ur.unref(),En(Ir,function(i){Sn||ur.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!fn.disableBfCache&&i.persisted){H&&console.debug("Dexie: handling persisted pagehide"),ur!=null&&ur.close();for(var o=0,l=sr;o<l.length;o++)l[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!fn.disableBfCache&&i.persisted&&(H&&console.debug("Dexie: handling persisted pageshow"),Ka(),Js({all:new jt(-1/0,[[]])}))})),ae.rejectionMapper=function(i,o){return!i||i instanceof Ke||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Fe[i.name]?i:(o=new Fe[i.name](o||i.message,i),"stack"in i&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},K(H),r(fn,Object.freeze({__proto__:null,Dexie:fn,liveQuery:Ua,Entity:ya,cmp:Ne,PropModSymbol:hn,PropModification:jr,replacePrefix:function(i,o){return new jr({replacePrefix:[i,o]})},add:function(i){return new jr({add:i})},remove:function(i){return new jr({remove:i})},default:fn,RangeSet:jt,mergeRanges:Fr,rangesOverlap:Ca}),{default:fn}),fn})})(Gl);var Td=Gl.exports;const Oo=zl(Td),Eu=Symbol.for("Dexie"),To=globalThis[Eu]||(globalThis[Eu]=Oo);if(Oo.semVer!==To.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Oo.semVer} and ${To.semVer}`);const qt=new To("DictionaryDB");qt.version(1).stores({words:"id,type,chinese,romaji,classification,audioid,english",definitions:"defid,wordid,partofspeech,def_chinese,def_english"});async function Pd(t,e){let n=[],r=[],s=[];if(e)n=await qt.words.where("english").equalsIgnoreCase(t).toArray(),r=await qt.words.where("chinese").equalsIgnoreCase(t).toArray(),s=await qt.words.where("romaji").equalsIgnoreCase(t).toArray();else{const y=await qt.words.toArray();console.log(y.filter(p=>p.english.length>15)),r=y.filter(p=>p.chinese.includes(t)),n=y.filter(p=>typeof p.english=="string"&&p.english.includes(t)),s=y.filter(p=>typeof p.romaji=="string"&&p.romaji.includes(t))}const a=[...s,...n,...r].reduce((y,p)=>(y.find(P=>P.id===p.id)||y.push(p),y),[]),u=a.map(y=>y.id),c=await qt.definitions.where("wordid").anyOf(u).toArray(),h=a.map(y=>{const p=c.filter(P=>P.wordid===y.id).map(P=>P.def_english),b=c.filter(P=>P.wordid===y.id).map(P=>P.def_chinese);return{word:y,english_definitions:p.length?p:[],chinese_definitions:b.length?b:[]}});return console.log(h),h}async function Cd(){try{const e=await(await fetch("./src/assets/taigiwords.csv")).text(),r=await(await fetch("./src/assets/taigidefs.csv")).text();xu.parse(e,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await qt.words.clear(),await qt.words.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}}),xu.parse(r,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await qt.definitions.clear(),await qt.definitions.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}})}catch(t){console.error("Error loading CSV file:",t)}}const si=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Ad={},jd={class:"play-audio",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Rd(t,e){return ct(),yt("svg",jd,e[0]||(e[0]=[de("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.9177 4.9473L19.4897 4.3313L18.2577 5.1873L18.6857 5.8023C21.3027 9.5713 21.3027 14.4363 18.6857 18.1973L18.2577 18.8123L19.4887 19.6693L19.9177 19.0533C22.8497 14.8393 22.8497 9.1703 19.9177 4.9473Z",fill:"gray"},null,-1),de("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.2312 7.6226L16.8582 6.9716L15.5572 7.7166L15.9292 8.3676C17.2142 10.6126 17.2142 13.3966 15.9302 15.6336L15.5562 16.2836L16.8572 17.0306L17.2312 16.3806C18.7792 13.6836 18.7792 10.3276 17.2312 7.6226Z",fill:"gray"},null,-1),de("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.0788 7.564H2.3848V8.064C2.3828 10.688 2.3828 13.312 2.3848 15.937V16.436H7.0788L11.2048 20.013H12.6678V3.987H11.2048L7.0788 7.564Z",fill:"gray"},null,-1)]))}const ia=si(Ad,[["render",Rd]]),Id={props:{audioID:{type:String,required:!0}},components:{IconPlayAudio:ia},data(){return{isPlaying:!1,baseSrc:"src/assets/audio_taigi/"}},computed:{fullSrc(){return`${this.baseSrc}${getAudioFolder(this.audioid)}/${audioid}.mp3`}},methods:{togglePlay(){const t=this.$refs.audio;this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying},audioEnded(){this.isPlaying=!1,console.log("Audio has finished playing.")},getAudioFolder(t){if(console.log(t),t){const e=parseInt(t.match(/^(\d+)\(/)[1]);return e<1e3?"0":e>=1e3&&e<2e3?"1":e>=2e3&&e<3e3?"2":e>=3e3&&e<4e3?"3":e>=4e3&&e<5e3?"4":e>=5e3&&e<6e3?"5":e>=6e3&&e<7e3?"6":e>=7e3&&e<8e3?"7":e>=8e3&&e<9e3?"8":e>=9e3&&e<1e4?"9":e>=1e4&&e<11e3?"10":e>=11e3&&e<12e3?"11":e>=12e3&&e<13e3?"12":e>=13e3&&e<14e3?"13":e>=14e3&&e<15e3?"14":e>=15e3&&e<16e3?"15":e>=16e3&&e<17e3?"16":e>=17e3&&e<18e3?"17":e>=18e3&&e<19e3?"18":e>=19e3&&e<2e4?"19":e>=2e4&&e<21e3?"20":e>=21e3&&e<22e3?"21":e>=22e3&&e<23e3?"22":e>=23e3&&e<24e3?"23":e>=24e3&&e<25e3?"24":e>=25e3&&e<26e3?"25":e>=26e3&&e<27e3?"26":e>=27e3&&e<28e3?"27":e>=28e3&&e<29e3?"28":"Out of range"}}},mounted(){this.$refs.audio},beforeDestroy(){this.$refs.audio}},Dd={class:"audio-player"},$d=["src"];function Ld(t,e,n,r,s,a){const u=zi("IconPlayAudio");return ct(),yt("div",Dd,[de("audio",{ref:"audio",src:`${this.baseSrc}${a.getAudioFolder(n.audioID)}/${n.audioID}.mp3`,onEnded:e[0]||(e[0]=(...c)=>a.audioEnded&&a.audioEnded(...c))},null,40,$d),Tt(u,{onClick:a.togglePlay},null,8,["onClick"])])}const Ql=si(Id,[["render",Ld],["__scopeId","data-v-ce97b142"]]),Fd={components:{AudioPlayerTaigi:Ql,IconPlayAudio:ia},data(){return{searchTerm:"",results:[],defs:[],exactSearch:!1}},methods:{async searchWords(t,e){this.searchTerm?this.results=await Pd(t,e):this.results=[]},async speakChinese(t){const e=new SpeechSynthesisUtterance(t);e.lang="zh-TW",window.speechSynthesis.speak(e)},async speakEnglish(t){const e=new SpeechSynthesisUtterance(t);e.lang="en-GB",window.speechSynthesis.speak(e)}}},Md={id:"main-search-container"},Ud={id:"exact_search",for:"exactSearch"},Kd={class:"result-count"},Bd={key:0,class:"results"},Nd={class:"entry-items"},qd={class:"entry-item english-entry"},Hd={class:"entry-item chinese-entry"},Vd={class:"entry-item taigi-entry"},Wd={class:"definitions"},zd={key:0},Jd={key:1};function Gd(t,e,n,r,s,a){const u=zi("IconPlayAudio"),c=zi("AudioPlayerTaigi");return ct(),yt("div",null,[de("div",Md,[sn(de("input",{id:"main-search","onUpdate:modelValue":e[0]||(e[0]=h=>s.searchTerm=h),placeholder:"Search for a word",onKeyup:e[1]||(e[1]=Wl(h=>a.searchWords(s.searchTerm,s.exactSearch),["enter"])),type:"search",autocapitalize:"off",class:"search-field"},null,544),[[gn,s.searchTerm]]),de("button",{class:"search-button",onClick:e[2]||(e[2]=h=>a.searchWords(s.searchTerm,s.exactSearch))}," Search ")]),de("label",Ud,[sn(de("input",{id:"exactSearch",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=h=>s.exactSearch=h),checked:""},null,512),[[gd,s.exactSearch]]),e[4]||(e[4]=Xt("Exact search"))]),de("div",Kd,Dt(s.results.length)+" results found",1),s.results.length?(ct(),yt("ul",Bd,[(ct(!0),yt(St,null,br(s.results,(h,y)=>(ct(),yt("li",{class:"entry",key:y},[de("div",Nd,[de("div",qd,[Xt(Dt(h.word.english)+" ",1),Tt(u,{onClick:p=>a.speakEnglish(h.word.english)},null,8,["onClick"])]),de("div",Hd,[Xt(Dt(h.word.chinese)+" ",1),Tt(u,{onClick:p=>a.speakChinese(h.word.chinese)},null,8,["onClick"])]),de("div",Vd,[Xt(Dt(h.word.romaji)+" ",1),h.word.audioid?(ct(),na(c,{key:0,audioID:h.word.audioid},null,8,["audioID"])):gr("",!0)])]),de("div",Wd,[h.english_definitions?(ct(),yt("ol",zd,[(ct(!0),yt(St,null,br(h.english_definitions,(p,b)=>(ct(),yt("li",null,[Xt(Dt(p)+" ",1),Tt(u,{onClick:P=>a.speakEnglish(p)},null,8,["onClick"])]))),256))])):gr("",!0),h.chinese_definitions?(ct(),yt("ol",Jd,[(ct(!0),yt(St,null,br(h.chinese_definitions,(p,b)=>(ct(),yt("li",null,[Xt(Dt(p)+" ",1),Tt(u,{onClick:P=>a.speakChinese(p)},null,8,["onClick"])]))),256))])):gr("",!0)])]))),128))])):gr("",!0)])}const Qd=si(Fd,[["render",Gd]]),Yd="modulepreload",Xd=function(t){return"/taigi-dict-app/"+t},Su={},Sr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(n.map(h=>{if(h=Xd(h),h in Su)return;Su[h]=!0;const y=h.endsWith(".css"),p=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Yd,y||(b.as="script"),b.crossOrigin="",b.href=h,c&&b.setAttribute("nonce",c),document.head.appendChild(b),y)return new Promise((P,V)=>{b.addEventListener("load",P),b.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return s.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Zd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Tr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sa extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ep extends sa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tp extends sa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class np extends sa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Po;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Po||(Po={}));var rp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};class ip{constructor(e,{headers:n={},customFetch:r,region:s=Po.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Zd(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return rp(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:u}=n;let c={},{region:h}=n;h||(h=this.region),h&&h!=="any"&&(c["x-region"]=h);let y;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(c["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(c["Content-Type"]="application/json",y=JSON.stringify(u)));const p=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:y}).catch(se=>{throw new ep(se)}),b=p.headers.get("x-relay-error");if(b&&b==="true")throw new tp(p);if(!p.ok)throw new np(p);let P=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),V;return P==="application/json"?V=yield p.json():P==="application/octet-stream"?V=yield p.blob():P==="text/event-stream"?V=p:P==="multipart/form-data"?V=yield p.formData():V=yield p.text(),{data:V,error:null}}catch(s){return{data:null,error:s}}})}}var Mt={},oa={},hs={},oi={},fs={},ds={},sp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Or=sp();const op=Or.fetch,Yl=Or.fetch.bind(Or),Xl=Or.Headers,ap=Or.Request,up=Or.Response,Tr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xl,Request:ap,Response:up,default:Yl,fetch:op},Symbol.toStringTag,{value:"Module"})),lp=Sd(Tr);var ps={};Object.defineProperty(ps,"__esModule",{value:!0});class cp extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}ps.default=cp;var Zl=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ds,"__esModule",{value:!0});const hp=Zl(lp),fp=Zl(ps);let dp=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=hp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var u,c,h;let y=null,p=null,b=null,P=a.status,V=a.statusText;if(a.ok){if(this.method!=="HEAD"){const we=await a.text();we===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=we:p=JSON.parse(we))}const le=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),ve=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");le&&ve&&ve.length>1&&(b=parseInt(ve[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(y={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,b=null,P=406,V="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const le=await a.text();try{y=JSON.parse(le),Array.isArray(y)&&a.status===404&&(p=[],y=null,P=200,V="OK")}catch{a.status===404&&le===""?(P=204,V="No Content"):y={message:le}}if(y&&this.isMaybeSingle&&(!((h=y==null?void 0:y.details)===null||h===void 0)&&h.includes("0 rows"))&&(y=null,P=200,V="OK"),y&&this.shouldThrowOnError)throw new fp.default(y)}return{error:y,data:p,count:b,status:P,statusText:V}});return this.shouldThrowOnError||(s=s.catch(a=>{var u,c,h;return{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(h=a==null?void 0:a.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};ds.default=dp;var pp=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});const gp=pp(ds);let yp=class extends gp.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const u=a?`${a}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:u="text"}={}){var c;const h=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${y}"; options=${h};`,u==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fs.default=yp;var mp=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oi,"__esModule",{value:!0});const vp=mp(fs);let _p=class extends vp.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};oi.default=_p;var bp=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hs,"__esModule",{value:!0});const Kr=bp(oi);let wp=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const u=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const u="POST",c=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const h=e.reduce((y,p)=>y.concat(Object.keys(p)),[]);if(h.length>0){const y=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",y.join(","))}}return new Kr.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Kr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hs.default=wp;var gs={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.version=void 0;ys.version="0.0.0-automated";Object.defineProperty(gs,"__esModule",{value:!0});gs.DEFAULT_HEADERS=void 0;const kp=ys;gs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kp.version}`};var ec=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oa,"__esModule",{value:!0});const xp=ec(hs),Ep=ec(oi),Sp=gs;let Op=class tc{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Sp.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new xp.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new tc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let u;const c=new URL(`${this.url}/rpc/${e}`);let h;r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([p,b])=>b!==void 0).map(([p,b])=>[p,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([p,b])=>{c.searchParams.append(p,b)})):(u="POST",h=n);const y=Object.assign({},this.headers);return a&&(y.Prefer=`count=${a}`),new Ep.default({method:u,url:c,headers:y,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}};oa.default=Op;var Pr=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const nc=Pr(oa);Mt.PostgrestClient=nc.default;const rc=Pr(hs);Mt.PostgrestQueryBuilder=rc.default;const ic=Pr(oi);Mt.PostgrestFilterBuilder=ic.default;const sc=Pr(fs);Mt.PostgrestTransformBuilder=sc.default;const oc=Pr(ds);Mt.PostgrestBuilder=oc.default;const ac=Pr(ps);Mt.PostgrestError=ac.default;var Tp=Mt.default={PostgrestClient:nc.default,PostgrestQueryBuilder:rc.default,PostgrestFilterBuilder:ic.default,PostgrestTransformBuilder:sc.default,PostgrestBuilder:oc.default,PostgrestError:ac.default};const{PostgrestClient:Pp,PostgrestQueryBuilder:Ty,PostgrestFilterBuilder:Py,PostgrestTransformBuilder:Cy,PostgrestBuilder:Ay}=Tp,Cp="2.10.7",Ap={"X-Client-Info":`realtime-js/${Cp}`},jp="1.0.0",uc=1e4,Rp=1e3;var xr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xr||(xr={}));var Bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bt||(Bt={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var Co;(function(t){t.websocket="websocket"})(Co||(Co={}));var Qn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Qn||(Qn={}));class Ip{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const c=r.decode(e.slice(u,u+s));u=u+s;const h=r.decode(e.slice(u,u+a));u=u+a;const y=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:c,event:h,payload:y}}}class lc{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const Ou=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,u)=>(a[u]=Dp(u,t,e,s),a),{})},Dp=(t,e,n,r)=>{const s=e.find(c=>c.name===t),a=s==null?void 0:s.type,u=n[t];return a&&!r.includes(a)?cc(a,u):Ao(u)},cc=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Mp(e,n)}switch(t){case rt.bool:return $p(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return Lp(e);case rt.json:case rt.jsonb:return Fp(e);case rt.timestamp:return Up(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Ao(e);default:return Ao(e)}},Ao=t=>t,$p=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Lp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Fp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Mp=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const u=t.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(c=>cc(e,c))}return t},Up=t=>typeof t=="string"?t.replace(" ","T"):t,hc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class uo{constructor(e,n,r={},s=uc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tu||(Tu={}));class Jr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:u,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jr.syncState(this.state,s,a,u),this.pendingDiffs.forEach(h=>{this.state=Jr.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:u,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Jr.syncDiff(this.state,s,a,u),c())}),this.onJoin((s,a,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:u})}),this.onLeave((s,a,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),u=this.transformState(n),c={},h={};return this.map(a,(y,p)=>{u[y]||(h[y]=p)}),this.map(u,(y,p)=>{const b=a[y];if(b){const P=p.map(ve=>ve.presence_ref),V=b.map(ve=>ve.presence_ref),se=p.filter(ve=>V.indexOf(ve.presence_ref)<0),le=b.filter(ve=>P.indexOf(ve.presence_ref)<0);se.length>0&&(c[y]=se),le.length>0&&(h[y]=le)}else c[y]=p}),this.syncDiff(a,{joins:c,leaves:h},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(c,h)=>{var y;const p=(y=e[c])!==null&&y!==void 0?y:[];if(e[c]=this.cloneDeep(h),p.length>0){const b=e[c].map(V=>V.presence_ref),P=p.filter(V=>b.indexOf(V.presence_ref)<0);e[c].unshift(...P)}r(c,p,h)}),this.map(u,(c,h)=>{let y=e[c];if(!y)return;const p=h.map(b=>b.presence_ref);y=y.filter(b=>p.indexOf(b.presence_ref)<0),e[c]=y,s(c,y,h),y.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pu||(Pu={}));var Cu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cu||(Cu={}));var Au;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Au||(Au={}));class aa{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uo(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new lc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Jr(this),this.broadcastEndpointURL=hc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:u,private:c}}=this.params;this._onError(p=>e&&e("CHANNEL_ERROR",p)),this._onClose(()=>e&&e("CLOSED"));const h={},y={broadcast:a,presence:u,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessToken&&(h.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:y},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){e&&e("SUBSCRIBED");return}else{const P=this.bindings.postgres_changes,V=(b=P==null?void 0:P.length)!==null&&b!==void 0?b:0,se=[];for(let le=0;le<V;le++){const ve=P[le],{filter:{event:we,schema:je,table:Re,filter:ce}}=ve,Le=p&&p[le];if(Le&&Le.event===we&&Le.schema===je&&Le.table===Re&&Le.filter===ce)se.push(Object.assign(Object.assign({},ve),{id:Le.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=se,e&&e("SUBSCRIBED");return}}).receive("error",p=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:u}=e,c={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,c,h;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(u=this.params)===null||u===void 0?void 0:u.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),y.receive("ok",()=>a("ok")),y.receive("error",()=>a("error")),y.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new uo(this,Yt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new uo(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const u=e.toLocaleLowerCase(),{close:c,error:h,leave:y,join:p}=Yt;if(r&&[c,h,y,p].indexOf(u)>=0&&r!==this._joinRef())return;let P=this._onMessage(u,n,r);if(n&&!P)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(V=>{var se,le,ve;return((se=V.filter)===null||se===void 0?void 0:se.event)==="*"||((ve=(le=V.filter)===null||le===void 0?void 0:le.event)===null||ve===void 0?void 0:ve.toLocaleLowerCase())===u}).map(V=>V.callback(P,r)):(a=this.bindings[u])===null||a===void 0||a.filter(V=>{var se,le,ve,we,je,Re;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in V){const ce=V.id,Le=(se=V.filter)===null||se===void 0?void 0:se.event;return ce&&((le=n.ids)===null||le===void 0?void 0:le.includes(ce))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((ve=n.data)===null||ve===void 0?void 0:ve.type.toLocaleLowerCase()))}else{const ce=(je=(we=V==null?void 0:V.filter)===null||we===void 0?void 0:we.event)===null||je===void 0?void 0:je.toLocaleLowerCase();return ce==="*"||ce===((Re=n==null?void 0:n.event)===null||Re===void 0?void 0:Re.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===u}).map(V=>{if(typeof P=="object"&&"ids"in P){const se=P.data,{schema:le,table:ve,commit_timestamp:we,type:je,errors:Re}=se;P=Object.assign(Object.assign({},{schema:le,table:ve,commit_timestamp:we,eventType:je,new:{},old:{},errors:Re}),this._getPayloadRecords(se))}V.callback(P,r)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&aa.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ou(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ou(e.columns,e.old_record)),n}}const Kp=()=>{},Bp=typeof WebSocket<"u",Np=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qp{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ap,this.params={},this.timeout=uc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Kp,this.conn=null,this.sendBuffer=[],this.serializer=new Ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let u;return a?u=a:typeof fetch>"u"?u=(...c)=>Sr(async()=>{const{default:h}=await Promise.resolve().then(()=>Tr);return{default:h}},void 0).then(({default:h})=>h(...c)):u=fetch,(...c)=>u(...c)},this.endPoint=`${e}/${Co.websocket}`,this.httpEndpoint=hc(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,u)=>u(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Bp){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Hp(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Sr(async()=>{const{default:e}=await import("./browser-CUdLaU33.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case xr.connecting:return Qn.Connecting;case xr.open:return Qn.Open;case xr.closing:return Qn.Closing;default:return Qn.Closed}}isConnected(){return this.connectionState()===Qn.Open}channel(e,n={config:{}}){const r=new aa(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,u=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?u():this.sendBuffer.push(u)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jp}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:u}=n;(u&&u===this.pendingHeartbeatRef||s===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${u&&"("+u+")"||""}`,a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,a,u)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Np],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Hp{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ua extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Vp extends ua{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jo extends ua{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Wp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};const fc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Tr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},zp=()=>Wp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sr(()=>Promise.resolve().then(()=>Tr),void 0)).Response:Response}),Ro=t=>{if(Array.isArray(t))return t.map(n=>Ro(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Ro(r)}),e};var er=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};const lo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jp=(t,e,n)=>er(void 0,void 0,void 0,function*(){const r=yield zp();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Vp(lo(s),t.status||500))}).catch(s=>{e(new jo(lo(s),s))}):e(new jo(lo(t),t))}),Gp=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ai(t,e,n,r,s,a){return er(this,void 0,void 0,function*(){return new Promise((u,c)=>{t(n,Gp(e,r,s,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>Jp(h,c,r))})})}function Yi(t,e,n,r){return er(this,void 0,void 0,function*(){return ai(t,"GET",e,n,r)})}function jn(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ai(t,"POST",e,r,s,n)})}function Qp(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ai(t,"PUT",e,r,s,n)})}function Yp(t,e,n,r){return er(this,void 0,void 0,function*(){return ai(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function dc(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ai(t,"DELETE",e,r,s,n)})}var Ft=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};const Xp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ju={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zp{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=fc(s)}uploadOrUpdate(e,n,r,s){return Ft(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},ju),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType,h&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const y=this._removeEmptyFolders(n),p=this._getFinalPath(y),b=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:a,headers:c},u!=null&&u.duplex?{duplex:u.duplex}:{})),P=yield b.json();return b.ok?{data:{path:y,id:P.Id,fullPath:P.Key},error:null}:{data:null,error:P}}catch(a){if(wt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ft(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${u}`);c.searchParams.set("token",n);try{let h;const y=Object.assign({upsert:ju.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",y.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",y.cacheControl)):(h=r,p["cache-control"]=`max-age=${y.cacheControl}`,p["content-type"]=y.contentType);const b=yield this.fetch(c.toString(),{method:"PUT",body:h,headers:p}),P=yield b.json();return b.ok?{data:{path:a,fullPath:P.Key},error:null}:{data:null,error:P}}catch(h){if(wt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return Ft(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),u=new URL(this.url+a.url),c=u.searchParams.get("token");if(!c)throw new ua("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:c},error:null}}catch(r){if(wt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(wt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(wt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield jn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(s){if(wt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ft(this,void 0,void 0,function*(){try{const s=yield jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(s){if(wt(s))return{data:null,error:s};throw s}})}download(e,n){return Ft(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Yi(this.fetch,`${this.url}/${s}/${c}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(wt(c))return{data:null,error:c};throw c}})}info(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Yi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ro(r),error:null}}catch(r){if(wt(r))return{data:null,error:r};throw r}})}exists(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Yp(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(wt(r)&&r instanceof jo){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&s.push(h);let y=s.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${y}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ft(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Xp),n),{prefix:e||""});return{data:yield jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(wt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const eg="2.7.1",tg={"X-Client-Info":`storage-js/${eg}`};var cr=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};class ng{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},tg),n),this.fetch=fc(r)}listBuckets(){return cr(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(wt(e))return{data:null,error:e};throw e}})}getBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return cr(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(wt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return cr(this,void 0,void 0,function*(){try{return{data:yield Qp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(wt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}})}}class rg extends ng{constructor(e,n={},r){super(e,n,r)}from(e){return new Zp(this.url,this.headers,e,this.fetch)}}const ig="2.46.1";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const sg={"X-Client-Info":`supabase-js-${qr}/${ig}`},og={headers:sg},ag={schema:"public"},ug={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lg={};var cg=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};const hg=t=>{let e;return t?e=t:typeof fetch>"u"?e=Yl:e=fetch,(...n)=>e(...n)},fg=()=>typeof Headers>"u"?Xl:Headers,dg=(t,e,n)=>{const r=hg(n),s=fg();return(a,u)=>cg(void 0,void 0,void 0,function*(){var c;const h=(c=yield e())!==null&&c!==void 0?c:t;let y=new s(u==null?void 0:u.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},u),{headers:y}))})};var pg=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};function gg(t){return t.replace(/\/$/,"")}function yg(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:u,auth:c,realtime:h,global:y}=e,p={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},h),s),global:Object.assign(Object.assign({},y),a),accessToken:()=>pg(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const pc="2.65.1",mg="http://localhost:9999",vg="supabase.auth.token",_g={"X-Client-Info":`gotrue-js/${pc}`},Ru=10,Io="X-Supabase-Api-Version",gc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bg(t){return Math.round(Date.now()/1e3)+t}function wg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qt=()=>typeof document<"u",Wn={tested:!1,writable:!1},Gr=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wn.tested)return Wn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wn.tested=!0,Wn.writable=!0}catch{Wn.tested=!0,Wn.writable=!1}return Wn.writable};function co(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const yc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Sr(async()=>{const{default:r}=await Promise.resolve().then(()=>Tr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mi=async(t,e)=>{await t.removeItem(e)};function xg(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,a,u,c,h,y,p=0;for(t=t.replace("-","+").replace("_","/");p<t.length;)u=e.indexOf(t.charAt(p++)),c=e.indexOf(t.charAt(p++)),h=e.indexOf(t.charAt(p++)),y=e.indexOf(t.charAt(p++)),r=u<<2|c>>4,s=(c&15)<<4|h>>2,a=(h&3)<<6|y,n=n+String.fromCharCode(r),h!=64&&s!=0&&(n=n+String.fromCharCode(s)),y!=64&&a!=0&&(n=n+String.fromCharCode(a));return n}class ms{constructor(){this.promise=new ms.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ms.promiseConstructor=Promise;function Iu(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(xg(r))}async function Eg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Sg(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await t(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){s(u);return}}})()})}function Og(t){return("0"+t.toString(16)).substr(-2)}function Tg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Og).join("")}async function Pg(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function Cg(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ag(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Pg(t);return Cg(n)}async function hr(t,e,n=!1){const r=Tg();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await mc(t,`${e}-code-verifier`,s);const a=await Ag(r);return[a,r===a?"plain":"s256"]}const jg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rg(t){const e=t.headers.get(Io);if(!e||!e.match(jg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class la extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ig extends la{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Dg(t){return $e(t)&&t.name==="AuthApiError"}class vc extends la{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class tr extends la{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Tn extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $g(t){return $e(t)&&t.name==="AuthSessionMissingError"}class ho extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ui extends tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ki extends tr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Du extends tr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Do extends tr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fo(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class $u extends tr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var Lg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Jn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Fg=[502,503,504];async function Lu(t){var e;if(!kg(t))throw new Do(Jn(t),0);if(Fg.includes(t.status))throw new Do(Jn(t),t.status);let n;try{n=await t.json()}catch(a){throw new vc(Jn(a),a)}let r;const s=Rg(t);if(s&&s.getTime()>=gc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $u(Jn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new $u(Jn(n),t.status,n.weak_password.reasons);throw new Ig(Jn(n),t.status||500,r)}const Mg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Io]||(a[Io]=gc["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const c=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await Ug(t,e,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function Ug(t,e,n,r,s,a){const u=Mg(e,r,s,a);let c;try{c=await t(n,Object.assign({},u))}catch(h){throw console.error(h),new Do(Jn(h),0)}if(c.ok||await Lu(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(h){await Lu(h)}}function Pn(t){var e;let n=null;qg(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bg(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Fu(t){const e=Pn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Kg(t){return{data:t,error:null}}function Bg(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,u=Lg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},h=Object.assign({},u);return{data:{properties:c,user:h},error:null}}function Ng(t){return t}function qg(t){return t.access_token&&t.refresh_token&&t.expires_in}var Hg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Vg{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=yc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Hg(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Bg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,u,c,h;try{const y={nextPage:null,lastPage:0,total:0},p=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Ng});if(p.error)throw p.error;const b=await p.json(),P=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,V=(h=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return V.length>0&&(V.forEach(se=>{const le=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),ve=JSON.parse(se.split(";")[1].split("=")[1]);y[`${ve}Page`]=le}),y.total=parseInt(P)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const Wg={getItem:t=>Gr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Gr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Gr()&&globalThis.localStorage.removeItem(t)}};function Mu(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function zg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fr={debug:!!(globalThis&&Gr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _c extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jg extends _c{}async function Gg(t,e,n){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Jg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}zg();const Qg={url:mg,storageKey:vg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_g,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Br=30*1e3,Uu=3;async function Ku(t,e,n){return await n()}class ti{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ti.nextInstanceID,ti.nextInstanceID+=1,this.instanceID>0&&Qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Qg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Vg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=yc(s.fetch),this.lock=s.lock||Ku,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Gg:this.lock=Ku,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Gr()?this.storage=Wg:(this.memoryStorage={},this.storage=Mu(this.memoryStorage)):(this.memoryStorage={},this.storage=Mu(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Qt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new vc("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Pn}),{data:u,error:c}=a;if(c||!u)return{data:{user:null,session:null},error:c};const h=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:y,session:h},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:p,password:b,options:P}=e;let V=null,se=null;this.flowType==="pkce"&&([V,se]=await hr(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:P==null?void 0:P.emailRedirectTo,body:{email:p,password:b,data:(n=P==null?void 0:P.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:P==null?void 0:P.captchaToken},code_challenge:V,code_challenge_method:se},xform:Pn})}else if("phone"in e){const{phone:p,password:b,options:P}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:b,data:(r=P==null?void 0:P.data)!==null&&r!==void 0?r:{},channel:(s=P==null?void 0:P.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:P==null?void 0:P.captchaToken}},xform:Pn})}else throw new Ui("You must provide either an email or phone number and a password");const{data:u,error:c}=a;if(c||!u)return{data:{user:null,session:null},error:c};const h=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:y,session:h},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:c}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Fu})}else if("phone"in e){const{phone:a,password:u,options:c}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Fu})}else throw new Ui("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ho}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Fi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:u}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pn});if(await Mi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ho}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:u})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:u}=e,c=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Pn}),{data:h,error:y}=c;return y?{data:{user:null,session:null},error:y}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ho}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:y})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,u;try{if("email"in e){const{email:c,options:h}=e;let y=null,p=null;this.flowType==="pkce"&&([y,p]=await hr(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:y,code_challenge_method:p},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:c,options:h}=e,{data:y,error:p}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:p}}throw new Ui("You must provide either an email or phone number.")}catch(c){if($e(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:c}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Pn});if(c)throw c;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,y=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:y,session:h},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await hr(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:Kg})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Tn;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:u,error:c}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ui("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,y,p)=>(!u&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,y,p))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rn}):await this._useSession(async n=>{var r,s,a;const{data:u,error:c}=n;if(c)throw c;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Rn})})}catch(n){if($e(n))return $g(n)&&(await this._removeSession(),await Mi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Tn;const u=s.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await hr(this.storage,this.storageKey));const{data:y,error:p}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:u.access_token,xform:Rn});if(p)throw p;return u.user=y.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Iu(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const u=Iu(e.access_token);if(u.exp&&(r=u.exp,s=r<=n),s){const{session:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:c}=n;if(c)throw c;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Tn;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Qt())throw new Ki("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ki("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Du("Not a valid PKCE flow url.");const n=co(window.location.href);if(e){if(!n.code)throw new Du("No code detected.");const{data:je,error:Re}=await this._exchangeCodeForSession(n.code);if(Re)throw Re;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:je.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Ki(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:u,expires_in:c,expires_at:h,token_type:y}=n;if(!a||!c||!u||!y)throw new Ki("No session defined in URL");const p=Math.round(Date.now()/1e3),b=parseInt(c);let P=p+b;h&&(P=parseInt(h));const V=P-p;V*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${b}s`);const se=P-b;p-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,P,p):p-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",se,P,p);const{data:le,error:ve}=await this._getUser(a);if(ve)throw ve;const we={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:P,refresh_token:u,token_type:y,user:le.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:n.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=co(window.location.href);return!!(Qt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=co(window.location.href),n=await Fi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const u=(r=s.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:c}=await this.admin.signOut(u,e);if(c&&!(Dg(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Mi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=wg(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await hr(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var u,c,h,y,p;const{data:b,error:P}=a;if(P)throw P;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",V,{headers:this.headers,jwt:(p=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)throw u;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Sg(async s=>(s>0&&await Eg(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pn})),(s,a)=>{const u=200*Math.pow(2,s);return a&&fo(a)&&Date.now()+u-r<Br})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Fi(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Ru;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ru}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),fo(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ms;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Tn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(s,"error",a),$e(a)){const u={session:null,error:a};return fo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Mi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Br}ms, refresh threshold is ${Uu} ticks`),s<=Uu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _c)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await hr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)return{data:null,error:u};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:y}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:u,error:c}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(s.access_token);let c=null;u.aal&&(c=u.aal);let h=c;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const p=u.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}))}}ti.nextInstanceID=0;const Yg=ti;class Xg extends Yg{constructor(e){super(e)}}var Zg=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{y(r.next(p))}catch(b){u(b)}}function h(p){try{y(r.throw(p))}catch(b){u(b)}}function y(p){p.done?a(p.value):s(p.value).then(c,h)}y((r=r.apply(t,e||[])).next())})};class ey{constructor(e,n,r){var s,a,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=gg(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:ag,realtime:lg,auth:Object.assign(Object.assign({},ug),{storageKey:h}),global:og},p=yg(r??{},y);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(b,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=p.auth)!==null&&u!==void 0?u:{},this.headers,p.global.fetch),this.fetch=dg(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new Pp(`${c}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new ip(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rg(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Zg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:u,lock:c,debug:h},y,p){var b;const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xg({url:this.authUrl,headers:Object.assign(Object.assign({},P),y),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:u,lock:c,debug:h,fetch:p,hasCustomAuthorizationHeader:(b="Authorization"in this.headers)!==null&&b!==void 0?b:!1})}_initRealtimeClient(e){return new qp(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ty=(t,e,n)=>new ey(t,e,n),ny="https://oqwvljqwtearyepyaslo.supabase.co",ry="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xd3ZsanF3dGVhcnllcHlhc2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEwODA1NjIsImV4cCI6MjA0NjY1NjU2Mn0.31HmSCfXawvkzhevPCaKWoVCZyD_elcQOCtgFWJMRKI",pn=ty(ny,ry),iy={data(){return{words:[],searchQuery:"",searchResults:[]}},components:{AudioPlayerTaigi:Ql,IconPlayAudio:ia},async created(){await this.fetchWords()},methods:{async fetchWords(){const{data:t,error:e}=await pn.from("words").select(`
          id,
          word,
          definitions (id, english)
        `);e?console.error(e):this.words=t},async addWord(t,e){const{data:n,error:r}=await pn.from("words").insert([{word:t}]).select();if(r){console.error(r);return}const s=n[0].id,{error:a}=await pn.from("definitions").insert([{word_id:s,definition:e}]);a&&console.error(a)},async editWord(t){const{data:e,error:n}=await pn.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese, partofspeech)").eq("id",t).single();n?console.error("Error fetching word:",n.message):this.word=e},async updateWord(){const{data:t,error:e}=await pn.from("words").upsert({id:this.word.id,chinese:this.word.chinese,romaji:this.word.romaji,classification:this.word.classification,english:this.word.english});e?console.error("Error updating word:",e.message):console.log("Word updated successfully:",t)},async updateDefinition(t,e){const n=this.word.definitions[e],{data:r,error:s}=await pn.from("definitions").upsert({defid:t,wordid:this.word.id,partofspeech:n.partofspeech,def_english:n.def_english,def_chinese:n.def_chinese});s?console.error("Error updating definition:",s.message):console.log("Definition updated successfully:",r)},async deleteWord(t){const{error:e}=await pn.from("definitions").delete().eq("word_id",t);if(e){console.error(e);return}const{error:n}=await pn.from("words").delete().eq("id",t);n&&console.error(n)},async searchWords(){if(this.searchQuery.trim()===""){this.searchResults=[],await this.fetchWords();return}const{data:t,error:e}=await pn.from("words").select("english, chinese, romaji, audioid, definitions (defid, def_english, def_chinese)").ilike("english",`%${this.searchQuery}%`);e?console.error(e):this.words=t}}},sy={class:"entry"},oy={class:""},ay={class:""},uy={class:""},ly=["onClick"],cy={key:0},hy=["onUpdate:modelValue"],fy=["onUpdate:modelValue"],dy=["onUpdate:modelValue"],py=["onUpdate:modelValue"],gy=["onSubmit"],yy=["onUpdate:modelValue"],my=["onUpdate:modelValue"],vy=["onUpdate:modelValue"];function _y(t,e,n,r,s,a){const u=zi("AudioPlayerTaigi");return ct(),yt("div",null,[e[16]||(e[16]=de("h1",null,"Dictionary",-1)),e[17]||(e[17]=Xt(" Search ")),sn(de("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>s.searchQuery=c),onKeyup:e[1]||(e[1]=Wl(c=>a.searchWords(s.searchQuery),["enter"])),placeholder:"Search for a word..."},null,544),[[gn,s.searchQuery]]),de("button",{onClick:e[2]||(e[2]=(...c)=>a.searchWords&&a.searchWords(...c))},"Search"),Xt(" "+Dt(s.words.length)+" ",1),de("ul",sy,[(ct(!0),yt(St,null,br(s.words,c=>(ct(),yt("li",{key:c.id},[de("div",oy,Dt(c.english),1),de("div",ay,Dt(c.chinese),1),de("div",uy,[Xt(Dt(c.romaji)+" ",1),c.audioid?(ct(),na(u,{key:0,audioID:c.audioid},null,8,["audioID"])):gr("",!0)]),de("button",{onClick:h=>a.editWord(c.id)},"Edit",8,ly),de("ul",null,[(ct(!0),yt(St,null,br(c.definitions,h=>(ct(),yt("li",{key:h.id},[Xt(Dt(h.defid)+" ",1),de("ol",null,[de("li",null,Dt(h.def_english),1),de("li",null,Dt(h.def_chinese),1)])]))),128))]),c?(ct(),yt("div",cy,[de("h2",null,"Edit Word: "+Dt(c.chinese),1),de("form",{onSubmit:e[3]||(e[3]=wu((...h)=>a.updateWord&&a.updateWord(...h),["prevent"]))},[de("div",null,[e[4]||(e[4]=de("label",{for:"chinese"},"Chinese:",-1)),sn(de("input",{"onUpdate:modelValue":h=>c.chinese=h,type:"text",id:"chinese"},null,8,hy),[[gn,c.chinese]])]),de("div",null,[e[5]||(e[5]=de("label",{for:"romaji"},"Romaji:",-1)),sn(de("input",{"onUpdate:modelValue":h=>c.romaji=h,type:"text",id:"romaji"},null,8,fy),[[gn,c.romaji]])]),de("div",null,[e[6]||(e[6]=de("label",{for:"english"},"English:",-1)),sn(de("input",{"onUpdate:modelValue":h=>c.english=h,type:"text",id:"english"},null,8,dy),[[gn,c.english]])]),de("div",null,[e[7]||(e[7]=de("label",{for:"classification"},"Classification:",-1)),sn(de("input",{"onUpdate:modelValue":h=>c.classification=h,type:"text",id:"classification"},null,8,py),[[gn,c.classification]])]),e[8]||(e[8]=de("button",{type:"submit"},"Save Word",-1))],32),e[14]||(e[14]=de("hr",null,null,-1)),e[15]||(e[15]=de("h3",null,"Definitions",-1)),(ct(!0),yt(St,null,br(c.definitions,(h,y)=>(ct(),yt("div",{key:h.defid},[de("form",{onSubmit:wu(p=>a.updateDefinition(h.defid,y),["prevent"])},[de("div",null,[e[9]||(e[9]=de("label",{for:"def_english"},"English Definition:",-1)),sn(de("input",{"onUpdate:modelValue":p=>h.def_english=p,type:"text",id:"def_english"},null,8,yy),[[gn,h.def_english]])]),de("div",null,[e[10]||(e[10]=de("label",{for:"def_chinese"},"Chinese Definition:",-1)),sn(de("input",{"onUpdate:modelValue":p=>h.def_chinese=p,type:"text",id:"def_chinese"},null,8,my),[[gn,h.def_chinese]])]),de("div",null,[e[11]||(e[11]=de("label",{for:"partofspeech"},"Part of Speech:",-1)),sn(de("input",{"onUpdate:modelValue":p=>h.partofspeech=p,type:"text",id:"partofspeech"},null,8,vy),[[gn,h.partofspeech]])]),e[12]||(e[12]=de("button",{type:"submit"},"Save Definition",-1))],40,gy),e[13]||(e[13]=de("hr",null,null,-1))]))),128))])):gr("",!0)]))),128))])])}const by=si(iy,[["render",_y]]),wy={__name:"App",setup(t){const e=Ph(!1);return bl(async()=>{e.value=await qt.words.count()>0&&await qt.definitions.count()>0,console.log(qt),e.value?console.log("Data is available in IndexedDB."):(console.log("No data in IndexedDB."),Cd())}),(n,r)=>(ct(),yt(St,null,[r[0]||(r[0]=de("header",null,[de("div",null,[de("h1",null,"Taigi Dictionary")])],-1)),de("main",null,[Tt(Qd),Tt(by)]),r[1]||(r[1]=de("footer",null,null,-1))],64))}},ky=si(wy,[["__scopeId","data-v-c2890b00"]]);kd(ky).mount("#app");export{zl as g};
