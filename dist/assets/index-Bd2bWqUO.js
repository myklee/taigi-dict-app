(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function jo(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const tt={},pr=[],nn=()=>{},Mc=()=>!1,Hi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ro=t=>t.startsWith("onUpdate:"),St=Object.assign,Io=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Uc=Object.prototype.hasOwnProperty,We=(t,e)=>Uc.call(t,e),xe=Array.isArray,gr=t=>Vi(t)==="[object Map]",$u=t=>Vi(t)==="[object Set]",Pe=t=>typeof t=="function",gt=t=>typeof t=="string",jn=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",Lu=t=>(ct(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),Fu=Object.prototype.toString,Vi=t=>Fu.call(t),Kc=t=>Vi(t).slice(8,-1),Mu=t=>Vi(t)==="[object Object]",Do=t=>gt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Kr=jo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Bc=/-(\w)/g,Wt=Wi(t=>t.replace(Bc,(e,n)=>n?n.toUpperCase():"")),Nc=/\B([A-Z])/g,Rn=Wi(t=>t.replace(Nc,"-$1").toLowerCase()),zi=Wi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bs=Wi(t=>t?`on${zi(t)}`:""),An=(t,e)=>!Object.is(t,e),$i=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Uu=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ao=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let La;const Ku=()=>La||(La=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $o(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=gt(r)?Wc(r):$o(r);if(s)for(const a in s)e[a]=s[a]}return e}else if(gt(t)||ct(t))return t}const qc=/;(?![^(]*\))/g,Hc=/:([^]+)/,Vc=/\/\*[^]*?\*\//g;function Wc(t){const e={};return t.replace(Vc,"").split(qc).forEach(n=>{if(n){const r=n.split(Hc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Lo(t){let e="";if(gt(t))e=t;else if(xe(t))for(let n=0;n<t.length;n++){const r=Lo(t[n]);r&&(e+=r+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const zc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jc=jo(zc);function Bu(t){return!!t||t===""}const Nu=t=>!!(t&&t.__v_isRef===!0),Vn=t=>gt(t)?t:t==null?"":xe(t)||ct(t)&&(t.toString===Fu||!Pe(t.toString))?Nu(t)?Vn(t.value):JSON.stringify(t,qu,2):String(t),qu=(t,e)=>Nu(e)?qu(t,e.value):gr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],a)=>(n[Ns(r,a)+" =>"]=s,n),{})}:$u(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ns(n))}:jn(e)?Ns(e):ct(e)&&!xe(e)&&!Mu(e)?String(e):e,Ns=(t,e="")=>{var n;return jn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class Gc{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){Mt=this}off(){Mt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Qc(){return Mt}let it;const qs=new WeakSet;class Hu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qs.has(this)&&(qs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fa(this),zu(this);const e=it,n=Qt;it=this,Qt=!0;try{return this.fn()}finally{Ju(this),it=e,Qt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Uo(e);this.deps=this.depsTail=void 0,Fa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uo(this)&&this.run()}get dirty(){return uo(this)}}let Vu=0,dr;function Wu(t){t.flags|=8,t.next=dr,dr=t}function Fo(){Vu++}function Mo(){if(--Vu>0)return;let t;for(;dr;){let e=dr,n;for(;e;)e.flags&1||(e.flags&=-9),e=e.next;for(e=dr,dr=void 0;e;){if(n=e.next,e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function zu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ju(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Uo(r),Yc(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function uo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Gu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Gu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wr))return;t.globalVersion=Wr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!uo(t)){t.flags&=-3;return}const n=it,r=Qt;it=t,Qt=!0;try{zu(t);const s=t.fn(t._value);(e.version===0||An(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{it=n,Qt=r,Ju(t),t.flags&=-3}}function Uo(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Uo(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Yc(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Qt=!0;const Qu=[];function In(){Qu.push(Qt),Qt=!1}function Dn(){const t=Qu.pop();Qt=t===void 0?!0:t}function Fa(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=it;it=void 0;try{e()}finally{it=n}}}let Wr=0;class Xc{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ko{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!it||!Qt||it===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==it)n=this.activeLink=new Xc(it,this),it.deps?(n.prevDep=it.depsTail,it.depsTail.nextDep=n,it.depsTail=n):it.deps=it.depsTail=n,Yu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=it.depsTail,n.nextDep=void 0,it.depsTail.nextDep=n,it.depsTail=n,it.deps===n&&(it.deps=r)}return n}trigger(e){this.version++,Wr++,this.notify(e)}notify(e){Fo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Mo()}}}function Yu(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Yu(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const lo=new WeakMap,Gn=Symbol(""),co=Symbol(""),zr=Symbol("");function Ot(t,e,n){if(Qt&&it){let r=lo.get(t);r||lo.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ko),s.target=t,s.map=r,s.key=n),s.track()}}function hn(t,e,n,r,s,a){const l=lo.get(t);if(!l){Wr++;return}const h=f=>{f&&f.trigger()};if(Fo(),e==="clear")l.forEach(h);else{const f=xe(t),y=f&&Do(n);if(f&&n==="length"){const g=Number(r);l.forEach((b,R)=>{(R==="length"||R===zr||!jn(R)&&R>=g)&&h(b)})}else switch(n!==void 0&&h(l.get(n)),y&&h(l.get(zr)),e){case"add":f?y&&h(l.get("length")):(h(l.get(Gn)),gr(t)&&h(l.get(co)));break;case"delete":f||(h(l.get(Gn)),gr(t)&&h(l.get(co)));break;case"set":gr(t)&&h(l.get(Gn));break}}Mo()}function ar(t){const e=ze(t);return e===t?e:(Ot(e,"iterate",zr),Vt(t)?e:e.map(kt))}function Ji(t){return Ot(t=ze(t),"iterate",zr),t}const Zc={__proto__:null,[Symbol.iterator](){return Hs(this,Symbol.iterator,kt)},concat(...t){return ar(this).concat(...t.map(e=>xe(e)?ar(e):e))},entries(){return Hs(this,"entries",t=>(t[1]=kt(t[1]),t))},every(t,e){return un(this,"every",t,e,void 0,arguments)},filter(t,e){return un(this,"filter",t,e,n=>n.map(kt),arguments)},find(t,e){return un(this,"find",t,e,kt,arguments)},findIndex(t,e){return un(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return un(this,"findLast",t,e,kt,arguments)},findLastIndex(t,e){return un(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return un(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vs(this,"includes",t)},indexOf(...t){return Vs(this,"indexOf",t)},join(t){return ar(this).join(t)},lastIndexOf(...t){return Vs(this,"lastIndexOf",t)},map(t,e){return un(this,"map",t,e,void 0,arguments)},pop(){return Dr(this,"pop")},push(...t){return Dr(this,"push",t)},reduce(t,...e){return Ma(this,"reduce",t,e)},reduceRight(t,...e){return Ma(this,"reduceRight",t,e)},shift(){return Dr(this,"shift")},some(t,e){return un(this,"some",t,e,void 0,arguments)},splice(...t){return Dr(this,"splice",t)},toReversed(){return ar(this).toReversed()},toSorted(t){return ar(this).toSorted(t)},toSpliced(...t){return ar(this).toSpliced(...t)},unshift(...t){return Dr(this,"unshift",t)},values(){return Hs(this,"values",kt)}};function Hs(t,e,n){const r=Ji(t),s=r[e]();return r!==t&&!Vt(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const eh=Array.prototype;function un(t,e,n,r,s,a){const l=Ji(t),h=l!==t&&!Vt(t),f=l[e];if(f!==eh[e]){const b=f.apply(t,a);return h?kt(b):b}let y=n;l!==t&&(h?y=function(b,R){return n.call(this,kt(b),R,t)}:n.length>2&&(y=function(b,R){return n.call(this,b,R,t)}));const g=f.call(l,y,r);return h&&s?s(g):g}function Ma(t,e,n,r){const s=Ji(t);let a=n;return s!==t&&(Vt(t)?n.length>3&&(a=function(l,h,f){return n.call(this,l,h,f,t)}):a=function(l,h,f){return n.call(this,l,kt(h),f,t)}),s[e](a,...r)}function Vs(t,e,n){const r=ze(t);Ot(r,"iterate",zr);const s=r[e](...n);return(s===-1||s===!1)&&Vo(n[0])?(n[0]=ze(n[0]),r[e](...n)):s}function Dr(t,e,n=[]){In(),Fo();const r=ze(t)[e].apply(t,n);return Mo(),Dn(),r}const th=jo("__proto__,__v_isRef,__isVue"),Xu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jn));function nh(t){jn(t)||(t=String(t));const e=ze(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class Zu{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?gh:rl:a?nl:tl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const l=xe(e);if(!s){let f;if(l&&(f=Zc[n]))return f;if(n==="hasOwnProperty")return nh}const h=Reflect.get(e,n,Et(e)?e:r);return(jn(n)?Xu.has(n):th(n))||(s||Ot(e,"get",n),a)?h:Et(h)?l&&Do(n)?h:h.value:ct(h)?s?il(h):qo(h):h}}class el extends Zu{constructor(e=!1){super(!1,e)}set(e,n,r,s){let a=e[n];if(!this._isShallow){const f=Qn(a);if(!Vt(r)&&!Qn(r)&&(a=ze(a),r=ze(r)),!xe(e)&&Et(a)&&!Et(r))return f?!1:(a.value=r,!0)}const l=xe(e)&&Do(n)?Number(n)<e.length:We(e,n),h=Reflect.set(e,n,r,Et(e)?e:s);return e===ze(s)&&(l?An(r,a)&&hn(e,"set",n,r):hn(e,"add",n,r)),h}deleteProperty(e,n){const r=We(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&hn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!jn(n)||!Xu.has(n))&&Ot(e,"has",n),r}ownKeys(e){return Ot(e,"iterate",xe(e)?"length":Gn),Reflect.ownKeys(e)}}class rh extends Zu{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ih=new el,sh=new rh,oh=new el(!0);const Bo=t=>t,Gi=t=>Reflect.getPrototypeOf(t);function Si(t,e,n=!1,r=!1){t=t.__v_raw;const s=ze(t),a=ze(e);n||(An(e,a)&&Ot(s,"get",e),Ot(s,"get",a));const{has:l}=Gi(s),h=r?Bo:n?Wo:kt;if(l.call(s,e))return h(t.get(e));if(l.call(s,a))return h(t.get(a));t!==s&&t.get(e)}function Oi(t,e=!1){const n=this.__v_raw,r=ze(n),s=ze(t);return e||(An(t,s)&&Ot(r,"has",t),Ot(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ti(t,e=!1){return t=t.__v_raw,!e&&Ot(ze(t),"iterate",Gn),Reflect.get(t,"size",t)}function Ua(t,e=!1){!e&&!Vt(t)&&!Qn(t)&&(t=ze(t));const n=ze(this);return Gi(n).has.call(n,t)||(n.add(t),hn(n,"add",t,t)),this}function Ka(t,e,n=!1){!n&&!Vt(e)&&!Qn(e)&&(e=ze(e));const r=ze(this),{has:s,get:a}=Gi(r);let l=s.call(r,t);l||(t=ze(t),l=s.call(r,t));const h=a.call(r,t);return r.set(t,e),l?An(e,h)&&hn(r,"set",t,e):hn(r,"add",t,e),this}function Ba(t){const e=ze(this),{has:n,get:r}=Gi(e);let s=n.call(e,t);s||(t=ze(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&hn(e,"delete",t,void 0),a}function Na(){const t=ze(this),e=t.size!==0,n=t.clear();return e&&hn(t,"clear",void 0,void 0),n}function Pi(t,e){return function(r,s){const a=this,l=a.__v_raw,h=ze(l),f=e?Bo:t?Wo:kt;return!t&&Ot(h,"iterate",Gn),l.forEach((y,g)=>r.call(s,f(y),f(g),a))}}function Ci(t,e,n){return function(...r){const s=this.__v_raw,a=ze(s),l=gr(a),h=t==="entries"||t===Symbol.iterator&&l,f=t==="keys"&&l,y=s[t](...r),g=n?Bo:e?Wo:kt;return!e&&Ot(a,"iterate",f?co:Gn),{next(){const{value:b,done:R}=y.next();return R?{value:b,done:R}:{value:h?[g(b[0]),g(b[1])]:g(b),done:R}},[Symbol.iterator](){return this}}}}function _n(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ah(){const t={get(a){return Si(this,a)},get size(){return Ti(this)},has:Oi,add:Ua,set:Ka,delete:Ba,clear:Na,forEach:Pi(!1,!1)},e={get(a){return Si(this,a,!1,!0)},get size(){return Ti(this)},has:Oi,add(a){return Ua.call(this,a,!0)},set(a,l){return Ka.call(this,a,l,!0)},delete:Ba,clear:Na,forEach:Pi(!1,!0)},n={get(a){return Si(this,a,!0)},get size(){return Ti(this,!0)},has(a){return Oi.call(this,a,!0)},add:_n("add"),set:_n("set"),delete:_n("delete"),clear:_n("clear"),forEach:Pi(!0,!1)},r={get(a){return Si(this,a,!0,!0)},get size(){return Ti(this,!0)},has(a){return Oi.call(this,a,!0)},add:_n("add"),set:_n("set"),delete:_n("delete"),clear:_n("clear"),forEach:Pi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Ci(a,!1,!1),n[a]=Ci(a,!0,!1),e[a]=Ci(a,!1,!0),r[a]=Ci(a,!0,!0)}),[t,n,e,r]}const[uh,lh,ch,hh]=ah();function No(t,e){const n=e?t?hh:ch:t?lh:uh;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(We(n,s)&&s in r?n:r,s,a)}const fh={get:No(!1,!1)},dh={get:No(!1,!0)},ph={get:No(!0,!1)};const tl=new WeakMap,nl=new WeakMap,rl=new WeakMap,gh=new WeakMap;function yh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mh(t){return t.__v_skip||!Object.isExtensible(t)?0:yh(Kc(t))}function qo(t){return Qn(t)?t:Ho(t,!1,ih,fh,tl)}function vh(t){return Ho(t,!1,oh,dh,nl)}function il(t){return Ho(t,!0,sh,ph,rl)}function Ho(t,e,n,r,s){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const l=mh(t);if(l===0)return t;const h=new Proxy(t,l===2?r:n);return s.set(t,h),h}function yr(t){return Qn(t)?yr(t.__v_raw):!!(t&&t.__v_isReactive)}function Qn(t){return!!(t&&t.__v_isReadonly)}function Vt(t){return!!(t&&t.__v_isShallow)}function Vo(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function _h(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&Uu(t,"__v_skip",!0),t}const kt=t=>ct(t)?qo(t):t,Wo=t=>ct(t)?il(t):t;function Et(t){return t?t.__v_isRef===!0:!1}function bh(t){return wh(t,!1)}function wh(t,e){return Et(t)?t:new kh(t,e)}class kh{constructor(e,n){this.dep=new Ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:kt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Vt(e)||Qn(e);e=r?e:ze(e),An(e,n)&&(this._rawValue=e,this._value=r?e:kt(e),this.dep.trigger())}}function xh(t){return Et(t)?t.value:t}const Eh={get:(t,e,n)=>e==="__v_raw"?t:xh(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Et(s)&&!Et(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function sl(t){return yr(t)?t:new Proxy(t,Eh)}class Sh{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Wu(this),!0}get value(){const e=this.dep.track();return Gu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Oh(t,e,n=!1){let r,s;return Pe(t)?r=t:(r=t.get,s=t.set),new Sh(r,s,n)}const Ai={},Ui=new WeakMap;let Wn;function Th(t,e=!1,n=Wn){if(n){let r=Ui.get(n);r||Ui.set(n,r=[]),r.push(t)}}function Ph(t,e,n=tt){const{immediate:r,deep:s,once:a,scheduler:l,augmentJob:h,call:f}=n,y=ce=>s?ce:Vt(ce)||s===!1||s===0?cn(ce,1):cn(ce);let g,b,R,V,se=!1,le=!1;if(Et(t)?(b=()=>t.value,se=Vt(t)):yr(t)?(b=()=>y(t),se=!0):xe(t)?(le=!0,se=t.some(ce=>yr(ce)||Vt(ce)),b=()=>t.map(ce=>{if(Et(ce))return ce.value;if(yr(ce))return y(ce);if(Pe(ce))return f?f(ce,2):ce()})):Pe(t)?e?b=f?()=>f(t,2):t:b=()=>{if(R){In();try{R()}finally{Dn()}}const ce=Wn;Wn=g;try{return f?f(t,3,[V]):t(V)}finally{Wn=ce}}:b=nn,e&&s){const ce=b,Le=s===!0?1/0:s;b=()=>cn(ce(),Le)}const me=Qc(),we=()=>{g.stop(),me&&Io(me.effects,g)};if(a&&e){const ce=e;e=(...Le)=>{ce(...Le),we()}}let je=le?new Array(t.length).fill(Ai):Ai;const Re=ce=>{if(!(!(g.flags&1)||!g.dirty&&!ce))if(e){const Le=g.run();if(s||se||(le?Le.some((Ye,_e)=>An(Ye,je[_e])):An(Le,je))){R&&R();const Ye=Wn;Wn=g;try{const _e=[Le,je===Ai?void 0:le&&je[0]===Ai?[]:je,V];f?f(e,3,_e):e(..._e),je=Le}finally{Wn=Ye}}}else g.run()};return h&&h(Re),g=new Hu(b),g.scheduler=l?()=>l(Re,!1):Re,V=ce=>Th(ce,!1,g),R=g.onStop=()=>{const ce=Ui.get(g);if(ce){if(f)f(ce,4);else for(const Le of ce)Le();Ui.delete(g)}},e?r?Re(!0):je=g.run():l?l(Re.bind(null,!0),!0):g.run(),we.pause=g.pause.bind(g),we.resume=g.resume.bind(g),we.stop=we,we}function cn(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Et(t))cn(t.value,e,n);else if(xe(t))for(let r=0;r<t.length;r++)cn(t[r],e,n);else if($u(t)||gr(t))t.forEach(r=>{cn(r,e,n)});else if(Mu(t)){for(const r in t)cn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&cn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xr(t,e,n,r){try{return r?t(...r):t()}catch(s){Qi(s,e,n)}}function rn(t,e,n,r){if(Pe(t)){const s=Xr(t,e,n,r);return s&&Lu(s)&&s.catch(a=>{Qi(a,e,n)}),s}if(xe(t)){const s=[];for(let a=0;a<t.length;a++)s.push(rn(t[a],e,n,r));return s}}function Qi(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||tt;if(e){let h=e.parent;const f=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const g=h.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](t,f,y)===!1)return}h=h.parent}if(a){In(),Xr(a,null,10,[t,f,y]),Dn();return}}Ch(t,n,s,r,l)}function Ch(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}let Jr=!1,ho=!1;const At=[];let en=0;const mr=[];let Sn=null,hr=0;const ol=Promise.resolve();let zo=null;function Ah(t){const e=zo||ol;return t?e.then(this?t.bind(this):t):e}function jh(t){let e=Jr?en+1:0,n=At.length;for(;e<n;){const r=e+n>>>1,s=At[r],a=Gr(s);a<t||a===t&&s.flags&2?e=r+1:n=r}return e}function Jo(t){if(!(t.flags&1)){const e=Gr(t),n=At[At.length-1];!n||!(t.flags&2)&&e>=Gr(n)?At.push(t):At.splice(jh(e),0,t),t.flags|=1,al()}}function al(){!Jr&&!ho&&(ho=!0,zo=ol.then(ll))}function Rh(t){xe(t)?mr.push(...t):Sn&&t.id===-1?Sn.splice(hr+1,0,t):t.flags&1||(mr.push(t),t.flags|=1),al()}function qa(t,e,n=Jr?en+1:0){for(;n<At.length;n++){const r=At[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;At.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ul(t){if(mr.length){const e=[...new Set(mr)].sort((n,r)=>Gr(n)-Gr(r));if(mr.length=0,Sn){Sn.push(...e);return}for(Sn=e,hr=0;hr<Sn.length;hr++){const n=Sn[hr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Sn=null,hr=0}}const Gr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ll(t){ho=!1,Jr=!0;try{for(en=0;en<At.length;en++){const e=At[en];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;en<At.length;en++){const e=At[en];e&&(e.flags&=-2)}en=0,At.length=0,ul(),Jr=!1,zo=null,(At.length||mr.length)&&ll()}}let Kt=null,cl=null;function Ki(t){const e=Kt;return Kt=t,cl=t&&t.type.__scopeId||null,e}function Ih(t,e=Kt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Xa(-1);const a=Ki(e);let l;try{l=t(...s)}finally{Ki(a),r._d&&Xa(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function bn(t,e){if(Kt===null)return t;const n=ts(Kt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,l,h,f=tt]=e[s];a&&(Pe(a)&&(a={mounted:a,updated:a}),a.deep&&cn(l),r.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:f}))}return t}function Nn(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const h=s[l];a&&(h.oldValue=a[l].value);let f=h.dir[r];f&&(In(),rn(f,n,8,[t.el,h,t,e]),Dn())}}const Dh=Symbol("_vte"),$h=t=>t.__isTeleport;function Go(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Go(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function fo(t,e,n,r,s=!1){if(xe(t)){t.forEach((se,le)=>fo(se,e&&(xe(e)?e[le]:e),n,r,s));return}if(Br(r)&&!s)return;const a=r.shapeFlag&4?ts(r.component):r.el,l=s?null:a,{i:h,r:f}=t,y=e&&e.r,g=h.refs===tt?h.refs={}:h.refs,b=h.setupState,R=ze(b),V=b===tt?()=>!1:se=>We(R,se);if(y!=null&&y!==f&&(gt(y)?(g[y]=null,V(y)&&(b[y]=null)):Et(y)&&(y.value=null)),Pe(f))Xr(f,h,12,[l,g]);else{const se=gt(f),le=Et(f);if(se||le){const me=()=>{if(t.f){const we=se?V(f)?b[f]:g[f]:f.value;s?xe(we)&&Io(we,a):xe(we)?we.includes(a)||we.push(a):se?(g[f]=[a],V(f)&&(b[f]=g[f])):(f.value=[a],t.k&&(g[t.k]=f.value))}else se?(g[f]=l,V(f)&&(b[f]=l)):le&&(f.value=l,t.k&&(g[t.k]=l))};l?(me.id=-1,Lt(me,n)):me()}}}const Br=t=>!!t.type.__asyncLoader,fl=t=>t.type.__isKeepAlive;function Lh(t,e){dl(t,"a",e)}function Fh(t,e){dl(t,"da",e)}function dl(t,e,n=xt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Yi(e,r,n),n){let s=n.parent;for(;s&&s.parent;)fl(s.parent.vnode)&&Mh(r,e,n,s),s=s.parent}}function Mh(t,e,n,r){const s=Yi(e,t,r,!0);gl(()=>{Io(r[e],s)},n)}function Yi(t,e,n=xt,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...l)=>{In();const h=Zr(n),f=rn(e,n,t,l);return h(),Dn(),f});return r?s.unshift(a):s.push(a),a}}const fn=t=>(e,n=xt)=>{(!es||t==="sp")&&Yi(t,(...r)=>e(...r),n)},Uh=fn("bm"),pl=fn("m"),Kh=fn("bu"),Bh=fn("u"),Nh=fn("bum"),gl=fn("um"),qh=fn("sp"),Hh=fn("rtg"),Vh=fn("rtc");function Wh(t,e=xt){Yi("ec",t,e)}const zh="components";function po(t,e){return Gh(zh,t,!0,e)||t}const Jh=Symbol.for("v-ndc");function Gh(t,e,n=!0,r=!1){const s=Kt||xt;if(s){const a=s.type;{const h=Ff(a,!1);if(h&&(h===e||h===Wt(e)||h===zi(Wt(e))))return a}const l=Ha(s[t]||a[t],e)||Ha(s.appContext[t],e);return!l&&r?a:l}}function Ha(t,e){return t&&(t[e]||t[Wt(e)]||t[zi(Wt(e))])}function Ws(t,e,n,r){let s;const a=n,l=xe(t);if(l||gt(t)){const h=l&&yr(t);let f=!1;h&&(f=!Vt(t),t=Ji(t)),s=new Array(t.length);for(let y=0,g=t.length;y<g;y++)s[y]=e(f?kt(t[y]):t[y],y,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let h=0;h<t;h++)s[h]=e(h+1,h,void 0,a)}else if(ct(t))if(t[Symbol.iterator])s=Array.from(t,(h,f)=>e(h,f,void 0,a));else{const h=Object.keys(t);s=new Array(h.length);for(let f=0,y=h.length;f<y;f++){const g=h[f];s[f]=e(t[g],g,f,a)}}else s=[];return s}const go=t=>t?Fl(t)?ts(t):go(t.parent):null,Nr=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>go(t.parent),$root:t=>go(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Qo(t),$forceUpdate:t=>t.f||(t.f=()=>{Jo(t.update)}),$nextTick:t=>t.n||(t.n=Ah.bind(t.proxy)),$watch:t=>vf.bind(t)}),zs=(t,e)=>t!==tt&&!t.__isScriptSetup&&We(t,e),Qh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:l,type:h,appContext:f}=t;let y;if(e[0]!=="$"){const V=l[e];if(V!==void 0)switch(V){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(zs(r,e))return l[e]=1,r[e];if(s!==tt&&We(s,e))return l[e]=2,s[e];if((y=t.propsOptions[0])&&We(y,e))return l[e]=3,a[e];if(n!==tt&&We(n,e))return l[e]=4,n[e];yo&&(l[e]=0)}}const g=Nr[e];let b,R;if(g)return e==="$attrs"&&Ot(t.attrs,"get",""),g(t);if((b=h.__cssModules)&&(b=b[e]))return b;if(n!==tt&&We(n,e))return l[e]=4,n[e];if(R=f.config.globalProperties,We(R,e))return R[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;return zs(s,e)?(s[e]=n,!0):r!==tt&&We(r,e)?(r[e]=n,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},l){let h;return!!n[l]||t!==tt&&We(t,l)||zs(e,l)||(h=a[0])&&We(h,l)||We(r,l)||We(Nr,l)||We(s.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:We(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Va(t){return xe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let yo=!0;function Yh(t){const e=Qo(t),n=t.proxy,r=t.ctx;yo=!1,e.beforeCreate&&Wa(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:h,provide:f,inject:y,created:g,beforeMount:b,mounted:R,beforeUpdate:V,updated:se,activated:le,deactivated:me,beforeDestroy:we,beforeUnmount:je,destroyed:Re,unmounted:ce,render:Le,renderTracked:Ye,renderTriggered:_e,errorCaptured:I,serverPrefetch:j,expose:W,inheritAttrs:ue,components:he,directives:ge,filters:Ce}=e;if(y&&Xh(y,r,null),l)for(const Z in l){const ye=l[Z];Pe(ye)&&(r[Z]=ye.bind(n))}if(s){const Z=s.call(n,n);ct(Z)&&(t.data=qo(Z))}if(yo=!0,a)for(const Z in a){const ye=a[Z],de=Pe(ye)?ye.bind(n,n):Pe(ye.get)?ye.get.bind(n,n):nn,nt=!Pe(ye)&&Pe(ye.set)?ye.set.bind(n):nn,Qe=Uf({get:de,set:nt});Object.defineProperty(r,Z,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:oe=>Qe.value=oe})}if(h)for(const Z in h)yl(h[Z],r,n,Z);if(f){const Z=Pe(f)?f.call(n):f;Reflect.ownKeys(Z).forEach(ye=>{sf(ye,Z[ye])})}g&&Wa(g,t,"c");function Se(Z,ye){xe(ye)?ye.forEach(de=>Z(de.bind(n))):ye&&Z(ye.bind(n))}if(Se(Uh,b),Se(pl,R),Se(Kh,V),Se(Bh,se),Se(Lh,le),Se(Fh,me),Se(Wh,I),Se(Vh,Ye),Se(Hh,_e),Se(Nh,je),Se(gl,ce),Se(qh,j),xe(W))if(W.length){const Z=t.exposed||(t.exposed={});W.forEach(ye=>{Object.defineProperty(Z,ye,{get:()=>n[ye],set:de=>n[ye]=de})})}else t.exposed||(t.exposed={});Le&&t.render===nn&&(t.render=Le),ue!=null&&(t.inheritAttrs=ue),he&&(t.components=he),ge&&(t.directives=ge),j&&hl(t)}function Xh(t,e,n=nn){xe(t)&&(t=mo(t));for(const r in t){const s=t[r];let a;ct(s)?"default"in s?a=Li(s.from||r,s.default,!0):a=Li(s.from||r):a=Li(s),Et(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[r]=a}}function Wa(t,e,n){rn(xe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function yl(t,e,n,r){let s=r.includes(".")?Al(n,r):()=>n[r];if(gt(t)){const a=e[t];Pe(a)&&Gs(s,a)}else if(Pe(t))Gs(s,t.bind(n));else if(ct(t))if(xe(t))t.forEach(a=>yl(a,e,n,r));else{const a=Pe(t.handler)?t.handler.bind(n):e[t.handler];Pe(a)&&Gs(s,a,t)}}function Qo(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,h=a.get(e);let f;return h?f=h:!s.length&&!n&&!r?f=e:(f={},s.length&&s.forEach(y=>Bi(f,y,l,!0)),Bi(f,e,l)),ct(e)&&a.set(e,f),f}function Bi(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&Bi(t,a,n,!0),s&&s.forEach(l=>Bi(t,l,n,!0));for(const l in e)if(!(r&&l==="expose")){const h=Zh[l]||n&&n[l];t[l]=h?h(t[l],e[l]):e[l]}return t}const Zh={data:za,props:Ja,emits:Ja,methods:Mr,computed:Mr,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:Mr,directives:Mr,watch:tf,provide:za,inject:ef};function za(t,e){return e?t?function(){return St(Pe(t)?t.call(this,this):t,Pe(e)?e.call(this,this):e)}:e:t}function ef(t,e){return Mr(mo(t),mo(e))}function mo(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ct(t,e){return t?[...new Set([].concat(t,e))]:e}function Mr(t,e){return t?St(Object.create(null),t,e):e}function Ja(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:St(Object.create(null),Va(t),Va(e??{})):e}function tf(t,e){if(!t)return e;if(!e)return t;const n=St(Object.create(null),t);for(const r in e)n[r]=Ct(t[r],e[r]);return n}function ml(){return{app:null,config:{isNativeTag:Mc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nf=0;function rf(t,e){return function(r,s=null){Pe(r)||(r=St({},r)),s!=null&&!ct(s)&&(s=null);const a=ml(),l=new WeakSet,h=[];let f=!1;const y=a.app={_uid:nf++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Kf,get config(){return a.config},set config(g){},use(g,...b){return l.has(g)||(g&&Pe(g.install)?(l.add(g),g.install(y,...b)):Pe(g)&&(l.add(g),g(y,...b))),y},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),y},component(g,b){return b?(a.components[g]=b,y):a.components[g]},directive(g,b){return b?(a.directives[g]=b,y):a.directives[g]},mount(g,b,R){if(!f){const V=y._ceVNode||Nt(r,s);return V.appContext=a,R===!0?R="svg":R===!1&&(R=void 0),b&&e?e(V,g):t(V,g,R),f=!0,y._container=g,g.__vue_app__=y,ts(V.component)}},onUnmount(g){h.push(g)},unmount(){f&&(rn(h,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(g,b){return a.provides[g]=b,y},runWithContext(g){const b=vr;vr=y;try{return g()}finally{vr=b}}};return y}}let vr=null;function sf(t,e){if(xt){let n=xt.provides;const r=xt.parent&&xt.parent.provides;r===n&&(n=xt.provides=Object.create(r)),n[t]=e}}function Li(t,e,n=!1){const r=xt||Kt;if(r||vr){const s=vr?vr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}const vl={},_l=()=>Object.create(vl),bl=t=>Object.getPrototypeOf(t)===vl;function of(t,e,n,r=!1){const s={},a=_l();t.propsDefaults=Object.create(null),wl(t,e,s,a);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);n?t.props=r?s:vh(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function af(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,h=ze(s),[f]=t.propsOptions;let y=!1;if((r||l>0)&&!(l&16)){if(l&8){const g=t.vnode.dynamicProps;for(let b=0;b<g.length;b++){let R=g[b];if(Xi(t.emitsOptions,R))continue;const V=e[R];if(f)if(We(a,R))V!==a[R]&&(a[R]=V,y=!0);else{const se=Wt(R);s[se]=vo(f,h,se,V,t,!1)}else V!==a[R]&&(a[R]=V,y=!0)}}}else{wl(t,e,s,a)&&(y=!0);let g;for(const b in h)(!e||!We(e,b)&&((g=Rn(b))===b||!We(e,g)))&&(f?n&&(n[b]!==void 0||n[g]!==void 0)&&(s[b]=vo(f,h,b,void 0,t,!0)):delete s[b]);if(a!==h)for(const b in a)(!e||!We(e,b))&&(delete a[b],y=!0)}y&&hn(t.attrs,"set","")}function wl(t,e,n,r){const[s,a]=t.propsOptions;let l=!1,h;if(e)for(let f in e){if(Kr(f))continue;const y=e[f];let g;s&&We(s,g=Wt(f))?!a||!a.includes(g)?n[g]=y:(h||(h={}))[g]=y:Xi(t.emitsOptions,f)||(!(f in r)||y!==r[f])&&(r[f]=y,l=!0)}if(a){const f=ze(n),y=h||tt;for(let g=0;g<a.length;g++){const b=a[g];n[b]=vo(s,f,b,y[b],t,!We(y,b))}}return l}function vo(t,e,n,r,s,a){const l=t[n];if(l!=null){const h=We(l,"default");if(h&&r===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&Pe(f)){const{propsDefaults:y}=s;if(n in y)r=y[n];else{const g=Zr(s);r=y[n]=f.call(null,e),g()}}else r=f;s.ce&&s.ce._setProp(n,r)}l[0]&&(a&&!h?r=!1:l[1]&&(r===""||r===Rn(n))&&(r=!0))}return r}const uf=new WeakMap;function kl(t,e,n=!1){const r=n?uf:e.propsCache,s=r.get(t);if(s)return s;const a=t.props,l={},h=[];let f=!1;if(!Pe(t)){const g=b=>{f=!0;const[R,V]=kl(b,e,!0);St(l,R),V&&h.push(...V)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!f)return ct(t)&&r.set(t,pr),pr;if(xe(a))for(let g=0;g<a.length;g++){const b=Wt(a[g]);Ga(b)&&(l[b]=tt)}else if(a)for(const g in a){const b=Wt(g);if(Ga(b)){const R=a[g],V=l[b]=xe(R)||Pe(R)?{type:R}:St({},R),se=V.type;let le=!1,me=!0;if(xe(se))for(let we=0;we<se.length;++we){const je=se[we],Re=Pe(je)&&je.name;if(Re==="Boolean"){le=!0;break}else Re==="String"&&(me=!1)}else le=Pe(se)&&se.name==="Boolean";V[0]=le,V[1]=me,(le||We(V,"default"))&&h.push(b)}}const y=[l,h];return ct(t)&&r.set(t,y),y}function Ga(t){return t[0]!=="$"&&!Kr(t)}const xl=t=>t[0]==="_"||t==="$stable",Yo=t=>xe(t)?t.map(tn):[tn(t)],lf=(t,e,n)=>{if(e._n)return e;const r=Ih((...s)=>Yo(e(...s)),n);return r._c=!1,r},El=(t,e,n)=>{const r=t._ctx;for(const s in t){if(xl(s))continue;const a=t[s];if(Pe(a))e[s]=lf(s,a,r);else if(a!=null){const l=Yo(a);e[s]=()=>l}}},Sl=(t,e)=>{const n=Yo(e);t.slots.default=()=>n},Ol=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},cf=(t,e,n)=>{const r=t.slots=_l();if(t.vnode.shapeFlag&32){const s=e._;s?(Ol(r,e,n),n&&Uu(r,"_",s,!0)):El(e,r)}else e&&Sl(t,e)},hf=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,l=tt;if(r.shapeFlag&32){const h=e._;h?n&&h===1?a=!1:Ol(s,e,n):(a=!e.$stable,El(e,s)),l=e}else e&&(Sl(t,e),l={default:1});if(a)for(const h in s)!xl(h)&&l[h]==null&&delete s[h]},Lt=Sf;function ff(t){return df(t)}function df(t,e){const n=Ku();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:h,createComment:f,setText:y,setElementText:g,parentNode:b,nextSibling:R,setScopeId:V=nn,insertStaticContent:se}=t,le=(v,k,D,M=null,B=null,N=null,X=void 0,J=null,H=!!k.dynamicChildren)=>{if(v===k)return;v&&!$r(v,k)&&(M=Xe(v),oe(v,B,N,!0),v=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:ee}=k;switch(K){case Zi:me(v,k,D,M);break;case Yn:we(v,k,D,M);break;case Ys:v==null&&je(k,D,M,X);break;case Ut:he(v,k,D,M,B,N,X,J,H);break;default:ee&1?Le(v,k,D,M,B,N,X,J,H):ee&6?ge(v,k,D,M,B,N,X,J,H):(ee&64||ee&128)&&K.process(v,k,D,M,B,N,X,J,H,Fe)}ie!=null&&B&&fo(ie,v&&v.ref,N,k||v,!k)},me=(v,k,D,M)=>{if(v==null)r(k.el=h(k.children),D,M);else{const B=k.el=v.el;k.children!==v.children&&y(B,k.children)}},we=(v,k,D,M)=>{v==null?r(k.el=f(k.children||""),D,M):k.el=v.el},je=(v,k,D,M)=>{[v.el,v.anchor]=se(v.children,k,D,M,v.el,v.anchor)},Re=({el:v,anchor:k},D,M)=>{let B;for(;v&&v!==k;)B=R(v),r(v,D,M),v=B;r(k,D,M)},ce=({el:v,anchor:k})=>{let D;for(;v&&v!==k;)D=R(v),s(v),v=D;s(k)},Le=(v,k,D,M,B,N,X,J,H)=>{k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),v==null?Ye(k,D,M,B,N,X,J,H):j(v,k,B,N,X,J,H)},Ye=(v,k,D,M,B,N,X,J)=>{let H,K;const{props:ie,shapeFlag:ee,transition:Y,dirs:pe}=v;if(H=v.el=l(v.type,N,ie&&ie.is,ie),ee&8?g(H,v.children):ee&16&&I(v.children,H,null,M,B,Js(v,N),X,J),pe&&Nn(v,null,M,"created"),_e(H,v,v.scopeId,X,M),ie){for(const Ae in ie)Ae!=="value"&&!Kr(Ae)&&a(H,Ae,null,ie[Ae],N,M);"value"in ie&&a(H,"value",null,ie.value,N),(K=ie.onVnodeBeforeMount)&&Zt(K,M,v)}pe&&Nn(v,null,M,"beforeMount");const ke=pf(B,Y);ke&&Y.beforeEnter(H),r(H,k,D),((K=ie&&ie.onVnodeMounted)||ke||pe)&&Lt(()=>{K&&Zt(K,M,v),ke&&Y.enter(H),pe&&Nn(v,null,M,"mounted")},B)},_e=(v,k,D,M,B)=>{if(D&&V(v,D),M)for(let N=0;N<M.length;N++)V(v,M[N]);if(B){let N=B.subTree;if(k===N||Rl(N.type)&&(N.ssContent===k||N.ssFallback===k)){const X=B.vnode;_e(v,X,X.scopeId,X.slotScopeIds,B.parent)}}},I=(v,k,D,M,B,N,X,J,H=0)=>{for(let K=H;K<v.length;K++){const ie=v[K]=J?On(v[K]):tn(v[K]);le(null,ie,k,D,M,B,N,X,J)}},j=(v,k,D,M,B,N,X)=>{const J=k.el=v.el;let{patchFlag:H,dynamicChildren:K,dirs:ie}=k;H|=v.patchFlag&16;const ee=v.props||tt,Y=k.props||tt;let pe;if(D&&qn(D,!1),(pe=Y.onVnodeBeforeUpdate)&&Zt(pe,D,k,v),ie&&Nn(k,v,D,"beforeUpdate"),D&&qn(D,!0),(ee.innerHTML&&Y.innerHTML==null||ee.textContent&&Y.textContent==null)&&g(J,""),K?W(v.dynamicChildren,K,J,D,M,Js(k,B),N):X||ye(v,k,J,null,D,M,Js(k,B),N,!1),H>0){if(H&16)ue(J,ee,Y,D,B);else if(H&2&&ee.class!==Y.class&&a(J,"class",null,Y.class,B),H&4&&a(J,"style",ee.style,Y.style,B),H&8){const ke=k.dynamicProps;for(let Ae=0;Ae<ke.length;Ae++){const Oe=ke[Ae],Ze=ee[Oe],Be=Y[Oe];(Be!==Ze||Oe==="value")&&a(J,Oe,Ze,Be,B,D)}}H&1&&v.children!==k.children&&g(J,k.children)}else!X&&K==null&&ue(J,ee,Y,D,B);((pe=Y.onVnodeUpdated)||ie)&&Lt(()=>{pe&&Zt(pe,D,k,v),ie&&Nn(k,v,D,"updated")},M)},W=(v,k,D,M,B,N,X)=>{for(let J=0;J<k.length;J++){const H=v[J],K=k[J],ie=H.el&&(H.type===Ut||!$r(H,K)||H.shapeFlag&70)?b(H.el):D;le(H,K,ie,null,M,B,N,X,!0)}},ue=(v,k,D,M,B)=>{if(k!==D){if(k!==tt)for(const N in k)!Kr(N)&&!(N in D)&&a(v,N,k[N],null,B,M);for(const N in D){if(Kr(N))continue;const X=D[N],J=k[N];X!==J&&N!=="value"&&a(v,N,J,X,B,M)}"value"in D&&a(v,"value",k.value,D.value,B)}},he=(v,k,D,M,B,N,X,J,H)=>{const K=k.el=v?v.el:h(""),ie=k.anchor=v?v.anchor:h("");let{patchFlag:ee,dynamicChildren:Y,slotScopeIds:pe}=k;pe&&(J=J?J.concat(pe):pe),v==null?(r(K,D,M),r(ie,D,M),I(k.children||[],D,ie,B,N,X,J,H)):ee>0&&ee&64&&Y&&v.dynamicChildren?(W(v.dynamicChildren,Y,D,B,N,X,J),(k.key!=null||B&&k===B.subTree)&&Tl(v,k,!0)):ye(v,k,D,ie,B,N,X,J,H)},ge=(v,k,D,M,B,N,X,J,H)=>{k.slotScopeIds=J,v==null?k.shapeFlag&512?B.ctx.activate(k,D,M,X,H):Ce(k,D,M,B,N,X,H):ot(v,k,H)},Ce=(v,k,D,M,B,N,X)=>{const J=v.component=Rf(v,M,B);if(fl(v)&&(J.ctx.renderer=Fe),If(J,!1,X),J.asyncDep){if(B&&B.registerDep(J,Se,X),!v.el){const H=J.subTree=Nt(Yn);we(null,H,k,D)}}else Se(J,v,k,D,B,N,X)},ot=(v,k,D)=>{const M=k.component=v.component;if(xf(v,k,D))if(M.asyncDep&&!M.asyncResolved){Z(M,k,D);return}else M.next=k,M.update();else k.el=v.el,M.vnode=k},Se=(v,k,D,M,B,N,X)=>{const J=()=>{if(v.isMounted){let{next:ee,bu:Y,u:pe,parent:ke,vnode:Ae}=v;{const ht=Pl(v);if(ht){ee&&(ee.el=Ae.el,Z(v,ee,X)),ht.asyncDep.then(()=>{v.isUnmounted||J()});return}}let Oe=ee,Ze;qn(v,!1),ee?(ee.el=Ae.el,Z(v,ee,X)):ee=Ae,Y&&$i(Y),(Ze=ee.props&&ee.props.onVnodeBeforeUpdate)&&Zt(Ze,ke,ee,Ae),qn(v,!0);const Be=Qs(v),Ge=v.subTree;v.subTree=Be,le(Ge,Be,b(Ge.el),Xe(Ge),v,B,N),ee.el=Be.el,Oe===null&&Ef(v,Be.el),pe&&Lt(pe,B),(Ze=ee.props&&ee.props.onVnodeUpdated)&&Lt(()=>Zt(Ze,ke,ee,Ae),B)}else{let ee;const{el:Y,props:pe}=k,{bm:ke,m:Ae,parent:Oe,root:Ze,type:Be}=v,Ge=Br(k);if(qn(v,!1),ke&&$i(ke),!Ge&&(ee=pe&&pe.onVnodeBeforeMount)&&Zt(ee,Oe,k),qn(v,!0),Y&&be){const ht=()=>{v.subTree=Qs(v),be(Y,v.subTree,v,B,null)};Ge&&Be.__asyncHydrate?Be.__asyncHydrate(Y,v,ht):ht()}else{Ze.ce&&Ze.ce._injectChildStyle(Be);const ht=v.subTree=Qs(v);le(null,ht,D,M,v,B,N),k.el=ht.el}if(Ae&&Lt(Ae,B),!Ge&&(ee=pe&&pe.onVnodeMounted)){const ht=k;Lt(()=>Zt(ee,Oe,ht),B)}(k.shapeFlag&256||Oe&&Br(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&v.a&&Lt(v.a,B),v.isMounted=!0,k=D=M=null}};v.scope.on();const H=v.effect=new Hu(J);v.scope.off();const K=v.update=H.run.bind(H),ie=v.job=H.runIfDirty.bind(H);ie.i=v,ie.id=v.uid,H.scheduler=()=>Jo(ie),qn(v,!0),K()},Z=(v,k,D)=>{k.component=v;const M=v.vnode.props;v.vnode=k,v.next=null,af(v,k.props,M,D),hf(v,k.children,D),In(),qa(v),Dn()},ye=(v,k,D,M,B,N,X,J,H=!1)=>{const K=v&&v.children,ie=v?v.shapeFlag:0,ee=k.children,{patchFlag:Y,shapeFlag:pe}=k;if(Y>0){if(Y&128){nt(K,ee,D,M,B,N,X,J,H);return}else if(Y&256){de(K,ee,D,M,B,N,X,J,H);return}}pe&8?(ie&16&&Ve(K,B,N),ee!==K&&g(D,ee)):ie&16?pe&16?nt(K,ee,D,M,B,N,X,J,H):Ve(K,B,N,!0):(ie&8&&g(D,""),pe&16&&I(ee,D,M,B,N,X,J,H))},de=(v,k,D,M,B,N,X,J,H)=>{v=v||pr,k=k||pr;const K=v.length,ie=k.length,ee=Math.min(K,ie);let Y;for(Y=0;Y<ee;Y++){const pe=k[Y]=H?On(k[Y]):tn(k[Y]);le(v[Y],pe,D,null,B,N,X,J,H)}K>ie?Ve(v,B,N,!0,!1,ee):I(k,D,M,B,N,X,J,H,ee)},nt=(v,k,D,M,B,N,X,J,H)=>{let K=0;const ie=k.length;let ee=v.length-1,Y=ie-1;for(;K<=ee&&K<=Y;){const pe=v[K],ke=k[K]=H?On(k[K]):tn(k[K]);if($r(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;K++}for(;K<=ee&&K<=Y;){const pe=v[ee],ke=k[Y]=H?On(k[Y]):tn(k[Y]);if($r(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;ee--,Y--}if(K>ee){if(K<=Y){const pe=Y+1,ke=pe<ie?k[pe].el:M;for(;K<=Y;)le(null,k[K]=H?On(k[K]):tn(k[K]),D,ke,B,N,X,J,H),K++}}else if(K>Y)for(;K<=ee;)oe(v[K],B,N,!0),K++;else{const pe=K,ke=K,Ae=new Map;for(K=ke;K<=Y;K++){const lt=k[K]=H?On(k[K]):tn(k[K]);lt.key!=null&&Ae.set(lt.key,K)}let Oe,Ze=0;const Be=Y-ke+1;let Ge=!1,ht=0;const et=new Array(Be);for(K=0;K<Be;K++)et[K]=0;for(K=pe;K<=ee;K++){const lt=v[K];if(Ze>=Be){oe(lt,B,N,!0);continue}let yt;if(lt.key!=null)yt=Ae.get(lt.key);else for(Oe=ke;Oe<=Y;Oe++)if(et[Oe-ke]===0&&$r(lt,k[Oe])){yt=Oe;break}yt===void 0?oe(lt,B,N,!0):(et[yt-ke]=K+1,yt>=ht?ht=yt:Ge=!0,le(lt,k[yt],D,null,B,N,X,J,H),Ze++)}const fe=Ge?gf(et):pr;for(Oe=fe.length-1,K=Be-1;K>=0;K--){const lt=ke+K,yt=k[lt],$n=lt+1<ie?k[lt+1].el:M;et[K]===0?le(null,yt,D,$n,B,N,X,J,H):Ge&&(Oe<0||K!==fe[Oe]?Qe(yt,D,$n,2):Oe--)}}},Qe=(v,k,D,M,B=null)=>{const{el:N,type:X,transition:J,children:H,shapeFlag:K}=v;if(K&6){Qe(v.component.subTree,k,D,M);return}if(K&128){v.suspense.move(k,D,M);return}if(K&64){X.move(v,k,D,Fe);return}if(X===Ut){r(N,k,D);for(let ee=0;ee<H.length;ee++)Qe(H[ee],k,D,M);r(v.anchor,k,D);return}if(X===Ys){Re(v,k,D);return}if(M!==2&&K&1&&J)if(M===0)J.beforeEnter(N),r(N,k,D),Lt(()=>J.enter(N),B);else{const{leave:ee,delayLeave:Y,afterLeave:pe}=J,ke=()=>r(N,k,D),Ae=()=>{ee(N,()=>{ke(),pe&&pe()})};Y?Y(N,ke,Ae):Ae()}else r(N,k,D)},oe=(v,k,D,M=!1,B=!1)=>{const{type:N,props:X,ref:J,children:H,dynamicChildren:K,shapeFlag:ie,patchFlag:ee,dirs:Y,cacheIndex:pe}=v;if(ee===-2&&(B=!1),J!=null&&fo(J,null,D,v,!0),pe!=null&&(k.renderCache[pe]=void 0),ie&256){k.ctx.deactivate(v);return}const ke=ie&1&&Y,Ae=!Br(v);let Oe;if(Ae&&(Oe=X&&X.onVnodeBeforeUnmount)&&Zt(Oe,k,v),ie&6)Je(v.component,D,M);else{if(ie&128){v.suspense.unmount(D,M);return}ke&&Nn(v,null,k,"beforeUnmount"),ie&64?v.type.remove(v,k,D,Fe,M):K&&!K.hasOnce&&(N!==Ut||ee>0&&ee&64)?Ve(K,k,D,!1,!0):(N===Ut&&ee&384||!B&&ie&16)&&Ve(H,k,D),M&&Ke(v)}(Ae&&(Oe=X&&X.onVnodeUnmounted)||ke)&&Lt(()=>{Oe&&Zt(Oe,k,v),ke&&Nn(v,null,k,"unmounted")},D)},Ke=v=>{const{type:k,el:D,anchor:M,transition:B}=v;if(k===Ut){ft(D,M);return}if(k===Ys){ce(v);return}const N=()=>{s(D),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(v.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:J}=B,H=()=>X(D,N);J?J(v.el,N,H):H()}else N()},ft=(v,k)=>{let D;for(;v!==k;)D=R(v),s(v),v=D;s(k)},Je=(v,k,D)=>{const{bum:M,scope:B,job:N,subTree:X,um:J,m:H,a:K}=v;Qa(H),Qa(K),M&&$i(M),B.stop(),N&&(N.flags|=8,oe(X,v,k,D)),J&&Lt(J,k),Lt(()=>{v.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Ve=(v,k,D,M=!1,B=!1,N=0)=>{for(let X=N;X<v.length;X++)oe(v[X],k,D,M,B)},Xe=v=>{if(v.shapeFlag&6)return Xe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=R(v.anchor||v.el),D=k&&k[Dh];return D?R(D):k};let at=!1;const q=(v,k,D)=>{v==null?k._vnode&&oe(k._vnode,null,null,!0):le(k._vnode||null,v,k,null,null,null,D),k._vnode=v,at||(at=!0,qa(),ul(),at=!1)},Fe={p:le,um:oe,m:Qe,r:Ke,mt:Ce,mc:I,pc:ye,pbc:W,n:Xe,o:t};let He,be;return{render:q,hydrate:He,createApp:rf(q,He)}}function Js({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function qn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Tl(t,e,n=!1){const r=t.children,s=e.children;if(xe(r)&&xe(s))for(let a=0;a<r.length;a++){const l=r[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=On(s[a]),h.el=l.el),!n&&h.patchFlag!==-2&&Tl(l,h)),h.type===Zi&&(h.el=l.el)}}function gf(t){const e=t.slice(),n=[0];let r,s,a,l,h;const f=t.length;for(r=0;r<f;r++){const y=t[r];if(y!==0){if(s=n[n.length-1],t[s]<y){e[r]=s,n.push(r);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,t[n[h]]<y?a=h+1:l=h;y<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}function Pl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Pl(e)}function Qa(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const yf=Symbol.for("v-scx"),mf=()=>Li(yf);function Gs(t,e,n){return Cl(t,e,n)}function Cl(t,e,n=tt){const{immediate:r,deep:s,flush:a,once:l}=n,h=St({},n);let f;if(es)if(a==="sync"){const R=mf();f=R.__watcherHandles||(R.__watcherHandles=[])}else if(!e||r)h.once=!0;else{const R=()=>{};return R.stop=nn,R.resume=nn,R.pause=nn,R}const y=xt;h.call=(R,V,se)=>rn(R,y,V,se);let g=!1;a==="post"?h.scheduler=R=>{Lt(R,y&&y.suspense)}:a!=="sync"&&(g=!0,h.scheduler=(R,V)=>{V?R():Jo(R)}),h.augmentJob=R=>{e&&(R.flags|=4),g&&(R.flags|=2,y&&(R.id=y.uid,R.i=y))};const b=Ph(t,e,h);return f&&f.push(b),b}function vf(t,e,n){const r=this.proxy,s=gt(t)?t.includes(".")?Al(r,t):()=>r[t]:t.bind(r,r);let a;Pe(e)?a=e:(a=e.handler,n=e);const l=Zr(this),h=Cl(s,a.bind(r),n);return l(),h}function Al(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const _f=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Wt(e)}Modifiers`]||t[`${Rn(e)}Modifiers`];function bf(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||tt;let s=n;const a=e.startsWith("update:"),l=a&&_f(r,e.slice(7));l&&(l.trim&&(s=n.map(g=>gt(g)?g.trim():g)),l.number&&(s=n.map(ao)));let h,f=r[h=Bs(e)]||r[h=Bs(Wt(e))];!f&&a&&(f=r[h=Bs(Rn(e))]),f&&rn(f,t,6,s);const y=r[h+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,rn(y,t,6,s)}}function jl(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let l={},h=!1;if(!Pe(t)){const f=y=>{const g=jl(y,e,!0);g&&(h=!0,St(l,g))};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!h?(ct(t)&&r.set(t,null),null):(xe(a)?a.forEach(f=>l[f]=null):St(l,a),ct(t)&&r.set(t,l),l)}function Xi(t,e){return!t||!Hi(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,Rn(e))||We(t,e))}function Qs(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:l,attrs:h,emit:f,render:y,renderCache:g,props:b,data:R,setupState:V,ctx:se,inheritAttrs:le}=t,me=Ki(t);let we,je;try{if(n.shapeFlag&4){const ce=s||r,Le=ce;we=tn(y.call(Le,ce,g,b,V,R,se)),je=h}else{const ce=e;we=tn(ce.length>1?ce(b,{attrs:h,slots:l,emit:f}):ce(b,null)),je=e.props?h:wf(h)}}catch(ce){qr.length=0,Qi(ce,t,1),we=Nt(Yn)}let Re=we;if(je&&le!==!1){const ce=Object.keys(je),{shapeFlag:Le}=Re;ce.length&&Le&7&&(a&&ce.some(Ro)&&(je=kf(je,a)),Re=br(Re,je,!1,!0))}return n.dirs&&(Re=br(Re,null,!1,!0),Re.dirs=Re.dirs?Re.dirs.concat(n.dirs):n.dirs),n.transition&&Go(Re,n.transition),we=Re,Ki(me),we}const wf=t=>{let e;for(const n in t)(n==="class"||n==="style"||Hi(n))&&((e||(e={}))[n]=t[n]);return e},kf=(t,e)=>{const n={};for(const r in t)(!Ro(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function xf(t,e,n){const{props:r,children:s,component:a}=t,{props:l,children:h,patchFlag:f}=e,y=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?Ya(r,l,y):!!l;if(f&8){const g=e.dynamicProps;for(let b=0;b<g.length;b++){const R=g[b];if(l[R]!==r[R]&&!Xi(y,R))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:r===l?!1:r?l?Ya(r,l,y):!0:!!l;return!1}function Ya(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!Xi(n,a))return!0}return!1}function Ef({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Rl=t=>t.__isSuspense;function Sf(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):Rh(t)}const Ut=Symbol.for("v-fgt"),Zi=Symbol.for("v-txt"),Yn=Symbol.for("v-cmt"),Ys=Symbol.for("v-stc"),qr=[];let Bt=null;function It(t=!1){qr.push(Bt=t?null:[])}function Of(){qr.pop(),Bt=qr[qr.length-1]||null}let Qr=1;function Xa(t){Qr+=t,t<0&&Bt&&(Bt.hasOnce=!0)}function Il(t){return t.dynamicChildren=Qr>0?Bt||pr:null,Of(),Qr>0&&Bt&&Bt.push(t),t}function Ht(t,e,n,r,s,a){return Il(ve(t,e,n,r,s,a,!0))}function Dl(t,e,n,r,s){return Il(Nt(t,e,n,r,s,!0))}function $l(t){return t?t.__v_isVNode===!0:!1}function $r(t,e){return t.type===e.type&&t.key===e.key}const Ll=({key:t})=>t??null,Fi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?gt(t)||Et(t)||Pe(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function ve(t,e=null,n=null,r=0,s=null,a=t===Ut?0:1,l=!1,h=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ll(e),ref:e&&Fi(e),scopeId:cl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return h?(Xo(f,n),a&128&&t.normalize(f)):n&&(f.shapeFlag|=gt(n)?8:16),Qr>0&&!l&&Bt&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Bt.push(f),f}const Nt=Tf;function Tf(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===Jh)&&(t=Yn),$l(t)){const h=br(t,e,!0);return n&&Xo(h,n),Qr>0&&!a&&Bt&&(h.shapeFlag&6?Bt[Bt.indexOf(t)]=h:Bt.push(h)),h.patchFlag=-2,h}if(Mf(t)&&(t=t.__vccOpts),e){e=Pf(e);let{class:h,style:f}=e;h&&!gt(h)&&(e.class=Lo(h)),ct(f)&&(Vo(f)&&!xe(f)&&(f=St({},f)),e.style=$o(f))}const l=gt(t)?1:Rl(t)?128:$h(t)?64:ct(t)?4:Pe(t)?2:0;return ve(t,e,n,r,s,l,a,!0)}function Pf(t){return t?Vo(t)||bl(t)?St({},t):t:null}function br(t,e,n=!1,r=!1){const{props:s,ref:a,patchFlag:l,children:h,transition:f}=t,y=e?Cf(s||{},e):s,g={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Ll(y),ref:e&&e.ref?n&&a?xe(a)?a.concat(Fi(e)):[a,Fi(e)]:Fi(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ut?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&br(t.ssContent),ssFallback:t.ssFallback&&br(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&r&&Go(g,f.clone(g)),g}function _o(t=" ",e=0){return Nt(Zi,null,t,e)}function Xs(t="",e=!1){return e?(It(),Dl(Yn,null,t)):Nt(Yn,null,t)}function tn(t){return t==null||typeof t=="boolean"?Nt(Yn):xe(t)?Nt(Ut,null,t.slice()):$l(t)?On(t):Nt(Zi,null,String(t))}function On(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:br(t)}function Xo(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(xe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Xo(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!bl(e)?e._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[_o(e)]):n=8);t.children=e,t.shapeFlag|=n}function Cf(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Lo([e.class,r.class]));else if(s==="style")e.style=$o([e.style,r.style]);else if(Hi(s)){const a=e[s],l=r[s];l&&a!==l&&!(xe(a)&&a.includes(l))&&(e[s]=a?[].concat(a,l):l)}else s!==""&&(e[s]=r[s])}return e}function Zt(t,e,n,r=null){rn(t,e,7,[n,r])}const Af=ml();let jf=0;function Rf(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Af,a={uid:jf++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kl(r,s),emitsOptions:jl(r,s),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=bf.bind(null,a),t.ce&&t.ce(a),a}let xt=null,Ni,bo;{const t=Ku(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};Ni=e("__VUE_INSTANCE_SETTERS__",n=>xt=n),bo=e("__VUE_SSR_SETTERS__",n=>es=n)}const Zr=t=>{const e=xt;return Ni(t),t.scope.on(),()=>{t.scope.off(),Ni(e)}},Za=()=>{xt&&xt.scope.off(),Ni(null)};function Fl(t){return t.vnode.shapeFlag&4}let es=!1;function If(t,e=!1,n=!1){e&&bo(e);const{props:r,children:s}=t.vnode,a=Fl(t);of(t,r,a,e),cf(t,s,n);const l=a?Df(t,e):void 0;return e&&bo(!1),l}function Df(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Qh);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Lf(t):null,a=Zr(t);In();const l=Xr(r,t,0,[t.props,s]);if(Dn(),a(),Lu(l)){if(Br(t)||hl(t),l.then(Za,Za),e)return l.then(h=>{eu(t,h,e)}).catch(h=>{Qi(h,t,0)});t.asyncDep=l}else eu(t,l,e)}else Ml(t,e)}function eu(t,e,n){Pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=sl(e)),Ml(t,n)}let tu;function Ml(t,e,n){const r=t.type;if(!t.render){if(!e&&tu&&!r.render){const s=r.template||Qo(t).template;if(s){const{isCustomElement:a,compilerOptions:l}=t.appContext.config,{delimiters:h,compilerOptions:f}=r,y=St(St({isCustomElement:a,delimiters:h},l),f);r.render=tu(s,y)}}t.render=r.render||nn}{const s=Zr(t);In();try{Yh(t)}finally{Dn(),s()}}}const $f={get(t,e){return Ot(t,"get",""),t[e]}};function Lf(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,$f),slots:t.slots,emit:t.emit,expose:e}}function ts(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sl(_h(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Nr)return Nr[n](t)},has(e,n){return n in e||n in Nr}})):t.proxy}function Ff(t,e=!0){return Pe(t)?t.displayName||t.name:t.name||e&&t.__name}function Mf(t){return Pe(t)&&"__vccOpts"in t}const Uf=(t,e)=>Oh(t,e,es),Kf="3.5.10";/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wo;const nu=typeof window<"u"&&window.trustedTypes;if(nu)try{wo=nu.createPolicy("vue",{createHTML:t=>t})}catch{}const Ul=wo?t=>wo.createHTML(t):t=>t,Bf="http://www.w3.org/2000/svg",Nf="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,ru=ln&&ln.createElement("template"),qf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?ln.createElementNS(Bf,t):e==="mathml"?ln.createElementNS(Nf,t):n?ln.createElement(t,{is:n}):ln.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>ln.createTextNode(t),createComment:t=>ln.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ln.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,a){const l=n?n.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{ru.innerHTML=Ul(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const h=ru.content;if(r==="svg"||r==="mathml"){const f=h.firstChild;for(;f.firstChild;)h.appendChild(f.firstChild);h.removeChild(f)}e.insertBefore(h,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Hf=Symbol("_vtc");function Vf(t,e,n){const r=t[Hf];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const iu=Symbol("_vod"),Wf=Symbol("_vsh"),zf=Symbol(""),Jf=/(^|;)\s*display\s*:/;function Gf(t,e,n){const r=t.style,s=gt(n);let a=!1;if(n&&!s){if(e)if(gt(e))for(const l of e.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&Mi(r,h,"")}else for(const l in e)n[l]==null&&Mi(r,l,"");for(const l in n)l==="display"&&(a=!0),Mi(r,l,n[l])}else if(s){if(e!==n){const l=r[zf];l&&(n+=";"+l),r.cssText=n,a=Jf.test(n)}}else e&&t.removeAttribute("style");iu in t&&(t[iu]=a?r.display:"",t[Wf]&&(r.display="none"))}const su=/\s*!important$/;function Mi(t,e,n){if(xe(n))n.forEach(r=>Mi(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Qf(t,e);su.test(n)?t.setProperty(Rn(r),n.replace(su,""),"important"):t[r]=n}}const ou=["Webkit","Moz","ms"],Zs={};function Qf(t,e){const n=Zs[e];if(n)return n;let r=Wt(e);if(r!=="filter"&&r in t)return Zs[e]=r;r=zi(r);for(let s=0;s<ou.length;s++){const a=ou[s]+r;if(a in t)return Zs[e]=a}return e}const au="http://www.w3.org/1999/xlink";function uu(t,e,n,r,s,a=Jc(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(au,e.slice(6,e.length)):t.setAttributeNS(au,e,n):n==null||a&&!Bu(n)?t.removeAttribute(e):t.setAttribute(e,a?"":jn(n)?String(n):n)}function lu(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ul(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,h=n==null?t.type==="checkbox"?"on":"":String(n);(l!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Bu(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function fr(t,e,n,r){t.addEventListener(e,n,r)}function Yf(t,e,n,r){t.removeEventListener(e,n,r)}const cu=Symbol("_vei");function Xf(t,e,n,r,s=null){const a=t[cu]||(t[cu]={}),l=a[e];if(r&&l)l.value=r;else{const[h,f]=Zf(e);if(r){const y=a[e]=nd(r,s);fr(t,h,y,f)}else l&&(Yf(t,h,l,f),a[e]=void 0)}}const hu=/(?:Once|Passive|Capture)$/;function Zf(t){let e;if(hu.test(t)){e={};let r;for(;r=t.match(hu);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Rn(t.slice(2)),e]}let eo=0;const ed=Promise.resolve(),td=()=>eo||(ed.then(()=>eo=0),eo=Date.now());function nd(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;rn(rd(r,n.value),e,5,[r])};return n.value=t,n.attached=td(),n}function rd(t,e){if(xe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const fu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,id=(t,e,n,r,s,a)=>{const l=s==="svg";e==="class"?Vf(t,r,l):e==="style"?Gf(t,n,r):Hi(e)?Ro(e)||Xf(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):sd(t,e,r,l))?(lu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&uu(t,e,r,l,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!gt(r))?lu(t,Wt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),uu(t,e,r,l))};function sd(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&fu(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return fu(e)&&gt(n)?!1:e in t}const du=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xe(e)?n=>$i(e,n):e};function od(t){t.target.composing=!0}function pu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const to=Symbol("_assign"),wn={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[to]=du(s);const a=r||s.props&&s.props.type==="number";fr(t,e?"change":"input",l=>{if(l.target.composing)return;let h=t.value;n&&(h=h.trim()),a&&(h=ao(h)),t[to](h)}),n&&fr(t,"change",()=>{t.value=t.value.trim()}),e||(fr(t,"compositionstart",od),fr(t,"compositionend",pu),fr(t,"change",pu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:a}},l){if(t[to]=du(l),t.composing)return;const h=(a||t.type==="number")&&!/^0\d/.test(t.value)?ao(t.value):t.value,f=e??"";h!==f&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===f)||(t.value=f))}},ad=["ctrl","shift","alt","meta"],ud={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ad.some(n=>t[`${n}Key`]&&!e.includes(n))},gu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...a)=>{for(let l=0;l<e.length;l++){const h=ud[e[l]];if(h&&h(s,e))return}return t(s,...a)})},ld={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cd=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const a=Rn(s.key);if(e.some(l=>l===a||ld[l]===a))return t(s)})},hd=St({patchProp:id},qf);let yu;function fd(){return yu||(yu=ff(hd))}const dd=(...t)=>{const e=fd().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=gd(r);if(!s)return;const a=e._component;!Pe(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=n(s,!1,pd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e};function pd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gd(t){return gt(t)?document.querySelector(t):t}var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yd(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Bl={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(jt,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,l={},h=0,f={parse:function(I,j){var W=(j=j||{}).dynamicTyping||!1;if(_e(W)&&(j.dynamicTypingFunction=W,W={}),j.dynamicTyping=W,j.transform=!!_e(j.transform)&&j.transform,j.worker&&f.WORKERS_SUPPORTED){var ue=function(){if(!f.WORKERS_SUPPORTED)return!1;var ge=(ot=r.URL||r.webkitURL||null,Se=n.toString(),f.BLOB_URL||(f.BLOB_URL=ot.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Se,")();"],{type:"text/javascript"})))),Ce=new r.Worker(ge),ot,Se;return Ce.onmessage=je,Ce.id=h++,l[Ce.id]=Ce}();return ue.userStep=j.step,ue.userChunk=j.chunk,ue.userComplete=j.complete,ue.userError=j.error,j.step=_e(j.step),j.chunk=_e(j.chunk),j.complete=_e(j.complete),j.error=_e(j.error),delete j.worker,void ue.postMessage({input:I,config:j,workerId:ue.id})}var he=null;return f.NODE_STREAM_INPUT,typeof I=="string"?(I=function(ge){return ge.charCodeAt(0)===65279?ge.slice(1):ge}(I),he=j.download?new b(j):new V(j)):I.readable===!0&&_e(I.read)&&_e(I.on)?he=new se(j):(r.File&&I instanceof File||I instanceof Object)&&(he=new R(j)),he.stream(I)},unparse:function(I,j){var W=!1,ue=!0,he=",",ge=`\r
`,Ce='"',ot=Ce+Ce,Se=!1,Z=null,ye=!1;(function(){if(typeof j=="object"){if(typeof j.delimiter!="string"||f.BAD_DELIMITERS.filter(function(oe){return j.delimiter.indexOf(oe)!==-1}).length||(he=j.delimiter),(typeof j.quotes=="boolean"||typeof j.quotes=="function"||Array.isArray(j.quotes))&&(W=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(Se=j.skipEmptyLines),typeof j.newline=="string"&&(ge=j.newline),typeof j.quoteChar=="string"&&(Ce=j.quoteChar),typeof j.header=="boolean"&&(ue=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");Z=j.columns}j.escapeChar!==void 0&&(ot=j.escapeChar+Ce),(typeof j.escapeFormulae=="boolean"||j.escapeFormulae instanceof RegExp)&&(ye=j.escapeFormulae instanceof RegExp?j.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var de=new RegExp(me(Ce),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return nt(null,I,Se);if(typeof I[0]=="object")return nt(Z||Object.keys(I[0]),I,Se)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||Z),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),nt(I.fields||[],I.data||[],Se);throw new Error("Unable to serialize unrecognized input");function nt(oe,Ke,ft){var Je="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof Ke=="string"&&(Ke=JSON.parse(Ke));var Ve=Array.isArray(oe)&&0<oe.length,Xe=!Array.isArray(Ke[0]);if(Ve&&ue){for(var at=0;at<oe.length;at++)0<at&&(Je+=he),Je+=Qe(oe[at],at);0<Ke.length&&(Je+=ge)}for(var q=0;q<Ke.length;q++){var Fe=Ve?oe.length:Ke[q].length,He=!1,be=Ve?Object.keys(Ke[q]).length===0:Ke[q].length===0;if(ft&&!Ve&&(He=ft==="greedy"?Ke[q].join("").trim()==="":Ke[q].length===1&&Ke[q][0].length===0),ft==="greedy"&&Ve){for(var v=[],k=0;k<Fe;k++){var D=Xe?oe[k]:k;v.push(Ke[q][D])}He=v.join("").trim()===""}if(!He){for(var M=0;M<Fe;M++){0<M&&!be&&(Je+=he);var B=Ve&&Xe?oe[M]:M;Je+=Qe(Ke[q][B],M)}q<Ke.length-1&&(!ft||0<Fe&&!be)&&(Je+=ge)}}return Je}function Qe(oe,Ke){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var ft=!1;ye&&typeof oe=="string"&&ye.test(oe)&&(oe="'"+oe,ft=!0);var Je=oe.toString().replace(de,ot);return(ft=ft||W===!0||typeof W=="function"&&W(oe,Ke)||Array.isArray(W)&&W[Ke]||function(Ve,Xe){for(var at=0;at<Xe.length;at++)if(-1<Ve.indexOf(Xe[at]))return!0;return!1}(Je,f.BAD_DELIMITERS)||-1<Je.indexOf(he)||Je.charAt(0)===" "||Je.charAt(Je.length-1)===" ")?Ce+Je+Ce:Je}}};if(f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!s&&!!r.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=we,f.ParserHandle=le,f.NetworkStreamer=b,f.FileStreamer=R,f.StringStreamer=V,f.ReadableStreamStreamer=se,r.jQuery){var y=r.jQuery;y.fn.parse=function(I){var j=I.config||{},W=[];return this.each(function(ge){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var Ce=0;Ce<this.files.length;Ce++)W.push({file:this.files[Ce],inputElem:this,instanceConfig:y.extend({},j)})}),ue(),this;function ue(){if(W.length!==0){var ge,Ce,ot,Se,Z=W[0];if(_e(I.before)){var ye=I.before(Z.file,Z.inputElem);if(typeof ye=="object"){if(ye.action==="abort")return ge="AbortError",Ce=Z.file,ot=Z.inputElem,Se=ye.reason,void(_e(I.error)&&I.error({name:ge},Ce,ot,Se));if(ye.action==="skip")return void he();typeof ye.config=="object"&&(Z.instanceConfig=y.extend(Z.instanceConfig,ye.config))}else if(ye==="skip")return void he()}var de=Z.instanceConfig.complete;Z.instanceConfig.complete=function(nt){_e(de)&&de(nt,Z.file,Z.inputElem),he()},f.parse(Z.file,Z.instanceConfig)}else _e(I.complete)&&I.complete()}function he(){W.splice(0,1),ue()}}}function g(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(j){var W=Le(j);W.chunkSize=parseInt(W.chunkSize),j.step||j.chunk||(W.chunkSize=null),this._handle=new le(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(j,W){if(this.isFirstChunk&&_e(this._config.beforeFirstChunk)){var ue=this._config.beforeFirstChunk(j);ue!==void 0&&(j=ue)}this.isFirstChunk=!1,this._halted=!1;var he=this._partialLine+j;this._partialLine="";var ge=this._handle.parse(he,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Ce=ge.meta.cursor;this._finished||(this._partialLine=he.substring(Ce-this._baseIndex),this._baseIndex=Ce),ge&&ge.data&&(this._rowCount+=ge.data.length);var ot=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:ge,workerId:f.WORKER_ID,finished:ot});else if(_e(this._config.chunk)&&!W){if(this._config.chunk(ge,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ge=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ge.data),this._completeResults.errors=this._completeResults.errors.concat(ge.errors),this._completeResults.meta=ge.meta),this._completed||!ot||!_e(this._config.complete)||ge&&ge.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ot||ge&&ge.meta.paused||this._nextChunk(),ge}this._halted=!0},this._sendError=function(j){_e(this._config.error)?this._config.error(j):a&&this._config.error&&r.postMessage({workerId:f.WORKER_ID,error:j,finished:!1})}}function b(I){var j;(I=I||{}).chunkSize||(I.chunkSize=f.RemoteChunkSize),g.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W=this._config.downloadRequestHeaders;for(var ue in W)j.setRequestHeader(ue,W[ue])}if(this._config.chunkSize){var he=this._start+this._config.chunkSize-1;j.setRequestHeader("Range","bytes="+this._start+"-"+he)}try{j.send(this._config.downloadRequestBody)}catch(ge){this._chunkError(ge.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:j.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(W){var ue=W.getResponseHeader("Content-Range");return ue===null?-1:parseInt(ue.substring(ue.lastIndexOf("/")+1))}(j),this.parseChunk(j.responseText)))},this._chunkError=function(W){var ue=j.statusText||W;this._sendError(new Error(ue))}}function R(I){var j,W;(I=I||{}).chunkSize||(I.chunkSize=f.LocalChunkSize),g.call(this,I);var ue=typeof FileReader<"u";this.stream=function(he){this._input=he,W=he.slice||he.webkitSlice||he.mozSlice,ue?((j=new FileReader).onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var he=this._input;if(this._config.chunkSize){var ge=Math.min(this._start+this._config.chunkSize,this._input.size);he=W.call(he,this._start,ge)}var Ce=j.readAsText(he,this._config.encoding);ue||this._chunkLoaded({target:{result:Ce}})},this._chunkLoaded=function(he){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(he.target.result)},this._chunkError=function(){this._sendError(j.error)}}function V(I){var j;g.call(this,I=I||{}),this.stream=function(W){return j=W,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var W,ue=this._config.chunkSize;return ue?(W=j.substring(0,ue),j=j.substring(ue)):(W=j,j=""),this._finished=!j,this.parseChunk(W)}}}function se(I){g.call(this,I=I||{});var j=[],W=!0,ue=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(he){this._input=he,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):W=!0},this._streamData=Ye(function(he){try{j.push(typeof he=="string"?he:he.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(ge){this._streamError(ge)}},this),this._streamError=Ye(function(he){this._streamCleanUp(),this._sendError(he)},this),this._streamEnd=Ye(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Ye(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(I){var j,W,ue,he=Math.pow(2,53),ge=-he,Ce=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ot=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Z=0,ye=0,de=!1,nt=!1,Qe=[],oe={data:[],errors:[],meta:{}};if(_e(I.step)){var Ke=I.step;I.step=function(q){if(oe=q,Ve())Je();else{if(Je(),oe.data.length===0)return;Z+=q.data.length,I.preview&&Z>I.preview?W.abort():(oe.data=oe.data[0],Ke(oe,Se))}}}function ft(q){return I.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Je(){return oe&&ue&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),ue=!1),I.skipEmptyLines&&(oe.data=oe.data.filter(function(q){return!ft(q)})),Ve()&&function(){if(!oe)return;function q(He,be){_e(I.transformHeader)&&(He=I.transformHeader(He,be)),Qe.push(He)}if(Array.isArray(oe.data[0])){for(var Fe=0;Ve()&&Fe<oe.data.length;Fe++)oe.data[Fe].forEach(q);oe.data.splice(0,1)}else oe.data.forEach(q)}(),function(){if(!oe||!I.header&&!I.dynamicTyping&&!I.transform)return oe;function q(He,be){var v,k=I.header?{}:[];for(v=0;v<He.length;v++){var D=v,M=He[v];I.header&&(D=v>=Qe.length?"__parsed_extra":Qe[v]),I.transform&&(M=I.transform(M,D)),M=Xe(D,M),D==="__parsed_extra"?(k[D]=k[D]||[],k[D].push(M)):k[D]=M}return I.header&&(v>Qe.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+Qe.length+" fields but parsed "+v,ye+be):v<Qe.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+Qe.length+" fields but parsed "+v,ye+be)),k}var Fe=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(q),Fe=oe.data.length):oe.data=q(oe.data,0),I.header&&oe.meta&&(oe.meta.fields=Qe),ye+=Fe,oe}()}function Ve(){return I.header&&Qe.length===0}function Xe(q,Fe){return He=q,I.dynamicTypingFunction&&I.dynamicTyping[He]===void 0&&(I.dynamicTyping[He]=I.dynamicTypingFunction(He)),(I.dynamicTyping[He]||I.dynamicTyping)===!0?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&(function(be){if(Ce.test(be)){var v=parseFloat(be);if(ge<v&&v<he)return!0}return!1}(Fe)?parseFloat(Fe):ot.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe;var He}function at(q,Fe,He,be){var v={type:q,code:Fe,message:He};be!==void 0&&(v.row=be),oe.errors.push(v)}this.parse=function(q,Fe,He){var be=I.quoteChar||'"';if(I.newline||(I.newline=function(D,M){D=D.substring(0,1048576);var B=new RegExp(me(M)+"([^]*?)"+me(M),"gm"),N=(D=D.replace(B,"")).split("\r"),X=D.split(`
`),J=1<X.length&&X[0].length<N[0].length;if(N.length===1||J)return`
`;for(var H=0,K=0;K<N.length;K++)N[K][0]===`
`&&H++;return H>=N.length/2?`\r
`:"\r"}(q,be)),ue=!1,I.delimiter)_e(I.delimiter)&&(I.delimiter=I.delimiter(q),oe.meta.delimiter=I.delimiter);else{var v=function(D,M,B,N,X){var J,H,K,ie;X=X||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ee=0;ee<X.length;ee++){var Y=X[ee],pe=0,ke=0,Ae=0;K=void 0;for(var Oe=new we({comments:N,delimiter:Y,newline:M,preview:10}).parse(D),Ze=0;Ze<Oe.data.length;Ze++)if(B&&ft(Oe.data[Ze]))Ae++;else{var Be=Oe.data[Ze].length;ke+=Be,K!==void 0?0<Be&&(pe+=Math.abs(Be-K),K=Be):K=Be}0<Oe.data.length&&(ke/=Oe.data.length-Ae),(H===void 0||pe<=H)&&(ie===void 0||ie<ke)&&1.99<ke&&(H=pe,J=Y,ie=ke)}return{successful:!!(I.delimiter=J),bestDelimiter:J}}(q,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);v.successful?I.delimiter=v.bestDelimiter:(ue=!0,I.delimiter=f.DefaultDelimiter),oe.meta.delimiter=I.delimiter}var k=Le(I);return I.preview&&I.header&&k.preview++,j=q,W=new we(k),oe=W.parse(j,Fe,He),Je(),de?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return de},this.pause=function(){de=!0,W.abort(),j=_e(I.chunk)?"":j.substring(W.getCharIndex())},this.resume=function(){Se.streamer._halted?(de=!1,Se.streamer.parseChunk(j,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,W.abort(),oe.meta.aborted=!0,_e(I.complete)&&I.complete(oe),j=""}}function me(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function we(I){var j,W=(I=I||{}).delimiter,ue=I.newline,he=I.comments,ge=I.step,Ce=I.preview,ot=I.fastMode,Se=j=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Se=I.escapeChar),(typeof W!="string"||-1<f.BAD_DELIMITERS.indexOf(W))&&(W=","),he===W)throw new Error("Comment character same as delimiter");he===!0?he="#":(typeof he!="string"||-1<f.BAD_DELIMITERS.indexOf(he))&&(he=!1),ue!==`
`&&ue!=="\r"&&ue!==`\r
`&&(ue=`
`);var Z=0,ye=!1;this.parse=function(de,nt,Qe){if(typeof de!="string")throw new Error("Input must be a string");var oe=de.length,Ke=W.length,ft=ue.length,Je=he.length,Ve=_e(ge),Xe=[],at=[],q=[],Fe=Z=0;if(!de)return Ge();if(I.header&&!nt){var He=de.split(ue)[0].split(W),be=[],v={},k=!1;for(var D in He){var M=He[D];_e(I.transformHeader)&&(M=I.transformHeader(M,D));var B=M,N=v[M]||0;for(0<N&&(k=!0,B=M+"_"+N),v[M]=N+1;be.includes(B);)B=B+"_"+N;be.push(B)}if(k){var X=de.split(ue);X[0]=be.join(W),de=X.join(ue)}}if(ot||ot!==!1&&de.indexOf(j)===-1){for(var J=de.split(ue),H=0;H<J.length;H++){if(q=J[H],Z+=q.length,H!==J.length-1)Z+=ue.length;else if(Qe)return Ge();if(!he||q.substring(0,Je)!==he){if(Ve){if(Xe=[],Ae(q.split(W)),ht(),ye)return Ge()}else Ae(q.split(W));if(Ce&&Ce<=H)return Xe=Xe.slice(0,Ce),Ge(!0)}}return Ge()}for(var K=de.indexOf(W,Z),ie=de.indexOf(ue,Z),ee=new RegExp(me(Se)+me(j),"g"),Y=de.indexOf(j,Z);;)if(de[Z]!==j)if(he&&q.length===0&&de.substring(Z,Z+Je)===he){if(ie===-1)return Ge();Z=ie+ft,ie=de.indexOf(ue,Z),K=de.indexOf(W,Z)}else if(K!==-1&&(K<ie||ie===-1))q.push(de.substring(Z,K)),Z=K+Ke,K=de.indexOf(W,Z);else{if(ie===-1)break;if(q.push(de.substring(Z,ie)),Be(ie+ft),Ve&&(ht(),ye))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0)}else for(Y=Z,Z++;;){if((Y=de.indexOf(j,Y+1))===-1)return Qe||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Xe.length,index:Z}),Ze();if(Y===oe-1)return Ze(de.substring(Z,Y).replace(ee,j));if(j!==Se||de[Y+1]!==Se){if(j===Se||Y===0||de[Y-1]!==Se){K!==-1&&K<Y+1&&(K=de.indexOf(W,Y+1)),ie!==-1&&ie<Y+1&&(ie=de.indexOf(ue,Y+1));var pe=Oe(ie===-1?K:Math.min(K,ie));if(de.substr(Y+1+pe,Ke)===W){q.push(de.substring(Z,Y).replace(ee,j)),de[Z=Y+1+pe+Ke]!==j&&(Y=de.indexOf(j,Z)),K=de.indexOf(W,Z),ie=de.indexOf(ue,Z);break}var ke=Oe(ie);if(de.substring(Y+1+ke,Y+1+ke+ft)===ue){if(q.push(de.substring(Z,Y).replace(ee,j)),Be(Y+1+ke+ft),K=de.indexOf(W,Z),Y=de.indexOf(j,Z),Ve&&(ht(),ye))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Xe.length,index:Z}),Y++}}else Y++}return Ze();function Ae(et){Xe.push(et),Fe=Z}function Oe(et){var fe=0;if(et!==-1){var lt=de.substring(Y+1,et);lt&&lt.trim()===""&&(fe=lt.length)}return fe}function Ze(et){return Qe||(et===void 0&&(et=de.substring(Z)),q.push(et),Z=oe,Ae(q),Ve&&ht()),Ge()}function Be(et){Z=et,Ae(q),q=[],ie=de.indexOf(ue,Z)}function Ge(et){return{data:Xe,errors:at,meta:{delimiter:W,linebreak:ue,aborted:ye,truncated:!!et,cursor:Fe+(nt||0)}}}function ht(){ge(Ge()),Xe=[],at=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return Z}}function je(I){var j=I.data,W=l[j.workerId],ue=!1;if(j.error)W.userError(j.error,j.file);else if(j.results&&j.results.data){var he={abort:function(){ue=!0,Re(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(_e(W.userStep)){for(var ge=0;ge<j.results.data.length&&(W.userStep({data:j.results.data[ge],errors:j.results.errors,meta:j.results.meta},he),!ue);ge++);delete j.results}else _e(W.userChunk)&&(W.userChunk(j.results,he,j.file),delete j.results)}j.finished&&!ue&&Re(j.workerId,j.results)}function Re(I,j){var W=l[I];_e(W.userComplete)&&W.userComplete(j),W.terminate(),delete l[I]}function ce(){throw new Error("Not implemented.")}function Le(I){if(typeof I!="object"||I===null)return I;var j=Array.isArray(I)?[]:{};for(var W in I)j[W]=Le(I[W]);return j}function Ye(I,j){return function(){I.apply(j,arguments)}}function _e(I){return typeof I=="function"}return a&&(r.onmessage=function(I){var j=I.data;if(f.WORKER_ID===void 0&&j&&(f.WORKER_ID=j.workerId),typeof j.input=="string")r.postMessage({workerId:f.WORKER_ID,results:f.parse(j.input,j.config),finished:!0});else if(r.File&&j.input instanceof File||j.input instanceof Object){var W=f.parse(j.input,j.config);W&&r.postMessage({workerId:f.WORKER_ID,results:W,finished:!0})}}),(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(g.prototype)).constructor=R,(V.prototype=Object.create(V.prototype)).constructor=V,(se.prototype=Object.create(g.prototype)).constructor=se,f})})(Bl);var md=Bl.exports;const mu=Kl(md);var Nl={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(jt,function(){var n=function(i,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(u[d]=c[d])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,u=1,c=arguments.length;u<c;u++)for(var d in o=arguments[u])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function s(i,o,u){for(var c,d=0,p=o.length;d<p;d++)!c&&d in o||((c=c||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(c||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:jt,l=Object.keys,h=Array.isArray;function f(i,o){return typeof o!="object"||l(o).forEach(function(u){i[u]=o[u]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,g={}.hasOwnProperty;function b(i,o){return g.call(i,o)}function R(i,o){typeof o=="function"&&(o=o(y(i))),(typeof Reflect>"u"?l:Reflect.ownKeys)(o).forEach(function(u){se(i,u,o[u])})}var V=Object.defineProperty;function se(i,o,u,c){V(i,o,f(u&&b(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},c))}function le(i){return{from:function(o){return i.prototype=Object.create(o.prototype),se(i.prototype,"constructor",i),{extend:R.bind(null,i.prototype)}}}}var me=Object.getOwnPropertyDescriptor,we=[].slice;function je(i,o,u){return we.call(i,o,u)}function Re(i,o){return o(i)}function ce(i){if(!i)throw new Error("Assertion Failed")}function Le(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Ye(i,o){if(typeof o=="string"&&b(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var u=[],c=0,d=o.length;c<d;++c){var p=Ye(i,o[c]);u.push(p)}return u}var m=o.indexOf(".");if(m!==-1){var _=i[o.substr(0,m)];return _==null?void 0:Ye(_,o.substr(m+1))}}function _e(i,o,u){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){ce(typeof u!="string"&&"length"in u);for(var c=0,d=o.length;c<d;++c)_e(i,o[c],u[c])}else{var p,m,_=o.indexOf(".");_!==-1?(p=o.substr(0,_),(m=o.substr(_+1))===""?u===void 0?h(i)&&!isNaN(parseInt(p))?i.splice(p,1):delete i[p]:i[p]=u:_e(_=!(_=i[p])||!b(i,p)?i[p]={}:_,m,u)):u===void 0?h(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=u}}function I(i){var o,u={};for(o in i)b(i,o)&&(u[o]=i[o]);return u}var j=[].concat;function W(i){return j.apply([],i)}var on="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),ue=new Set(on.map(function(i){return a[i]})),he=null;function ge(i){return he=new WeakMap,i=function o(u){if(!u||typeof u!="object")return u;var c=he.get(u);if(c)return c;if(h(u)){c=[],he.set(u,c);for(var d=0,p=u.length;d<p;++d)c.push(o(u[d]))}else if(ue.has(u.constructor))c=u;else{var m,_=y(u);for(m in c=_===Object.prototype?{}:Object.create(_),he.set(u,c),u)b(u,m)&&(c[m]=o(u[m]))}return c}(i),he=null,i}var Ce={}.toString;function ot(i){return Ce.call(i).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof Se=="symbol"?function(i){var o;return i!=null&&(o=i[Se])&&o.apply(i)}:function(){return null};function ye(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var de={};function nt(i){var o,u,c,d;if(arguments.length===1){if(h(i))return i.slice();if(this===de&&typeof i=="string")return[i];if(d=Z(i)){for(u=[];!(c=d.next()).done;)u.push(c.value);return u}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(u=new Array(o);o--;)u[o]=i[o];return u}for(o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return u}var Qe=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(i,o){this.name=i,this.message=o}function ft(i,o){return i+". Errors: "+Object.keys(o).map(function(u){return o[u].toString()}).filter(function(u,c,d){return d.indexOf(u)===c}).join(`
`)}function Je(i,o,u,c){this.failures=o,this.failedKeys=c,this.successCount=u,this.message=ft(i,o)}function Ve(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(u){return o[u]}),this.failuresByPos=o,this.message=ft(i,this.failures)}le(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Je).from(Ke),le(Ve).from(Ke);var Xe=qt.reduce(function(i,o){return i[o]=o+"Error",i},{}),at=Ke,q=qt.reduce(function(i,o){var u=o+"Error";function c(d,p){this.name=u,d?typeof d=="string"?(this.message="".concat(d).concat(p?`
 `+p:""),this.inner=p||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=oe[o]||u,this.inner=null)}return le(c).from(at),i[o]=c,i},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Fe=Y.reduce(function(i,o){return i[o+"Error"]=q[o],i},{}),He=qt.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=q[o]),i},{});function be(){}function v(i){return i}function k(i,o){return i==null||i===v?o:function(u){return o(i(u))}}function D(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function M(i,o){return i===be?o:function(){var u=i.apply(this,arguments);u!==void 0&&(arguments[0]=u);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?D(c,this.onsuccess):c),d&&(this.onerror=this.onerror?D(d,this.onerror):d),p!==void 0?p:u}}function B(i,o){return i===be?o:function(){i.apply(this,arguments);var u=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?D(u,this.onsuccess):u),c&&(this.onerror=this.onerror?D(c,this.onerror):c)}}function N(i,o){return i===be?o:function(u){var c=i.apply(this,arguments);f(u,c);var d=this.onsuccess,p=this.onerror;return this.onsuccess=null,this.onerror=null,u=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?D(d,this.onsuccess):d),p&&(this.onerror=this.onerror?D(p,this.onerror):p),c===void 0?u===void 0?void 0:u:f(c,u)}}function X(i,o){return i===be?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function J(i,o){return i===be?o:function(){var u=i.apply(this,arguments);if(u&&typeof u.then=="function"){for(var c=this,d=arguments.length,p=new Array(d);d--;)p[d]=arguments[d];return u.then(function(){return o.apply(c,p)})}return o.apply(this,arguments)}}He.ModifyError=Je,He.DexieError=Ke,He.BulkError=Ve;var H=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function K(i){H=i}var ie={},ee=100,on=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),i]}(),Y=on[0],qt=on[1],on=on[2],qt=qt&&qt.then,pe=Y&&Y.constructor,ke=!!on,Ae=function(i,o){lt.push([i,o]),Ze&&(queueMicrotask(pc),Ze=!1)},Oe=!0,Ze=!0,Be=[],Ge=[],ht=v,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},fe=et,lt=[],yt=0,$n=[];function ae(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=fe;if(typeof i!="function"){if(i!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cs(this,this._value))}this._state=null,this._value=null,++o.ref,function u(c,d){try{d(function(p){if(c._state===null){if(p===c)throw new TypeError("A promise cannot be resolved with itself.");var m=c._lib&&er();p&&typeof p.then=="function"?u(c,function(_,S){p instanceof ae?p._then(_,S):p.then(_,S)}):(c._state=!0,c._value=p,oa(c)),m&&tr()}},cs.bind(null,c))}catch(p){cs(c,p)}}(this,i)}var ls={get:function(){var i=fe,o=si;function u(c,d){var p=this,m=!i.global&&(i!==fe||o!==si),_=m&&!pn(),S=new ae(function(x,P){hs(p,new sa(ua(c,i,m,_),ua(d,i,m,_),x,P,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=ie,u},set:function(i){se(this,"then",i&&i.prototype===ie?ls:{get:function(){return i},set:ls.set})}};function sa(i,o,u,c,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=u,this.reject=c,this.psd=d}function cs(i,o){var u,c;Ge.push(o),i._state===null&&(u=i._lib&&er(),o=ht(o),i._state=!1,i._value=o,c=i,Be.some(function(d){return d._value===c._value})||Be.push(c),oa(i),u&&tr())}function oa(i){var o=i._listeners;i._listeners=[];for(var u=0,c=o.length;u<c;++u)hs(i,o[u]);var d=i._PSD;--d.ref||d.finalize(),yt===0&&(++yt,Ae(function(){--yt==0&&fs()},[]))}function hs(i,o){if(i._state!==null){var u=i._state?o.onFulfilled:o.onRejected;if(u===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++yt,Ae(dc,[u,i,o])}else i._listeners.push(o)}function dc(i,o,u){try{var c,d=o._value;!o._state&&Ge.length&&(Ge=[]),c=H&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Ge.indexOf(d)!==-1||function(p){for(var m=Be.length;m;)if(Be[--m]._value===p._value)return Be.splice(m,1)}(o),u.resolve(c)}catch(p){u.reject(p)}finally{--yt==0&&fs(),--u.psd.ref||u.psd.finalize()}}function pc(){Ln(et,function(){er()&&tr()})}function er(){var i=Oe;return Ze=Oe=!1,i}function tr(){var i,o,u;do for(;0<lt.length;)for(i=lt,lt=[],u=i.length,o=0;o<u;++o){var c=i[o];c[0].apply(null,c[1])}while(0<lt.length);Ze=Oe=!0}function fs(){var i=Be;Be=[],i.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=$n.slice(0),u=o.length;u;)o[--u]()}function ni(i){return new ae(ie,!1,i)}function ut(i,o){var u=fe;return function(){var c=er(),d=fe;try{return gn(u,!0),i.apply(this,arguments)}catch(p){o&&o(p)}finally{gn(d,!1),c&&tr()}}}R(ae.prototype,{then:ls,_then:function(i,o){hs(this,new sa(null,null,i,o,fe))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,u=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?u:ni)(c)}):this.then(null,function(c){return(c&&c.name===o?u:ni)(c)})},finally:function(i){return this.then(function(o){return ae.resolve(i()).then(function(){return o})},function(o){return ae.resolve(i()).then(function(){return ni(o)})})},timeout:function(i,o){var u=this;return i<1/0?new ae(function(c,d){var p=setTimeout(function(){return d(new q.Timeout(o))},i);u.then(c,d).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(ae.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=aa(),R(ae,{all:function(){var i=nt.apply(null,arguments).map(oi);return new ae(function(o,u){i.length===0&&o([]);var c=i.length;i.forEach(function(d,p){return ae.resolve(d).then(function(m){i[p]=m,--c||o(i)},u)})})},resolve:function(i){return i instanceof ae?i:i&&typeof i.then=="function"?new ae(function(o,u){i.then(o,u)}):new ae(ie,!0,i)},reject:ni,race:function(){var i=nt.apply(null,arguments).map(oi);return new ae(function(o,u){i.map(function(c){return ae.resolve(c).then(o,u)})})},PSD:{get:function(){return fe},set:function(i){return fe=i}},totalEchoes:{get:function(){return si}},newPSD:dn,usePSD:Ln,scheduler:{get:function(){return Ae},set:function(i){Ae=i}},rejectionMapper:{get:function(){return ht},set:function(i){ht=i}},follow:function(i,o){return new ae(function(u,c){return dn(function(d,p){var m=fe;m.unhandleds=[],m.onunhandled=p,m.finalize=D(function(){var _,S=this;_=function(){S.unhandleds.length===0?d():p(S.unhandleds[0])},$n.push(function x(){_(),$n.splice($n.indexOf(x),1)}),++yt,Ae(function(){--yt==0&&fs()},[])},m.finalize),i()},o,u,c)})}}),pe&&(pe.allSettled&&se(ae,"allSettled",function(){var i=nt.apply(null,arguments).map(oi);return new ae(function(o){i.length===0&&o([]);var u=i.length,c=new Array(u);i.forEach(function(d,p){return ae.resolve(d).then(function(m){return c[p]={status:"fulfilled",value:m}},function(m){return c[p]={status:"rejected",reason:m}}).then(function(){return--u||o(c)})})})}),pe.any&&typeof AggregateError<"u"&&se(ae,"any",function(){var i=nt.apply(null,arguments).map(oi);return new ae(function(o,u){i.length===0&&u(new AggregateError([]));var c=i.length,d=new Array(c);i.forEach(function(p,m){return ae.resolve(p).then(function(_){return o(_)},function(_){d[m]=_,--c||u(new AggregateError(d))})})})}));var mt={awaits:0,echoes:0,id:0},gc=0,ri=[],ii=0,si=0,yc=0;function dn(i,o,u,c){var d=fe,p=Object.create(d);return p.parent=d,p.ref=0,p.global=!1,p.id=++yc,et.env,p.env=ke?{Promise:ae,PromiseProp:{value:ae,configurable:!0,writable:!0},all:ae.all,race:ae.race,allSettled:ae.allSettled,any:ae.any,resolve:ae.resolve,reject:ae.reject}:{},o&&f(p,o),++d.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Ln(p,i,u,c),p.ref===0&&p.finalize(),c}function nr(){return mt.id||(mt.id=++gc),++mt.awaits,mt.echoes+=ee,mt.id}function pn(){return!!mt.awaits&&(--mt.awaits==0&&(mt.id=0),mt.echoes=mt.awaits*ee,!0)}function oi(i){return mt.echoes&&i&&i.constructor===pe?(nr(),i.then(function(o){return pn(),o},function(o){return pn(),dt(o)})):i}function mc(){var i=ri[ri.length-1];ri.pop(),gn(i,!1)}function gn(i,o){var u,c=fe;(o?!mt.echoes||ii++&&i===fe:!ii||--ii&&i===fe)||queueMicrotask(o?(function(d){++si,mt.echoes&&--mt.echoes!=0||(mt.echoes=mt.awaits=mt.id=0),ri.push(fe),gn(d,!0)}).bind(null,i):mc),i!==fe&&(fe=i,c===et&&(et.env=aa()),ke&&(u=et.env.Promise,o=i.env,(c.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),u.all=o.all,u.race=o.race,u.resolve=o.resolve,u.reject=o.reject,o.allSettled&&(u.allSettled=o.allSettled),o.any&&(u.any=o.any))))}function aa(){var i=a.Promise;return ke?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Ln(i,o,u,c,d){var p=fe;try{return gn(i,!0),o(u,c,d)}finally{gn(p,!1)}}function ua(i,o,u,c){return typeof i!="function"?i:function(){var d=fe;u&&nr(),gn(o,!0);try{return i.apply(this,arguments)}finally{gn(d,!1),c&&queueMicrotask(pn)}}}function ds(i){Promise===pe&&mt.echoes===0?ii===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+qt).indexOf("[native code]")===-1&&(nr=pn=be);var dt=ae.reject,Fn="￿",sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",la="String expected.",rr=[],ai="__dbnames",ps="readonly",gs="readwrite";function Mn(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var ca={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ui(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=ge(o))[i],o}}function ha(){throw q.Type()}function Ne(i,o){try{var u=fa(i),c=fa(o);if(u!==c)return u==="Array"?1:c==="Array"?-1:u==="binary"?1:c==="binary"?-1:u==="string"?1:c==="string"?-1:u==="Date"?1:c!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x)if(d[x]!==p[x])return d[x]<p[x]?-1:1;return m===_?0:m<_?-1:1}(da(i),da(o));case"Array":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x){var P=Ne(d[x],p[x]);if(P!==0)return P}return m===_?0:m<_?-1:1}(i,o)}}catch{}return NaN}function fa(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=ot(i),i==="ArrayBuffer"?"binary":i)}function da(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var pa=(st.prototype._trans=function(i,o,u){var c=this._tx||fe.trans,d=this.name,p=H&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function m(x,P,w){if(!w.schema[d])throw new q.NotFound("Table "+d+" not part of transaction");return o(w.idbtrans,w)}var _=er();try{var S=c&&c.db._novip===this.db._novip?c===fe.trans?c._promise(i,m,u):dn(function(){return c._promise(i,m,u)},{trans:c,transless:fe.transless||fe}):function x(P,w,C,E){if(P.idbdb&&(P._state.openComplete||fe.letThrough||P._vip)){var T=P._createTransaction(w,C,P._dbSchema);try{T.create(),P._state.PR1398_maxLoop=3}catch(A){return A.name===Xe.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return x(P,w,C,E)})):dt(A)}return T._promise(w,function(A,O){return dn(function(){return fe.trans=T,E(A,O,T)})}).then(function(A){if(w==="readwrite")try{T.idbtrans.commit()}catch{}return w==="readonly"?A:T._completion.then(function(){return A})})}if(P._state.openComplete)return dt(new q.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return dt(new q.DatabaseClosed);P.open().catch(be)}return P._state.dbReadyPromise.then(function(){return x(P,w,C,E)})}(this.db,i,[this.name],m);return p&&(S._consoleTask=p,S=S.catch(function(x){return console.trace(x),dt(x)})),S}finally{_&&tr()}},st.prototype.get=function(i,o){var u=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?dt(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return u.core.get({trans:c,key:i}).then(function(d){return u.hook.reading.fire(d)})}).then(o)},st.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(h(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=l(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&o.every(function(P){return 0<=S.keyPath.indexOf(P)})){for(var x=0;x<o.length;++x)if(o.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(u&&this.db._maxKey!==Fn){var m=u.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(x){return i[x]}))}!u&&H&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName,d=this.db._deps.indexedDB;function p(S,x){return d.cmp(S,x)===0}var _=o.reduce(function(C,x){var P=C[0],w=C[1],C=c[x],E=i[x];return[P||C,P||!C?Mn(w,C&&C.multi?function(T){return T=Ye(T,x),h(T)&&T.some(function(A){return p(E,A)})}:function(T){return p(E,Ye(T,x))}):w]},[null,null]),m=_[0],_=_[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(_):u?this.filter(_):this.where(o).equals("")},st.prototype.filter=function(i){return this.toCollection().and(i)},st.prototype.count=function(i){return this.toCollection().count(i)},st.prototype.offset=function(i){return this.toCollection().offset(i)},st.prototype.limit=function(i){return this.toCollection().limit(i)},st.prototype.each=function(i){return this.toCollection().each(i)},st.prototype.toArray=function(i){return this.toCollection().toArray(i)},st.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},st.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,h(i)?"[".concat(i.join("+"),"]"):i))},st.prototype.reverse=function(){return this.toCollection().reverse()},st.prototype.mapToClass=function(i){var o,u=this.db,c=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof ha&&(function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function P(){this.constructor=S}n(S,x),S.prototype=x===null?Object.create(x):(P.prototype=x.prototype,new P)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},i=d);for(var p=new Set,m=i.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(S){return p.add(S)});function _(S){if(!S)return S;var x,P=Object.create(i.prototype);for(x in S)if(!p.has(x))try{P[x]=S[x]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),i},st.prototype.defineClass=function(){return this.mapToClass(function(i){f(this,i)})},st.prototype.add=function(i,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,m=i;return p&&d&&(m=ui(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[m]})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{_e(i,p,_)}catch{}return _})},st.prototype.update=function(i,o){return typeof i!="object"||h(i)?this.where(":id").equals(i).modify(o):(i=Ye(i,this.schema.primKey.keyPath),i===void 0?dt(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},st.prototype.put=function(i,o){var u=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,m=i;return p&&d&&(m=ui(p)(i)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"put",values:[m],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{_e(i,p,_)}catch{}return _})},st.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:[i]})}).then(function(u){return u.numFailures?ae.reject(u.failures[0]):void 0})},st.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:ca})}).then(function(o){return o.numFailures?ae.reject(o.failures[0]):void 0})},st.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(u){return o.core.getMany({keys:i,trans:u}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},st.prototype.bulkAdd=function(i,o,u){var c=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=c.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(ui(x)):i;return c.core.mutate({trans:m,type:"add",keys:d,values:x,wantResults:p}).then(function(T){var w=T.numFailures,C=T.results,E=T.lastResult,T=T.failures;if(w===0)return p?C:E;throw new Ve("".concat(c.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),T)})})},st.prototype.bulkPut=function(i,o,u){var c=this,d=Array.isArray(o)?o:void 0,p=(u=u||(d?void 0:o))?u.allKeys:void 0;return this._trans("readwrite",function(m){var x=c.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(ui(x)):i;return c.core.mutate({trans:m,type:"put",keys:d,values:x,wantResults:p}).then(function(T){var w=T.numFailures,C=T.results,E=T.lastResult,T=T.failures;if(w===0)return p?C:E;throw new Ve("".concat(c.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),T)})})},st.prototype.bulkUpdate=function(i){var o=this,u=this.core,c=i.map(function(m){return m.key}),d=i.map(function(m){return m.changes}),p=[];return this._trans("readwrite",function(m){return u.getMany({trans:m,keys:c,cache:"clone"}).then(function(_){var S=[],x=[];i.forEach(function(w,C){var E=w.key,T=w.changes,A=_[C];if(A){for(var O=0,$=Object.keys(T);O<$.length;O++){var L=$[O],F=T[L];if(L===o.schema.primKey.keyPath){if(Ne(F,E)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else _e(A,L,F)}p.push(C),S.push(E),x.push(A)}});var P=S.length;return u.mutate({trans:m,type:"put",keys:S,values:x,updates:{keys:c,changeSpecs:d}}).then(function(w){var C=w.numFailures,E=w.failures;if(C===0)return P;for(var T=0,A=Object.keys(E);T<A.length;T++){var O,$=A[T],L=p[Number($)];L!=null&&(O=E[$],delete E[$],E[L]=O)}throw new Ve("".concat(o.name,".bulkUpdate(): ").concat(C," of ").concat(P," operations failed"),E)})})})},st.prototype.bulkDelete=function(i){var o=this,u=i.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:i})}).then(function(m){var d=m.numFailures,p=m.lastResult,m=m.failures;if(d===0)return p;throw new Ve("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(u," operations failed"),m)})},st);function st(){}function Sr(i){function o(m,_){if(_){for(var S=arguments.length,x=new Array(S-1);--S;)x[S-1]=arguments[S];return u[m].subscribe.apply(null,x),i}if(typeof m=="string")return u[m]}var u={};o.addEventType=p;for(var c=1,d=arguments.length;c<d;++c)p(arguments[c]);return o;function p(m,_,S){if(typeof m!="object"){var x;_=_||X;var P={subscribers:[],fire:S=S||be,subscribe:function(w){P.subscribers.indexOf(w)===-1&&(P.subscribers.push(w),P.fire=_(P.fire,w))},unsubscribe:function(w){P.subscribers=P.subscribers.filter(function(C){return C!==w}),P.fire=P.subscribers.reduce(_,S)}};return u[m]=o[m]=P}l(x=m).forEach(function(w){var C=x[w];if(h(C))p(w,x[w][0],x[w][1]);else{if(C!=="asap")throw new q.InvalidArgument("Invalid event config");var E=p(w,v,function(){for(var T=arguments.length,A=new Array(T);T--;)A[T]=arguments[T];E.subscribers.forEach(function(O){Le(function(){O.apply(null,A)})})})}})}}function Or(i,o){return le(o).from({prototype:i}),o}function ir(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function ys(i,o){i.filter=Mn(i.filter,o)}function ms(i,o,u){var c=i.replayFilter;i.replayFilter=c?function(){return Mn(c(),o())}:o,i.justLimit=u&&!c}function li(i,o){if(i.isPrimKey)return o.primaryKey;var u=o.getIndexByKeyPath(i.index);if(!u)throw new q.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return u}function ga(i,o,u){var c=li(i,o.schema);return o.openCursor({trans:u,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:c,range:i.range}})}function ci(i,o,u,c){var d=i.replayFilter?Mn(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},m=function(_,S,x){var P,w;d&&!d(S,x,function(C){return S.stop(C)},function(C){return S.fail(C)})||((w=""+(P=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(P)),b(p,w)||(p[w]=!0,o(_,S,x)))};return Promise.all([i.or._iterate(m,u),ya(ga(i,c,u),i.algorithm,m,!i.keysOnly&&i.valueMapper)])}return ya(ga(i,c,u),Mn(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function ya(i,o,u,c){var d=ut(c?function(p,m,_){return u(c(p),m,_)}:u);return i.then(function(p){if(p)return p.start(function(){var m=function(){return p.continue()};o&&!o(p,function(_){return m=_},function(_){p.stop(_),m=be},function(_){p.fail(_),m=be})||d(p.value,p,function(_){return m=_}),m()})})}var on=Symbol(),Tr=(ma.prototype.execute=function(i){if(this.add!==void 0){var o=this.add;if(h(o))return s(s([],h(i)?i:[],!0),o).sort();if(typeof o=="number")return(Number(i)||0)+o;if(typeof o=="bigint")try{return BigInt(i)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var u=this.remove;if(h(u))return h(i)?i.filter(function(c){return!u.includes(c)}).sort():[];if(typeof u=="number")return Number(i)-u;if(typeof u=="bigint")try{return BigInt(i)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return o=(o=this.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof i=="string"&&i.startsWith(o)?this.replacePrefix[1]+i.substring(o.length):i},ma);function ma(i){Object.assign(this,i)}var vc=(qe.prototype._read=function(i,o){var u=this._ctx;return u.error?u.table._trans(null,dt.bind(null,u.error)):u.table._trans("readonly",i).then(o)},qe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,dt.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},qe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=Mn(o.algorithm,i)},qe.prototype._iterate=function(i,o){return ci(this._ctx,i,o,this._ctx.table.core)},qe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return i&&f(u,i),o._ctx=u,o},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(i){var o=this._ctx;return this._read(function(u){return ci(o,i,u,o.table.core)})},qe.prototype.count=function(i){var o=this;return this._read(function(u){var c=o._ctx,d=c.table.core;if(ir(c,!0))return d.count({trans:u,query:{index:li(c,d.schema),range:c.range}}).then(function(m){return Math.min(m,c.limit)});var p=0;return ci(c,function(){return++p,!1},u,d).then(function(){return p})}).then(i)},qe.prototype.sortBy=function(i,o){var u=i.split(".").reverse(),c=u[0],d=u.length-1;function p(S,x){return x?p(S[u[x]],x-1):S[c]}var m=this._ctx.dir==="next"?1:-1;function _(S,x){return S=p(S,d),x=p(x,d),S<x?-m:x<S?m:0}return this.toArray(function(S){return S.sort(_)}).then(o)},qe.prototype.toArray=function(i){var o=this;return this._read(function(u){var c=o._ctx;if(c.dir==="next"&&ir(c,!0)&&0<c.limit){var d=c.valueMapper,p=li(c,c.table.core.schema);return c.table.core.query({trans:u,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var m=[];return ci(c,function(_){return m.push(_)},u,c.table.core).then(function(){return m})},i)},qe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,ir(o)?ms(o,function(){var u=i;return function(c,d){return u===0||(u===1?--u:d(function(){c.advance(u),u=0}),!1)}}):ms(o,function(){var u=i;return function(){return--u<0}})),this},qe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ms(this._ctx,function(){var o=i;return function(u,c,d){return--o<=0&&c(d),0<=o}},!0),this},qe.prototype.until=function(i,o){return ys(this._ctx,function(u,c,d){return!i(u.value)||(c(d),o)}),this},qe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},qe.prototype.last=function(i){return this.reverse().first(i)},qe.prototype.filter=function(i){var o;return ys(this._ctx,function(u){return i(u.value)}),(o=this._ctx).isMatch=Mn(o.isMatch,i),this},qe.prototype.and=function(i){return this.filter(i)},qe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){i(c.key,c)})},qe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},qe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(u,c){i(c.primaryKey,c)})},qe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.key)}).then(function(){return u}).then(i)},qe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&ir(o,!0)&&0<o.limit)return this._read(function(c){var d=li(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){return c.result}).then(i);o.keysOnly=!o.isMatch;var u=[];return this.each(function(c,d){u.push(d.primaryKey)}).then(function(){return u}).then(i)},qe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},qe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},qe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},qe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return ys(this._ctx,function(d){var c=d.primaryKey.toString(),d=b(o,c);return o[c]=!0,!d}),this},qe.prototype.modify=function(i){var o=this,u=this._ctx;return this._write(function(c){var d,p,m;m=typeof i=="function"?i:(d=l(i),p=d.length,function(O){for(var $=!1,L=0;L<p;++L){var F=d[L],U=i[F],G=Ye(O,F);U instanceof Tr?(_e(O,F,U.execute(G)),$=!0):G!==U&&(_e(O,F,U),$=!0)}return $});function _(O,F){var L=F.failures,F=F.numFailures;T+=O-F;for(var U=0,G=l(L);U<G.length;U++){var ne=G[U];E.push(L[ne])}}var S=u.table.core,x=S.schema.primaryKey,P=x.outbound,w=x.extractKey,C=o.db._options.modifyChunkSize||200,E=[],T=0,A=[];return o.clone().primaryKeys().then(function(O){function $(F){var U=Math.min(C,O.length-F);return S.getMany({trans:c,keys:O.slice(F,F+U),cache:"immutable"}).then(function(G){for(var ne=[],Q=[],te=P?[]:null,re=[],z=0;z<U;++z){var Ee=G[z],Te={value:ge(Ee),primKey:O[F+z]};m.call(Te,Te.value,Te)!==!1&&(Te.value==null?re.push(O[F+z]):P||Ne(w(Ee),w(Te.value))===0?(Q.push(Te.value),P&&te.push(O[F+z])):(re.push(O[F+z]),ne.push(Te.value)))}return Promise.resolve(0<ne.length&&S.mutate({trans:c,type:"add",values:ne}).then(function(Me){for(var Ie in Me.failures)re.splice(parseInt(Ie),1);_(ne.length,Me)})).then(function(){return(0<Q.length||L&&typeof i=="object")&&S.mutate({trans:c,type:"put",keys:te,values:Q,criteria:L,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<F}).then(function(Me){return _(Q.length,Me)})}).then(function(){return(0<re.length||L&&i===vs)&&S.mutate({trans:c,type:"delete",keys:re,criteria:L,isAdditionalChunk:0<F}).then(function(Me){return _(re.length,Me)})}).then(function(){return O.length>F+U&&$(F+C)})})}var L=ir(u)&&u.limit===1/0&&(typeof i!="function"||i===vs)&&{index:u.index,range:u.range};return $(0).then(function(){if(0<E.length)throw new Je("Error modifying one or more objects",E,T,A);return O.length})})})},qe.prototype.delete=function(){var i=this._ctx,o=i.range;return ir(i)&&(i.isPrimKey||o.type===3)?this._write(function(u){var c=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:u,query:{index:c,range:d}}).then(function(p){return i.table.core.mutate({trans:u,type:"deleteRange",range:d}).then(function(m){var _=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Je("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),p-m);return p-m})})}):this.modify(vs)},qe);function qe(){}var vs=function(i,o){return o.value=null};function _c(i,o){return i<o?-1:i===o?0:1}function bc(i,o){return o<i?-1:i===o?0:1}function $t(i,o,u){return i=i instanceof _a?new i.Collection(i):i,i._ctx.error=new(u||TypeError)(o),i}function sr(i){return new i.Collection(i,function(){return va("")}).limit(0)}function hi(i,o,u,c){var d,p,m,_,S,x,P,w=u.length;if(!u.every(function(T){return typeof T=="string"}))return $t(i,la);function C(T){d=T==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},p=T==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},m=T==="next"?_c:bc;var A=u.map(function(O){return{lower:p(O),upper:d(O)}}).sort(function(O,$){return m(O.lower,$.lower)});_=A.map(function(O){return O.upper}),S=A.map(function(O){return O.lower}),P=(x=T)==="next"?"":c}C("next"),i=new i.Collection(i,function(){return yn(_[0],S[w-1]+c)}),i._ondirectionchange=function(T){C(T)};var E=0;return i._addAlgorithm(function(T,A,O){var $=T.key;if(typeof $!="string")return!1;var L=p($);if(o(L,S,E))return!0;for(var F=null,U=E;U<w;++U){var G=function(ne,Q,te,re,z,Ee){for(var Te=Math.min(ne.length,re.length),Me=-1,Ie=0;Ie<Te;++Ie){var zt=Q[Ie];if(zt!==re[Ie])return z(ne[Ie],te[Ie])<0?ne.substr(0,Ie)+te[Ie]+te.substr(Ie+1):z(ne[Ie],re[Ie])<0?ne.substr(0,Ie)+re[Ie]+te.substr(Ie+1):0<=Me?ne.substr(0,Me)+Q[Me]+te.substr(Me+1):null;z(ne[Ie],zt)<0&&(Me=Ie)}return Te<re.length&&Ee==="next"?ne+te.substr(ne.length):Te<ne.length&&Ee==="prev"?ne.substr(0,te.length):Me<0?null:ne.substr(0,Me)+re[Me]+te.substr(Me+1)}($,L,_[U],S[U],m,x);G===null&&F===null?E=U+1:(F===null||0<m(F,G))&&(F=G)}return A(F!==null?function(){T.continue(F+P)}:O),!1}),i}function yn(i,o,u,c){return{type:2,lower:i,upper:o,lowerOpen:u,upperOpen:c}}function va(i){return{type:1,lower:i,upper:i}}var _a=(Object.defineProperty(vt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),vt.prototype.between=function(i,o,u,c){u=u!==!1,c=c===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(u||c)&&(!u||!c)?sr(this):new this.Collection(this,function(){return yn(i,o,!u,!c)})}catch{return $t(this,sn)}},vt.prototype.equals=function(i){return i==null?$t(this,sn):new this.Collection(this,function(){return va(i)})},vt.prototype.above=function(i){return i==null?$t(this,sn):new this.Collection(this,function(){return yn(i,void 0,!0)})},vt.prototype.aboveOrEqual=function(i){return i==null?$t(this,sn):new this.Collection(this,function(){return yn(i,void 0,!1)})},vt.prototype.below=function(i){return i==null?$t(this,sn):new this.Collection(this,function(){return yn(void 0,i,!1,!0)})},vt.prototype.belowOrEqual=function(i){return i==null?$t(this,sn):new this.Collection(this,function(){return yn(void 0,i)})},vt.prototype.startsWith=function(i){return typeof i!="string"?$t(this,la):this.between(i,i+Fn,!0,!0)},vt.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):hi(this,function(o,u){return o.indexOf(u[0])===0},[i],Fn)},vt.prototype.equalsIgnoreCase=function(i){return hi(this,function(o,u){return o===u[0]},[i],"")},vt.prototype.anyOfIgnoreCase=function(){var i=nt.apply(de,arguments);return i.length===0?sr(this):hi(this,function(o,u){return u.indexOf(o)!==-1},i,"")},vt.prototype.startsWithAnyOfIgnoreCase=function(){var i=nt.apply(de,arguments);return i.length===0?sr(this):hi(this,function(o,u){return u.some(function(c){return o.indexOf(c)===0})},i,Fn)},vt.prototype.anyOf=function(){var i=this,o=nt.apply(de,arguments),u=this._cmp;try{o.sort(u)}catch{return $t(this,sn)}if(o.length===0)return sr(this);var c=new this.Collection(this,function(){return yn(o[0],o[o.length-1])});c._ondirectionchange=function(p){u=p==="next"?i._ascending:i._descending,o.sort(u)};var d=0;return c._addAlgorithm(function(p,m,_){for(var S=p.key;0<u(S,o[d]);)if(++d===o.length)return m(_),!1;return u(S,o[d])===0||(m(function(){p.continue(o[d])}),!1)}),c},vt.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},vt.prototype.noneOf=function(){var i=nt.apply(de,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return $t(this,sn)}var o=i.reduce(function(u,c){return u?u.concat([[u[u.length-1][1],c]]):[[-1/0,c]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},vt.prototype.inAnyRange=function($,o){var u=this,c=this._cmp,d=this._ascending,p=this._descending,m=this._min,_=this._max;if($.length===0)return sr(this);if(!$.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&d(L[0],L[1])<=0}))return $t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var S=!o||o.includeLowers!==!1,x=o&&o.includeUppers===!0,P,w=d;function C(L,F){return w(L[0],F[0])}try{(P=$.reduce(function(L,F){for(var U=0,G=L.length;U<G;++U){var ne=L[U];if(c(F[0],ne[1])<0&&0<c(F[1],ne[0])){ne[0]=m(ne[0],F[0]),ne[1]=_(ne[1],F[1]);break}}return U===G&&L.push(F),L},[])).sort(C)}catch{return $t(this,sn)}var E=0,T=x?function(L){return 0<d(L,P[E][1])}:function(L){return 0<=d(L,P[E][1])},A=S?function(L){return 0<p(L,P[E][0])}:function(L){return 0<=p(L,P[E][0])},O=T,$=new this.Collection(this,function(){return yn(P[0][0],P[P.length-1][1],!S,!x)});return $._ondirectionchange=function(L){w=L==="next"?(O=T,d):(O=A,p),P.sort(C)},$._addAlgorithm(function(L,F,U){for(var G,ne=L.key;O(ne);)if(++E===P.length)return F(U),!1;return!T(G=ne)&&!A(G)||(u._cmp(ne,P[E][1])===0||u._cmp(ne,P[E][0])===0||F(function(){w===d?L.continue(P[E][0]):L.continue(P[E][1])}),!1)}),$},vt.prototype.startsWithAnyOf=function(){var i=nt.apply(de,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?sr(this):this.inAnyRange(i.map(function(o){return[o,o+Fn]})):$t(this,"startsWithAnyOf() only works with strings")},vt);function vt(){}function Yt(i){return ut(function(o){return Pr(o),i(o.target.error),!1})}function Pr(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Cr="storagemutated",_s="x-storagemutated-1",mn=Sr(null,Cr),wc=(Xt.prototype._lock=function(){return ce(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},Xt.prototype._unlock=function(){if(ce(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Ln(i[1],i[0])}catch{}}return this},Xt.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},Xt.prototype.create=function(i){var o=this;if(!this.mode)return this;var u=this.db.idbdb,c=this.db._state.dbOpenError;if(ce(!this.idbtrans),!i&&!u)switch(c&&c.name){case"DatabaseClosedError":throw new q.DatabaseClosed(c);case"MissingAPIError":throw new q.MissingAPI(c.message,c);default:throw new q.OpenFailed(c)}if(!this.active)throw new q.TransactionInactive;return ce(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(d){Pr(d),o._reject(i.error)}),i.onabort=ut(function(d){Pr(d),o.active&&o._reject(new q.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=ut(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&mn.storagemutated.fire(i.mutatedParts)}),this},Xt.prototype._promise=function(i,o,u){var c=this;if(i==="readwrite"&&this.mode!=="readwrite")return dt(new q.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new q.TransactionInactive);if(this._locked())return new ae(function(p,m){c._blockedFuncs.push([function(){c._promise(i,o,u).then(p,m)},fe])});if(u)return dn(function(){var p=new ae(function(m,_){c._lock();var S=o(m,_,c);S&&S.then&&S.then(m,_)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new ae(function(p,m){var _=o(p,m,c);_&&_.then&&_.then(p,m)});return d._lib=!0,d},Xt.prototype._root=function(){return this.parent?this.parent._root():this},Xt.prototype.waitFor=function(i){var o,u=this._root(),c=ae.resolve(i);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return c}):(u._waitingFor=c,u._waitingQueue=[],o=u.idbtrans.objectStore(u.storeNames[0]),function p(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(o.get(-1/0).onsuccess=p)}());var d=u._waitingFor;return new ae(function(p,m){c.then(function(_){return u._waitingQueue.push(ut(p.bind(null,_)))},function(_){return u._waitingQueue.push(ut(m.bind(null,_)))}).finally(function(){u._waitingFor===d&&(u._waitingFor=null)})})},Xt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},Xt.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,i))return o[i];var u=this.schema[i];if(!u)throw new q.NotFound("Table "+i+" not part of transaction");return u=new this.db.Table(i,u,this),u.core=this.db.core.table(i),o[i]=u},Xt);function Xt(){}function bs(i,o,u,c,d,p,m){return{name:i,keyPath:o,unique:u,multi:c,auto:d,compound:p,src:(u&&!m?"&":"")+(c?"*":"")+(d?"++":"")+ba(o)}}function ba(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function ws(i,o,u){return{name:i,primKey:o,indexes:u,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},u.reduce(function(d,p,m){return m=c(p,m),m&&(d[m[0]]=m[1]),d},{}))};var c}var Ar=function(i){try{return i.only([[]]),Ar=function(){return[[]]},[[]]}catch{return Ar=function(){return Fn},Fn}};function ks(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(u){return u[o]}:function(u){return Ye(u,o)}:function(u){return Ye(u,i)};var o}function wa(i){return[].slice.call(i)}var kc=0;function jr(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function xc(i,o,S){function c(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=O.lower,T=O.upper,A=O.lowerOpen,O=O.upperOpen;return E===void 0?T===void 0?null:o.upperBound(T,!!O):T===void 0?o.lowerBound(E,!!A):o.bound(E,T,!!A,!!O)}function d(C){var E,T=C.name;return{name:T,schema:C,mutate:function(A){var O=A.trans,$=A.type,L=A.keys,F=A.values,U=A.range;return new Promise(function(G,ne){G=ut(G);var Q=O.objectStore(T),te=Q.keyPath==null,re=$==="put"||$==="add";if(!re&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var z,Ee=(L||F||{length:1}).length;if(L&&F&&L.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Te(Pt){++zt,Pr(Pt)}var Me=[],Ie=[],zt=0;if($==="deleteRange"){if(U.type===4)return G({numFailures:zt,failures:Ie,results:[],lastResult:void 0});U.type===3?Me.push(z=Q.clear()):Me.push(z=Q.delete(c(U)))}else{var te=re?te?[F,L]:[F,null]:[L,null],De=te[0],bt=te[1];if(re)for(var wt=0;wt<Ee;++wt)Me.push(z=bt&&bt[wt]!==void 0?Q[$](De[wt],bt[wt]):Q[$](De[wt])),z.onerror=Te;else for(wt=0;wt<Ee;++wt)Me.push(z=Q[$](De[wt])),z.onerror=Te}function Ei(Pt){Pt=Pt.target.result,Me.forEach(function(Bn,Ks){return Bn.error!=null&&(Ie[Ks]=Bn.error)}),G({numFailures:zt,failures:Ie,results:$==="delete"?L:Me.map(function(Bn){return Bn.result}),lastResult:Pt})}z.onerror=function(Pt){Te(Pt),Ei(Pt)},z.onsuccess=Ei})},getMany:function(A){var O=A.trans,$=A.keys;return new Promise(function(L,F){L=ut(L);for(var U,G=O.objectStore(T),ne=$.length,Q=new Array(ne),te=0,re=0,z=function(Me){Me=Me.target,Q[Me._pos]=Me.result,++re===te&&L(Q)},Ee=Yt(F),Te=0;Te<ne;++Te)$[Te]!=null&&((U=G.get($[Te]))._pos=Te,U.onsuccess=z,U.onerror=Ee,++te);te===0&&L(Q)})},get:function(A){var O=A.trans,$=A.key;return new Promise(function(L,F){L=ut(L);var U=O.objectStore(T).get($);U.onsuccess=function(G){return L(G.target.result)},U.onerror=Yt(F)})},query:(E=x,function(A){return new Promise(function(O,$){O=ut(O);var L,F,U,te=A.trans,G=A.values,ne=A.limit,z=A.query,Q=ne===1/0?void 0:ne,re=z.index,z=z.range,te=te.objectStore(T),re=re.isPrimaryKey?te:te.index(re.name),z=c(z);if(ne===0)return O({result:[]});E?((Q=G?re.getAll(z,Q):re.getAllKeys(z,Q)).onsuccess=function(Ee){return O({result:Ee.target.result})},Q.onerror=Yt($)):(L=0,F=!G&&"openKeyCursor"in re?re.openKeyCursor(z):re.openCursor(z),U=[],F.onsuccess=function(Ee){var Te=F.result;return Te?(U.push(G?Te.value:Te.primaryKey),++L===ne?O({result:U}):void Te.continue()):O({result:U})},F.onerror=Yt($))})}),openCursor:function(A){var O=A.trans,$=A.values,L=A.query,F=A.reverse,U=A.unique;return new Promise(function(G,ne){G=ut(G);var re=L.index,Q=L.range,te=O.objectStore(T),te=re.isPrimaryKey?te:te.index(re.name),re=F?U?"prevunique":"prev":U?"nextunique":"next",z=!$&&"openKeyCursor"in te?te.openKeyCursor(c(Q),re):te.openCursor(c(Q),re);z.onerror=Yt(ne),z.onsuccess=ut(function(Ee){var Te,Me,Ie,zt,De=z.result;De?(De.___id=++kc,De.done=!1,Te=De.continue.bind(De),Me=(Me=De.continuePrimaryKey)&&Me.bind(De),Ie=De.advance.bind(De),zt=function(){throw new Error("Cursor not stopped")},De.trans=O,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=ut(ne),De.next=function(){var bt=this,wt=1;return this.start(function(){return wt--?bt.continue():bt.stop()}).then(function(){return bt})},De.start=function(bt){function wt(){if(z.result)try{bt()}catch(Pt){De.fail(Pt)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var Ei=new Promise(function(Pt,Bn){Pt=ut(Pt),z.onerror=Yt(Bn),De.fail=Bn,De.stop=function(Ks){De.stop=De.continue=De.continuePrimaryKey=De.advance=zt,Pt(Ks)}});return z.onsuccess=ut(function(Pt){z.onsuccess=wt,wt()}),De.continue=Te,De.continuePrimaryKey=Me,De.advance=Ie,wt(),Ei},G(De)):G(null)},ne)})},count:function(A){var O=A.query,$=A.trans,L=O.index,F=O.range;return new Promise(function(U,G){var ne=$.objectStore(T),Q=L.isPrimaryKey?ne:ne.index(L.name),ne=c(F),Q=ne?Q.count(ne):Q.count();Q.onsuccess=ut(function(te){return U(te.target.result)}),Q.onerror=Yt(G)})}}}var p,m,_,P=(m=S,_=wa((p=i).objectStoreNames),{schema:{name:p.name,tables:_.map(function(C){return m.objectStore(C)}).map(function(C){var E=C.keyPath,O=C.autoIncrement,T=h(E),A={},O={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:T,keyPath:E,autoIncrement:O,unique:!0,extractKey:ks(E)},indexes:wa(C.indexNames).map(function($){return C.index($)}).map(function(U){var L=U.name,F=U.unique,G=U.multiEntry,U=U.keyPath,G={name:L,compound:h(U),keyPath:U,unique:F,multiEntry:G,extractKey:ks(U)};return A[jr(U)]=G}),getIndexByKeyPath:function($){return A[jr($)]}};return A[":id"]=O.primaryKey,E!=null&&(A[jr(E)]=O.primaryKey),O})},hasGetAll:0<_.length&&"getAll"in m.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=P.schema,x=P.hasGetAll,P=S.tables.map(d),w={};return P.forEach(function(C){return w[C.name]=C}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(C){if(!w[C])throw new Error("Table '".concat(C,"' not found"));return w[C]},MIN_KEY:-1/0,MAX_KEY:Ar(o),schema:S}}function Ec(i,o,u,c){var d=u.IDBKeyRange;return u.indexedDB,{dbcore:(c=xc(o,d,c),i.dbcore.reduce(function(p,m){return m=m.create,r(r({},p),m(p))},c))}}function fi(i,c){var u=c.db,c=Ec(i._middlewares,u,i._deps,c);i.core=c.dbcore,i.tables.forEach(function(d){var p=d.name;i.core.schema.tables.some(function(m){return m.name===p})&&(d.core=i.core.table(p),i[p]instanceof i.Table&&(i[p].core=d.core))})}function di(i,o,u,c){u.forEach(function(d){var p=c[d];o.forEach(function(m){var _=function S(x,P){return me(x,P)||(x=y(x))&&S(x,P)}(m,d);(!_||"value"in _&&_.value===void 0)&&(m===i.Transaction.prototype||m instanceof i.Transaction?se(m,d,{get:function(){return this.table(d)},set:function(S){V(this,d,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):m[d]=new i.Table(d,p))})})}function xs(i,o){o.forEach(function(u){for(var c in u)u[c]instanceof i.Table&&delete u[c]})}function Sc(i,o){return i._cfg.version-o._cfg.version}function Oc(i,o,u,c){var d=i._dbSchema;u.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=ws("$meta",xa("")[0],[]),i._storeNames.push("$meta"));var p=i._createTransaction("readwrite",i._storeNames,d);p.create(u),p._completion.catch(c);var m=p._reject.bind(p),_=fe.transless||fe;dn(function(){return fe.trans=p,fe.transless=_,o!==0?(fi(i,u),x=o,((S=p).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(P){return P??x}):ae.resolve(x)).then(function(P){return C=P,E=p,T=u,A=[],P=(w=i)._versions,O=w._dbSchema=gi(0,w.idbdb,T),(P=P.filter(function($){return $._cfg.version>=C})).length!==0?(P.forEach(function($){A.push(function(){var L=O,F=$._cfg.dbschema;yi(w,L,T),yi(w,F,T),O=w._dbSchema=F;var U=Es(L,F);U.add.forEach(function(re){Ss(T,re[0],re[1].primKey,re[1].indexes)}),U.change.forEach(function(re){if(re.recreate)throw new q.Upgrade("Not yet support for changing primary key");var z=T.objectStore(re.name);re.add.forEach(function(Ee){return pi(z,Ee)}),re.change.forEach(function(Ee){z.deleteIndex(Ee.name),pi(z,Ee)}),re.del.forEach(function(Ee){return z.deleteIndex(Ee)})});var G=$._cfg.contentUpgrade;if(G&&$._cfg.version>C){fi(w,T),E._memoizedTables={};var ne=I(F);U.del.forEach(function(re){ne[re]=L[re]}),xs(w,[w.Transaction.prototype]),di(w,[w.Transaction.prototype],l(ne),ne),E.schema=ne;var Q,te=Qe(G);return te&&nr(),U=ae.follow(function(){var re;(Q=G(E))&&te&&(re=pn.bind(null,null),Q.then(re,re))}),Q&&typeof Q.then=="function"?ae.resolve(Q):U.then(function(){return Q})}}),A.push(function(L){var F,U,G=$._cfg.dbschema;F=G,U=L,[].slice.call(U.db.objectStoreNames).forEach(function(ne){return F[ne]==null&&U.db.deleteObjectStore(ne)}),xs(w,[w.Transaction.prototype]),di(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),E.schema=w._dbSchema}),A.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===$._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(F){return F!=="$meta"})):L.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return A.length?ae.resolve(A.shift()(E.idbtrans)).then($):ae.resolve()}().then(function(){ka(O,T)})):ae.resolve();var w,C,E,T,A,O}).catch(m)):(l(d).forEach(function(P){Ss(u,P,d[P].primKey,d[P].indexes)}),fi(i,u),void ae.follow(function(){return i.on.populate.fire(p)}).catch(m));var S,x})}function Tc(i,o){ka(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var u=gi(0,i.idbdb,o);yi(i,i._dbSchema,o);for(var c=0,d=Es(u,i._dbSchema).change;c<d.length;c++){var p=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(m.name);m.add.forEach(function(S){H&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(S.src)),pi(_,S)})}(d[c]);if(typeof p=="object")return p.value}}function Es(i,o){var u,c={del:[],add:[],change:[]};for(u in i)o[u]||c.del.push(u);for(u in o){var d=i[u],p=o[u];if(d){var m={name:u,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||d.primKey.auto!==p.primKey.auto)m.recreate=!0,c.change.push(m);else{var _=d.idxByName,S=p.idxByName,x=void 0;for(x in _)S[x]||m.del.push(x);for(x in S){var P=_[x],w=S[x];P?P.src!==w.src&&m.change.push(w):m.add.push(w)}(0<m.del.length||0<m.add.length||0<m.change.length)&&c.change.push(m)}}else c.add.push([u,p])}return c}function Ss(i,o,u,c){var d=i.db.createObjectStore(o,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return c.forEach(function(p){return pi(d,p)}),d}function ka(i,o){l(i).forEach(function(u){o.db.objectStoreNames.contains(u)||(H&&console.debug("Dexie: Creating missing table",u),Ss(o,u,i[u].primKey,i[u].indexes))})}function pi(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function gi(i,o,u){var c={};return je(o.objectStoreNames,0).forEach(function(d){for(var p=u.objectStore(d),m=bs(ba(x=p.keyPath),x||"",!0,!1,!!p.autoIncrement,x&&typeof x!="string",!0),_=[],S=0;S<p.indexNames.length;++S){var P=p.index(p.indexNames[S]),x=P.keyPath,P=bs(P.name,x,!!P.unique,!!P.multiEntry,!1,x&&typeof x!="string",!1);_.push(P)}c[d]=ws(d,m,_)}),c}function yi(i,o,u){for(var c=u.db.objectStoreNames,d=0;d<c.length;++d){var p=c[d],m=u.objectStore(p);i._hasGetAll="getAll"in m;for(var _=0;_<m.indexNames.length;++_){var S=m.indexNames[_],x=m.index(S).keyPath,P=typeof x=="string"?x:"["+je(x).join("+")+"]";!o[p]||(x=o[p].idxByName[P])&&(x.name=S,delete o[p].idxByName[P],o[p].idxByName[S]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function xa(i){return i.split(",").map(function(o,u){var c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return bs(c,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),h(d),u===0)})}var Pc=(mi.prototype._parseStoresSpec=function(i,o){l(i).forEach(function(u){if(i[u]!==null){var c=xa(i[u]),d=c.shift();if(d.unique=!0,d.multi)throw new q.Schema("Primary key cannot be multi-valued");c.forEach(function(p){if(p.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),o[u]=ws(u,d,c)}})},mi.prototype.stores=function(u){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,u):u;var u=o._versions,c={},d={};return u.forEach(function(p){f(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,xs(o,[o._allTables,o,o.Transaction.prototype]),di(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(d),d),o._storeNames=l(d),this},mi.prototype.upgrade=function(i){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||be,i),this},mi);function mi(){}function Os(i,o){var u=i._dbNamesDB;return u||(u=i._dbNamesDB=new an(ai,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Ts(i){return i&&typeof i.databases=="function"}function Ps(i){return dn(function(){return fe.letThrough=!0,i()})}function Cs(i){return!("from"in i)}var Tt=function(i,o){if(!this){var u=new Tt;return i&&"d"in i&&f(u,i),u}f(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Rr(i,o,u){var c=Ne(o,u);if(!isNaN(c)){if(0<c)throw RangeError();if(Cs(i))return f(i,{from:o,to:u,d:1});var d=i.l,c=i.r;if(Ne(u,i.from)<0)return d?Rr(d,o,u):i.l={from:o,to:u,d:1,l:null,r:null},Sa(i);if(0<Ne(o,i.to))return c?Rr(c,o,u):i.r={from:o,to:u,d:1,l:null,r:null},Sa(i);Ne(o,i.from)<0&&(i.from=o,i.l=null,i.d=c?c.d+1:1),0<Ne(u,i.to)&&(i.to=u,i.r=null,i.d=i.l?i.l.d+1:1),u=!i.r,d&&!i.l&&Ir(i,d),c&&u&&Ir(i,c)}}function Ir(i,o){Cs(o)||function u(c,S){var p=S.from,m=S.to,_=S.l,S=S.r;Rr(c,p,m),_&&u(c,_),S&&u(c,S)}(i,o)}function Ea(i,o){var u=vi(o),c=u.next();if(c.done)return!1;for(var d=c.value,p=vi(i),m=p.next(d.from),_=m.value;!c.done&&!m.done;){if(Ne(_.from,d.to)<=0&&0<=Ne(_.to,d.from))return!0;Ne(d.from,_.from)<0?d=(c=u.next(_.from)).value:_=(m=p.next(d.from)).value}return!1}function vi(i){var o=Cs(i)?null:{s:0,n:i};return{next:function(u){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&Ne(u,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||Ne(u,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Sa(i){var o,u,c=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((u=i.l)===null||u===void 0?void 0:u.d)||0),d=1<c?"r":c<-1?"l":"";d&&(o=d=="r"?"l":"r",u=r({},i),c=i[d],i.from=c.from,i.to=c.to,i[d]=c[d],u[d]=c[o],(i[o]=u).d=Oa(u)),i.d=Oa(i)}function Oa(u){var o=u.r,u=u.l;return(o?u?Math.max(o.d,u.d):o.d:u?u.d:0)+1}function _i(i,o){return l(o).forEach(function(u){i[u]?Ir(i[u],o[u]):i[u]=function c(d){var p,m,_={};for(p in d)b(d,p)&&(m=d[p],_[p]=!m||typeof m!="object"||ue.has(m.constructor)?m:c(m));return _}(o[u])}),i}function As(i,o){return i.all||o.all||Object.keys(i).some(function(u){return o[u]&&Ea(o[u],i[u])})}R(Tt.prototype,((qt={add:function(i){return Ir(this,i),this},addKey:function(i){return Rr(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(u){return Rr(o,u,u)}),this},hasKey:function(i){var o=vi(this).next(i).value;return o&&Ne(o.from,i)<=0&&0<=Ne(o.to,i)}})[Se]=function(){return vi(this)},qt));var Un={},js={},Rs=!1;function bi(i){_i(js,i),Rs||(Rs=!0,setTimeout(function(){Rs=!1,Is(js,!(js={}))},0))}function Is(i,o){o===void 0&&(o=!1);var u=new Set;if(i.all)for(var c=0,d=Object.values(Un);c<d.length;c++)Ta(m=d[c],i,u,o);else for(var p in i){var m,_=/^idb\:\/\/(.*)\/(.*)\//.exec(p);_&&(p=_[1],_=_[2],(m=Un["idb://".concat(p,"/").concat(_)])&&Ta(m,i,u,o))}u.forEach(function(S){return S()})}function Ta(i,o,u,c){for(var d=[],p=0,m=Object.entries(i.queries.query);p<m.length;p++){for(var _=m[p],S=_[0],x=[],P=0,w=_[1];P<w.length;P++){var C=w[P];As(o,C.obsSet)?C.subscribers.forEach(function(O){return u.add(O)}):c&&x.push(C)}c&&d.push([S,x])}if(c)for(var E=0,T=d;E<T.length;E++){var A=T[E],S=A[0],x=A[1];i.queries.query[S]=x}}function Cc(i){var o=i._state,u=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?dt(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,d=Math.round(10*i.verno),p=!1;function m(){if(o.openCanceller!==c)throw new q.DatabaseClosed("db.open() was cancelled")}function _(){return new ae(function(C,E){if(m(),!u)throw new q.MissingAPI;var T=i.name,A=o.autoSchema||!d?u.open(T):u.open(T,d);if(!A)throw new q.MissingAPI;A.onerror=Yt(E),A.onblocked=ut(i._fireOnBlocked),A.onupgradeneeded=ut(function(O){var $;P=A.transaction,o.autoSchema&&!i._options.allowEmptyDB?(A.onerror=Pr,P.abort(),A.result.close(),($=u.deleteDatabase(T)).onsuccess=$.onerror=ut(function(){E(new q.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(P.onerror=Yt(E),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=A.result,p&&Tc(i,P),Oc(i,O/10,P,E))},E),A.onsuccess=ut(function(){P=null;var O,$,L,F,U,G=i.idbdb=A.result,ne=je(G.objectStoreNames);if(0<ne.length)try{var Q=G.transaction((F=ne).length===1?F[0]:F,"readonly");if(o.autoSchema)$=G,L=Q,(O=i).verno=$.version/10,L=O._dbSchema=gi(0,$,L),O._storeNames=je($.objectStoreNames,0),di(O,[O._allTables],l(L),L);else if(yi(i,i._dbSchema,Q),((U=Es(gi(0,(U=i).idbdb,Q),U._dbSchema)).add.length||U.change.some(function(te){return te.add.length||te.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),d=G.version+1,p=!0,C(_());fi(i,Q)}catch{}rr.push(i),G.onversionchange=ut(function(te){o.vcFired=!0,i.on("versionchange").fire(te)}),G.onclose=ut(function(te){i.on("close").fire(te)}),w&&(U=i._deps,Q=T,G=U.indexedDB,U=U.IDBKeyRange,Ts(G)||Q===ai||Os(G,U).put({name:Q}).catch(be)),C()},E)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return ae.reject(C)})}var S,x=o.dbReadyResolve,P=null,w=!1;return ae.race([c,(typeof navigator>"u"?ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function E(){return indexedDB.databases().finally(C)}S=setInterval(E,100),E()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(_)]).then(function(){return m(),o.onReadyBeingFired=[],ae.resolve(Ps(function(){return i.on.ready.fire(i.vip)})).then(function C(){if(0<o.onReadyBeingFired.length){var E=o.onReadyBeingFired.reduce(J,be);return o.onReadyBeingFired=[],ae.resolve(Ps(function(){return E(i.vip)})).then(C)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(C){o.dbOpenError=C;try{P&&P.abort()}catch{}return c===o.openCanceller&&i._close(),dt(C)}).finally(function(){o.openComplete=!0,x()}).then(function(){var C;return w&&(C={},i.tables.forEach(function(E){E.schema.indexes.forEach(function(T){T.name&&(C["idb://".concat(i.name,"/").concat(E.name,"/").concat(T.name)]=new Tt(-1/0,[[[]]]))}),C["idb://".concat(i.name,"/").concat(E.name,"/")]=C["idb://".concat(i.name,"/").concat(E.name,"/:dels")]=new Tt(-1/0,[[[]]])}),mn(Cr).fire(C),Is(C,!0)),i})}function Ds(i){function o(p){return i.next(p)}var u=d(o),c=d(function(p){return i.throw(p)});function d(p){return function(S){var _=p(S),S=_.value;return _.done?S:S&&typeof S.then=="function"?S.then(u,c):h(S)?Promise.all(S).then(u,c):u(S)}}return d(o)()}function wi(i,o,u){for(var c=h(i)?i.slice():[i],d=0;d<u;++d)c.push(o);return c}var Ac={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var u=i.table(o),c=u.schema,d={},p=[];function m(w,C,E){var T=jr(w),A=d[T]=d[T]||[],O=w==null?0:typeof w=="string"?1:w.length,$=0<C,$=r(r({},E),{name:$?"".concat(T,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:$,keyTail:C,keyLength:O,extractKey:ks(w),unique:!$&&E.unique});return A.push($),$.isPrimaryKey||p.push($),1<O&&m(O===2?w[0]:w.slice(0,O-1),C+1,E),A.sort(function(L,F){return L.keyTail-F.keyTail}),$}o=m(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[o];for(var _=0,S=c.indexes;_<S.length;_++){var x=S[_];m(x.keyPath,0,x)}function P(w){var C,E=w.query.index;return E.isVirtual?r(r({},w),{query:{index:E.lowLevelIndex,range:(C=w.query.range,E=E.keyTail,{type:C.type===1?2:C.type,lower:wi(C.lower,C.lowerOpen?i.MAX_KEY:i.MIN_KEY,E),lowerOpen:!0,upper:wi(C.upper,C.upperOpen?i.MIN_KEY:i.MAX_KEY,E),upperOpen:!0})}}):w}return r(r({},u),{schema:r(r({},c),{primaryKey:o,indexes:p,getIndexByKeyPath:function(w){return(w=d[jr(w)])&&w[0]}}),count:function(w){return u.count(P(w))},query:function(w){return u.query(P(w))},openCursor:function(w){var C=w.query.index,E=C.keyTail,T=C.isVirtual,A=C.keyLength;return T?u.openCursor(P(w)).then(function($){return $&&O($)}):u.openCursor(w);function O($){return Object.create($,{continue:{value:function(L){L!=null?$.continue(wi(L,w.reverse?i.MAX_KEY:i.MIN_KEY,E)):w.unique?$.continue($.key.slice(0,A).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,E)):$.continue()}},continuePrimaryKey:{value:function(L,F){$.continuePrimaryKey(wi(L,i.MAX_KEY,E),F)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var L=$.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return $.value}}})}}})}})}};function $s(i,o,u,c){return u=u||{},c=c||"",l(i).forEach(function(d){var p,m,_;b(o,d)?(p=i[d],m=o[d],typeof p=="object"&&typeof m=="object"&&p&&m?(_=ot(p))!==ot(m)?u[c+d]=o[d]:_==="Object"?$s(p,m,u,c+d+"."):p!==m&&(u[c+d]=o[d]):p!==m&&(u[c+d]=o[d])):u[c+d]=void 0}),l(o).forEach(function(d){b(i,d)||(u[c+d]=o[d])}),u}function Ls(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var jc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var u=i.table(o),c=u.schema.primaryKey;return r(r({},u),{mutate:function(d){var p=fe.trans,m=p.table(o).hook,_=m.deleting,S=m.creating,x=m.updating;switch(d.type){case"add":if(S.fire===be)break;return p._promise("readwrite",function(){return P(d)},!0);case"put":if(S.fire===be&&x.fire===be)break;return p._promise("readwrite",function(){return P(d)},!0);case"delete":if(_.fire===be)break;return p._promise("readwrite",function(){return P(d)},!0);case"deleteRange":if(_.fire===be)break;return p._promise("readwrite",function(){return function w(C,E,T){return u.query({trans:C,values:!1,query:{index:c,range:E},limit:T}).then(function(A){var O=A.result;return P({type:"delete",keys:O,trans:C}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):O.length<T?{failures:[],numFailures:0,lastResult:void 0}:w(C,r(r({},E),{lower:O[O.length-1],lowerOpen:!0}),T)})})}(d.trans,d.range,1e4)},!0)}return u.mutate(d);function P(w){var C,E,T,A=fe.trans,O=w.keys||Ls(c,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:O}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),C=u,T=O,((E=w).type==="add"?Promise.resolve([]):C.getMany({trans:E.trans,keys:T,cache:"immutable"})).then(function($){var L=O.map(function(F,U){var G,ne,Q,te=$[U],re={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(re,F,te,A):w.type==="add"||te===void 0?(G=S.fire.call(re,F,w.values[U],A),F==null&&G!=null&&(w.keys[U]=F=G,c.outbound||_e(w.values[U],c.keyPath,F))):(G=$s(te,w.values[U]),(ne=x.fire.call(re,G,F,te,A))&&(Q=w.values[U],Object.keys(ne).forEach(function(z){b(Q,z)?Q[z]=ne[z]:_e(Q,z,ne[z])}))),re});return u.mutate(w).then(function(F){for(var U=F.failures,G=F.results,ne=F.numFailures,F=F.lastResult,Q=0;Q<O.length;++Q){var te=(G||O)[Q],re=L[Q];te==null?re.onerror&&re.onerror(U[Q]):re.onsuccess&&re.onsuccess(w.type==="put"&&$[Q]?w.values[Q]:te)}return{failures:U,results:G,numFailures:ne,lastResult:F}}).catch(function(F){return L.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}}})}})}};function Pa(i,o,u){try{if(!o||o.keys.length<i.length)return null;for(var c=[],d=0,p=0;d<o.keys.length&&p<i.length;++d)Ne(o.keys[d],i[p])===0&&(c.push(u?ge(o.values[d]):o.values[d]),++p);return c.length===i.length?c:null}catch{return null}}var Rc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var u=i.table(o);return r(r({},u),{getMany:function(c){if(!c.cache)return u.getMany(c);var d=Pa(c.keys,c.trans._cache,c.cache==="clone");return d?ae.resolve(d):u.getMany(c).then(function(p){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?ge(p):p},p})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),u.mutate(c)}})}}}};function Ca(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Aa(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ic={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,u=new Tt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(c,d,p){if(fe.subscr&&d!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return i.transaction(c,d,p)},table:function(c){var d=i.table(c),p=d.schema,m=p.primaryKey,w=p.indexes,_=m.extractKey,S=m.outbound,x=m.autoIncrement&&w.filter(function(E){return E.compound&&E.keyPath.includes(m.keyPath)}),P=r(r({},d),{mutate:function(E){function T(z){return z="idb://".concat(o,"/").concat(c,"/").concat(z),F[z]||(F[z]=new Tt)}var A,O,$,L=E.trans,F=E.mutatedParts||(E.mutatedParts={}),U=T(""),G=T(":dels"),ne=E.type,re=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[Ls(m,E).filter(function(z){return z}),E.values]:[],Q=re[0],te=re[1],re=E.trans._cache;return h(Q)?(U.addKeys(Q),(re=ne==="delete"||Q.length===te.length?Pa(Q,re):null)||G.addKeys(Q),(re||te)&&(A=T,O=re,$=te,p.indexes.forEach(function(z){var Ee=A(z.name||"");function Te(Ie){return Ie!=null?z.extractKey(Ie):null}function Me(Ie){return z.multiEntry&&h(Ie)?Ie.forEach(function(zt){return Ee.addKey(zt)}):Ee.addKey(Ie)}(O||$).forEach(function(Ie,bt){var De=O&&Te(O[bt]),bt=$&&Te($[bt]);Ne(De,bt)!==0&&(De!=null&&Me(De),bt!=null&&Me(bt))})}))):Q?(te={from:Q.lower,to:Q.upper},G.add(te),U.add(te)):(U.add(u),G.add(u),p.indexes.forEach(function(z){return T(z.name).add(u)})),d.mutate(E).then(function(z){return!Q||E.type!=="add"&&E.type!=="put"||(U.addKeys(z.results),x&&x.forEach(function(Ee){var Te=E.values.map(function(Ie){return Ee.extractKey(Ie)}),Me=Ee.keyPath.findIndex(function(Ie){return Ie===m.keyPath});z.results.forEach(function(Ie){return Te[Me]=Ie}),T(Ee.name).addKeys(Te)})),L.mutatedParts=_i(L.mutatedParts||{},F),z})}}),w=function(T){var A=T.query,T=A.index,A=A.range;return[T,new Tt((T=A.lower)!==null&&T!==void 0?T:i.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:i.MAX_KEY)]},C={get:function(E){return[m,new Tt(E.key)]},getMany:function(E){return[m,new Tt().addKeys(E.keys)]},count:w,query:w,openCursor:w};return l(C).forEach(function(E){P[E]=function(T){var A=fe.subscr,O=!!A,$=Ca(fe,d)&&Aa(E,T)?T.obsSet={}:A;if(O){var L=function(te){return te="idb://".concat(o,"/").concat(c,"/").concat(te),$[te]||($[te]=new Tt)},F=L(""),U=L(":dels"),A=C[E](T),O=A[0],A=A[1];if((E==="query"&&O.isPrimaryKey&&!T.values?U:L(O.name||"")).add(A),!O.isPrimaryKey){if(E!=="count"){var G=E==="query"&&S&&T.values&&d.query(r(r({},T),{values:!1}));return d[E].apply(this,arguments).then(function(te){if(E==="query"){if(S&&T.values)return G.then(function(Te){return Te=Te.result,F.addKeys(Te),te});var re=T.values?te.result.map(_):te.result;(T.values?F:U).addKeys(re)}else if(E==="openCursor"){var z=te,Ee=T.values;return z&&Object.create(z,{key:{get:function(){return U.addKey(z.primaryKey),z.key}},primaryKey:{get:function(){var Te=z.primaryKey;return U.addKey(Te),Te}},value:{get:function(){return Ee&&F.addKey(z.primaryKey),z.value}}})}return te})}U.add(u)}}return d[E].apply(this,arguments)}}),P}})}};function ja(i,o,u){if(u.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return u.numFailures===c?null:(o=r({},o),h(o.keys)&&(o.keys=o.keys.filter(function(d,p){return!(p in u.failures)})),"values"in o&&h(o.values)&&(o.values=o.values.filter(function(d,p){return!(p in u.failures)})),o)}function Fs(i,o){return u=i,((c=o).lower===void 0||(c.lowerOpen?0<Ne(u,c.lower):0<=Ne(u,c.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?Ne(i,o.upper)<0:Ne(i,o.upper)<=0));var u,c}function Ra(i,o,C,c,d,p){if(!C||C.length===0)return i;var m=o.query.index,_=m.multiEntry,S=o.query.range,x=c.schema.primaryKey.extractKey,P=m.extractKey,w=(m.lowLevelIndex||m).extractKey,C=C.reduce(function(E,T){var A=E,O=[];if(T.type==="add"||T.type==="put")for(var $=new Tt,L=T.values.length-1;0<=L;--L){var F,U=T.values[L],G=x(U);$.hasKey(G)||(F=P(U),(_&&h(F)?F.some(function(re){return Fs(re,S)}):Fs(F,S))&&($.addKey(G),O.push(U)))}switch(T.type){case"add":A=E.concat(o.values?O:O.map(function(z){return x(z)}));break;case"put":var ne=new Tt().addKeys(T.values.map(function(z){return x(z)})),A=E.filter(function(z){return!ne.hasKey(o.values?x(z):z)}).concat(o.values?O:O.map(function(z){return x(z)}));break;case"delete":var Q=new Tt().addKeys(T.keys);A=E.filter(function(z){return!Q.hasKey(o.values?x(z):z)});break;case"deleteRange":var te=T.range;A=E.filter(function(z){return!Fs(x(z),te)})}return A},i);return C===i?i:(C.sort(function(E,T){return Ne(w(E),w(T))||Ne(x(E),x(T))}),o.limit&&o.limit<1/0&&(C.length>o.limit?C.length=o.limit:i.length===o.limit&&C.length<o.limit&&(d.dirty=!0)),p?Object.freeze(C):C)}function Ia(i,o){return Ne(i.lower,o.lower)===0&&Ne(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Dc(i,o){return function(u,c,d,p){if(u===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=Ne(u,c))===0){if(d&&p)return 0;if(d)return 1;if(p)return-1}return c}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(u,c,d,p){if(u===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=Ne(u,c))===0){if(d&&p)return 0;if(d)return-1;if(p)return 1}return c}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function $c(i,o,u,c){i.subscribers.add(u),c.addEventListener("abort",function(){var d,p;i.subscribers.delete(u),i.subscribers.size===0&&(d=i,p=o,setTimeout(function(){d.subscribers.size===0&&ye(p,d)},3e3))})}var Lc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(u,c,d){var p,m,_=i.transaction(u,c,d);return c==="readwrite"&&(m=(p=new AbortController).signal,d=function(S){return function(){if(p.abort(),c==="readwrite"){for(var x=new Set,P=0,w=u;P<w.length;P++){var C=w[P],E=Un["idb://".concat(o,"/").concat(C)];if(E){var T=i.table(C),A=E.optimisticOps.filter(function(Ee){return Ee.trans===_});if(_._explicit&&S&&_.mutatedParts)for(var O=0,$=Object.values(E.queries.query);O<$.length;O++)for(var L=0,F=(ne=$[O]).slice();L<F.length;L++)As((Q=F[L]).obsSet,_.mutatedParts)&&(ye(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)}));else if(0<A.length){E.optimisticOps=E.optimisticOps.filter(function(Ee){return Ee.trans!==_});for(var U=0,G=Object.values(E.queries.query);U<G.length;U++)for(var ne,Q,te,re=0,z=(ne=G[U]).slice();re<z.length;re++)(Q=z[re]).res!=null&&_.mutatedParts&&(S&&!Q.dirty?(te=Object.isFrozen(Q.res),te=Ra(Q.res,Q.req,A,T,Q,te),Q.dirty?(ye(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})):te!==Q.res&&(Q.res=te,Q.promise=ae.resolve({result:te}))):(Q.dirty&&ye(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})))}}}x.forEach(function(Ee){return Ee()})}}},_.addEventListener("abort",d(!1),{signal:m}),_.addEventListener("error",d(!1),{signal:m}),_.addEventListener("complete",d(!0),{signal:m})),_},table:function(u){var c=i.table(u),d=c.schema.primaryKey;return r(r({},c),{mutate:function(p){var m=fe.trans;if(d.outbound||m.db._options.cache==="disabled"||m.explicit)return c.mutate(p);var _=Un["idb://".concat(o,"/").concat(u)];return _?(m=c.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Ls(d,p).some(function(S){return S==null}))?(_.optimisticOps.push(p),p.mutatedParts&&bi(p.mutatedParts),m.then(function(S){0<S.numFailures&&(ye(_.optimisticOps,p),(S=ja(0,p,S))&&_.optimisticOps.push(S),p.mutatedParts&&bi(p.mutatedParts))}),m.catch(function(){ye(_.optimisticOps,p),p.mutatedParts&&bi(p.mutatedParts)})):m.then(function(S){var x=ja(0,r(r({},p),{values:p.values.map(function(E,w){var C,E=(C=d.keyPath)!==null&&C!==void 0&&C.includes(".")?ge(E):r({},E);return _e(E,d.keyPath,S.results[w]),E})}),S);_.optimisticOps.push(x),queueMicrotask(function(){return p.mutatedParts&&bi(p.mutatedParts)})}),m):c.mutate(p)},query:function(p){if(!Ca(fe,c)||!Aa("query",p))return c.query(p);var m=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",w=fe,_=w.requery,S=w.signal,x=function(T,A,O,$){var L=Un["idb://".concat(T,"/").concat(A)];if(!L)return[];if(!(A=L.queries[O]))return[null,!1,L,null];var F=A[($.query?$.query.index.name:null)||""];if(!F)return[null,!1,L,null];switch(O){case"query":var U=F.find(function(G){return G.req.limit===$.limit&&G.req.values===$.values&&Ia(G.req.query.range,$.query.range)});return U?[U,!0,L,F]:[F.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=$.limit&&(!$.values||G.req.values)&&Dc(G.req.query.range,$.query.range)}),!1,L,F];case"count":return U=F.find(function(G){return Ia(G.req.query.range,$.query.range)}),[U,!!U,L,F]}}(o,u,"query",p),P=x[0],w=x[1],C=x[2],E=x[3];return P&&w?P.obsSet=p.obsSet:(w=c.query(p).then(function(T){var A=T.result;if(P&&(P.res=A),m){for(var O=0,$=A.length;O<$;++O)Object.freeze(A[O]);Object.freeze(A)}else T.result=ge(A);return T}).catch(function(T){return E&&P&&ye(E,P),Promise.reject(T)}),P={obsSet:p.obsSet,promise:w,subscribers:new Set,type:"query",req:p,dirty:!1},E?E.push(P):(E=[P],(C=C||(Un["idb://".concat(o,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=E)),$c(P,E,_,S),P.promise.then(function(T){return{result:Ra(T.result,p,C==null?void 0:C.optimisticOps,c,P,m)}})}})}})}};function ki(i,o){return new Proxy(i,{get:function(u,c,d){return c==="db"?o:Reflect.get(u,c,d)}})}var an=(pt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new q.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,u=o.filter(function(c){return c._cfg.version===i})[0];return u||(u=new this.Version(i),o.push(u),o.sort(Sc),u.stores({}),this._state.autoSchema=!1,u)},pt.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?i():new ae(function(u,c){if(o._state.openComplete)return c(new q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new q.DatabaseClosed);o.open().catch(be)}o._state.dbReadyPromise.then(u,c)}).then(i)},pt.prototype.use=function(i){var o=i.stack,u=i.create,c=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:u,level:c??10,name:d}),i.sort(function(p,m){return p.level-m.level}),this},pt.prototype.unuse=function(i){var o=i.stack,u=i.name,c=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:!!u&&d.name!==u})),this},pt.prototype.open=function(){var i=this;return Ln(et,function(){return Cc(i)})},pt.prototype._close=function(){var i=this._state,o=rr.indexOf(this);if(0<=o&&rr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new ae(function(u){i.dbReadyResolve=u}),i.openCanceller=new ae(function(u,c){i.cancelOpen=c}))},pt.prototype.close=function(u){var o=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;o?(u.isBeingOpened&&u.cancelOpen(new q.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new q.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},pt.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new ae(function(d,p){function m(){o.close(i);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=ut(function(){var S,x,P;S=o._deps,x=o.name,P=S.indexedDB,S=S.IDBKeyRange,Ts(P)||x===ai||Os(P,S).delete(x).catch(be),d()}),_.onerror=Yt(p),_.onblocked=o._fireOnBlocked}if(u)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(m):m()})},pt.prototype.backendDB=function(){return this.idbdb},pt.prototype.isOpen=function(){return this.idbdb!==null},pt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pt.prototype,"tables",{get:function(){var i=this;return l(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),pt.prototype.transaction=function(){var i=(function(o,u,c){var d=arguments.length;if(d<2)throw new q.InvalidArgument("Too few arguments");for(var p=new Array(d-1);--d;)p[d-1]=arguments[d];return c=p.pop(),[o,W(p),c]}).apply(this,arguments);return this._transaction.apply(this,i)},pt.prototype._transaction=function(i,o,u){var c=this,d=fe.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var p,m,_=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(m=o.map(function(x){if(x=x instanceof c.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),i=="r"||i===ps)p=ps;else{if(i!="rw"&&i!=gs)throw new q.InvalidArgument("Invalid transaction mode: "+i);p=gs}if(d){if(d.mode===ps&&p===gs){if(!_)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&m.forEach(function(x){if(d&&d.storeNames.indexOf(x)===-1){if(!_)throw new q.SubTransaction("Table "+x+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(x){return d?d._promise(null,function(P,w){w(x)}):dt(x)}var S=(function x(P,w,C,E,T){return ae.resolve().then(function(){var A=fe.transless||fe,O=P._createTransaction(w,C,P._dbSchema,E);if(O.explicit=!0,A={trans:O,transless:A},E)O.idbtrans=E.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(F){return F.name===Xe.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return x(P,w,C,null,T)})):dt(F)}var $,L=Qe(T);return L&&nr(),A=ae.follow(function(){var F;($=T.call(O,O))&&(L?(F=pn.bind(null,null),$.then(F,F)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Ds($)))},A),($&&typeof $.then=="function"?ae.resolve($).then(function(F){return O.active?F:dt(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return $})).then(function(F){return E&&O._resolve(),O._completion.then(function(){return F})}).catch(function(F){return O._reject(F),dt(F)})})}).bind(null,this,p,m,d,u);return d?d._promise(p,S,"lock"):fe.trans?Ln(fe.transless,function(){return c._whenReady(S)}):this._whenReady(S)},pt.prototype.table=function(i){if(!b(this._allTables,i))throw new q.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},pt);function pt(i,o){var u=this;this._middlewares={},this.verno=0;var c=pt.dependencies;this._options=o=r({addons:pt.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,p,m,_,S,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};x.dbReadyPromise=new ae(function(w){x.dbReadyResolve=w}),x.openCanceller=new ae(function(w,C){x.cancelOpen=C}),this._state=x,this.name=i,this.on=Sr(this,"populate","blocked","versionchange","close",{ready:[J,be]}),this.on.ready.subscribe=Re(this.on.ready.subscribe,function(w){return function(C,E){pt.vip(function(){var T,A=u._state;A.openComplete?(A.dbOpenError||ae.resolve().then(C),E&&w(C)):A.onReadyBeingFired?(A.onReadyBeingFired.push(C),E&&w(C)):(w(C),T=u,E||w(function O(){T.on.ready.unsubscribe(C),T.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,Or(vc.prototype,function($,O){this.db=d;var E=ca,T=null;if(O)try{E=O()}catch(L){T=L}var A=$._ctx,O=A.table,$=O.hook.reading.fire;this._ctx={table:O,index:A.index,isPrimKey:!A.index||O.schema.primKey.keyPath&&A.index===O.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:A.or,valueMapper:$!==v?$:null}})),this.Table=(p=this,Or(pa.prototype,function(w,C,E){this.db=p,this._tx=E,this.name=w,this.schema=C,this.hook=p._allTables[w]?p._allTables[w].hook:Sr(null,{creating:[M,be],reading:[k,v],updating:[N,be],deleting:[B,be]})})),this.Transaction=(m=this,Or(wc.prototype,function(w,C,E,T,A){var O=this;this.db=m,this.mode=w,this.storeNames=C,this.schema=E,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=Sr(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ae(function($,L){O._resolve=$,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function($){var L=O.active;return O.active=!1,O.on.error.fire($),O.parent?O.parent._reject($):L&&O.idbtrans&&O.idbtrans.abort(),dt($)})})),this.Version=(_=this,Or(Pc.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,Or(_a.prototype,function(w,C,E){if(this.db=S,this._ctx={table:w,index:C===":id"?null:C,or:E},this._cmp=this._ascending=Ne,this._descending=function(T,A){return Ne(A,T)},this._max=function(T,A){return 0<Ne(T,A)?T:A},this._min=function(T,A){return Ne(T,A)<0?T:A},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Ar(o.IDBKeyRange),this._createTransaction=function(w,C,E,T){return new u.Transaction(w,C,E,u._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(w){u.on("blocked").fire(w),rr.filter(function(C){return C.name===u.name&&C!==u&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(w)})},this.use(Rc),this.use(Lc),this.use(Ic),this.use(Ac),this.use(jc);var P=new Proxy(this,{get:function(w,C,E){if(C==="_vip")return!0;if(C==="table")return function(A){return ki(u.table(A),P)};var T=Reflect.get(w,C,E);return T instanceof pa?ki(T,P):C==="tables"?T.map(function(A){return ki(A,P)}):C==="_createTransaction"?function(){return ki(T.apply(this,arguments),P)}:T}});this.vip=P,c.forEach(function(w){return w(u)})}var xi,qt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fc=(Ms.prototype.subscribe=function(i,o,u){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:u})},Ms.prototype[qt]=function(){return this},Ms);function Ms(i){this._subscribe=i}try{xi={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{xi={indexedDB:null,IDBKeyRange:null}}function Da(i){var o,u=!1,c=new Fc(function(d){var p=Qe(i),m,_=!1,S={},x={},P={get closed(){return _},unsubscribe:function(){_||(_=!0,m&&m.abort(),w&&mn.storagemutated.unsubscribe(E))}};d.start&&d.start(P);var w=!1,C=function(){return ds(T)},E=function(A){_i(S,A),As(x,S)&&C()},T=function(){var A,O,$;!_&&xi.indexedDB&&(S={},A={},m&&m.abort(),m=new AbortController,$=function(L){var F=er();try{p&&nr();var U=dn(i,L);return U=p?U.finally(pn):U}finally{F&&tr()}}(O={subscr:A,signal:m.signal,requery:C,querier:i,trans:null}),Promise.resolve($).then(function(L){u=!0,o=L,_||O.signal.aborted||(S={},function(F){for(var U in F)if(b(F,U))return;return 1}(x=A)||w||(mn(Cr,E),w=!0),ds(function(){return!_&&d.next&&d.next(L)}))},function(L){u=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||ds(function(){_||d.error&&d.error(L)})}))};return setTimeout(C,0),P});return c.hasValue=function(){return u},c.getValue=function(){return o},c}var Kn=an;function Us(i){var o=vn;try{vn=!0,mn.storagemutated.fire(i),Is(i,!0)}finally{vn=o}}R(Kn,r(r({},He),{delete:function(i){return new Kn(i,{addons:[]}).delete()},exists:function(i){return new Kn(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Kn.dependencies,u=o.indexedDB,o=o.IDBKeyRange,(Ts(u)?Promise.resolve(u.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==ai})}):Os(u,o).toCollection().primaryKeys()).then(i)}catch{return dt(new q.MissingAPI)}var o,u},defineClass:function(){return function(i){f(this,i)}},ignoreTransaction:function(i){return fe.trans?Ln(fe.transless,i):i()},vip:Ps,async:function(i){return function(){try{var o=Ds(i.apply(this,arguments));return o&&typeof o.then=="function"?o:ae.resolve(o)}catch(u){return dt(u)}}},spawn:function(i,o,u){try{var c=Ds(i.apply(u,o||[]));return c&&typeof c.then=="function"?c:ae.resolve(c)}catch(d){return dt(d)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(i,o){return o=ae.resolve(typeof i=="function"?Kn.ignoreTransaction(i):i).timeout(o||6e4),fe.trans?fe.trans.waitFor(o):o},Promise:ae,debug:{get:function(){return H},set:function(i){K(i)}},derive:le,extend:f,props:R,override:Re,Events:Sr,on:mn,liveQuery:Da,extendObservabilitySet:_i,getByKeyPath:Ye,setByKeyPath:_e,delByKeyPath:function(i,o){typeof o=="string"?_e(i,o,void 0):"length"in o&&[].map.call(o,function(u){_e(i,u,void 0)})},shallowClone:I,deepClone:ge,getObjectDiff:$s,cmp:Ne,asap:Le,minKey:-1/0,addons:[],connections:rr,errnames:Xe,dependencies:xi,cache:Un,semVer:"4.0.8",version:"4.0.8".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,u){return i+o/Math.pow(10,2*u)})})),Kn.maxKey=Ar(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(mn(Cr,function(i){vn||(i=new CustomEvent(_s,{detail:i}),vn=!0,dispatchEvent(i),vn=!1)}),addEventListener(_s,function(i){i=i.detail,vn||Us(i)}));var or,vn=!1,$a=function(){};return typeof BroadcastChannel<"u"&&(($a=function(){(or=new BroadcastChannel(_s)).onmessage=function(i){return i.data&&Us(i.data)}})(),typeof or.unref=="function"&&or.unref(),mn(Cr,function(i){vn||or.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!an.disableBfCache&&i.persisted){H&&console.debug("Dexie: handling persisted pagehide"),or!=null&&or.close();for(var o=0,u=rr;o<u.length;o++)u[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!an.disableBfCache&&i.persisted&&(H&&console.debug("Dexie: handling persisted pageshow"),$a(),Us({all:new Tt(-1/0,[[]])}))})),ae.rejectionMapper=function(i,o){return!i||i instanceof Ke||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Fe[i.name]?i:(o=new Fe[i.name](o||i.message,i),"stack"in i&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},K(H),r(an,Object.freeze({__proto__:null,Dexie:an,liveQuery:Da,Entity:ha,cmp:Ne,PropModSymbol:on,PropModification:Tr,replacePrefix:function(i,o){return new Tr({replacePrefix:[i,o]})},add:function(i){return new Tr({add:i})},remove:function(i){return new Tr({remove:i})},default:an,RangeSet:Tt,mergeRanges:Ir,rangesOverlap:Ea}),{default:an}),an})})(Nl);var vd=Nl.exports;const ko=Kl(vd),vu=Symbol.for("Dexie"),xo=globalThis[vu]||(globalThis[vu]=ko);if(ko.semVer!==xo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ko.semVer} and ${xo.semVer}`);const Cn=new xo("DictionaryDB");Cn.version(1).stores({words:"id,type,chinese,romaji,classification,audioid,english",definitions:"defid,wordid,partofspeech,def_chinese,def_english"});async function _d(){try{const e=await(await fetch("./src/assets/taigiwords.csv")).text(),r=await(await fetch("./src/assets/taigidefs.csv")).text();mu.parse(e,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await Cn.words.clear(),await Cn.words.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}}),mu.parse(r,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await Cn.definitions.clear(),await Cn.definitions.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}})}catch(t){console.error("Error loading CSV file:",t)}}const Zo=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},bd={},wd={class:"play-audio",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function kd(t,e){return It(),Ht("svg",wd,e[0]||(e[0]=[ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.9177 4.9473L19.4897 4.3313L18.2577 5.1873L18.6857 5.8023C21.3027 9.5713 21.3027 14.4363 18.6857 18.1973L18.2577 18.8123L19.4887 19.6693L19.9177 19.0533C22.8497 14.8393 22.8497 9.1703 19.9177 4.9473Z",fill:"gray"},null,-1),ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.2312 7.6226L16.8582 6.9716L15.5572 7.7166L15.9292 8.3676C17.2142 10.6126 17.2142 13.3966 15.9302 15.6336L15.5562 16.2836L16.8572 17.0306L17.2312 16.3806C18.7792 13.6836 18.7792 10.3276 17.2312 7.6226Z",fill:"gray"},null,-1),ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.0788 7.564H2.3848V8.064C2.3828 10.688 2.3828 13.312 2.3848 15.937V16.436H7.0788L11.2048 20.013H12.6678V3.987H11.2048L7.0788 7.564Z",fill:"gray"},null,-1)]))}const ql=Zo(bd,[["render",kd]]),xd={props:{audioID:{type:String,required:!0}},components:{IconPlayAudio:ql},data(){return{isPlaying:!1,baseSrc:"src/assets/audio_taigi/"}},computed:{fullSrc(){return`${this.baseSrc}${getAudioFolder(this.audioid)}/${audioid}.mp3`}},methods:{togglePlay(){const t=this.$refs.audio;this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying},audioEnded(){this.isPlaying=!1,console.log("Audio has finished playing.")},getAudioFolder(t){if(console.log(t),t){const e=parseInt(t.match(/^(\d+)\(/)[1]);return e<1e3?"0":e>=1e3&&e<2e3?"1":e>=2e3&&e<3e3?"2":e>=3e3&&e<4e3?"3":e>=4e3&&e<5e3?"4":e>=5e3&&e<6e3?"5":e>=6e3&&e<7e3?"6":e>=7e3&&e<8e3?"7":e>=8e3&&e<9e3?"8":e>=9e3&&e<1e4?"9":e>=1e4&&e<11e3?"10":e>=11e3&&e<12e3?"11":e>=12e3&&e<13e3?"12":e>=13e3&&e<14e3?"13":e>=14e3&&e<15e3?"14":e>=15e3&&e<16e3?"15":e>=16e3&&e<17e3?"16":e>=17e3&&e<18e3?"17":e>=18e3&&e<19e3?"18":e>=19e3&&e<2e4?"19":e>=2e4&&e<21e3?"20":e>=21e3&&e<22e3?"21":e>=22e3&&e<23e3?"22":e>=23e3&&e<24e3?"23":e>=24e3&&e<25e3?"24":e>=25e3&&e<26e3?"25":e>=26e3&&e<27e3?"26":e>=27e3&&e<28e3?"27":e>=28e3&&e<29e3?"28":"Out of range"}}},mounted(){this.$refs.audio},beforeDestroy(){this.$refs.audio}},Ed={class:"audio-player"},Sd=["src"];function Od(t,e,n,r,s,a){const l=po("IconPlayAudio");return It(),Ht("div",Ed,[ve("audio",{ref:"audio",src:`${this.baseSrc}${a.getAudioFolder(n.audioID)}/${n.audioID}.mp3`,onEnded:e[0]||(e[0]=(...h)=>a.audioEnded&&a.audioEnded(...h))},null,40,Sd),Nt(l,{onClick:a.togglePlay},null,8,["onClick"])])}const Td=Zo(xd,[["render",Od],["__scopeId","data-v-ce97b142"]]),Pd="modulepreload",Cd=function(t){return"/taigi-dict-app/"+t},_u={},wr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=Cd(f),f in _u)return;_u[f]=!0;const y=f.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Pd,y||(b.as="script"),b.crossOrigin="",b.href=f,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((R,V)=>{b.addEventListener("load",R),b.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Ad=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wr(async()=>{const{default:r}=await Promise.resolve().then(()=>xr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ea extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jd extends ea{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rd extends ea{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Id extends ea{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Eo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Eo||(Eo={}));var Dd=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class $d{constructor(e,{headers:n={},customFetch:r,region:s=Eo.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Ad(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Dd(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:l}=n;let h={},{region:f}=n;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let y;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(h["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(h["Content-Type"]="application/json",y=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:y}).catch(se=>{throw new jd(se)}),b=g.headers.get("x-relay-error");if(b&&b==="true")throw new Rd(g);if(!g.ok)throw new Id(g);let R=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),V;return R==="application/json"?V=yield g.json():R==="application/octet-stream"?V=yield g.blob():R==="text/event-stream"?V=g:R==="multipart/form-data"?V=yield g.formData():V=yield g.text(),{data:V,error:null}}catch(s){return{data:null,error:s}}})}}var Dt={},ta={},ns={},ei={},rs={},is={},Ld=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kr=Ld();const Fd=kr.fetch,Hl=kr.fetch.bind(kr),Vl=kr.Headers,Md=kr.Request,Ud=kr.Response,xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vl,Request:Md,Response:Ud,default:Hl,fetch:Fd},Symbol.toStringTag,{value:"Module"})),Kd=yd(xr);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});class Bd extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}ss.default=Bd;var Wl=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(is,"__esModule",{value:!0});const Nd=Wl(Kd),qd=Wl(ss);let Hd=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,h,f;let y=null,g=null,b=null,R=a.status,V=a.statusText;if(a.ok){if(this.method!=="HEAD"){const we=await a.text();we===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=we:g=JSON.parse(we))}const le=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),me=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");le&&me&&me.length>1&&(b=parseInt(me[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,R=406,V="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const le=await a.text();try{y=JSON.parse(le),Array.isArray(y)&&a.status===404&&(g=[],y=null,R=200,V="OK")}catch{a.status===404&&le===""?(R=204,V="No Content"):y={message:le}}if(y&&this.isMaybeSingle&&(!((f=y==null?void 0:y.details)===null||f===void 0)&&f.includes("0 rows"))&&(y=null,R=200,V="OK"),y&&this.shouldThrowOnError)throw new qd.default(y)}return{error:y,data:g,count:b,status:R,statusText:V}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,h,f;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=a==null?void 0:a.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};is.default=Hd;var Vd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rs,"__esModule",{value:!0});const Wd=Vd(is);let zd=class extends Wd.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",h=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var h;const f=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${y}"; options=${f};`,l==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rs.default=zd;var Jd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ei,"__esModule",{value:!0});const Gd=Jd(rs);let Qd=class extends Gd.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${l}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ei.default=Qd;var Yd=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ns,"__esModule",{value:!0});const Lr=Yd(ei);let Xd=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",l),r&&(this.headers.Prefer=`count=${r}`),new Lr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(l.length>0){const h=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new Lr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const l="POST",h=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),s&&h.push(`count=${s}`),a||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const f=e.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(f.length>0){const y=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new Lr.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Lr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Lr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ns.default=Xd;var os={},as={};Object.defineProperty(as,"__esModule",{value:!0});as.version=void 0;as.version="0.0.0-automated";Object.defineProperty(os,"__esModule",{value:!0});os.DEFAULT_HEADERS=void 0;const Zd=as;os.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Zd.version}`};var zl=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ta,"__esModule",{value:!0});const ep=zl(ns),tp=zl(ei),np=os;let rp=class Jl{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},np.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new ep.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let l;const h=new URL(`${this.url}/rpc/${e}`);let f;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{h.searchParams.append(g,b)})):(l="POST",f=n);const y=Object.assign({},this.headers);return a&&(y.Prefer=`count=${a}`),new tp.default({method:l,url:h,headers:y,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};ta.default=rp;var Er=jt&&jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.PostgrestError=Dt.PostgrestBuilder=Dt.PostgrestTransformBuilder=Dt.PostgrestFilterBuilder=Dt.PostgrestQueryBuilder=Dt.PostgrestClient=void 0;const Gl=Er(ta);Dt.PostgrestClient=Gl.default;const Ql=Er(ns);Dt.PostgrestQueryBuilder=Ql.default;const Yl=Er(ei);Dt.PostgrestFilterBuilder=Yl.default;const Xl=Er(rs);Dt.PostgrestTransformBuilder=Xl.default;const Zl=Er(is);Dt.PostgrestBuilder=Zl.default;const ec=Er(ss);Dt.PostgrestError=ec.default;var ip=Dt.default={PostgrestClient:Gl.default,PostgrestQueryBuilder:Ql.default,PostgrestFilterBuilder:Yl.default,PostgrestTransformBuilder:Xl.default,PostgrestBuilder:Zl.default,PostgrestError:ec.default};const{PostgrestClient:sp,PostgrestQueryBuilder:iy,PostgrestFilterBuilder:sy,PostgrestTransformBuilder:oy,PostgrestBuilder:ay}=ip,op="2.10.7",ap={"X-Client-Info":`realtime-js/${op}`},up="1.0.0",tc=1e4,lp=1e3;var _r;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_r||(_r={}));var Ft;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ft||(Ft={}));var Gt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Gt||(Gt={}));var So;(function(t){t.websocket="websocket"})(So||(So={}));var Jn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jn||(Jn={}));class cp{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const h=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+a));l=l+a;const y=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:h,event:f,payload:y}}}class nc{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const bu=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,l)=>(a[l]=hp(l,t,e,s),a),{})},hp=(t,e,n,r)=>{const s=e.find(h=>h.name===t),a=s==null?void 0:s.type,l=n[t];return a&&!r.includes(a)?rc(a,l):Oo(l)},rc=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return gp(e,n)}switch(t){case rt.bool:return fp(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return dp(e);case rt.json:case rt.jsonb:return pp(e);case rt.timestamp:return yp(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Oo(e);default:return Oo(e)}},Oo=t=>t,fp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},dp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gp=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(h=>rc(e,h))}return t},yp=t=>typeof t=="string"?t.replace(" ","T"):t,ic=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class no{constructor(e,n,r={},s=tc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wu||(wu={}));class Hr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hr.syncState(this.state,s,a,l),this.pendingDiffs.forEach(f=>{this.state=Hr.syncDiff(this.state,f,a,l)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hr.syncDiff(this.state,s,a,l),h())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),l=this.transformState(n),h={},f={};return this.map(a,(y,g)=>{l[y]||(f[y]=g)}),this.map(l,(y,g)=>{const b=a[y];if(b){const R=g.map(me=>me.presence_ref),V=b.map(me=>me.presence_ref),se=g.filter(me=>V.indexOf(me.presence_ref)<0),le=b.filter(me=>R.indexOf(me.presence_ref)<0);se.length>0&&(h[y]=se),le.length>0&&(f[y]=le)}else h[y]=g}),this.syncDiff(a,{joins:h,leaves:f},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(h,f)=>{var y;const g=(y=e[h])!==null&&y!==void 0?y:[];if(e[h]=this.cloneDeep(f),g.length>0){const b=e[h].map(V=>V.presence_ref),R=g.filter(V=>b.indexOf(V.presence_ref)<0);e[h].unshift(...R)}r(h,g,f)}),this.map(l,(h,f)=>{let y=e[h];if(!y)return;const g=f.map(b=>b.presence_ref);y=y.filter(b=>g.indexOf(b.presence_ref)<0),e[h]=y,s(h,y,f),y.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ku;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ku||(ku={}));var xu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xu||(xu={}));var Eu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Eu||(Eu={}));class na{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new no(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new nc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Hr(this),this.broadcastEndpointURL=ic(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:h}}=this.params;this._onError(g=>e&&e("CHANNEL_ERROR",g)),this._onClose(()=>e&&e("CLOSED"));const f={},y={broadcast:a,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:h};this.socket.accessToken&&(f.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:y},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:g})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),g===void 0){e&&e("SUBSCRIBED");return}else{const R=this.bindings.postgres_changes,V=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,se=[];for(let le=0;le<V;le++){const me=R[le],{filter:{event:we,schema:je,table:Re,filter:ce}}=me,Le=g&&g[le];if(Le&&Le.event===we&&Le.schema===je&&Le.table===Re&&Le.filter===ce)se.push(Object.assign(Object.assign({},me),{id:Le.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=se,e&&e("SUBSCRIBED");return}}).receive("error",g=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,h,f;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(l=this.params)===null||l===void 0?void 0:l.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),y.receive("ok",()=>a("ok")),y.receive("error",()=>a("error")),y.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new no(this,Gt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new no(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const l=e.toLocaleLowerCase(),{close:h,error:f,leave:y,join:g}=Gt;if(r&&[h,f,y,g].indexOf(l)>=0&&r!==this._joinRef())return;let R=this._onMessage(l,n,r);if(n&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(V=>{var se,le,me;return((se=V.filter)===null||se===void 0?void 0:se.event)==="*"||((me=(le=V.filter)===null||le===void 0?void 0:le.event)===null||me===void 0?void 0:me.toLocaleLowerCase())===l}).map(V=>V.callback(R,r)):(a=this.bindings[l])===null||a===void 0||a.filter(V=>{var se,le,me,we,je,Re;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in V){const ce=V.id,Le=(se=V.filter)===null||se===void 0?void 0:se.event;return ce&&((le=n.ids)===null||le===void 0?void 0:le.includes(ce))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((me=n.data)===null||me===void 0?void 0:me.type.toLocaleLowerCase()))}else{const ce=(je=(we=V==null?void 0:V.filter)===null||we===void 0?void 0:we.event)===null||je===void 0?void 0:je.toLocaleLowerCase();return ce==="*"||ce===((Re=n==null?void 0:n.event)===null||Re===void 0?void 0:Re.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===l}).map(V=>{if(typeof R=="object"&&"ids"in R){const se=R.data,{schema:le,table:me,commit_timestamp:we,type:je,errors:Re}=se;R=Object.assign(Object.assign({},{schema:le,table:me,commit_timestamp:we,eventType:je,new:{},old:{},errors:Re}),this._getPayloadRecords(se))}V.callback(R,r)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&na.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gt.close,{},e)}_onError(e){this._on(Gt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bu(e.columns,e.old_record)),n}}const mp=()=>{},vp=typeof WebSocket<"u",_p=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bp{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ap,this.params={},this.timeout=tc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=mp,this.conn=null,this.sendBuffer=[],this.serializer=new cp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...h)=>wr(async()=>{const{default:f}=await Promise.resolve().then(()=>xr);return{default:f}},void 0).then(({default:f})=>f(...h)):l=fetch,(...h)=>l(...h)},this.endPoint=`${e}/${So.websocket}`,this.httpEndpoint=ic(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,l)=>l(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(vp){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new wp(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),wr(async()=>{const{default:e}=await import("./browser-0CrL2_Bg.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _r.connecting:return Jn.Connecting;case _r.open:return Jn.Open;case _r.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}channel(e,n={config:{}}){const r=new na(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,l=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Gt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:up}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:l}=n;(l&&l===this.pendingHeartbeatRef||s===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,a),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,a,l)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(lp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_p],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class wp{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_r.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ra extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kp extends ra{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class To extends ra{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var xp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const sc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wr(async()=>{const{default:r}=await Promise.resolve().then(()=>xr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ep=()=>xp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wr(()=>Promise.resolve().then(()=>xr),void 0)).Response:Response}),Po=t=>{if(Array.isArray(t))return t.map(n=>Po(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Po(r)}),e};var Xn=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const ro=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sp=(t,e,n)=>Xn(void 0,void 0,void 0,function*(){const r=yield Ep();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new kp(ro(s),t.status||500))}).catch(s=>{e(new To(ro(s),s))}):e(new To(ro(t),t))}),Op=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ti(t,e,n,r,s,a){return Xn(this,void 0,void 0,function*(){return new Promise((l,h)=>{t(n,Op(e,r,s,a)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>Sp(f,h,r))})})}function qi(t,e,n,r){return Xn(this,void 0,void 0,function*(){return ti(t,"GET",e,n,r)})}function Tn(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return ti(t,"POST",e,r,s,n)})}function Tp(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return ti(t,"PUT",e,r,s,n)})}function Pp(t,e,n,r){return Xn(this,void 0,void 0,function*(){return ti(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oc(t,e,n,r,s){return Xn(this,void 0,void 0,function*(){return ti(t,"DELETE",e,r,s,n)})}var Rt=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const Cp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Su={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ap{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=sc(s)}uploadOrUpdate(e,n,r,s){return Rt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Su),s);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,h["cache-control"]=`max-age=${l.cacheControl}`,h["content-type"]=l.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s!=null&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const y=this._removeEmptyFolders(n),g=this._getFinalPath(y),b=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:h},l!=null&&l.duplex?{duplex:l.duplex}:{})),R=yield b.json();return b.ok?{data:{path:y,id:R.Id,fullPath:R.Key},error:null}:{data:null,error:R}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Rt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${l}`);h.searchParams.set("token",n);try{let f;const y=Object.assign({upsert:Su.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",y.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",y.cacheControl)):(f=r,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const b=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),R=yield b.json();return b.ok?{data:{path:a,fullPath:R.Key},error:null}:{data:null,error:R}}catch(f){if(_t(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Tn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+a.url),h=l.searchParams.get("token");if(!h)throw new ra("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:h},error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Tn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Rt(this,void 0,void 0,function*(){try{const s=yield Tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}download(e,n){return Rt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield qi(this.fetch,`${this.url}/${s}/${h}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(_t(h))return{data:null,error:h};throw h}})}info(e){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield qi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Po(r),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}exists(e){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Pp(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(_t(r)&&r instanceof To){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&s.push(f);let y=s.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${y}`)}}}remove(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Cp),n),{prefix:e||""});return{data:yield Tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const jp="2.7.1",Rp={"X-Client-Info":`storage-js/${jp}`};var ur=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class Ip{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Rp),n),this.fetch=sc(r)}listBuckets(){return ur(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return ur(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ur(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ur(this,void 0,void 0,function*(){try{return{data:yield Tp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ur(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ur(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}}class Dp extends Ip{constructor(e,n={},r){super(e,n,r)}from(e){return new Ap(this.url,this.headers,e,this.fetch)}}const $p="2.46.1";let Ur="";typeof Deno<"u"?Ur="deno":typeof document<"u"?Ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ur="react-native":Ur="node";const Lp={"X-Client-Info":`supabase-js-${Ur}/${$p}`},Fp={headers:Lp},Mp={schema:"public"},Up={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kp={};var Bp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const Np=t=>{let e;return t?e=t:typeof fetch>"u"?e=Hl:e=fetch,(...n)=>e(...n)},qp=()=>typeof Headers>"u"?Vl:Headers,Hp=(t,e,n)=>{const r=Np(n),s=qp();return(a,l)=>Bp(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:t;let y=new s(l==null?void 0:l.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},l),{headers:y}))})};var Vp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};function Wp(t){return t.replace(/\/$/,"")}function zp(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:l,auth:h,realtime:f,global:y}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),s),global:Object.assign(Object.assign({},y),a),accessToken:()=>Vp(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const ac="2.65.1",Jp="http://localhost:9999",Gp="supabase.auth.token",Qp={"X-Client-Info":`gotrue-js/${ac}`},Ou=10,Co="X-Supabase-Api-Version",uc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Yp(t){return Math.round(Date.now()/1e3)+t}function Xp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Jt=()=>typeof document<"u",Hn={tested:!1,writable:!1},Vr=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hn.tested)return Hn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Hn.tested=!0,Hn.writable=!0}catch{Hn.tested=!0,Hn.writable=!1}return Hn.writable};function io(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wr(async()=>{const{default:r}=await Promise.resolve().then(()=>xr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Zp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ji=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ri=async(t,e)=>{await t.removeItem(e)};function eg(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,a,l,h,f,y,g=0;for(t=t.replace("-","+").replace("_","/");g<t.length;)l=e.indexOf(t.charAt(g++)),h=e.indexOf(t.charAt(g++)),f=e.indexOf(t.charAt(g++)),y=e.indexOf(t.charAt(g++)),r=l<<2|h>>4,s=(h&15)<<4|f>>2,a=(f&3)<<6|y,n=n+String.fromCharCode(r),f!=64&&s!=0&&(n=n+String.fromCharCode(s)),y!=64&&a!=0&&(n=n+String.fromCharCode(a));return n}class us{constructor(){this.promise=new us.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}us.promiseConstructor=Promise;function Tu(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(eg(r))}async function tg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ng(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function rg(t){return("0"+t.toString(16)).substr(-2)}function ig(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,rg).join("")}async function sg(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function og(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ag(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sg(t);return og(n)}async function lr(t,e,n=!1){const r=ig();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await cc(t,`${e}-code-verifier`,s);const a=await ag(r);return[a,r===a?"plain":"s256"]}const ug=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lg(t){const e=t.headers.get(Co);if(!e||!e.match(ug))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class ia extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cg extends ia{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function hg(t){return $e(t)&&t.name==="AuthApiError"}class hc extends ia{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zn extends ia{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class xn extends Zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fg(t){return $e(t)&&t.name==="AuthSessionMissingError"}class so extends Zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ii extends Zn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Di extends Zn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pu extends Zn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ao extends Zn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function oo(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Cu extends Zn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var dg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const zn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pg=[502,503,504];async function Au(t){var e;if(!Zp(t))throw new Ao(zn(t),0);if(pg.includes(t.status))throw new Ao(zn(t),t.status);let n;try{n=await t.json()}catch(a){throw new hc(zn(a),a)}let r;const s=lg(t);if(s&&s.getTime()>=uc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Cu(zn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new xn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Cu(zn(n),t.status,n.weak_password.reasons);throw new cg(zn(n),t.status||500,r)}const gg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Co]||(a[Co]=uc["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const h=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await yg(t,e,n+h,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function yg(t,e,n,r,s,a){const l=gg(e,r,s,a);let h;try{h=await t(n,Object.assign({},l))}catch(f){throw console.error(f),new Ao(zn(f),0)}if(h.ok||await Au(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(f){await Au(f)}}function En(t){var e;let n=null;bg(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Yp(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ju(t){const e=En(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mg(t){return{data:t,error:null}}function vg(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,l=dg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},f=Object.assign({},l);return{data:{properties:h,user:f},error:null}}function _g(t){return t}function bg(t){return t.access_token&&t.refresh_token&&t.expires_in}var wg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class kg{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=lc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wg(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:vg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,l,h,f;try{const y={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:_g});if(g.error)throw g.error;const b=await g.json(),R=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,V=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return V.length>0&&(V.forEach(se=>{const le=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),me=JSON.parse(se.split(";")[1].split("=")[1]);y[`${me}Page`]=le}),y.total=parseInt(R)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Pn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const xg={getItem:t=>Vr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Vr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Vr()&&globalThis.localStorage.removeItem(t)}};function Ru(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Eg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cr={debug:!!(globalThis&&Vr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sg extends fc{}async function Og(t,e,n){cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),cr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Sg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}Eg();const Tg={url:Jp,storageKey:Gp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Fr=30*1e3,Iu=3;async function Du(t,e,n){return await n()}class Yr{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yr.nextInstanceID,Yr.nextInstanceID+=1,this.instanceID>0&&Jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Tg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new kg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lc(s.fetch),this.lock=s.lock||Du,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Jt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Og:this.lock=Du,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Vr()?this.storage=xg:(this.memoryStorage={},this.storage=Ru(this.memoryStorage)):(this.memoryStorage={},this.storage=Ru(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ac}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Jt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new hc("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:En}),{data:l,error:h}=a;if(h||!l)return{data:{user:null,session:null},error:h};const f=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:g,password:b,options:R}=e;let V=null,se=null;this.flowType==="pkce"&&([V,se]=await lr(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R==null?void 0:R.emailRedirectTo,body:{email:g,password:b,data:(n=R==null?void 0:R.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken},code_challenge:V,code_challenge_method:se},xform:En})}else if("phone"in e){const{phone:g,password:b,options:R}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(r=R==null?void 0:R.data)!==null&&r!==void 0?r:{},channel:(s=R==null?void 0:R.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken}},xform:En})}else throw new Ii("You must provide either an email or phone number and a password");const{data:l,error:h}=a;if(h||!l)return{data:{user:null,session:null},error:h};const f=l.session,y=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ju})}else if("phone"in e){const{phone:a,password:l,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ju})}else throw new Ii("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new so}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await ji(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:En});if(await Ri(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new so}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:l}=e,h=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:En}),{data:f,error:y}=h;return y?{data:{user:null,session:null},error:y}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new so}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:y})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,l;try{if("email"in e){const{email:h,options:f}=e;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await lr(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:f}=e,{data:y,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:g}}throw new Ii("You must provide either an email or phone number.")}catch(h){if($e(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:h}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:En});if(h)throw h;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,y=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await lr(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:mg})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new xn;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:l,error:h}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:h}}throw new Ii("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,y,g)=>(!l&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,y,g))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pn}):await this._useSession(async n=>{var r,s,a;const{data:l,error:h}=n;if(h)throw h;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Pn})})}catch(n){if($e(n))return fg(n)&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new xn;const l=s.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await lr(this.storage,this.storageKey));const{data:y,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:l.access_token,xform:Pn});if(g)throw g;return l.user=y.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Tu(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const l=Tu(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:h}=n;if(h)throw h;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new xn;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Jt())throw new Di("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Di("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Pu("Not a valid PKCE flow url.");const n=io(window.location.href);if(e){if(!n.code)throw new Pu("No code detected.");const{data:je,error:Re}=await this._exchangeCodeForSession(n.code);if(Re)throw Re;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:je.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Di(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:h,expires_at:f,token_type:y}=n;if(!a||!h||!l||!y)throw new Di("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(h);let R=g+b;f&&(R=parseInt(f));const V=R-g;V*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${b}s`);const se=R-b;g-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,R,g):g-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",se,R,g);const{data:le,error:me}=await this._getUser(a);if(me)throw me;const we={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:R,refresh_token:l,token_type:y,user:le.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:n.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=io(window.location.href);return!!(Jt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=io(window.location.href),n=await ji(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:h}=await this.admin.signOut(l,e);if(h&&!(hg(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Xp(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await lr(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var l,h,f,y,g;const{data:b,error:R}=a;if(R)throw R;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",V,{headers:this.headers,jwt:(g=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ng(async s=>(s>0&&await tg(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:En})),(s,a)=>{const l=200*Math.pow(2,s);return a&&oo(a)&&Date.now()+l-r<Fr})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Jt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ji(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Ou;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ou}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:l}=await this._callRefreshToken(r.refresh_token);l&&(console.error(l),oo(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new us;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new xn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(s,"error",a),$e(a)){const l={session:null,error:a};return oo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){a.push(f)}});if(await Promise.all(l),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await cc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ri(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fr}ms, refresh threshold is ${Iu} ticks`),s<=Iu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await lr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(h.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:y}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:l,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:h})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(s.access_token);let h=null;l.aal&&(h=l.aal);let f=h;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=l.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}}Yr.nextInstanceID=0;const Pg=Yr;class Cg extends Pg{constructor(e){super(e)}}var Ag=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{y(r.next(g))}catch(b){l(b)}}function f(g){try{y(r.throw(g))}catch(b){l(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class jg{constructor(e,n,r){var s,a,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=Wp(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Mp,realtime:Kp,auth:Object.assign(Object.assign({},Up),{storageKey:f}),global:Fp},g=zp(r??{},y);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=Hp(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new sp(`${h}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new $d(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dp(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Ag(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:l,lock:h,debug:f},y,g){var b;const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cg({url:this.authUrl,headers:Object.assign(Object.assign({},R),y),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:(b="Authorization"in this.headers)!==null&&b!==void 0?b:!1})}_initRealtimeClient(e){return new bp(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rg=(t,e,n)=>new jg(t,e,n),Ig="https://oqwvljqwtearyepyaslo.supabase.co",Dg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xd3ZsanF3dGVhcnllcHlhc2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEwODA1NjIsImV4cCI6MjA0NjY1NjU2Mn0.31HmSCfXawvkzhevPCaKWoVCZyD_elcQOCtgFWJMRKI",kn=Rg(Ig,Dg),$g={data(){return{words:[],searchQuery:"",searchResults:[],word:null,showDialog:!1,selectedWordId:null}},components:{AudioPlayerTaigi:Td,IconPlayAudio:ql},async created(){},methods:{async fetchWords(){const{data:t,error:e}=await kn.from("words").select(`
          id,
          english,
          definitions (defid, def_english)
        `);e?console.error(e):this.words=t},clearInput(){this.searchQuery=""},async openDialog(t){this.showDialog=!0,this.selectedWordId=t;const{data:e,error:n}=await kn.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese)").eq("id",t).single();n?console.error("Error fetching word:",n.message):(this.word=e,console.log(this.word))},async editWord(t){const{data:e,error:n}=await kn.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese, partofspeech)").eq("id",t).single();n?console.error("Error fetching word:",n.message):this.word=e},async updateWord(){const{data:t,error:e}=await kn.from("words").upsert({id:this.word.id,chinese:this.word.chinese,romaji:this.word.romaji,classification:this.word.classification,english:this.word.english});e?console.error("Error updating word:",e.message):console.log("Word updated successfully:",t)},async updateDefinition(t,e){const n=this.word.definitions[e],{data:r,error:s}=await kn.from("definitions").upsert({defid:t,wordid:this.word.id,partofspeech:n.partofspeech,def_english:n.def_english,def_chinese:n.def_chinese});s?console.error("Error updating definition:",s.message):console.log("Definition updated successfully:",r)},async deleteWord(t){const{error:e}=await kn.from("definitions").delete().eq("word_id",t);if(e){console.error(e);return}const{error:n}=await kn.from("words").delete().eq("id",t);n&&console.error(n)},async searchWords(){const{data:t,error:e}=await kn.from("words").select("id, english, chinese, romaji, audioid, definitions (defid, def_english, def_chinese)").or(`chinese.ilike.%${this.searchQuery}%,english.ilike.%${this.searchQuery}%`);e?console.error(e):(this.words=t,console.log(this.words))},async speakChinese(t){const e=new SpeechSynthesisUtterance(t),r=window.speechSynthesis.getVoices().filter(s=>s.lang==="zh-TW");e.lang="zh-TW",r.forEach(s=>{console.log(`Name: ${s.name}, Language: ${s.lang}`)}),console.log(r),e.voice=r[4],window.speechSynthesis.speak(e)},async resetVoice(){window.speechSynthesis.cancel()}}},Lg={id:"supasearch"},Fg={class:"search-words"},Mg={class:"results-count"},Ug={class:"results"},Kg={class:"word"},Bg={class:"word-item word-taigi"},Ng={class:"word-item word-english"},qg={class:"word-item word-chinese"},Hg=["onClick"],Vg={key:0,class:"edit-dialog"},Wg={key:0},zg=["onSubmit"],Jg=["onUpdate:modelValue"],Gg=["onUpdate:modelValue"],Qg=["onUpdate:modelValue"];function Yg(t,e,n,r,s,a){const l=po("AudioPlayerTaigi"),h=po("IconPlayAudio");return It(),Ht("div",Lg,[ve("div",Fg,[bn(ve("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=f=>s.searchQuery=f),onKeyup:e[1]||(e[1]=cd(f=>a.searchWords(s.searchQuery),["enter"])),placeholder:"Search for a word...",class:"text-field search-words-text-field"},null,544),[[wn,s.searchQuery]]),ve("button",{onClick:e[2]||(e[2]=(...f)=>a.searchWords&&a.searchWords(...f))},"Search"),ve("button",{onClick:e[3]||(e[3]=(...f)=>a.clearInput&&a.clearInput(...f))},"Clear"),ve("button",{onClick:e[4]||(e[4]=(...f)=>a.resetVoice&&a.resetVoice(...f))},"Reset Voice"),ve("div",Mg,Vn(s.words.length),1)]),ve("ul",Ug,[(It(!0),Ht(Ut,null,Ws(s.words,f=>(It(),Ht("li",{key:f.id,class:"entry"},[ve("div",Kg,[ve("div",Bg,[_o(Vn(f.romaji)+" ",1),f.audioid?(It(),Dl(l,{key:0,audioID:f.audioid},null,8,["audioID"])):Xs("",!0)]),ve("div",Ng,Vn(f.english),1),ve("div",qg,[_o(Vn(f.chinese)+" ",1),Nt(h,{onClick:y=>a.speakChinese(f.chinese)},null,8,["onClick"])])]),ve("ul",null,[(It(!0),Ht(Ut,null,Ws(f.definitions,y=>(It(),Ht("li",{key:y.id},[ve("ul",null,[ve("li",null,Vn(y.def_english),1),ve("li",null,Vn(y.def_chinese),1)])]))),128))]),ve("button",{onClick:y=>a.openDialog(f.id)},"Edit",8,Hg)]))),128))]),s.showDialog?(It(),Ht("div",Vg,[ve("button",{onClick:e[5]||(e[5]=f=>this.showDialog=!1)},"Close"),ve("form",{onSubmit:e[11]||(e[11]=gu((...f)=>a.updateWord&&a.updateWord(...f),["prevent"]))},[ve("div",null,[e[12]||(e[12]=ve("label",{for:"romaji"},"Romaji",-1)),bn(ve("input",{"onUpdate:modelValue":e[6]||(e[6]=f=>s.word.romaji=f),type:"text",id:"romaji"},null,512),[[wn,s.word.romaji]])]),ve("div",null,[e[13]||(e[13]=ve("label",{for:"english"},"English",-1)),bn(ve("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>s.word.english=f),type:"text",id:"english"},null,512),[[wn,s.word.english]])]),ve("div",null,[e[14]||(e[14]=ve("label",{for:"chinese"},"Chinese",-1)),bn(ve("input",{"onUpdate:modelValue":e[8]||(e[8]=f=>s.word.chinese=f),type:"text",id:"chinese"},null,512),[[wn,s.word.chinese]]),Nt(h,{onClick:e[9]||(e[9]=f=>a.speakChinese(s.word.chinese))})]),ve("div",null,[e[15]||(e[15]=ve("label",{for:"classification"},"Classification:",-1)),bn(ve("input",{"onUpdate:modelValue":e[10]||(e[10]=f=>s.word.classification=f),type:"text",id:"classification"},null,512),[[wn,s.word.classification]])]),e[16]||(e[16]=ve("button",{type:"submit"},"Save Word",-1))],32),s.word.definitions.length>0?(It(),Ht("div",Wg,[(It(!0),Ht(Ut,null,Ws(s.word.definitions,(f,y)=>(It(),Ht("div",{key:f.defid},[ve("form",{onSubmit:gu(g=>a.updateDefinition(f.defid,y),["prevent"])},[ve("div",null,[e[17]||(e[17]=ve("label",{for:"def_english"},"English Definition:",-1)),bn(ve("textarea",{"onUpdate:modelValue":g=>f.def_english=g,type:"textarea",id:"def_english"},null,8,Jg),[[wn,f.def_english]])]),ve("div",null,[e[18]||(e[18]=ve("label",{for:"def_chinese"},"Chinese Definition:",-1)),bn(ve("input",{"onUpdate:modelValue":g=>f.def_chinese=g,type:"text",id:"def_chinese"},null,8,Gg),[[wn,f.def_chinese]])]),ve("div",null,[e[19]||(e[19]=ve("label",{for:"partofspeech"},"Part of Speech:",-1)),bn(ve("input",{"onUpdate:modelValue":g=>f.partofspeech=g,type:"text",id:"partofspeech"},null,8,Qg),[[wn,f.partofspeech]])]),e[20]||(e[20]=ve("button",{type:"submit"},"Save Definition",-1))],40,zg)]))),128))])):Xs("",!0)])):Xs("",!0)])}const Xg=Zo($g,[["render",Yg],["__scopeId","data-v-956d6ca7"]]),Zg={__name:"App",setup(t){const e=bh(!1);return pl(async()=>{e.value=await Cn.words.count()>0&&await Cn.definitions.count()>0,console.log(Cn),e.value?console.log("Data is available in IndexedDB."):(console.log("No data in IndexedDB."),_d())}),(n,r)=>(It(),Ht(Ut,null,[r[0]||(r[0]=ve("header",null,[ve("div")],-1)),ve("main",null,[Nt(Xg)]),r[1]||(r[1]=ve("footer",null,null,-1))],64))}};dd(Zg).mount("#app");export{Kl as g};
