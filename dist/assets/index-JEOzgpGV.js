(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Do(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const tt={},yr=[],sn=()=>{},Nc=()=>!1,Gi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),$o=t=>t.startsWith("onUpdate:"),Ot=Object.assign,Lo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qc=Object.prototype.hasOwnProperty,We=(t,e)=>qc.call(t,e),xe=Array.isArray,mr=t=>Qi(t)==="[object Map]",Fu=t=>Qi(t)==="[object Set]",Te=t=>typeof t=="function",yt=t=>typeof t=="string",Rn=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",Uu=t=>(ct(t)||Te(t))&&Te(t.then)&&Te(t.catch),Ku=Object.prototype.toString,Qi=t=>Ku.call(t),Hc=t=>Qi(t).slice(8,-1),Bu=t=>Qi(t)==="[object Object]",Mo=t=>yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Nr=Do(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Vc=/-(\w)/g,Jt=Yi(t=>t.replace(Vc,(e,n)=>n?n.toUpperCase():"")),Wc=/\B([A-Z])/g,In=Yi(t=>t.replace(Wc,"-$1").toLowerCase()),Xi=Yi(t=>t.charAt(0).toUpperCase()+t.slice(1)),zs=Yi(t=>t?`on${Xi(t)}`:""),jn=(t,e)=>!Object.is(t,e),Fi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Nu=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ho=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ua;const qu=()=>Ua||(Ua=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fo(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=yt(r)?Qc(r):Fo(r);if(s)for(const a in s)e[a]=s[a]}return e}else if(yt(t)||ct(t))return t}const zc=/;(?![^(]*\))/g,Jc=/:([^]+)/,Gc=/\/\*[^]*?\*\//g;function Qc(t){const e={};return t.replace(Gc,"").split(zc).forEach(n=>{if(n){const r=n.split(Jc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Uo(t){let e="";if(yt(t))e=t;else if(xe(t))for(let n=0;n<t.length;n++){const r=Uo(t[n]);r&&(e+=r+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Yc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xc=Do(Yc);function Hu(t){return!!t||t===""}const Vu=t=>!!(t&&t.__v_isRef===!0),Wt=t=>yt(t)?t:t==null?"":xe(t)||ct(t)&&(t.toString===Ku||!Te(t.toString))?Vu(t)?Wt(t.value):JSON.stringify(t,Wu,2):String(t),Wu=(t,e)=>Vu(e)?Wu(t,e.value):mr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],a)=>(n[Js(r,a)+" =>"]=s,n),{})}:Fu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Js(n))}:Rn(e)?Js(e):ct(e)&&!xe(e)&&!Bu(e)?String(e):e,Js=(t,e="")=>{var n;return Rn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bt;class Zc{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bt,!e&&Bt&&(this.index=(Bt.scopes||(Bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Bt;try{return Bt=this,e()}finally{Bt=n}}}on(){Bt=this}off(){Bt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function eh(){return Bt}let it;const Gs=new WeakSet;class zu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bt&&Bt.active&&Bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gs.has(this)&&(Gs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ka(this),Qu(this);const e=it,n=Xt;it=this,Xt=!0;try{return this.fn()}finally{Yu(this),it=e,Xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)No(e);this.deps=this.depsTail=void 0,Ka(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fo(this)&&this.run()}get dirty(){return fo(this)}}let Ju=0,gr;function Gu(t){t.flags|=8,t.next=gr,gr=t}function Ko(){Ju++}function Bo(){if(--Ju>0)return;let t;for(;gr;){let e=gr,n;for(;e;)e.flags&1||(e.flags&=-9),e=e.next;for(e=gr,gr=void 0;e;){if(n=e.next,e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Qu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Yu(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),No(r),th(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function fo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Xu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Xu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Gr))return;t.globalVersion=Gr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!fo(t)){t.flags&=-3;return}const n=it,r=Xt;it=t,Xt=!0;try{Qu(t);const s=t.fn(t._value);(e.version===0||jn(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{it=n,Xt=r,Yu(t),t.flags&=-3}}function No(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r),!n.subs&&n.computed){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)No(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function th(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Xt=!0;const Zu=[];function Dn(){Zu.push(Xt),Xt=!1}function $n(){const t=Zu.pop();Xt=t===void 0?!0:t}function Ka(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=it;it=void 0;try{e()}finally{it=n}}}let Gr=0;class nh{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!it||!Xt||it===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==it)n=this.activeLink=new nh(it,this),it.deps?(n.prevDep=it.depsTail,it.depsTail.nextDep=n,it.depsTail=n):it.deps=it.depsTail=n,el(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=it.depsTail,n.nextDep=void 0,it.depsTail.nextDep=n,it.depsTail=n,it.deps===n&&(it.deps=r)}return n}trigger(e){this.version++,Gr++,this.notify(e)}notify(e){Ko();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Bo()}}}function el(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)el(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const po=new WeakMap,Qn=Symbol(""),go=Symbol(""),Qr=Symbol("");function Pt(t,e,n){if(Xt&&it){let r=po.get(t);r||po.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new qo),s.target=t,s.map=r,s.key=n),s.track()}}function dn(t,e,n,r,s,a){const u=po.get(t);if(!u){Gr++;return}const h=f=>{f&&f.trigger()};if(Ko(),e==="clear")u.forEach(h);else{const f=xe(t),y=f&&Mo(n);if(f&&n==="length"){const g=Number(r);u.forEach((b,R)=>{(R==="length"||R===Qr||!Rn(R)&&R>=g)&&h(b)})}else switch(n!==void 0&&h(u.get(n)),y&&h(u.get(Qr)),e){case"add":f?y&&h(u.get("length")):(h(u.get(Qn)),mr(t)&&h(u.get(go)));break;case"delete":f||(h(u.get(Qn)),mr(t)&&h(u.get(go)));break;case"set":mr(t)&&h(u.get(Qn));break}}Bo()}function lr(t){const e=ze(t);return e===t?e:(Pt(e,"iterate",Qr),zt(t)?e:e.map(xt))}function Zi(t){return Pt(t=ze(t),"iterate",Qr),t}const rh={__proto__:null,[Symbol.iterator](){return Qs(this,Symbol.iterator,xt)},concat(...t){return lr(this).concat(...t.map(e=>xe(e)?lr(e):e))},entries(){return Qs(this,"entries",t=>(t[1]=xt(t[1]),t))},every(t,e){return cn(this,"every",t,e,void 0,arguments)},filter(t,e){return cn(this,"filter",t,e,n=>n.map(xt),arguments)},find(t,e){return cn(this,"find",t,e,xt,arguments)},findIndex(t,e){return cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cn(this,"findLast",t,e,xt,arguments)},findLastIndex(t,e){return cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ys(this,"includes",t)},indexOf(...t){return Ys(this,"indexOf",t)},join(t){return lr(this).join(t)},lastIndexOf(...t){return Ys(this,"lastIndexOf",t)},map(t,e){return cn(this,"map",t,e,void 0,arguments)},pop(){return Lr(this,"pop")},push(...t){return Lr(this,"push",t)},reduce(t,...e){return Ba(this,"reduce",t,e)},reduceRight(t,...e){return Ba(this,"reduceRight",t,e)},shift(){return Lr(this,"shift")},some(t,e){return cn(this,"some",t,e,void 0,arguments)},splice(...t){return Lr(this,"splice",t)},toReversed(){return lr(this).toReversed()},toSorted(t){return lr(this).toSorted(t)},toSpliced(...t){return lr(this).toSpliced(...t)},unshift(...t){return Lr(this,"unshift",t)},values(){return Qs(this,"values",xt)}};function Qs(t,e,n){const r=Zi(t),s=r[e]();return r!==t&&!zt(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=n(a.value)),a}),s}const ih=Array.prototype;function cn(t,e,n,r,s,a){const u=Zi(t),h=u!==t&&!zt(t),f=u[e];if(f!==ih[e]){const b=f.apply(t,a);return h?xt(b):b}let y=n;u!==t&&(h?y=function(b,R){return n.call(this,xt(b),R,t)}:n.length>2&&(y=function(b,R){return n.call(this,b,R,t)}));const g=f.call(u,y,r);return h&&s?s(g):g}function Ba(t,e,n,r){const s=Zi(t);let a=n;return s!==t&&(zt(t)?n.length>3&&(a=function(u,h,f){return n.call(this,u,h,f,t)}):a=function(u,h,f){return n.call(this,u,xt(h),f,t)}),s[e](a,...r)}function Ys(t,e,n){const r=ze(t);Pt(r,"iterate",Qr);const s=r[e](...n);return(s===-1||s===!1)&&Jo(n[0])?(n[0]=ze(n[0]),r[e](...n)):s}function Lr(t,e,n=[]){Dn(),Ko();const r=ze(t)[e].apply(t,n);return Bo(),$n(),r}const sh=Do("__proto__,__v_isRef,__isVue"),tl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rn));function oh(t){Rn(t)||(t=String(t));const e=ze(this);return Pt(e,"has",t),e.hasOwnProperty(t)}class nl{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(s?a?_h:ol:a?sl:il).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=xe(e);if(!s){let f;if(u&&(f=rh[n]))return f;if(n==="hasOwnProperty")return oh}const h=Reflect.get(e,n,St(e)?e:r);return(Rn(n)?tl.has(n):sh(n))||(s||Pt(e,"get",n),a)?h:St(h)?u&&Mo(n)?h:h.value:ct(h)?s?al(h):Wo(h):h}}class rl extends nl{constructor(e=!1){super(!1,e)}set(e,n,r,s){let a=e[n];if(!this._isShallow){const f=Xn(a);if(!zt(r)&&!Xn(r)&&(a=ze(a),r=ze(r)),!xe(e)&&St(a)&&!St(r))return f?!1:(a.value=r,!0)}const u=xe(e)&&Mo(n)?Number(n)<e.length:We(e,n),h=Reflect.set(e,n,r,St(e)?e:s);return e===ze(s)&&(u?jn(r,a)&&dn(e,"set",n,r):dn(e,"add",n,r)),h}deleteProperty(e,n){const r=We(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&dn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rn(n)||!tl.has(n))&&Pt(e,"has",n),r}ownKeys(e){return Pt(e,"iterate",xe(e)?"length":Qn),Reflect.ownKeys(e)}}class ah extends nl{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const uh=new rl,lh=new ah,ch=new rl(!0);const Ho=t=>t,es=t=>Reflect.getPrototypeOf(t);function Ti(t,e,n=!1,r=!1){t=t.__v_raw;const s=ze(t),a=ze(e);n||(jn(e,a)&&Pt(s,"get",e),Pt(s,"get",a));const{has:u}=es(s),h=r?Ho:n?Go:xt;if(u.call(s,e))return h(t.get(e));if(u.call(s,a))return h(t.get(a));t!==s&&t.get(e)}function Ci(t,e=!1){const n=this.__v_raw,r=ze(n),s=ze(t);return e||(jn(t,s)&&Pt(r,"has",t),Pt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ai(t,e=!1){return t=t.__v_raw,!e&&Pt(ze(t),"iterate",Qn),Reflect.get(t,"size",t)}function Na(t,e=!1){!e&&!zt(t)&&!Xn(t)&&(t=ze(t));const n=ze(this);return es(n).has.call(n,t)||(n.add(t),dn(n,"add",t,t)),this}function qa(t,e,n=!1){!n&&!zt(e)&&!Xn(e)&&(e=ze(e));const r=ze(this),{has:s,get:a}=es(r);let u=s.call(r,t);u||(t=ze(t),u=s.call(r,t));const h=a.call(r,t);return r.set(t,e),u?jn(e,h)&&dn(r,"set",t,e):dn(r,"add",t,e),this}function Ha(t){const e=ze(this),{has:n,get:r}=es(e);let s=n.call(e,t);s||(t=ze(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&dn(e,"delete",t,void 0),a}function Va(){const t=ze(this),e=t.size!==0,n=t.clear();return e&&dn(t,"clear",void 0,void 0),n}function ji(t,e){return function(r,s){const a=this,u=a.__v_raw,h=ze(u),f=e?Ho:t?Go:xt;return!t&&Pt(h,"iterate",Qn),u.forEach((y,g)=>r.call(s,f(y),f(g),a))}}function Ri(t,e,n){return function(...r){const s=this.__v_raw,a=ze(s),u=mr(a),h=t==="entries"||t===Symbol.iterator&&u,f=t==="keys"&&u,y=s[t](...r),g=n?Ho:e?Go:xt;return!e&&Pt(a,"iterate",f?go:Qn),{next(){const{value:b,done:R}=y.next();return R?{value:b,done:R}:{value:h?[g(b[0]),g(b[1])]:g(b),done:R}},[Symbol.iterator](){return this}}}}function wn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function hh(){const t={get(a){return Ti(this,a)},get size(){return Ai(this)},has:Ci,add:Na,set:qa,delete:Ha,clear:Va,forEach:ji(!1,!1)},e={get(a){return Ti(this,a,!1,!0)},get size(){return Ai(this)},has:Ci,add(a){return Na.call(this,a,!0)},set(a,u){return qa.call(this,a,u,!0)},delete:Ha,clear:Va,forEach:ji(!1,!0)},n={get(a){return Ti(this,a,!0)},get size(){return Ai(this,!0)},has(a){return Ci.call(this,a,!0)},add:wn("add"),set:wn("set"),delete:wn("delete"),clear:wn("clear"),forEach:ji(!0,!1)},r={get(a){return Ti(this,a,!0,!0)},get size(){return Ai(this,!0)},has(a){return Ci.call(this,a,!0)},add:wn("add"),set:wn("set"),delete:wn("delete"),clear:wn("clear"),forEach:ji(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Ri(a,!1,!1),n[a]=Ri(a,!0,!1),e[a]=Ri(a,!1,!0),r[a]=Ri(a,!0,!0)}),[t,n,e,r]}const[fh,dh,ph,gh]=hh();function Vo(t,e){const n=e?t?gh:ph:t?dh:fh;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(We(n,s)&&s in r?n:r,s,a)}const yh={get:Vo(!1,!1)},mh={get:Vo(!1,!0)},vh={get:Vo(!0,!1)};const il=new WeakMap,sl=new WeakMap,ol=new WeakMap,_h=new WeakMap;function bh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wh(t){return t.__v_skip||!Object.isExtensible(t)?0:bh(Hc(t))}function Wo(t){return Xn(t)?t:zo(t,!1,uh,yh,il)}function kh(t){return zo(t,!1,ch,mh,sl)}function al(t){return zo(t,!0,lh,vh,ol)}function zo(t,e,n,r,s){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const u=wh(t);if(u===0)return t;const h=new Proxy(t,u===2?r:n);return s.set(t,h),h}function vr(t){return Xn(t)?vr(t.__v_raw):!!(t&&t.__v_isReactive)}function Xn(t){return!!(t&&t.__v_isReadonly)}function zt(t){return!!(t&&t.__v_isShallow)}function Jo(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function xh(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&Nu(t,"__v_skip",!0),t}const xt=t=>ct(t)?Wo(t):t,Go=t=>ct(t)?al(t):t;function St(t){return t?t.__v_isRef===!0:!1}function ul(t){return Eh(t,!1)}function Eh(t,e){return St(t)?t:new Sh(t,e)}class Sh{constructor(e,n){this.dep=new qo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:xt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Xn(e);e=r?e:ze(e),jn(e,n)&&(this._rawValue=e,this._value=r?e:xt(e),this.dep.trigger())}}function Oh(t){return St(t)?t.value:t}const Ph={get:(t,e,n)=>e==="__v_raw"?t:Oh(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return St(s)&&!St(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ll(t){return vr(t)?t:new Proxy(t,Ph)}class Th{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new qo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Gr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Gu(this),!0}get value(){const e=this.dep.track();return Xu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ch(t,e,n=!1){let r,s;return Te(t)?r=t:(r=t.get,s=t.set),new Th(r,s,n)}const Ii={},qi=new WeakMap;let Wn;function Ah(t,e=!1,n=Wn){if(n){let r=qi.get(n);r||qi.set(n,r=[]),r.push(t)}}function jh(t,e,n=tt){const{immediate:r,deep:s,once:a,scheduler:u,augmentJob:h,call:f}=n,y=ce=>s?ce:zt(ce)||s===!1||s===0?fn(ce,1):fn(ce);let g,b,R,V,se=!1,le=!1;if(St(t)?(b=()=>t.value,se=zt(t)):vr(t)?(b=()=>y(t),se=!0):xe(t)?(le=!0,se=t.some(ce=>vr(ce)||zt(ce)),b=()=>t.map(ce=>{if(St(ce))return ce.value;if(vr(ce))return y(ce);if(Te(ce))return f?f(ce,2):ce()})):Te(t)?e?b=f?()=>f(t,2):t:b=()=>{if(R){Dn();try{R()}finally{$n()}}const ce=Wn;Wn=g;try{return f?f(t,3,[V]):t(V)}finally{Wn=ce}}:b=sn,e&&s){const ce=b,Le=s===!0?1/0:s;b=()=>fn(ce(),Le)}const ve=eh(),we=()=>{g.stop(),ve&&Lo(ve.effects,g)};if(a&&e){const ce=e;e=(...Le)=>{ce(...Le),we()}}let je=le?new Array(t.length).fill(Ii):Ii;const Re=ce=>{if(!(!(g.flags&1)||!g.dirty&&!ce))if(e){const Le=g.run();if(s||se||(le?Le.some((Ye,_e)=>jn(Ye,je[_e])):jn(Le,je))){R&&R();const Ye=Wn;Wn=g;try{const _e=[Le,je===Ii?void 0:le&&je[0]===Ii?[]:je,V];f?f(e,3,_e):e(..._e),je=Le}finally{Wn=Ye}}}else g.run()};return h&&h(Re),g=new zu(b),g.scheduler=u?()=>u(Re,!1):Re,V=ce=>Ah(ce,!1,g),R=g.onStop=()=>{const ce=qi.get(g);if(ce){if(f)f(ce,4);else for(const Le of ce)Le();qi.delete(g)}},e?r?Re(!0):je=g.run():u?u(Re.bind(null,!0),!0):g.run(),we.pause=g.pause.bind(g),we.resume=g.resume.bind(g),we.stop=we,we}function fn(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,St(t))fn(t.value,e,n);else if(xe(t))for(let r=0;r<t.length;r++)fn(t[r],e,n);else if(Fu(t)||mr(t))t.forEach(r=>{fn(r,e,n)});else if(Bu(t)){for(const r in t)fn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&fn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ti(t,e,n,r){try{return r?t(...r):t()}catch(s){ts(s,e,n)}}function on(t,e,n,r){if(Te(t)){const s=ti(t,e,n,r);return s&&Uu(s)&&s.catch(a=>{ts(a,e,n)}),s}if(xe(t)){const s=[];for(let a=0;a<t.length;a++)s.push(on(t[a],e,n,r));return s}}function ts(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||tt;if(e){let h=e.parent;const f=e.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const g=h.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](t,f,y)===!1)return}h=h.parent}if(a){Dn(),ti(a,null,10,[t,f,y]),$n();return}}Rh(t,n,s,r,u)}function Rh(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}let Yr=!1,yo=!1;const Rt=[];let nn=0;const _r=[];let On=null,dr=0;const cl=Promise.resolve();let Qo=null;function Ih(t){const e=Qo||cl;return t?e.then(this?t.bind(this):t):e}function Dh(t){let e=Yr?nn+1:0,n=Rt.length;for(;e<n;){const r=e+n>>>1,s=Rt[r],a=Xr(s);a<t||a===t&&s.flags&2?e=r+1:n=r}return e}function Yo(t){if(!(t.flags&1)){const e=Xr(t),n=Rt[Rt.length-1];!n||!(t.flags&2)&&e>=Xr(n)?Rt.push(t):Rt.splice(Dh(e),0,t),t.flags|=1,hl()}}function hl(){!Yr&&!yo&&(yo=!0,Qo=cl.then(dl))}function $h(t){xe(t)?_r.push(...t):On&&t.id===-1?On.splice(dr+1,0,t):t.flags&1||(_r.push(t),t.flags|=1),hl()}function Wa(t,e,n=Yr?nn+1:0){for(;n<Rt.length;n++){const r=Rt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Rt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function fl(t){if(_r.length){const e=[...new Set(_r)].sort((n,r)=>Xr(n)-Xr(r));if(_r.length=0,On){On.push(...e);return}for(On=e,dr=0;dr<On.length;dr++){const n=On[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}On=null,dr=0}}const Xr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dl(t){yo=!1,Yr=!0;try{for(nn=0;nn<Rt.length;nn++){const e=Rt[nn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ti(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nn<Rt.length;nn++){const e=Rt[nn];e&&(e.flags&=-2)}nn=0,Rt.length=0,fl(),Yr=!1,Qo=null,(Rt.length||_r.length)&&dl()}}let Nt=null,pl=null;function Hi(t){const e=Nt;return Nt=t,pl=t&&t.type.__scopeId||null,e}function Lh(t,e=Nt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&tu(-1);const a=Hi(e);let u;try{u=t(...s)}finally{Hi(a),r._d&&tu(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function kn(t,e){if(Nt===null)return t;const n=os(Nt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,u,h,f=tt]=e[s];a&&(Te(a)&&(a={mounted:a,updated:a}),a.deep&&fn(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:h,modifiers:f}))}return t}function qn(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let u=0;u<s.length;u++){const h=s[u];a&&(h.oldValue=a[u].value);let f=h.dir[r];f&&(Dn(),on(f,n,8,[t.el,h,t,e]),$n())}}const Mh=Symbol("_vte"),Fh=t=>t.__isTeleport;function Xo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Xo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function mo(t,e,n,r,s=!1){if(xe(t)){t.forEach((se,le)=>mo(se,e&&(xe(e)?e[le]:e),n,r,s));return}if(qr(r)&&!s)return;const a=r.shapeFlag&4?os(r.component):r.el,u=s?null:a,{i:h,r:f}=t,y=e&&e.r,g=h.refs===tt?h.refs={}:h.refs,b=h.setupState,R=ze(b),V=b===tt?()=>!1:se=>We(R,se);if(y!=null&&y!==f&&(yt(y)?(g[y]=null,V(y)&&(b[y]=null)):St(y)&&(y.value=null)),Te(f))ti(f,h,12,[u,g]);else{const se=yt(f),le=St(f);if(se||le){const ve=()=>{if(t.f){const we=se?V(f)?b[f]:g[f]:f.value;s?xe(we)&&Lo(we,a):xe(we)?we.includes(a)||we.push(a):se?(g[f]=[a],V(f)&&(b[f]=g[f])):(f.value=[a],t.k&&(g[t.k]=f.value))}else se?(g[f]=u,V(f)&&(b[f]=u)):le&&(f.value=u,t.k&&(g[t.k]=u))};u?(ve.id=-1,Ut(ve,n)):ve()}}}const qr=t=>!!t.type.__asyncLoader,yl=t=>t.type.__isKeepAlive;function Uh(t,e){ml(t,"a",e)}function Kh(t,e){ml(t,"da",e)}function ml(t,e,n=Et){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ns(e,r,n),n){let s=n.parent;for(;s&&s.parent;)yl(s.parent.vnode)&&Bh(r,e,n,s),s=s.parent}}function Bh(t,e,n,r){const s=ns(e,t,r,!0);vl(()=>{Lo(r[e],s)},n)}function ns(t,e,n=Et,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...u)=>{Dn();const h=ni(n),f=on(e,n,t,u);return h(),$n(),f});return r?s.unshift(a):s.push(a),a}}const pn=t=>(e,n=Et)=>{(!ss||t==="sp")&&ns(t,(...r)=>e(...r),n)},Nh=pn("bm"),Zo=pn("m"),qh=pn("bu"),Hh=pn("u"),Vh=pn("bum"),vl=pn("um"),Wh=pn("sp"),zh=pn("rtg"),Jh=pn("rtc");function Gh(t,e=Et){ns("ec",t,e)}const Qh="components";function vo(t,e){return Xh(Qh,t,!0,e)||t}const Yh=Symbol.for("v-ndc");function Xh(t,e,n=!0,r=!1){const s=Nt||Et;if(s){const a=s.type;{const h=Kf(a,!1);if(h&&(h===e||h===Jt(e)||h===Xi(Jt(e))))return a}const u=za(s[t]||a[t],e)||za(s.appContext[t],e);return!u&&r?a:u}}function za(t,e){return t&&(t[e]||t[Jt(e)]||t[Xi(Jt(e))])}function Ui(t,e,n,r){let s;const a=n,u=xe(t);if(u||yt(t)){const h=u&&vr(t);let f=!1;h&&(f=!zt(t),t=Zi(t)),s=new Array(t.length);for(let y=0,g=t.length;y<g;y++)s[y]=e(f?xt(t[y]):t[y],y,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let h=0;h<t;h++)s[h]=e(h+1,h,void 0,a)}else if(ct(t))if(t[Symbol.iterator])s=Array.from(t,(h,f)=>e(h,f,void 0,a));else{const h=Object.keys(t);s=new Array(h.length);for(let f=0,y=h.length;f<y;f++){const g=h[f];s[f]=e(t[g],g,f,a)}}else s=[];return s}const _o=t=>t?Ul(t)?os(t):_o(t.parent):null,Hr=Ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_o(t.parent),$root:t=>_o(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ea(t),$forceUpdate:t=>t.f||(t.f=()=>{Yo(t.update)}),$nextTick:t=>t.n||(t.n=Ih.bind(t.proxy)),$watch:t=>wf.bind(t)}),Xs=(t,e)=>t!==tt&&!t.__isScriptSetup&&We(t,e),Zh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:a,accessCache:u,type:h,appContext:f}=t;let y;if(e[0]!=="$"){const V=u[e];if(V!==void 0)switch(V){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(Xs(r,e))return u[e]=1,r[e];if(s!==tt&&We(s,e))return u[e]=2,s[e];if((y=t.propsOptions[0])&&We(y,e))return u[e]=3,a[e];if(n!==tt&&We(n,e))return u[e]=4,n[e];bo&&(u[e]=0)}}const g=Hr[e];let b,R;if(g)return e==="$attrs"&&Pt(t.attrs,"get",""),g(t);if((b=h.__cssModules)&&(b=b[e]))return b;if(n!==tt&&We(n,e))return u[e]=4,n[e];if(R=f.config.globalProperties,We(R,e))return R[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;return Xs(s,e)?(s[e]=n,!0):r!==tt&&We(r,e)?(r[e]=n,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},u){let h;return!!n[u]||t!==tt&&We(t,u)||Xs(e,u)||(h=a[0])&&We(h,u)||We(r,u)||We(Hr,u)||We(s.config.globalProperties,u)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:We(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ja(t){return xe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let bo=!0;function ef(t){const e=ea(t),n=t.proxy,r=t.ctx;bo=!1,e.beforeCreate&&Ga(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:u,watch:h,provide:f,inject:y,created:g,beforeMount:b,mounted:R,beforeUpdate:V,updated:se,activated:le,deactivated:ve,beforeDestroy:we,beforeUnmount:je,destroyed:Re,unmounted:ce,render:Le,renderTracked:Ye,renderTriggered:_e,errorCaptured:I,serverPrefetch:j,expose:W,inheritAttrs:ue,components:he,directives:ye,filters:Ce}=e;if(y&&tf(y,r,null),u)for(const Z in u){const me=u[Z];Te(me)&&(r[Z]=me.bind(n))}if(s){const Z=s.call(n,n);ct(Z)&&(t.data=Wo(Z))}if(bo=!0,a)for(const Z in a){const me=a[Z],de=Te(me)?me.bind(n,n):Te(me.get)?me.get.bind(n,n):sn,nt=!Te(me)&&Te(me.set)?me.set.bind(n):sn,Qe=Nf({get:de,set:nt});Object.defineProperty(r,Z,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:oe=>Qe.value=oe})}if(h)for(const Z in h)_l(h[Z],r,n,Z);if(f){const Z=Te(f)?f.call(n):f;Reflect.ownKeys(Z).forEach(me=>{uf(me,Z[me])})}g&&Ga(g,t,"c");function Se(Z,me){xe(me)?me.forEach(de=>Z(de.bind(n))):me&&Z(me.bind(n))}if(Se(Nh,b),Se(Zo,R),Se(qh,V),Se(Hh,se),Se(Uh,le),Se(Kh,ve),Se(Gh,I),Se(Jh,Ye),Se(zh,_e),Se(Vh,je),Se(vl,ce),Se(Wh,j),xe(W))if(W.length){const Z=t.exposed||(t.exposed={});W.forEach(me=>{Object.defineProperty(Z,me,{get:()=>n[me],set:de=>n[me]=de})})}else t.exposed||(t.exposed={});Le&&t.render===sn&&(t.render=Le),ue!=null&&(t.inheritAttrs=ue),he&&(t.components=he),ye&&(t.directives=ye),j&&gl(t)}function tf(t,e,n=sn){xe(t)&&(t=wo(t));for(const r in t){const s=t[r];let a;ct(s)?"default"in s?a=Ki(s.from||r,s.default,!0):a=Ki(s.from||r):a=Ki(s),St(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function Ga(t,e,n){on(xe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _l(t,e,n,r){let s=r.includes(".")?Il(n,r):()=>n[r];if(yt(t)){const a=e[t];Te(a)&&eo(s,a)}else if(Te(t))eo(s,t.bind(n));else if(ct(t))if(xe(t))t.forEach(a=>_l(a,e,n,r));else{const a=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(a)&&eo(s,a,t)}}function ea(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:u}}=t.appContext,h=a.get(e);let f;return h?f=h:!s.length&&!n&&!r?f=e:(f={},s.length&&s.forEach(y=>Vi(f,y,u,!0)),Vi(f,e,u)),ct(e)&&a.set(e,f),f}function Vi(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&Vi(t,a,n,!0),s&&s.forEach(u=>Vi(t,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const h=nf[u]||n&&n[u];t[u]=h?h(t[u],e[u]):e[u]}return t}const nf={data:Qa,props:Ya,emits:Ya,methods:Kr,computed:Kr,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:Kr,directives:Kr,watch:sf,provide:Qa,inject:rf};function Qa(t,e){return e?t?function(){return Ot(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function rf(t,e){return Kr(wo(t),wo(e))}function wo(t){if(xe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function At(t,e){return t?[...new Set([].concat(t,e))]:e}function Kr(t,e){return t?Ot(Object.create(null),t,e):e}function Ya(t,e){return t?xe(t)&&xe(e)?[...new Set([...t,...e])]:Ot(Object.create(null),Ja(t),Ja(e??{})):e}function sf(t,e){if(!t)return e;if(!e)return t;const n=Ot(Object.create(null),t);for(const r in e)n[r]=At(t[r],e[r]);return n}function bl(){return{app:null,config:{isNativeTag:Nc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let of=0;function af(t,e){return function(r,s=null){Te(r)||(r=Ot({},r)),s!=null&&!ct(s)&&(s=null);const a=bl(),u=new WeakSet,h=[];let f=!1;const y=a.app={_uid:of++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:qf,get config(){return a.config},set config(g){},use(g,...b){return u.has(g)||(g&&Te(g.install)?(u.add(g),g.install(y,...b)):Te(g)&&(u.add(g),g(y,...b))),y},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),y},component(g,b){return b?(a.components[g]=b,y):a.components[g]},directive(g,b){return b?(a.directives[g]=b,y):a.directives[g]},mount(g,b,R){if(!f){const V=y._ceVNode||Mt(r,s);return V.appContext=a,R===!0?R="svg":R===!1&&(R=void 0),b&&e?e(V,g):t(V,g,R),f=!0,y._container=g,g.__vue_app__=y,os(V.component)}},onUnmount(g){h.push(g)},unmount(){f&&(on(h,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(g,b){return a.provides[g]=b,y},runWithContext(g){const b=br;br=y;try{return g()}finally{br=b}}};return y}}let br=null;function uf(t,e){if(Et){let n=Et.provides;const r=Et.parent&&Et.parent.provides;r===n&&(n=Et.provides=Object.create(r)),n[t]=e}}function Ki(t,e,n=!1){const r=Et||Nt;if(r||br){const s=br?br._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Te(e)?e.call(r&&r.proxy):e}}const wl={},kl=()=>Object.create(wl),xl=t=>Object.getPrototypeOf(t)===wl;function lf(t,e,n,r=!1){const s={},a=kl();t.propsDefaults=Object.create(null),El(t,e,s,a);for(const u in t.propsOptions[0])u in s||(s[u]=void 0);n?t.props=r?s:kh(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function cf(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:u}}=t,h=ze(s),[f]=t.propsOptions;let y=!1;if((r||u>0)&&!(u&16)){if(u&8){const g=t.vnode.dynamicProps;for(let b=0;b<g.length;b++){let R=g[b];if(rs(t.emitsOptions,R))continue;const V=e[R];if(f)if(We(a,R))V!==a[R]&&(a[R]=V,y=!0);else{const se=Jt(R);s[se]=ko(f,h,se,V,t,!1)}else V!==a[R]&&(a[R]=V,y=!0)}}}else{El(t,e,s,a)&&(y=!0);let g;for(const b in h)(!e||!We(e,b)&&((g=In(b))===b||!We(e,g)))&&(f?n&&(n[b]!==void 0||n[g]!==void 0)&&(s[b]=ko(f,h,b,void 0,t,!0)):delete s[b]);if(a!==h)for(const b in a)(!e||!We(e,b))&&(delete a[b],y=!0)}y&&dn(t.attrs,"set","")}function El(t,e,n,r){const[s,a]=t.propsOptions;let u=!1,h;if(e)for(let f in e){if(Nr(f))continue;const y=e[f];let g;s&&We(s,g=Jt(f))?!a||!a.includes(g)?n[g]=y:(h||(h={}))[g]=y:rs(t.emitsOptions,f)||(!(f in r)||y!==r[f])&&(r[f]=y,u=!0)}if(a){const f=ze(n),y=h||tt;for(let g=0;g<a.length;g++){const b=a[g];n[b]=ko(s,f,b,y[b],t,!We(y,b))}}return u}function ko(t,e,n,r,s,a){const u=t[n];if(u!=null){const h=We(u,"default");if(h&&r===void 0){const f=u.default;if(u.type!==Function&&!u.skipFactory&&Te(f)){const{propsDefaults:y}=s;if(n in y)r=y[n];else{const g=ni(s);r=y[n]=f.call(null,e),g()}}else r=f;s.ce&&s.ce._setProp(n,r)}u[0]&&(a&&!h?r=!1:u[1]&&(r===""||r===In(n))&&(r=!0))}return r}const hf=new WeakMap;function Sl(t,e,n=!1){const r=n?hf:e.propsCache,s=r.get(t);if(s)return s;const a=t.props,u={},h=[];let f=!1;if(!Te(t)){const g=b=>{f=!0;const[R,V]=Sl(b,e,!0);Ot(u,R),V&&h.push(...V)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!f)return ct(t)&&r.set(t,yr),yr;if(xe(a))for(let g=0;g<a.length;g++){const b=Jt(a[g]);Xa(b)&&(u[b]=tt)}else if(a)for(const g in a){const b=Jt(g);if(Xa(b)){const R=a[g],V=u[b]=xe(R)||Te(R)?{type:R}:Ot({},R),se=V.type;let le=!1,ve=!0;if(xe(se))for(let we=0;we<se.length;++we){const je=se[we],Re=Te(je)&&je.name;if(Re==="Boolean"){le=!0;break}else Re==="String"&&(ve=!1)}else le=Te(se)&&se.name==="Boolean";V[0]=le,V[1]=ve,(le||We(V,"default"))&&h.push(b)}}const y=[u,h];return ct(t)&&r.set(t,y),y}function Xa(t){return t[0]!=="$"&&!Nr(t)}const Ol=t=>t[0]==="_"||t==="$stable",ta=t=>xe(t)?t.map(rn):[rn(t)],ff=(t,e,n)=>{if(e._n)return e;const r=Lh((...s)=>ta(e(...s)),n);return r._c=!1,r},Pl=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ol(s))continue;const a=t[s];if(Te(a))e[s]=ff(s,a,r);else if(a!=null){const u=ta(a);e[s]=()=>u}}},Tl=(t,e)=>{const n=ta(e);t.slots.default=()=>n},Cl=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},df=(t,e,n)=>{const r=t.slots=kl();if(t.vnode.shapeFlag&32){const s=e._;s?(Cl(r,e,n),n&&Nu(r,"_",s,!0)):Pl(e,r)}else e&&Tl(t,e)},pf=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,u=tt;if(r.shapeFlag&32){const h=e._;h?n&&h===1?a=!1:Cl(s,e,n):(a=!e.$stable,Pl(e,s)),u=e}else e&&(Tl(t,e),u={default:1});if(a)for(const h in s)!Ol(h)&&u[h]==null&&delete s[h]},Ut=Tf;function gf(t){return yf(t)}function yf(t,e){const n=qu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:u,createText:h,createComment:f,setText:y,setElementText:g,parentNode:b,nextSibling:R,setScopeId:V=sn,insertStaticContent:se}=t,le=(v,k,D,F=null,B=null,N=null,X=void 0,J=null,H=!!k.dynamicChildren)=>{if(v===k)return;v&&!Mr(v,k)&&(F=Xe(v),oe(v,B,N,!0),v=null),k.patchFlag===-2&&(H=!1,k.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:ee}=k;switch(K){case is:ve(v,k,D,F);break;case Zn:we(v,k,D,F);break;case no:v==null&&je(k,D,F,X);break;case $t:he(v,k,D,F,B,N,X,J,H);break;default:ee&1?Le(v,k,D,F,B,N,X,J,H):ee&6?ye(v,k,D,F,B,N,X,J,H):(ee&64||ee&128)&&K.process(v,k,D,F,B,N,X,J,H,Me)}ie!=null&&B&&mo(ie,v&&v.ref,N,k||v,!k)},ve=(v,k,D,F)=>{if(v==null)r(k.el=h(k.children),D,F);else{const B=k.el=v.el;k.children!==v.children&&y(B,k.children)}},we=(v,k,D,F)=>{v==null?r(k.el=f(k.children||""),D,F):k.el=v.el},je=(v,k,D,F)=>{[v.el,v.anchor]=se(v.children,k,D,F,v.el,v.anchor)},Re=({el:v,anchor:k},D,F)=>{let B;for(;v&&v!==k;)B=R(v),r(v,D,F),v=B;r(k,D,F)},ce=({el:v,anchor:k})=>{let D;for(;v&&v!==k;)D=R(v),s(v),v=D;s(k)},Le=(v,k,D,F,B,N,X,J,H)=>{k.type==="svg"?X="svg":k.type==="math"&&(X="mathml"),v==null?Ye(k,D,F,B,N,X,J,H):j(v,k,B,N,X,J,H)},Ye=(v,k,D,F,B,N,X,J)=>{let H,K;const{props:ie,shapeFlag:ee,transition:Y,dirs:pe}=v;if(H=v.el=u(v.type,N,ie&&ie.is,ie),ee&8?g(H,v.children):ee&16&&I(v.children,H,null,F,B,Zs(v,N),X,J),pe&&qn(v,null,F,"created"),_e(H,v,v.scopeId,X,F),ie){for(const Ae in ie)Ae!=="value"&&!Nr(Ae)&&a(H,Ae,null,ie[Ae],N,F);"value"in ie&&a(H,"value",null,ie.value,N),(K=ie.onVnodeBeforeMount)&&tn(K,F,v)}pe&&qn(v,null,F,"beforeMount");const ke=mf(B,Y);ke&&Y.beforeEnter(H),r(H,k,D),((K=ie&&ie.onVnodeMounted)||ke||pe)&&Ut(()=>{K&&tn(K,F,v),ke&&Y.enter(H),pe&&qn(v,null,F,"mounted")},B)},_e=(v,k,D,F,B)=>{if(D&&V(v,D),F)for(let N=0;N<F.length;N++)V(v,F[N]);if(B){let N=B.subTree;if(k===N||$l(N.type)&&(N.ssContent===k||N.ssFallback===k)){const X=B.vnode;_e(v,X,X.scopeId,X.slotScopeIds,B.parent)}}},I=(v,k,D,F,B,N,X,J,H=0)=>{for(let K=H;K<v.length;K++){const ie=v[K]=J?Pn(v[K]):rn(v[K]);le(null,ie,k,D,F,B,N,X,J)}},j=(v,k,D,F,B,N,X)=>{const J=k.el=v.el;let{patchFlag:H,dynamicChildren:K,dirs:ie}=k;H|=v.patchFlag&16;const ee=v.props||tt,Y=k.props||tt;let pe;if(D&&Hn(D,!1),(pe=Y.onVnodeBeforeUpdate)&&tn(pe,D,k,v),ie&&qn(k,v,D,"beforeUpdate"),D&&Hn(D,!0),(ee.innerHTML&&Y.innerHTML==null||ee.textContent&&Y.textContent==null)&&g(J,""),K?W(v.dynamicChildren,K,J,D,F,Zs(k,B),N):X||me(v,k,J,null,D,F,Zs(k,B),N,!1),H>0){if(H&16)ue(J,ee,Y,D,B);else if(H&2&&ee.class!==Y.class&&a(J,"class",null,Y.class,B),H&4&&a(J,"style",ee.style,Y.style,B),H&8){const ke=k.dynamicProps;for(let Ae=0;Ae<ke.length;Ae++){const Oe=ke[Ae],Ze=ee[Oe],Be=Y[Oe];(Be!==Ze||Oe==="value")&&a(J,Oe,Ze,Be,B,D)}}H&1&&v.children!==k.children&&g(J,k.children)}else!X&&K==null&&ue(J,ee,Y,D,B);((pe=Y.onVnodeUpdated)||ie)&&Ut(()=>{pe&&tn(pe,D,k,v),ie&&qn(k,v,D,"updated")},F)},W=(v,k,D,F,B,N,X)=>{for(let J=0;J<k.length;J++){const H=v[J],K=k[J],ie=H.el&&(H.type===$t||!Mr(H,K)||H.shapeFlag&70)?b(H.el):D;le(H,K,ie,null,F,B,N,X,!0)}},ue=(v,k,D,F,B)=>{if(k!==D){if(k!==tt)for(const N in k)!Nr(N)&&!(N in D)&&a(v,N,k[N],null,B,F);for(const N in D){if(Nr(N))continue;const X=D[N],J=k[N];X!==J&&N!=="value"&&a(v,N,J,X,B,F)}"value"in D&&a(v,"value",k.value,D.value,B)}},he=(v,k,D,F,B,N,X,J,H)=>{const K=k.el=v?v.el:h(""),ie=k.anchor=v?v.anchor:h("");let{patchFlag:ee,dynamicChildren:Y,slotScopeIds:pe}=k;pe&&(J=J?J.concat(pe):pe),v==null?(r(K,D,F),r(ie,D,F),I(k.children||[],D,ie,B,N,X,J,H)):ee>0&&ee&64&&Y&&v.dynamicChildren?(W(v.dynamicChildren,Y,D,B,N,X,J),(k.key!=null||B&&k===B.subTree)&&Al(v,k,!0)):me(v,k,D,ie,B,N,X,J,H)},ye=(v,k,D,F,B,N,X,J,H)=>{k.slotScopeIds=J,v==null?k.shapeFlag&512?B.ctx.activate(k,D,F,X,H):Ce(k,D,F,B,N,X,H):ot(v,k,H)},Ce=(v,k,D,F,B,N,X)=>{const J=v.component=$f(v,F,B);if(yl(v)&&(J.ctx.renderer=Me),Lf(J,!1,X),J.asyncDep){if(B&&B.registerDep(J,Se,X),!v.el){const H=J.subTree=Mt(Zn);we(null,H,k,D)}}else Se(J,v,k,D,B,N,X)},ot=(v,k,D)=>{const F=k.component=v.component;if(Of(v,k,D))if(F.asyncDep&&!F.asyncResolved){Z(F,k,D);return}else F.next=k,F.update();else k.el=v.el,F.vnode=k},Se=(v,k,D,F,B,N,X)=>{const J=()=>{if(v.isMounted){let{next:ee,bu:Y,u:pe,parent:ke,vnode:Ae}=v;{const ht=jl(v);if(ht){ee&&(ee.el=Ae.el,Z(v,ee,X)),ht.asyncDep.then(()=>{v.isUnmounted||J()});return}}let Oe=ee,Ze;Hn(v,!1),ee?(ee.el=Ae.el,Z(v,ee,X)):ee=Ae,Y&&Fi(Y),(Ze=ee.props&&ee.props.onVnodeBeforeUpdate)&&tn(Ze,ke,ee,Ae),Hn(v,!0);const Be=to(v),Ge=v.subTree;v.subTree=Be,le(Ge,Be,b(Ge.el),Xe(Ge),v,B,N),ee.el=Be.el,Oe===null&&Pf(v,Be.el),pe&&Ut(pe,B),(Ze=ee.props&&ee.props.onVnodeUpdated)&&Ut(()=>tn(Ze,ke,ee,Ae),B)}else{let ee;const{el:Y,props:pe}=k,{bm:ke,m:Ae,parent:Oe,root:Ze,type:Be}=v,Ge=qr(k);if(Hn(v,!1),ke&&Fi(ke),!Ge&&(ee=pe&&pe.onVnodeBeforeMount)&&tn(ee,Oe,k),Hn(v,!0),Y&&be){const ht=()=>{v.subTree=to(v),be(Y,v.subTree,v,B,null)};Ge&&Be.__asyncHydrate?Be.__asyncHydrate(Y,v,ht):ht()}else{Ze.ce&&Ze.ce._injectChildStyle(Be);const ht=v.subTree=to(v);le(null,ht,D,F,v,B,N),k.el=ht.el}if(Ae&&Ut(Ae,B),!Ge&&(ee=pe&&pe.onVnodeMounted)){const ht=k;Ut(()=>tn(ee,Oe,ht),B)}(k.shapeFlag&256||Oe&&qr(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&v.a&&Ut(v.a,B),v.isMounted=!0,k=D=F=null}};v.scope.on();const H=v.effect=new zu(J);v.scope.off();const K=v.update=H.run.bind(H),ie=v.job=H.runIfDirty.bind(H);ie.i=v,ie.id=v.uid,H.scheduler=()=>Yo(ie),Hn(v,!0),K()},Z=(v,k,D)=>{k.component=v;const F=v.vnode.props;v.vnode=k,v.next=null,cf(v,k.props,F,D),pf(v,k.children,D),Dn(),Wa(v),$n()},me=(v,k,D,F,B,N,X,J,H=!1)=>{const K=v&&v.children,ie=v?v.shapeFlag:0,ee=k.children,{patchFlag:Y,shapeFlag:pe}=k;if(Y>0){if(Y&128){nt(K,ee,D,F,B,N,X,J,H);return}else if(Y&256){de(K,ee,D,F,B,N,X,J,H);return}}pe&8?(ie&16&&Ve(K,B,N),ee!==K&&g(D,ee)):ie&16?pe&16?nt(K,ee,D,F,B,N,X,J,H):Ve(K,B,N,!0):(ie&8&&g(D,""),pe&16&&I(ee,D,F,B,N,X,J,H))},de=(v,k,D,F,B,N,X,J,H)=>{v=v||yr,k=k||yr;const K=v.length,ie=k.length,ee=Math.min(K,ie);let Y;for(Y=0;Y<ee;Y++){const pe=k[Y]=H?Pn(k[Y]):rn(k[Y]);le(v[Y],pe,D,null,B,N,X,J,H)}K>ie?Ve(v,B,N,!0,!1,ee):I(k,D,F,B,N,X,J,H,ee)},nt=(v,k,D,F,B,N,X,J,H)=>{let K=0;const ie=k.length;let ee=v.length-1,Y=ie-1;for(;K<=ee&&K<=Y;){const pe=v[K],ke=k[K]=H?Pn(k[K]):rn(k[K]);if(Mr(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;K++}for(;K<=ee&&K<=Y;){const pe=v[ee],ke=k[Y]=H?Pn(k[Y]):rn(k[Y]);if(Mr(pe,ke))le(pe,ke,D,null,B,N,X,J,H);else break;ee--,Y--}if(K>ee){if(K<=Y){const pe=Y+1,ke=pe<ie?k[pe].el:F;for(;K<=Y;)le(null,k[K]=H?Pn(k[K]):rn(k[K]),D,ke,B,N,X,J,H),K++}}else if(K>Y)for(;K<=ee;)oe(v[K],B,N,!0),K++;else{const pe=K,ke=K,Ae=new Map;for(K=ke;K<=Y;K++){const lt=k[K]=H?Pn(k[K]):rn(k[K]);lt.key!=null&&Ae.set(lt.key,K)}let Oe,Ze=0;const Be=Y-ke+1;let Ge=!1,ht=0;const et=new Array(Be);for(K=0;K<Be;K++)et[K]=0;for(K=pe;K<=ee;K++){const lt=v[K];if(Ze>=Be){oe(lt,B,N,!0);continue}let mt;if(lt.key!=null)mt=Ae.get(lt.key);else for(Oe=ke;Oe<=Y;Oe++)if(et[Oe-ke]===0&&Mr(lt,k[Oe])){mt=Oe;break}mt===void 0?oe(lt,B,N,!0):(et[mt-ke]=K+1,mt>=ht?ht=mt:Ge=!0,le(lt,k[mt],D,null,B,N,X,J,H),Ze++)}const fe=Ge?vf(et):yr;for(Oe=fe.length-1,K=Be-1;K>=0;K--){const lt=ke+K,mt=k[lt],Ln=lt+1<ie?k[lt+1].el:F;et[K]===0?le(null,mt,D,Ln,B,N,X,J,H):Ge&&(Oe<0||K!==fe[Oe]?Qe(mt,D,Ln,2):Oe--)}}},Qe=(v,k,D,F,B=null)=>{const{el:N,type:X,transition:J,children:H,shapeFlag:K}=v;if(K&6){Qe(v.component.subTree,k,D,F);return}if(K&128){v.suspense.move(k,D,F);return}if(K&64){X.move(v,k,D,Me);return}if(X===$t){r(N,k,D);for(let ee=0;ee<H.length;ee++)Qe(H[ee],k,D,F);r(v.anchor,k,D);return}if(X===no){Re(v,k,D);return}if(F!==2&&K&1&&J)if(F===0)J.beforeEnter(N),r(N,k,D),Ut(()=>J.enter(N),B);else{const{leave:ee,delayLeave:Y,afterLeave:pe}=J,ke=()=>r(N,k,D),Ae=()=>{ee(N,()=>{ke(),pe&&pe()})};Y?Y(N,ke,Ae):Ae()}else r(N,k,D)},oe=(v,k,D,F=!1,B=!1)=>{const{type:N,props:X,ref:J,children:H,dynamicChildren:K,shapeFlag:ie,patchFlag:ee,dirs:Y,cacheIndex:pe}=v;if(ee===-2&&(B=!1),J!=null&&mo(J,null,D,v,!0),pe!=null&&(k.renderCache[pe]=void 0),ie&256){k.ctx.deactivate(v);return}const ke=ie&1&&Y,Ae=!qr(v);let Oe;if(Ae&&(Oe=X&&X.onVnodeBeforeUnmount)&&tn(Oe,k,v),ie&6)Je(v.component,D,F);else{if(ie&128){v.suspense.unmount(D,F);return}ke&&qn(v,null,k,"beforeUnmount"),ie&64?v.type.remove(v,k,D,Me,F):K&&!K.hasOnce&&(N!==$t||ee>0&&ee&64)?Ve(K,k,D,!1,!0):(N===$t&&ee&384||!B&&ie&16)&&Ve(H,k,D),F&&Ke(v)}(Ae&&(Oe=X&&X.onVnodeUnmounted)||ke)&&Ut(()=>{Oe&&tn(Oe,k,v),ke&&qn(v,null,k,"unmounted")},D)},Ke=v=>{const{type:k,el:D,anchor:F,transition:B}=v;if(k===$t){ft(D,F);return}if(k===no){ce(v);return}const N=()=>{s(D),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(v.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:J}=B,H=()=>X(D,N);J?J(v.el,N,H):H()}else N()},ft=(v,k)=>{let D;for(;v!==k;)D=R(v),s(v),v=D;s(k)},Je=(v,k,D)=>{const{bum:F,scope:B,job:N,subTree:X,um:J,m:H,a:K}=v;Za(H),Za(K),F&&Fi(F),B.stop(),N&&(N.flags|=8,oe(X,v,k,D)),J&&Ut(J,k),Ut(()=>{v.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Ve=(v,k,D,F=!1,B=!1,N=0)=>{for(let X=N;X<v.length;X++)oe(v[X],k,D,F,B)},Xe=v=>{if(v.shapeFlag&6)return Xe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=R(v.anchor||v.el),D=k&&k[Mh];return D?R(D):k};let at=!1;const q=(v,k,D)=>{v==null?k._vnode&&oe(k._vnode,null,null,!0):le(k._vnode||null,v,k,null,null,null,D),k._vnode=v,at||(at=!0,Wa(),fl(),at=!1)},Me={p:le,um:oe,m:Qe,r:Ke,mt:Ce,mc:I,pc:me,pbc:W,n:Xe,o:t};let He,be;return{render:q,hydrate:He,createApp:af(q,He)}}function Zs({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Hn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Al(t,e,n=!1){const r=t.children,s=e.children;if(xe(r)&&xe(s))for(let a=0;a<r.length;a++){const u=r[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=Pn(s[a]),h.el=u.el),!n&&h.patchFlag!==-2&&Al(u,h)),h.type===is&&(h.el=u.el)}}function vf(t){const e=t.slice(),n=[0];let r,s,a,u,h;const f=t.length;for(r=0;r<f;r++){const y=t[r];if(y!==0){if(s=n[n.length-1],t[s]<y){e[r]=s,n.push(r);continue}for(a=0,u=n.length-1;a<u;)h=a+u>>1,t[n[h]]<y?a=h+1:u=h;y<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function jl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jl(e)}function Za(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _f=Symbol.for("v-scx"),bf=()=>Ki(_f);function eo(t,e,n){return Rl(t,e,n)}function Rl(t,e,n=tt){const{immediate:r,deep:s,flush:a,once:u}=n,h=Ot({},n);let f;if(ss)if(a==="sync"){const R=bf();f=R.__watcherHandles||(R.__watcherHandles=[])}else if(!e||r)h.once=!0;else{const R=()=>{};return R.stop=sn,R.resume=sn,R.pause=sn,R}const y=Et;h.call=(R,V,se)=>on(R,y,V,se);let g=!1;a==="post"?h.scheduler=R=>{Ut(R,y&&y.suspense)}:a!=="sync"&&(g=!0,h.scheduler=(R,V)=>{V?R():Yo(R)}),h.augmentJob=R=>{e&&(R.flags|=4),g&&(R.flags|=2,y&&(R.id=y.uid,R.i=y))};const b=jh(t,e,h);return f&&f.push(b),b}function wf(t,e,n){const r=this.proxy,s=yt(t)?t.includes(".")?Il(r,t):()=>r[t]:t.bind(r,r);let a;Te(e)?a=e:(a=e.handler,n=e);const u=ni(this),h=Rl(s,a.bind(r),n);return u(),h}function Il(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const kf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${In(e)}Modifiers`];function xf(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||tt;let s=n;const a=e.startsWith("update:"),u=a&&kf(r,e.slice(7));u&&(u.trim&&(s=n.map(g=>yt(g)?g.trim():g)),u.number&&(s=n.map(ho)));let h,f=r[h=zs(e)]||r[h=zs(Jt(e))];!f&&a&&(f=r[h=zs(In(e))]),f&&on(f,t,6,s);const y=r[h+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,on(y,t,6,s)}}function Dl(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let u={},h=!1;if(!Te(t)){const f=y=>{const g=Dl(y,e,!0);g&&(h=!0,Ot(u,g))};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!h?(ct(t)&&r.set(t,null),null):(xe(a)?a.forEach(f=>u[f]=null):Ot(u,a),ct(t)&&r.set(t,u),u)}function rs(t,e){return!t||!Gi(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,In(e))||We(t,e))}function to(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[a],slots:u,attrs:h,emit:f,render:y,renderCache:g,props:b,data:R,setupState:V,ctx:se,inheritAttrs:le}=t,ve=Hi(t);let we,je;try{if(n.shapeFlag&4){const ce=s||r,Le=ce;we=rn(y.call(Le,ce,g,b,V,R,se)),je=h}else{const ce=e;we=rn(ce.length>1?ce(b,{attrs:h,slots:u,emit:f}):ce(b,null)),je=e.props?h:Ef(h)}}catch(ce){Vr.length=0,ts(ce,t,1),we=Mt(Zn)}let Re=we;if(je&&le!==!1){const ce=Object.keys(je),{shapeFlag:Le}=Re;ce.length&&Le&7&&(a&&ce.some($o)&&(je=Sf(je,a)),Re=kr(Re,je,!1,!0))}return n.dirs&&(Re=kr(Re,null,!1,!0),Re.dirs=Re.dirs?Re.dirs.concat(n.dirs):n.dirs),n.transition&&Xo(Re,n.transition),we=Re,Hi(ve),we}const Ef=t=>{let e;for(const n in t)(n==="class"||n==="style"||Gi(n))&&((e||(e={}))[n]=t[n]);return e},Sf=(t,e)=>{const n={};for(const r in t)(!$o(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Of(t,e,n){const{props:r,children:s,component:a}=t,{props:u,children:h,patchFlag:f}=e,y=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?eu(r,u,y):!!u;if(f&8){const g=e.dynamicProps;for(let b=0;b<g.length;b++){const R=g[b];if(u[R]!==r[R]&&!rs(y,R))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:r===u?!1:r?u?eu(r,u,y):!0:!!u;return!1}function eu(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!rs(n,a))return!0}return!1}function Pf({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const $l=t=>t.__isSuspense;function Tf(t,e){e&&e.pendingBranch?xe(t)?e.effects.push(...t):e.effects.push(t):$h(t)}const $t=Symbol.for("v-fgt"),is=Symbol.for("v-txt"),Zn=Symbol.for("v-cmt"),no=Symbol.for("v-stc"),Vr=[];let qt=null;function gt(t=!1){Vr.push(qt=t?null:[])}function Cf(){Vr.pop(),qt=Vr[Vr.length-1]||null}let Zr=1;function tu(t){Zr+=t,t<0&&qt&&(qt.hasOnce=!0)}function Ll(t){return t.dynamicChildren=Zr>0?qt||yr:null,Cf(),Zr>0&&qt&&qt.push(t),t}function jt(t,e,n,r,s,a){return Ll(ge(t,e,n,r,s,a,!0))}function Wr(t,e,n,r,s){return Ll(Mt(t,e,n,r,s,!0))}function Ml(t){return t?t.__v_isVNode===!0:!1}function Mr(t,e){return t.type===e.type&&t.key===e.key}const Fl=({key:t})=>t??null,Bi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?yt(t)||St(t)||Te(t)?{i:Nt,r:t,k:e,f:!!n}:t:null);function ge(t,e=null,n=null,r=0,s=null,a=t===$t?0:1,u=!1,h=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Fl(e),ref:e&&Bi(e),scopeId:pl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Nt};return h?(na(f,n),a&128&&t.normalize(f)):n&&(f.shapeFlag|=yt(n)?8:16),Zr>0&&!u&&qt&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&qt.push(f),f}const Mt=Af;function Af(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===Yh)&&(t=Zn),Ml(t)){const h=kr(t,e,!0);return n&&na(h,n),Zr>0&&!a&&qt&&(h.shapeFlag&6?qt[qt.indexOf(t)]=h:qt.push(h)),h.patchFlag=-2,h}if(Bf(t)&&(t=t.__vccOpts),e){e=jf(e);let{class:h,style:f}=e;h&&!yt(h)&&(e.class=Uo(h)),ct(f)&&(Jo(f)&&!xe(f)&&(f=Ot({},f)),e.style=Fo(f))}const u=yt(t)?1:$l(t)?128:Fh(t)?64:ct(t)?4:Te(t)?2:0;return ge(t,e,n,r,s,u,a,!0)}function jf(t){return t?Jo(t)||xl(t)?Ot({},t):t:null}function kr(t,e,n=!1,r=!1){const{props:s,ref:a,patchFlag:u,children:h,transition:f}=t,y=e?Rf(s||{},e):s,g={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Fl(y),ref:e&&e.ref?n&&a?xe(a)?a.concat(Bi(e)):[a,Bi(e)]:Bi(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$t?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&kr(t.ssContent),ssFallback:t.ssFallback&&kr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&r&&Xo(g,f.clone(g)),g}function Yn(t=" ",e=0){return Mt(is,null,t,e)}function Gn(t="",e=!1){return e?(gt(),Wr(Zn,null,t)):Mt(Zn,null,t)}function rn(t){return t==null||typeof t=="boolean"?Mt(Zn):xe(t)?Mt($t,null,t.slice()):Ml(t)?Pn(t):Mt(is,null,String(t))}function Pn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:kr(t)}function na(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(xe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),na(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!xl(e)?e._ctx=Nt:s===3&&Nt&&(Nt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Nt},n=32):(e=String(e),r&64?(n=16,e=[Yn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rf(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Uo([e.class,r.class]));else if(s==="style")e.style=Fo([e.style,r.style]);else if(Gi(s)){const a=e[s],u=r[s];u&&a!==u&&!(xe(a)&&a.includes(u))&&(e[s]=a?[].concat(a,u):u)}else s!==""&&(e[s]=r[s])}return e}function tn(t,e,n,r=null){on(t,e,7,[n,r])}const If=bl();let Df=0;function $f(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||If,a={uid:Df++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sl(r,s),emitsOptions:Dl(r,s),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=xf.bind(null,a),t.ce&&t.ce(a),a}let Et=null,Wi,xo;{const t=qu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),a=>{s.length>1?s.forEach(u=>u(a)):s[0](a)}};Wi=e("__VUE_INSTANCE_SETTERS__",n=>Et=n),xo=e("__VUE_SSR_SETTERS__",n=>ss=n)}const ni=t=>{const e=Et;return Wi(t),t.scope.on(),()=>{t.scope.off(),Wi(e)}},nu=()=>{Et&&Et.scope.off(),Wi(null)};function Ul(t){return t.vnode.shapeFlag&4}let ss=!1;function Lf(t,e=!1,n=!1){e&&xo(e);const{props:r,children:s}=t.vnode,a=Ul(t);lf(t,r,a,e),df(t,s,n);const u=a?Mf(t,e):void 0;return e&&xo(!1),u}function Mf(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Zh);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Uf(t):null,a=ni(t);Dn();const u=ti(r,t,0,[t.props,s]);if($n(),a(),Uu(u)){if(qr(t)||gl(t),u.then(nu,nu),e)return u.then(h=>{ru(t,h,e)}).catch(h=>{ts(h,t,0)});t.asyncDep=u}else ru(t,u,e)}else Kl(t,e)}function ru(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=ll(e)),Kl(t,n)}let iu;function Kl(t,e,n){const r=t.type;if(!t.render){if(!e&&iu&&!r.render){const s=r.template||ea(t).template;if(s){const{isCustomElement:a,compilerOptions:u}=t.appContext.config,{delimiters:h,compilerOptions:f}=r,y=Ot(Ot({isCustomElement:a,delimiters:h},u),f);r.render=iu(s,y)}}t.render=r.render||sn}{const s=ni(t);Dn();try{ef(t)}finally{$n(),s()}}}const Ff={get(t,e){return Pt(t,"get",""),t[e]}};function Uf(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Ff),slots:t.slots,emit:t.emit,expose:e}}function os(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ll(xh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Hr)return Hr[n](t)},has(e,n){return n in e||n in Hr}})):t.proxy}function Kf(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function Bf(t){return Te(t)&&"__vccOpts"in t}const Nf=(t,e)=>Ch(t,e,ss),qf="3.5.10";/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Eo;const su=typeof window<"u"&&window.trustedTypes;if(su)try{Eo=su.createPolicy("vue",{createHTML:t=>t})}catch{}const Bl=Eo?t=>Eo.createHTML(t):t=>t,Hf="http://www.w3.org/2000/svg",Vf="http://www.w3.org/1998/Math/MathML",hn=typeof document<"u"?document:null,ou=hn&&hn.createElement("template"),Wf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?hn.createElementNS(Hf,t):e==="mathml"?hn.createElementNS(Vf,t):n?hn.createElement(t,{is:n}):hn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>hn.createTextNode(t),createComment:t=>hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,a){const u=n?n.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{ou.innerHTML=Bl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const h=ou.content;if(r==="svg"||r==="mathml"){const f=h.firstChild;for(;f.firstChild;)h.appendChild(f.firstChild);h.removeChild(f)}e.insertBefore(h,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},zf=Symbol("_vtc");function Jf(t,e,n){const r=t[zf];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const au=Symbol("_vod"),Gf=Symbol("_vsh"),Qf=Symbol(""),Yf=/(^|;)\s*display\s*:/;function Xf(t,e,n){const r=t.style,s=yt(n);let a=!1;if(n&&!s){if(e)if(yt(e))for(const u of e.split(";")){const h=u.slice(0,u.indexOf(":")).trim();n[h]==null&&Ni(r,h,"")}else for(const u in e)n[u]==null&&Ni(r,u,"");for(const u in n)u==="display"&&(a=!0),Ni(r,u,n[u])}else if(s){if(e!==n){const u=r[Qf];u&&(n+=";"+u),r.cssText=n,a=Yf.test(n)}}else e&&t.removeAttribute("style");au in t&&(t[au]=a?r.display:"",t[Gf]&&(r.display="none"))}const uu=/\s*!important$/;function Ni(t,e,n){if(xe(n))n.forEach(r=>Ni(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Zf(t,e);uu.test(n)?t.setProperty(In(r),n.replace(uu,""),"important"):t[r]=n}}const lu=["Webkit","Moz","ms"],ro={};function Zf(t,e){const n=ro[e];if(n)return n;let r=Jt(e);if(r!=="filter"&&r in t)return ro[e]=r;r=Xi(r);for(let s=0;s<lu.length;s++){const a=lu[s]+r;if(a in t)return ro[e]=a}return e}const cu="http://www.w3.org/1999/xlink";function hu(t,e,n,r,s,a=Xc(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(cu,e.slice(6,e.length)):t.setAttributeNS(cu,e,n):n==null||a&&!Hu(n)?t.removeAttribute(e):t.setAttribute(e,a?"":Rn(n)?String(n):n)}function fu(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Bl(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?t.getAttribute("value")||"":t.value,h=n==null?t.type==="checkbox"?"on":"":String(n);(u!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Hu(n):n==null&&u==="string"?(n="",a=!0):u==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function pr(t,e,n,r){t.addEventListener(e,n,r)}function ed(t,e,n,r){t.removeEventListener(e,n,r)}const du=Symbol("_vei");function td(t,e,n,r,s=null){const a=t[du]||(t[du]={}),u=a[e];if(r&&u)u.value=r;else{const[h,f]=nd(e);if(r){const y=a[e]=sd(r,s);pr(t,h,y,f)}else u&&(ed(t,h,u,f),a[e]=void 0)}}const pu=/(?:Once|Passive|Capture)$/;function nd(t){let e;if(pu.test(t)){e={};let r;for(;r=t.match(pu);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):In(t.slice(2)),e]}let io=0;const rd=Promise.resolve(),id=()=>io||(rd.then(()=>io=0),io=Date.now());function sd(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;on(od(r,n.value),e,5,[r])};return n.value=t,n.attached=id(),n}function od(t,e){if(xe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const gu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ad=(t,e,n,r,s,a)=>{const u=s==="svg";e==="class"?Jf(t,r,u):e==="style"?Xf(t,n,r):Gi(e)?$o(e)||td(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ud(t,e,r,u))?(fu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hu(t,e,r,u,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!yt(r))?fu(t,Jt(e),r):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hu(t,e,r,u))};function ud(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&gu(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gu(e)&&yt(n)?!1:e in t}const yu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return xe(e)?n=>Fi(e,n):e};function ld(t){t.target.composing=!0}function mu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const so=Symbol("_assign"),xn={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[so]=yu(s);const a=r||s.props&&s.props.type==="number";pr(t,e?"change":"input",u=>{if(u.target.composing)return;let h=t.value;n&&(h=h.trim()),a&&(h=ho(h)),t[so](h)}),n&&pr(t,"change",()=>{t.value=t.value.trim()}),e||(pr(t,"compositionstart",ld),pr(t,"compositionend",mu),pr(t,"change",mu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:a}},u){if(t[so]=yu(u),t.composing)return;const h=(a||t.type==="number")&&!/^0\d/.test(t.value)?ho(t.value):t.value,f=e??"";h!==f&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===f)||(t.value=f))}},cd=["ctrl","shift","alt","meta"],hd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>cd.some(n=>t[`${n}Key`]&&!e.includes(n))},vu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...a)=>{for(let u=0;u<e.length;u++){const h=hd[e[u]];if(h&&h(s,e))return}return t(s,...a)})},fd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dd=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const a=In(s.key);if(e.some(u=>u===a||fd[u]===a))return t(s)})},pd=Ot({patchProp:ad},Wf);let _u;function gd(){return _u||(_u=gf(pd))}const yd=(...t)=>{const e=gd().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=vd(r);if(!s)return;const a=e._component;!Te(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const u=n(s,!1,md(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),u},e};function md(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function vd(t){return yt(t)?document.querySelector(t):t}var It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _d(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ql={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(It,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,u={},h=0,f={parse:function(I,j){var W=(j=j||{}).dynamicTyping||!1;if(_e(W)&&(j.dynamicTypingFunction=W,W={}),j.dynamicTyping=W,j.transform=!!_e(j.transform)&&j.transform,j.worker&&f.WORKERS_SUPPORTED){var ue=function(){if(!f.WORKERS_SUPPORTED)return!1;var ye=(ot=r.URL||r.webkitURL||null,Se=n.toString(),f.BLOB_URL||(f.BLOB_URL=ot.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Se,")();"],{type:"text/javascript"})))),Ce=new r.Worker(ye),ot,Se;return Ce.onmessage=je,Ce.id=h++,u[Ce.id]=Ce}();return ue.userStep=j.step,ue.userChunk=j.chunk,ue.userComplete=j.complete,ue.userError=j.error,j.step=_e(j.step),j.chunk=_e(j.chunk),j.complete=_e(j.complete),j.error=_e(j.error),delete j.worker,void ue.postMessage({input:I,config:j,workerId:ue.id})}var he=null;return f.NODE_STREAM_INPUT,typeof I=="string"?(I=function(ye){return ye.charCodeAt(0)===65279?ye.slice(1):ye}(I),he=j.download?new b(j):new V(j)):I.readable===!0&&_e(I.read)&&_e(I.on)?he=new se(j):(r.File&&I instanceof File||I instanceof Object)&&(he=new R(j)),he.stream(I)},unparse:function(I,j){var W=!1,ue=!0,he=",",ye=`\r
`,Ce='"',ot=Ce+Ce,Se=!1,Z=null,me=!1;(function(){if(typeof j=="object"){if(typeof j.delimiter!="string"||f.BAD_DELIMITERS.filter(function(oe){return j.delimiter.indexOf(oe)!==-1}).length||(he=j.delimiter),(typeof j.quotes=="boolean"||typeof j.quotes=="function"||Array.isArray(j.quotes))&&(W=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(Se=j.skipEmptyLines),typeof j.newline=="string"&&(ye=j.newline),typeof j.quoteChar=="string"&&(Ce=j.quoteChar),typeof j.header=="boolean"&&(ue=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");Z=j.columns}j.escapeChar!==void 0&&(ot=j.escapeChar+Ce),(typeof j.escapeFormulae=="boolean"||j.escapeFormulae instanceof RegExp)&&(me=j.escapeFormulae instanceof RegExp?j.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var de=new RegExp(ve(Ce),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return nt(null,I,Se);if(typeof I[0]=="object")return nt(Z||Object.keys(I[0]),I,Se)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||Z),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),nt(I.fields||[],I.data||[],Se);throw new Error("Unable to serialize unrecognized input");function nt(oe,Ke,ft){var Je="";typeof oe=="string"&&(oe=JSON.parse(oe)),typeof Ke=="string"&&(Ke=JSON.parse(Ke));var Ve=Array.isArray(oe)&&0<oe.length,Xe=!Array.isArray(Ke[0]);if(Ve&&ue){for(var at=0;at<oe.length;at++)0<at&&(Je+=he),Je+=Qe(oe[at],at);0<Ke.length&&(Je+=ye)}for(var q=0;q<Ke.length;q++){var Me=Ve?oe.length:Ke[q].length,He=!1,be=Ve?Object.keys(Ke[q]).length===0:Ke[q].length===0;if(ft&&!Ve&&(He=ft==="greedy"?Ke[q].join("").trim()==="":Ke[q].length===1&&Ke[q][0].length===0),ft==="greedy"&&Ve){for(var v=[],k=0;k<Me;k++){var D=Xe?oe[k]:k;v.push(Ke[q][D])}He=v.join("").trim()===""}if(!He){for(var F=0;F<Me;F++){0<F&&!be&&(Je+=he);var B=Ve&&Xe?oe[F]:F;Je+=Qe(Ke[q][B],F)}q<Ke.length-1&&(!ft||0<Me&&!be)&&(Je+=ye)}}return Je}function Qe(oe,Ke){if(oe==null)return"";if(oe.constructor===Date)return JSON.stringify(oe).slice(1,25);var ft=!1;me&&typeof oe=="string"&&me.test(oe)&&(oe="'"+oe,ft=!0);var Je=oe.toString().replace(de,ot);return(ft=ft||W===!0||typeof W=="function"&&W(oe,Ke)||Array.isArray(W)&&W[Ke]||function(Ve,Xe){for(var at=0;at<Xe.length;at++)if(-1<Ve.indexOf(Xe[at]))return!0;return!1}(Je,f.BAD_DELIMITERS)||-1<Je.indexOf(he)||Je.charAt(0)===" "||Je.charAt(Je.length-1)===" ")?Ce+Je+Ce:Je}}};if(f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!s&&!!r.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=we,f.ParserHandle=le,f.NetworkStreamer=b,f.FileStreamer=R,f.StringStreamer=V,f.ReadableStreamStreamer=se,r.jQuery){var y=r.jQuery;y.fn.parse=function(I){var j=I.config||{},W=[];return this.each(function(ye){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var Ce=0;Ce<this.files.length;Ce++)W.push({file:this.files[Ce],inputElem:this,instanceConfig:y.extend({},j)})}),ue(),this;function ue(){if(W.length!==0){var ye,Ce,ot,Se,Z=W[0];if(_e(I.before)){var me=I.before(Z.file,Z.inputElem);if(typeof me=="object"){if(me.action==="abort")return ye="AbortError",Ce=Z.file,ot=Z.inputElem,Se=me.reason,void(_e(I.error)&&I.error({name:ye},Ce,ot,Se));if(me.action==="skip")return void he();typeof me.config=="object"&&(Z.instanceConfig=y.extend(Z.instanceConfig,me.config))}else if(me==="skip")return void he()}var de=Z.instanceConfig.complete;Z.instanceConfig.complete=function(nt){_e(de)&&de(nt,Z.file,Z.inputElem),he()},f.parse(Z.file,Z.instanceConfig)}else _e(I.complete)&&I.complete()}function he(){W.splice(0,1),ue()}}}function g(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(j){var W=Le(j);W.chunkSize=parseInt(W.chunkSize),j.step||j.chunk||(W.chunkSize=null),this._handle=new le(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(j,W){if(this.isFirstChunk&&_e(this._config.beforeFirstChunk)){var ue=this._config.beforeFirstChunk(j);ue!==void 0&&(j=ue)}this.isFirstChunk=!1,this._halted=!1;var he=this._partialLine+j;this._partialLine="";var ye=this._handle.parse(he,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Ce=ye.meta.cursor;this._finished||(this._partialLine=he.substring(Ce-this._baseIndex),this._baseIndex=Ce),ye&&ye.data&&(this._rowCount+=ye.data.length);var ot=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:ye,workerId:f.WORKER_ID,finished:ot});else if(_e(this._config.chunk)&&!W){if(this._config.chunk(ye,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ye=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ye.data),this._completeResults.errors=this._completeResults.errors.concat(ye.errors),this._completeResults.meta=ye.meta),this._completed||!ot||!_e(this._config.complete)||ye&&ye.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ot||ye&&ye.meta.paused||this._nextChunk(),ye}this._halted=!0},this._sendError=function(j){_e(this._config.error)?this._config.error(j):a&&this._config.error&&r.postMessage({workerId:f.WORKER_ID,error:j,finished:!1})}}function b(I){var j;(I=I||{}).chunkSize||(I.chunkSize=f.RemoteChunkSize),g.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W=this._config.downloadRequestHeaders;for(var ue in W)j.setRequestHeader(ue,W[ue])}if(this._config.chunkSize){var he=this._start+this._config.chunkSize-1;j.setRequestHeader("Range","bytes="+this._start+"-"+he)}try{j.send(this._config.downloadRequestBody)}catch(ye){this._chunkError(ye.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:j.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(W){var ue=W.getResponseHeader("Content-Range");return ue===null?-1:parseInt(ue.substring(ue.lastIndexOf("/")+1))}(j),this.parseChunk(j.responseText)))},this._chunkError=function(W){var ue=j.statusText||W;this._sendError(new Error(ue))}}function R(I){var j,W;(I=I||{}).chunkSize||(I.chunkSize=f.LocalChunkSize),g.call(this,I);var ue=typeof FileReader<"u";this.stream=function(he){this._input=he,W=he.slice||he.webkitSlice||he.mozSlice,ue?((j=new FileReader).onload=Ye(this._chunkLoaded,this),j.onerror=Ye(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var he=this._input;if(this._config.chunkSize){var ye=Math.min(this._start+this._config.chunkSize,this._input.size);he=W.call(he,this._start,ye)}var Ce=j.readAsText(he,this._config.encoding);ue||this._chunkLoaded({target:{result:Ce}})},this._chunkLoaded=function(he){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(he.target.result)},this._chunkError=function(){this._sendError(j.error)}}function V(I){var j;g.call(this,I=I||{}),this.stream=function(W){return j=W,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var W,ue=this._config.chunkSize;return ue?(W=j.substring(0,ue),j=j.substring(ue)):(W=j,j=""),this._finished=!j,this.parseChunk(W)}}}function se(I){g.call(this,I=I||{});var j=[],W=!0,ue=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(he){this._input=he,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):W=!0},this._streamData=Ye(function(he){try{j.push(typeof he=="string"?he:he.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(ye){this._streamError(ye)}},this),this._streamError=Ye(function(he){this._streamCleanUp(),this._sendError(he)},this),this._streamEnd=Ye(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Ye(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(I){var j,W,ue,he=Math.pow(2,53),ye=-he,Ce=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ot=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Z=0,me=0,de=!1,nt=!1,Qe=[],oe={data:[],errors:[],meta:{}};if(_e(I.step)){var Ke=I.step;I.step=function(q){if(oe=q,Ve())Je();else{if(Je(),oe.data.length===0)return;Z+=q.data.length,I.preview&&Z>I.preview?W.abort():(oe.data=oe.data[0],Ke(oe,Se))}}}function ft(q){return I.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Je(){return oe&&ue&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),ue=!1),I.skipEmptyLines&&(oe.data=oe.data.filter(function(q){return!ft(q)})),Ve()&&function(){if(!oe)return;function q(He,be){_e(I.transformHeader)&&(He=I.transformHeader(He,be)),Qe.push(He)}if(Array.isArray(oe.data[0])){for(var Me=0;Ve()&&Me<oe.data.length;Me++)oe.data[Me].forEach(q);oe.data.splice(0,1)}else oe.data.forEach(q)}(),function(){if(!oe||!I.header&&!I.dynamicTyping&&!I.transform)return oe;function q(He,be){var v,k=I.header?{}:[];for(v=0;v<He.length;v++){var D=v,F=He[v];I.header&&(D=v>=Qe.length?"__parsed_extra":Qe[v]),I.transform&&(F=I.transform(F,D)),F=Xe(D,F),D==="__parsed_extra"?(k[D]=k[D]||[],k[D].push(F)):k[D]=F}return I.header&&(v>Qe.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+Qe.length+" fields but parsed "+v,me+be):v<Qe.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+Qe.length+" fields but parsed "+v,me+be)),k}var Me=1;return!oe.data.length||Array.isArray(oe.data[0])?(oe.data=oe.data.map(q),Me=oe.data.length):oe.data=q(oe.data,0),I.header&&oe.meta&&(oe.meta.fields=Qe),me+=Me,oe}()}function Ve(){return I.header&&Qe.length===0}function Xe(q,Me){return He=q,I.dynamicTypingFunction&&I.dynamicTyping[He]===void 0&&(I.dynamicTyping[He]=I.dynamicTypingFunction(He)),(I.dynamicTyping[He]||I.dynamicTyping)===!0?Me==="true"||Me==="TRUE"||Me!=="false"&&Me!=="FALSE"&&(function(be){if(Ce.test(be)){var v=parseFloat(be);if(ye<v&&v<he)return!0}return!1}(Me)?parseFloat(Me):ot.test(Me)?new Date(Me):Me===""?null:Me):Me;var He}function at(q,Me,He,be){var v={type:q,code:Me,message:He};be!==void 0&&(v.row=be),oe.errors.push(v)}this.parse=function(q,Me,He){var be=I.quoteChar||'"';if(I.newline||(I.newline=function(D,F){D=D.substring(0,1048576);var B=new RegExp(ve(F)+"([^]*?)"+ve(F),"gm"),N=(D=D.replace(B,"")).split("\r"),X=D.split(`
`),J=1<X.length&&X[0].length<N[0].length;if(N.length===1||J)return`
`;for(var H=0,K=0;K<N.length;K++)N[K][0]===`
`&&H++;return H>=N.length/2?`\r
`:"\r"}(q,be)),ue=!1,I.delimiter)_e(I.delimiter)&&(I.delimiter=I.delimiter(q),oe.meta.delimiter=I.delimiter);else{var v=function(D,F,B,N,X){var J,H,K,ie;X=X||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ee=0;ee<X.length;ee++){var Y=X[ee],pe=0,ke=0,Ae=0;K=void 0;for(var Oe=new we({comments:N,delimiter:Y,newline:F,preview:10}).parse(D),Ze=0;Ze<Oe.data.length;Ze++)if(B&&ft(Oe.data[Ze]))Ae++;else{var Be=Oe.data[Ze].length;ke+=Be,K!==void 0?0<Be&&(pe+=Math.abs(Be-K),K=Be):K=Be}0<Oe.data.length&&(ke/=Oe.data.length-Ae),(H===void 0||pe<=H)&&(ie===void 0||ie<ke)&&1.99<ke&&(H=pe,J=Y,ie=ke)}return{successful:!!(I.delimiter=J),bestDelimiter:J}}(q,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);v.successful?I.delimiter=v.bestDelimiter:(ue=!0,I.delimiter=f.DefaultDelimiter),oe.meta.delimiter=I.delimiter}var k=Le(I);return I.preview&&I.header&&k.preview++,j=q,W=new we(k),oe=W.parse(j,Me,He),Je(),de?{meta:{paused:!0}}:oe||{meta:{paused:!1}}},this.paused=function(){return de},this.pause=function(){de=!0,W.abort(),j=_e(I.chunk)?"":j.substring(W.getCharIndex())},this.resume=function(){Se.streamer._halted?(de=!1,Se.streamer.parseChunk(j,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,W.abort(),oe.meta.aborted=!0,_e(I.complete)&&I.complete(oe),j=""}}function ve(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function we(I){var j,W=(I=I||{}).delimiter,ue=I.newline,he=I.comments,ye=I.step,Ce=I.preview,ot=I.fastMode,Se=j=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Se=I.escapeChar),(typeof W!="string"||-1<f.BAD_DELIMITERS.indexOf(W))&&(W=","),he===W)throw new Error("Comment character same as delimiter");he===!0?he="#":(typeof he!="string"||-1<f.BAD_DELIMITERS.indexOf(he))&&(he=!1),ue!==`
`&&ue!=="\r"&&ue!==`\r
`&&(ue=`
`);var Z=0,me=!1;this.parse=function(de,nt,Qe){if(typeof de!="string")throw new Error("Input must be a string");var oe=de.length,Ke=W.length,ft=ue.length,Je=he.length,Ve=_e(ye),Xe=[],at=[],q=[],Me=Z=0;if(!de)return Ge();if(I.header&&!nt){var He=de.split(ue)[0].split(W),be=[],v={},k=!1;for(var D in He){var F=He[D];_e(I.transformHeader)&&(F=I.transformHeader(F,D));var B=F,N=v[F]||0;for(0<N&&(k=!0,B=F+"_"+N),v[F]=N+1;be.includes(B);)B=B+"_"+N;be.push(B)}if(k){var X=de.split(ue);X[0]=be.join(W),de=X.join(ue)}}if(ot||ot!==!1&&de.indexOf(j)===-1){for(var J=de.split(ue),H=0;H<J.length;H++){if(q=J[H],Z+=q.length,H!==J.length-1)Z+=ue.length;else if(Qe)return Ge();if(!he||q.substring(0,Je)!==he){if(Ve){if(Xe=[],Ae(q.split(W)),ht(),me)return Ge()}else Ae(q.split(W));if(Ce&&Ce<=H)return Xe=Xe.slice(0,Ce),Ge(!0)}}return Ge()}for(var K=de.indexOf(W,Z),ie=de.indexOf(ue,Z),ee=new RegExp(ve(Se)+ve(j),"g"),Y=de.indexOf(j,Z);;)if(de[Z]!==j)if(he&&q.length===0&&de.substring(Z,Z+Je)===he){if(ie===-1)return Ge();Z=ie+ft,ie=de.indexOf(ue,Z),K=de.indexOf(W,Z)}else if(K!==-1&&(K<ie||ie===-1))q.push(de.substring(Z,K)),Z=K+Ke,K=de.indexOf(W,Z);else{if(ie===-1)break;if(q.push(de.substring(Z,ie)),Be(ie+ft),Ve&&(ht(),me))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0)}else for(Y=Z,Z++;;){if((Y=de.indexOf(j,Y+1))===-1)return Qe||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Xe.length,index:Z}),Ze();if(Y===oe-1)return Ze(de.substring(Z,Y).replace(ee,j));if(j!==Se||de[Y+1]!==Se){if(j===Se||Y===0||de[Y-1]!==Se){K!==-1&&K<Y+1&&(K=de.indexOf(W,Y+1)),ie!==-1&&ie<Y+1&&(ie=de.indexOf(ue,Y+1));var pe=Oe(ie===-1?K:Math.min(K,ie));if(de.substr(Y+1+pe,Ke)===W){q.push(de.substring(Z,Y).replace(ee,j)),de[Z=Y+1+pe+Ke]!==j&&(Y=de.indexOf(j,Z)),K=de.indexOf(W,Z),ie=de.indexOf(ue,Z);break}var ke=Oe(ie);if(de.substring(Y+1+ke,Y+1+ke+ft)===ue){if(q.push(de.substring(Z,Y).replace(ee,j)),Be(Y+1+ke+ft),K=de.indexOf(W,Z),Y=de.indexOf(j,Z),Ve&&(ht(),me))return Ge();if(Ce&&Xe.length>=Ce)return Ge(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Xe.length,index:Z}),Y++}}else Y++}return Ze();function Ae(et){Xe.push(et),Me=Z}function Oe(et){var fe=0;if(et!==-1){var lt=de.substring(Y+1,et);lt&&lt.trim()===""&&(fe=lt.length)}return fe}function Ze(et){return Qe||(et===void 0&&(et=de.substring(Z)),q.push(et),Z=oe,Ae(q),Ve&&ht()),Ge()}function Be(et){Z=et,Ae(q),q=[],ie=de.indexOf(ue,Z)}function Ge(et){return{data:Xe,errors:at,meta:{delimiter:W,linebreak:ue,aborted:me,truncated:!!et,cursor:Me+(nt||0)}}}function ht(){ye(Ge()),Xe=[],at=[]}},this.abort=function(){me=!0},this.getCharIndex=function(){return Z}}function je(I){var j=I.data,W=u[j.workerId],ue=!1;if(j.error)W.userError(j.error,j.file);else if(j.results&&j.results.data){var he={abort:function(){ue=!0,Re(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(_e(W.userStep)){for(var ye=0;ye<j.results.data.length&&(W.userStep({data:j.results.data[ye],errors:j.results.errors,meta:j.results.meta},he),!ue);ye++);delete j.results}else _e(W.userChunk)&&(W.userChunk(j.results,he,j.file),delete j.results)}j.finished&&!ue&&Re(j.workerId,j.results)}function Re(I,j){var W=u[I];_e(W.userComplete)&&W.userComplete(j),W.terminate(),delete u[I]}function ce(){throw new Error("Not implemented.")}function Le(I){if(typeof I!="object"||I===null)return I;var j=Array.isArray(I)?[]:{};for(var W in I)j[W]=Le(I[W]);return j}function Ye(I,j){return function(){I.apply(j,arguments)}}function _e(I){return typeof I=="function"}return a&&(r.onmessage=function(I){var j=I.data;if(f.WORKER_ID===void 0&&j&&(f.WORKER_ID=j.workerId),typeof j.input=="string")r.postMessage({workerId:f.WORKER_ID,results:f.parse(j.input,j.config),finished:!0});else if(r.File&&j.input instanceof File||j.input instanceof Object){var W=f.parse(j.input,j.config);W&&r.postMessage({workerId:f.WORKER_ID,results:W,finished:!0})}}),(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(g.prototype)).constructor=R,(V.prototype=Object.create(V.prototype)).constructor=V,(se.prototype=Object.create(g.prototype)).constructor=se,f})})(ql);var bd=ql.exports;const bu=Nl(bd);var Hl={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(It,function(){var n=function(i,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,l=1,c=arguments.length;l<c;l++)for(var d in o=arguments[l])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function s(i,o,l){for(var c,d=0,p=o.length;d<p;d++)!c&&d in o||((c=c||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(c||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:It,u=Object.keys,h=Array.isArray;function f(i,o){return typeof o!="object"||u(o).forEach(function(l){i[l]=o[l]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,g={}.hasOwnProperty;function b(i,o){return g.call(i,o)}function R(i,o){typeof o=="function"&&(o=o(y(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(o).forEach(function(l){se(i,l,o[l])})}var V=Object.defineProperty;function se(i,o,l,c){V(i,o,f(l&&b(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function le(i){return{from:function(o){return i.prototype=Object.create(o.prototype),se(i.prototype,"constructor",i),{extend:R.bind(null,i.prototype)}}}}var ve=Object.getOwnPropertyDescriptor,we=[].slice;function je(i,o,l){return we.call(i,o,l)}function Re(i,o){return o(i)}function ce(i){if(!i)throw new Error("Assertion Failed")}function Le(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Ye(i,o){if(typeof o=="string"&&b(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var l=[],c=0,d=o.length;c<d;++c){var p=Ye(i,o[c]);l.push(p)}return l}var m=o.indexOf(".");if(m!==-1){var _=i[o.substr(0,m)];return _==null?void 0:Ye(_,o.substr(m+1))}}function _e(i,o,l){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){ce(typeof l!="string"&&"length"in l);for(var c=0,d=o.length;c<d;++c)_e(i,o[c],l[c])}else{var p,m,_=o.indexOf(".");_!==-1?(p=o.substr(0,_),(m=o.substr(_+1))===""?l===void 0?h(i)&&!isNaN(parseInt(p))?i.splice(p,1):delete i[p]:i[p]=l:_e(_=!(_=i[p])||!b(i,p)?i[p]={}:_,m,l)):l===void 0?h(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=l}}function I(i){var o,l={};for(o in i)b(i,o)&&(l[o]=i[o]);return l}var j=[].concat;function W(i){return j.apply([],i)}var un="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),ue=new Set(un.map(function(i){return a[i]})),he=null;function ye(i){return he=new WeakMap,i=function o(l){if(!l||typeof l!="object")return l;var c=he.get(l);if(c)return c;if(h(l)){c=[],he.set(l,c);for(var d=0,p=l.length;d<p;++d)c.push(o(l[d]))}else if(ue.has(l.constructor))c=l;else{var m,_=y(l);for(m in c=_===Object.prototype?{}:Object.create(_),he.set(l,c),l)b(l,m)&&(c[m]=o(l[m]))}return c}(i),he=null,i}var Ce={}.toString;function ot(i){return Ce.call(i).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof Se=="symbol"?function(i){var o;return i!=null&&(o=i[Se])&&o.apply(i)}:function(){return null};function me(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var de={};function nt(i){var o,l,c,d;if(arguments.length===1){if(h(i))return i.slice();if(this===de&&typeof i=="string")return[i];if(d=Z(i)){for(l=[];!(c=d.next()).done;)l.push(c.value);return l}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(l=new Array(o);o--;)l[o]=i[o];return l}for(o=arguments.length,l=new Array(o);o--;)l[o]=arguments[o];return l}var Qe=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ht=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(i,o){this.name=i,this.message=o}function ft(i,o){return i+". Errors: "+Object.keys(o).map(function(l){return o[l].toString()}).filter(function(l,c,d){return d.indexOf(l)===c}).join(`
`)}function Je(i,o,l,c){this.failures=o,this.failedKeys=c,this.successCount=l,this.message=ft(i,o)}function Ve(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(l){return o[l]}),this.failuresByPos=o,this.message=ft(i,this.failures)}le(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Je).from(Ke),le(Ve).from(Ke);var Xe=Ht.reduce(function(i,o){return i[o]=o+"Error",i},{}),at=Ke,q=Ht.reduce(function(i,o){var l=o+"Error";function c(d,p){this.name=l,d?typeof d=="string"?(this.message="".concat(d).concat(p?`
 `+p:""),this.inner=p||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=oe[o]||l,this.inner=null)}return le(c).from(at),i[o]=c,i},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Me=Y.reduce(function(i,o){return i[o+"Error"]=q[o],i},{}),He=Ht.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=q[o]),i},{});function be(){}function v(i){return i}function k(i,o){return i==null||i===v?o:function(l){return o(i(l))}}function D(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function F(i,o){return i===be?o:function(){var l=i.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?D(c,this.onsuccess):c),d&&(this.onerror=this.onerror?D(d,this.onerror):d),p!==void 0?p:l}}function B(i,o){return i===be?o:function(){i.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?D(l,this.onsuccess):l),c&&(this.onerror=this.onerror?D(c,this.onerror):c)}}function N(i,o){return i===be?o:function(l){var c=i.apply(this,arguments);f(l,c);var d=this.onsuccess,p=this.onerror;return this.onsuccess=null,this.onerror=null,l=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?D(d,this.onsuccess):d),p&&(this.onerror=this.onerror?D(p,this.onerror):p),c===void 0?l===void 0?void 0:l:f(c,l)}}function X(i,o){return i===be?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function J(i,o){return i===be?o:function(){var l=i.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,d=arguments.length,p=new Array(d);d--;)p[d]=arguments[d];return l.then(function(){return o.apply(c,p)})}return o.apply(this,arguments)}}He.ModifyError=Je,He.DexieError=Ke,He.BulkError=Ve;var H=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function K(i){H=i}var ie={},ee=100,un=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),i]}(),Y=un[0],Ht=un[1],un=un[2],Ht=Ht&&Ht.then,pe=Y&&Y.constructor,ke=!!un,Ae=function(i,o){lt.push([i,o]),Ze&&(queueMicrotask(vc),Ze=!1)},Oe=!0,Ze=!0,Be=[],Ge=[],ht=v,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},fe=et,lt=[],mt=0,Ln=[];function ae(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=fe;if(typeof i!="function"){if(i!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ys(this,this._value))}this._state=null,this._value=null,++o.ref,function l(c,d){try{d(function(p){if(c._state===null){if(p===c)throw new TypeError("A promise cannot be resolved with itself.");var m=c._lib&&nr();p&&typeof p.then=="function"?l(c,function(_,S){p instanceof ae?p._then(_,S):p.then(_,S)}):(c._state=!0,c._value=p,la(c)),m&&rr()}},ys.bind(null,c))}catch(p){ys(c,p)}}(this,i)}var gs={get:function(){var i=fe,o=ui;function l(c,d){var p=this,m=!i.global&&(i!==fe||o!==ui),_=m&&!yn(),S=new ae(function(x,T){ms(p,new ua(ha(c,i,m,_),ha(d,i,m,_),x,T,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return l.prototype=ie,l},set:function(i){se(this,"then",i&&i.prototype===ie?gs:{get:function(){return i},set:gs.set})}};function ua(i,o,l,c,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=l,this.reject=c,this.psd=d}function ys(i,o){var l,c;Ge.push(o),i._state===null&&(l=i._lib&&nr(),o=ht(o),i._state=!1,i._value=o,c=i,Be.some(function(d){return d._value===c._value})||Be.push(c),la(i),l&&rr())}function la(i){var o=i._listeners;i._listeners=[];for(var l=0,c=o.length;l<c;++l)ms(i,o[l]);var d=i._PSD;--d.ref||d.finalize(),mt===0&&(++mt,Ae(function(){--mt==0&&vs()},[]))}function ms(i,o){if(i._state!==null){var l=i._state?o.onFulfilled:o.onRejected;if(l===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++mt,Ae(mc,[l,i,o])}else i._listeners.push(o)}function mc(i,o,l){try{var c,d=o._value;!o._state&&Ge.length&&(Ge=[]),c=H&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Ge.indexOf(d)!==-1||function(p){for(var m=Be.length;m;)if(Be[--m]._value===p._value)return Be.splice(m,1)}(o),l.resolve(c)}catch(p){l.reject(p)}finally{--mt==0&&vs(),--l.psd.ref||l.psd.finalize()}}function vc(){Mn(et,function(){nr()&&rr()})}function nr(){var i=Oe;return Ze=Oe=!1,i}function rr(){var i,o,l;do for(;0<lt.length;)for(i=lt,lt=[],l=i.length,o=0;o<l;++o){var c=i[o];c[0].apply(null,c[1])}while(0<lt.length);Ze=Oe=!0}function vs(){var i=Be;Be=[],i.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=Ln.slice(0),l=o.length;l;)o[--l]()}function si(i){return new ae(ie,!1,i)}function ut(i,o){var l=fe;return function(){var c=nr(),d=fe;try{return mn(l,!0),i.apply(this,arguments)}catch(p){o&&o(p)}finally{mn(d,!1),c&&rr()}}}R(ae.prototype,{then:gs,_then:function(i,o){ms(this,new ua(null,null,i,o,fe))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,l=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?l:si)(c)}):this.then(null,function(c){return(c&&c.name===o?l:si)(c)})},finally:function(i){return this.then(function(o){return ae.resolve(i()).then(function(){return o})},function(o){return ae.resolve(i()).then(function(){return si(o)})})},timeout:function(i,o){var l=this;return i<1/0?new ae(function(c,d){var p=setTimeout(function(){return d(new q.Timeout(o))},i);l.then(c,d).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(ae.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=ca(),R(ae,{all:function(){var i=nt.apply(null,arguments).map(li);return new ae(function(o,l){i.length===0&&o([]);var c=i.length;i.forEach(function(d,p){return ae.resolve(d).then(function(m){i[p]=m,--c||o(i)},l)})})},resolve:function(i){return i instanceof ae?i:i&&typeof i.then=="function"?new ae(function(o,l){i.then(o,l)}):new ae(ie,!0,i)},reject:si,race:function(){var i=nt.apply(null,arguments).map(li);return new ae(function(o,l){i.map(function(c){return ae.resolve(c).then(o,l)})})},PSD:{get:function(){return fe},set:function(i){return fe=i}},totalEchoes:{get:function(){return ui}},newPSD:gn,usePSD:Mn,scheduler:{get:function(){return Ae},set:function(i){Ae=i}},rejectionMapper:{get:function(){return ht},set:function(i){ht=i}},follow:function(i,o){return new ae(function(l,c){return gn(function(d,p){var m=fe;m.unhandleds=[],m.onunhandled=p,m.finalize=D(function(){var _,S=this;_=function(){S.unhandleds.length===0?d():p(S.unhandleds[0])},Ln.push(function x(){_(),Ln.splice(Ln.indexOf(x),1)}),++mt,Ae(function(){--mt==0&&vs()},[])},m.finalize),i()},o,l,c)})}}),pe&&(pe.allSettled&&se(ae,"allSettled",function(){var i=nt.apply(null,arguments).map(li);return new ae(function(o){i.length===0&&o([]);var l=i.length,c=new Array(l);i.forEach(function(d,p){return ae.resolve(d).then(function(m){return c[p]={status:"fulfilled",value:m}},function(m){return c[p]={status:"rejected",reason:m}}).then(function(){return--l||o(c)})})})}),pe.any&&typeof AggregateError<"u"&&se(ae,"any",function(){var i=nt.apply(null,arguments).map(li);return new ae(function(o,l){i.length===0&&l(new AggregateError([]));var c=i.length,d=new Array(c);i.forEach(function(p,m){return ae.resolve(p).then(function(_){return o(_)},function(_){d[m]=_,--c||l(new AggregateError(d))})})})}));var vt={awaits:0,echoes:0,id:0},_c=0,oi=[],ai=0,ui=0,bc=0;function gn(i,o,l,c){var d=fe,p=Object.create(d);return p.parent=d,p.ref=0,p.global=!1,p.id=++bc,et.env,p.env=ke?{Promise:ae,PromiseProp:{value:ae,configurable:!0,writable:!0},all:ae.all,race:ae.race,allSettled:ae.allSettled,any:ae.any,resolve:ae.resolve,reject:ae.reject}:{},o&&f(p,o),++d.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Mn(p,i,l,c),p.ref===0&&p.finalize(),c}function ir(){return vt.id||(vt.id=++_c),++vt.awaits,vt.echoes+=ee,vt.id}function yn(){return!!vt.awaits&&(--vt.awaits==0&&(vt.id=0),vt.echoes=vt.awaits*ee,!0)}function li(i){return vt.echoes&&i&&i.constructor===pe?(ir(),i.then(function(o){return yn(),o},function(o){return yn(),dt(o)})):i}function wc(){var i=oi[oi.length-1];oi.pop(),mn(i,!1)}function mn(i,o){var l,c=fe;(o?!vt.echoes||ai++&&i===fe:!ai||--ai&&i===fe)||queueMicrotask(o?(function(d){++ui,vt.echoes&&--vt.echoes!=0||(vt.echoes=vt.awaits=vt.id=0),oi.push(fe),mn(d,!0)}).bind(null,i):wc),i!==fe&&(fe=i,c===et&&(et.env=ca()),ke&&(l=et.env.Promise,o=i.env,(c.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),l.all=o.all,l.race=o.race,l.resolve=o.resolve,l.reject=o.reject,o.allSettled&&(l.allSettled=o.allSettled),o.any&&(l.any=o.any))))}function ca(){var i=a.Promise;return ke?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Mn(i,o,l,c,d){var p=fe;try{return mn(i,!0),o(l,c,d)}finally{mn(p,!1)}}function ha(i,o,l,c){return typeof i!="function"?i:function(){var d=fe;l&&ir(),mn(o,!0);try{return i.apply(this,arguments)}finally{mn(d,!1),c&&queueMicrotask(yn)}}}function _s(i){Promise===pe&&vt.echoes===0?ai===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Ht).indexOf("[native code]")===-1&&(ir=yn=be);var dt=ae.reject,Fn="",an="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fa="String expected.",sr=[],ci="__dbnames",bs="readonly",ws="readwrite";function Un(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var da={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function hi(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=ye(o))[i],o}}function pa(){throw q.Type()}function Ne(i,o){try{var l=ga(i),c=ga(o);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x)if(d[x]!==p[x])return d[x]<p[x]?-1:1;return m===_?0:m<_?-1:1}(ya(i),ya(o));case"Array":return function(d,p){for(var m=d.length,_=p.length,S=m<_?m:_,x=0;x<S;++x){var T=Ne(d[x],p[x]);if(T!==0)return T}return m===_?0:m<_?-1:1}(i,o)}}catch{}return NaN}function ga(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=ot(i),i==="ArrayBuffer"?"binary":i)}function ya(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var ma=(st.prototype._trans=function(i,o,l){var c=this._tx||fe.trans,d=this.name,p=H&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function m(x,T,w){if(!w.schema[d])throw new q.NotFound("Table "+d+" not part of transaction");return o(w.idbtrans,w)}var _=nr();try{var S=c&&c.db._novip===this.db._novip?c===fe.trans?c._promise(i,m,l):gn(function(){return c._promise(i,m,l)},{trans:c,transless:fe.transless||fe}):function x(T,w,C,E){if(T.idbdb&&(T._state.openComplete||fe.letThrough||T._vip)){var P=T._createTransaction(w,C,T._dbSchema);try{P.create(),T._state.PR1398_maxLoop=3}catch(A){return A.name===Xe.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,E)})):dt(A)}return P._promise(w,function(A,O){return gn(function(){return fe.trans=P,E(A,O,P)})}).then(function(A){if(w==="readwrite")try{P.idbtrans.commit()}catch{}return w==="readonly"?A:P._completion.then(function(){return A})})}if(T._state.openComplete)return dt(new q.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return dt(new q.DatabaseClosed);T.open().catch(be)}return T._state.dbReadyPromise.then(function(){return x(T,w,C,E)})}(this.db,i,[this.name],m);return p&&(S._consoleTask=p,S=S.catch(function(x){return console.trace(x),dt(x)})),S}finally{_&&rr()}},st.prototype.get=function(i,o){var l=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?dt(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return l.core.get({trans:c,key:i}).then(function(d){return l.hook.reading.fire(d)})}).then(o)},st.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(h(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=u(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&o.every(function(T){return 0<=S.keyPath.indexOf(T)})){for(var x=0;x<o.length;++x)if(o.indexOf(S.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(S,x){return S.keyPath.length-x.keyPath.length})[0];if(l&&this.db._maxKey!==Fn){var m=l.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(x){return i[x]}))}!l&&H&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName,d=this.db._deps.indexedDB;function p(S,x){return d.cmp(S,x)===0}var _=o.reduce(function(C,x){var T=C[0],w=C[1],C=c[x],E=i[x];return[T||C,T||!C?Un(w,C&&C.multi?function(P){return P=Ye(P,x),h(P)&&P.some(function(A){return p(E,A)})}:function(P){return p(E,Ye(P,x))}):w]},[null,null]),m=_[0],_=_[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(_):l?this.filter(_):this.where(o).equals("")},st.prototype.filter=function(i){return this.toCollection().and(i)},st.prototype.count=function(i){return this.toCollection().count(i)},st.prototype.offset=function(i){return this.toCollection().offset(i)},st.prototype.limit=function(i){return this.toCollection().limit(i)},st.prototype.each=function(i){return this.toCollection().each(i)},st.prototype.toArray=function(i){return this.toCollection().toArray(i)},st.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},st.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,h(i)?"[".concat(i.join("+"),"]"):i))},st.prototype.reverse=function(){return this.toCollection().reverse()},st.prototype.mapToClass=function(i){var o,l=this.db,c=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof pa&&(function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function T(){this.constructor=S}n(S,x),S.prototype=x===null?Object.create(x):(T.prototype=x.prototype,new T)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},i=d);for(var p=new Set,m=i.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(S){return p.add(S)});function _(S){if(!S)return S;var x,T=Object.create(i.prototype);for(x in S)if(!p.has(x))try{T[x]=S[x]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),i},st.prototype.defineClass=function(){return this.mapToClass(function(i){f(this,i)})},st.prototype.add=function(i,o){var l=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,m=i;return p&&d&&(m=hi(p)(i)),this._trans("readwrite",function(_){return l.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[m]})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{_e(i,p,_)}catch{}return _})},st.prototype.update=function(i,o){return typeof i!="object"||h(i)?this.where(":id").equals(i).modify(o):(i=Ye(i,this.schema.primKey.keyPath),i===void 0?dt(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},st.prototype.put=function(i,o){var l=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,m=i;return p&&d&&(m=hi(p)(i)),this._trans("readwrite",function(_){return l.core.mutate({trans:_,type:"put",values:[m],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?ae.reject(_.failures[0]):_.lastResult}).then(function(_){if(p)try{_e(i,p,_)}catch{}return _})},st.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"delete",keys:[i]})}).then(function(l){return l.numFailures?ae.reject(l.failures[0]):void 0})},st.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:da})}).then(function(o){return o.numFailures?ae.reject(o.failures[0]):void 0})},st.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(l){return o.core.getMany({keys:i,trans:l}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},st.prototype.bulkAdd=function(i,o,l){var c=this,d=Array.isArray(o)?o:void 0,p=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(m){var x=c.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(hi(x)):i;return c.core.mutate({trans:m,type:"add",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new Ve("".concat(c.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),P)})})},st.prototype.bulkPut=function(i,o,l){var c=this,d=Array.isArray(o)?o:void 0,p=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(m){var x=c.schema.primKey,_=x.auto,x=x.keyPath;if(x&&d)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,x=x&&_?i.map(hi(x)):i;return c.core.mutate({trans:m,type:"put",keys:d,values:x,wantResults:p}).then(function(P){var w=P.numFailures,C=P.results,E=P.lastResult,P=P.failures;if(w===0)return p?C:E;throw new Ve("".concat(c.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),P)})})},st.prototype.bulkUpdate=function(i){var o=this,l=this.core,c=i.map(function(m){return m.key}),d=i.map(function(m){return m.changes}),p=[];return this._trans("readwrite",function(m){return l.getMany({trans:m,keys:c,cache:"clone"}).then(function(_){var S=[],x=[];i.forEach(function(w,C){var E=w.key,P=w.changes,A=_[C];if(A){for(var O=0,$=Object.keys(P);O<$.length;O++){var L=$[O],M=P[L];if(L===o.schema.primKey.keyPath){if(Ne(M,E)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else _e(A,L,M)}p.push(C),S.push(E),x.push(A)}});var T=S.length;return l.mutate({trans:m,type:"put",keys:S,values:x,updates:{keys:c,changeSpecs:d}}).then(function(w){var C=w.numFailures,E=w.failures;if(C===0)return T;for(var P=0,A=Object.keys(E);P<A.length;P++){var O,$=A[P],L=p[Number($)];L!=null&&(O=E[$],delete E[$],E[L]=O)}throw new Ve("".concat(o.name,".bulkUpdate(): ").concat(C," of ").concat(T," operations failed"),E)})})})},st.prototype.bulkDelete=function(i){var o=this,l=i.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:i})}).then(function(m){var d=m.numFailures,p=m.lastResult,m=m.failures;if(d===0)return p;throw new Ve("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(l," operations failed"),m)})},st);function st(){}function Pr(i){function o(m,_){if(_){for(var S=arguments.length,x=new Array(S-1);--S;)x[S-1]=arguments[S];return l[m].subscribe.apply(null,x),i}if(typeof m=="string")return l[m]}var l={};o.addEventType=p;for(var c=1,d=arguments.length;c<d;++c)p(arguments[c]);return o;function p(m,_,S){if(typeof m!="object"){var x;_=_||X;var T={subscribers:[],fire:S=S||be,subscribe:function(w){T.subscribers.indexOf(w)===-1&&(T.subscribers.push(w),T.fire=_(T.fire,w))},unsubscribe:function(w){T.subscribers=T.subscribers.filter(function(C){return C!==w}),T.fire=T.subscribers.reduce(_,S)}};return l[m]=o[m]=T}u(x=m).forEach(function(w){var C=x[w];if(h(C))p(w,x[w][0],x[w][1]);else{if(C!=="asap")throw new q.InvalidArgument("Invalid event config");var E=p(w,v,function(){for(var P=arguments.length,A=new Array(P);P--;)A[P]=arguments[P];E.subscribers.forEach(function(O){Le(function(){O.apply(null,A)})})})}})}}function Tr(i,o){return le(o).from({prototype:i}),o}function or(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function ks(i,o){i.filter=Un(i.filter,o)}function xs(i,o,l){var c=i.replayFilter;i.replayFilter=c?function(){return Un(c(),o())}:o,i.justLimit=l&&!c}function fi(i,o){if(i.isPrimKey)return o.primaryKey;var l=o.getIndexByKeyPath(i.index);if(!l)throw new q.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return l}function va(i,o,l){var c=fi(i,o.schema);return o.openCursor({trans:l,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:c,range:i.range}})}function di(i,o,l,c){var d=i.replayFilter?Un(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},m=function(_,S,x){var T,w;d&&!d(S,x,function(C){return S.stop(C)},function(C){return S.fail(C)})||((w=""+(T=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(T)),b(p,w)||(p[w]=!0,o(_,S,x)))};return Promise.all([i.or._iterate(m,l),_a(va(i,c,l),i.algorithm,m,!i.keysOnly&&i.valueMapper)])}return _a(va(i,c,l),Un(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function _a(i,o,l,c){var d=ut(c?function(p,m,_){return l(c(p),m,_)}:l);return i.then(function(p){if(p)return p.start(function(){var m=function(){return p.continue()};o&&!o(p,function(_){return m=_},function(_){p.stop(_),m=be},function(_){p.fail(_),m=be})||d(p.value,p,function(_){return m=_}),m()})})}var un=Symbol(),Cr=(ba.prototype.execute=function(i){if(this.add!==void 0){var o=this.add;if(h(o))return s(s([],h(i)?i:[],!0),o).sort();if(typeof o=="number")return(Number(i)||0)+o;if(typeof o=="bigint")try{return BigInt(i)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var l=this.remove;if(h(l))return h(i)?i.filter(function(c){return!l.includes(c)}).sort():[];if(typeof l=="number")return Number(i)-l;if(typeof l=="bigint")try{return BigInt(i)-l}catch{return BigInt(0)-l}throw new TypeError("Invalid subtrahend ".concat(l))}return o=(o=this.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof i=="string"&&i.startsWith(o)?this.replacePrefix[1]+i.substring(o.length):i},ba);function ba(i){Object.assign(this,i)}var kc=(qe.prototype._read=function(i,o){var l=this._ctx;return l.error?l.table._trans(null,dt.bind(null,l.error)):l.table._trans("readonly",i).then(o)},qe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,dt.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},qe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=Un(o.algorithm,i)},qe.prototype._iterate=function(i,o){return di(this._ctx,i,o,this._ctx.table.core)},qe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return i&&f(l,i),o._ctx=l,o},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(i){var o=this._ctx;return this._read(function(l){return di(o,i,l,o.table.core)})},qe.prototype.count=function(i){var o=this;return this._read(function(l){var c=o._ctx,d=c.table.core;if(or(c,!0))return d.count({trans:l,query:{index:fi(c,d.schema),range:c.range}}).then(function(m){return Math.min(m,c.limit)});var p=0;return di(c,function(){return++p,!1},l,d).then(function(){return p})}).then(i)},qe.prototype.sortBy=function(i,o){var l=i.split(".").reverse(),c=l[0],d=l.length-1;function p(S,x){return x?p(S[l[x]],x-1):S[c]}var m=this._ctx.dir==="next"?1:-1;function _(S,x){return S=p(S,d),x=p(x,d),S<x?-m:x<S?m:0}return this.toArray(function(S){return S.sort(_)}).then(o)},qe.prototype.toArray=function(i){var o=this;return this._read(function(l){var c=o._ctx;if(c.dir==="next"&&or(c,!0)&&0<c.limit){var d=c.valueMapper,p=fi(c,c.table.core.schema);return c.table.core.query({trans:l,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var m=[];return di(c,function(_){return m.push(_)},l,c.table.core).then(function(){return m})},i)},qe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,or(o)?xs(o,function(){var l=i;return function(c,d){return l===0||(l===1?--l:d(function(){c.advance(l),l=0}),!1)}}):xs(o,function(){var l=i;return function(){return--l<0}})),this},qe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),xs(this._ctx,function(){var o=i;return function(l,c,d){return--o<=0&&c(d),0<=o}},!0),this},qe.prototype.until=function(i,o){return ks(this._ctx,function(l,c,d){return!i(l.value)||(c(d),o)}),this},qe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},qe.prototype.last=function(i){return this.reverse().first(i)},qe.prototype.filter=function(i){var o;return ks(this._ctx,function(l){return i(l.value)}),(o=this._ctx).isMatch=Un(o.isMatch,i),this},qe.prototype.and=function(i){return this.filter(i)},qe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){i(c.key,c)})},qe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},qe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){i(c.primaryKey,c)})},qe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,d){l.push(d.key)}).then(function(){return l}).then(i)},qe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&or(o,!0)&&0<o.limit)return this._read(function(c){var d=fi(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){return c.result}).then(i);o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,d){l.push(d.primaryKey)}).then(function(){return l}).then(i)},qe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},qe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},qe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},qe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return ks(this._ctx,function(d){var c=d.primaryKey.toString(),d=b(o,c);return o[c]=!0,!d}),this},qe.prototype.modify=function(i){var o=this,l=this._ctx;return this._write(function(c){var d,p,m;m=typeof i=="function"?i:(d=u(i),p=d.length,function(O){for(var $=!1,L=0;L<p;++L){var M=d[L],U=i[M],G=Ye(O,M);U instanceof Cr?(_e(O,M,U.execute(G)),$=!0):G!==U&&(_e(O,M,U),$=!0)}return $});function _(O,M){var L=M.failures,M=M.numFailures;P+=O-M;for(var U=0,G=u(L);U<G.length;U++){var ne=G[U];E.push(L[ne])}}var S=l.table.core,x=S.schema.primaryKey,T=x.outbound,w=x.extractKey,C=o.db._options.modifyChunkSize||200,E=[],P=0,A=[];return o.clone().primaryKeys().then(function(O){function $(M){var U=Math.min(C,O.length-M);return S.getMany({trans:c,keys:O.slice(M,M+U),cache:"immutable"}).then(function(G){for(var ne=[],Q=[],te=T?[]:null,re=[],z=0;z<U;++z){var Ee=G[z],Pe={value:ye(Ee),primKey:O[M+z]};m.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?re.push(O[M+z]):T||Ne(w(Ee),w(Pe.value))===0?(Q.push(Pe.value),T&&te.push(O[M+z])):(re.push(O[M+z]),ne.push(Pe.value)))}return Promise.resolve(0<ne.length&&S.mutate({trans:c,type:"add",values:ne}).then(function(Fe){for(var Ie in Fe.failures)re.splice(parseInt(Ie),1);_(ne.length,Fe)})).then(function(){return(0<Q.length||L&&typeof i=="object")&&S.mutate({trans:c,type:"put",keys:te,values:Q,criteria:L,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<M}).then(function(Fe){return _(Q.length,Fe)})}).then(function(){return(0<re.length||L&&i===Es)&&S.mutate({trans:c,type:"delete",keys:re,criteria:L,isAdditionalChunk:0<M}).then(function(Fe){return _(re.length,Fe)})}).then(function(){return O.length>M+U&&$(M+C)})})}var L=or(l)&&l.limit===1/0&&(typeof i!="function"||i===Es)&&{index:l.index,range:l.range};return $(0).then(function(){if(0<E.length)throw new Je("Error modifying one or more objects",E,P,A);return O.length})})})},qe.prototype.delete=function(){var i=this._ctx,o=i.range;return or(i)&&(i.isPrimKey||o.type===3)?this._write(function(l){var c=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:l,query:{index:c,range:d}}).then(function(p){return i.table.core.mutate({trans:l,type:"deleteRange",range:d}).then(function(m){var _=m.failures;if(m.lastResult,m.results,m=m.numFailures,m)throw new Je("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),p-m);return p-m})})}):this.modify(Es)},qe);function qe(){}var Es=function(i,o){return o.value=null};function xc(i,o){return i<o?-1:i===o?0:1}function Ec(i,o){return o<i?-1:i===o?0:1}function Ft(i,o,l){return i=i instanceof ka?new i.Collection(i):i,i._ctx.error=new(l||TypeError)(o),i}function ar(i){return new i.Collection(i,function(){return wa("")}).limit(0)}function pi(i,o,l,c){var d,p,m,_,S,x,T,w=l.length;if(!l.every(function(P){return typeof P=="string"}))return Ft(i,fa);function C(P){d=P==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},p=P==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},m=P==="next"?xc:Ec;var A=l.map(function(O){return{lower:p(O),upper:d(O)}}).sort(function(O,$){return m(O.lower,$.lower)});_=A.map(function(O){return O.upper}),S=A.map(function(O){return O.lower}),T=(x=P)==="next"?"":c}C("next"),i=new i.Collection(i,function(){return vn(_[0],S[w-1]+c)}),i._ondirectionchange=function(P){C(P)};var E=0;return i._addAlgorithm(function(P,A,O){var $=P.key;if(typeof $!="string")return!1;var L=p($);if(o(L,S,E))return!0;for(var M=null,U=E;U<w;++U){var G=function(ne,Q,te,re,z,Ee){for(var Pe=Math.min(ne.length,re.length),Fe=-1,Ie=0;Ie<Pe;++Ie){var Gt=Q[Ie];if(Gt!==re[Ie])return z(ne[Ie],te[Ie])<0?ne.substr(0,Ie)+te[Ie]+te.substr(Ie+1):z(ne[Ie],re[Ie])<0?ne.substr(0,Ie)+re[Ie]+te.substr(Ie+1):0<=Fe?ne.substr(0,Fe)+Q[Fe]+te.substr(Fe+1):null;z(ne[Ie],Gt)<0&&(Fe=Ie)}return Pe<re.length&&Ee==="next"?ne+te.substr(ne.length):Pe<ne.length&&Ee==="prev"?ne.substr(0,te.length):Fe<0?null:ne.substr(0,Fe)+re[Fe]+te.substr(Fe+1)}($,L,_[U],S[U],m,x);G===null&&M===null?E=U+1:(M===null||0<m(M,G))&&(M=G)}return A(M!==null?function(){P.continue(M+T)}:O),!1}),i}function vn(i,o,l,c){return{type:2,lower:i,upper:o,lowerOpen:l,upperOpen:c}}function wa(i){return{type:1,lower:i,upper:i}}var ka=(Object.defineProperty(_t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_t.prototype.between=function(i,o,l,c){l=l!==!1,c=c===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(l||c)&&(!l||!c)?ar(this):new this.Collection(this,function(){return vn(i,o,!l,!c)})}catch{return Ft(this,an)}},_t.prototype.equals=function(i){return i==null?Ft(this,an):new this.Collection(this,function(){return wa(i)})},_t.prototype.above=function(i){return i==null?Ft(this,an):new this.Collection(this,function(){return vn(i,void 0,!0)})},_t.prototype.aboveOrEqual=function(i){return i==null?Ft(this,an):new this.Collection(this,function(){return vn(i,void 0,!1)})},_t.prototype.below=function(i){return i==null?Ft(this,an):new this.Collection(this,function(){return vn(void 0,i,!1,!0)})},_t.prototype.belowOrEqual=function(i){return i==null?Ft(this,an):new this.Collection(this,function(){return vn(void 0,i)})},_t.prototype.startsWith=function(i){return typeof i!="string"?Ft(this,fa):this.between(i,i+Fn,!0,!0)},_t.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):pi(this,function(o,l){return o.indexOf(l[0])===0},[i],Fn)},_t.prototype.equalsIgnoreCase=function(i){return pi(this,function(o,l){return o===l[0]},[i],"")},_t.prototype.anyOfIgnoreCase=function(){var i=nt.apply(de,arguments);return i.length===0?ar(this):pi(this,function(o,l){return l.indexOf(o)!==-1},i,"")},_t.prototype.startsWithAnyOfIgnoreCase=function(){var i=nt.apply(de,arguments);return i.length===0?ar(this):pi(this,function(o,l){return l.some(function(c){return o.indexOf(c)===0})},i,Fn)},_t.prototype.anyOf=function(){var i=this,o=nt.apply(de,arguments),l=this._cmp;try{o.sort(l)}catch{return Ft(this,an)}if(o.length===0)return ar(this);var c=new this.Collection(this,function(){return vn(o[0],o[o.length-1])});c._ondirectionchange=function(p){l=p==="next"?i._ascending:i._descending,o.sort(l)};var d=0;return c._addAlgorithm(function(p,m,_){for(var S=p.key;0<l(S,o[d]);)if(++d===o.length)return m(_),!1;return l(S,o[d])===0||(m(function(){p.continue(o[d])}),!1)}),c},_t.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_t.prototype.noneOf=function(){var i=nt.apply(de,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ft(this,an)}var o=i.reduce(function(l,c){return l?l.concat([[l[l.length-1][1],c]]):[[-1/0,c]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},_t.prototype.inAnyRange=function($,o){var l=this,c=this._cmp,d=this._ascending,p=this._descending,m=this._min,_=this._max;if($.length===0)return ar(this);if(!$.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&d(L[0],L[1])<=0}))return Ft(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var S=!o||o.includeLowers!==!1,x=o&&o.includeUppers===!0,T,w=d;function C(L,M){return w(L[0],M[0])}try{(T=$.reduce(function(L,M){for(var U=0,G=L.length;U<G;++U){var ne=L[U];if(c(M[0],ne[1])<0&&0<c(M[1],ne[0])){ne[0]=m(ne[0],M[0]),ne[1]=_(ne[1],M[1]);break}}return U===G&&L.push(M),L},[])).sort(C)}catch{return Ft(this,an)}var E=0,P=x?function(L){return 0<d(L,T[E][1])}:function(L){return 0<=d(L,T[E][1])},A=S?function(L){return 0<p(L,T[E][0])}:function(L){return 0<=p(L,T[E][0])},O=P,$=new this.Collection(this,function(){return vn(T[0][0],T[T.length-1][1],!S,!x)});return $._ondirectionchange=function(L){w=L==="next"?(O=P,d):(O=A,p),T.sort(C)},$._addAlgorithm(function(L,M,U){for(var G,ne=L.key;O(ne);)if(++E===T.length)return M(U),!1;return!P(G=ne)&&!A(G)||(l._cmp(ne,T[E][1])===0||l._cmp(ne,T[E][0])===0||M(function(){w===d?L.continue(T[E][0]):L.continue(T[E][1])}),!1)}),$},_t.prototype.startsWithAnyOf=function(){var i=nt.apply(de,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?ar(this):this.inAnyRange(i.map(function(o){return[o,o+Fn]})):Ft(this,"startsWithAnyOf() only works with strings")},_t);function _t(){}function Zt(i){return ut(function(o){return Ar(o),i(o.target.error),!1})}function Ar(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var jr="storagemutated",Ss="x-storagemutated-1",_n=Pr(null,jr),Sc=(en.prototype._lock=function(){return ce(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},en.prototype._unlock=function(){if(ce(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Mn(i[1],i[0])}catch{}}return this},en.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},en.prototype.create=function(i){var o=this;if(!this.mode)return this;var l=this.db.idbdb,c=this.db._state.dbOpenError;if(ce(!this.idbtrans),!i&&!l)switch(c&&c.name){case"DatabaseClosedError":throw new q.DatabaseClosed(c);case"MissingAPIError":throw new q.MissingAPI(c.message,c);default:throw new q.OpenFailed(c)}if(!this.active)throw new q.TransactionInactive;return ce(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(d){Ar(d),o._reject(i.error)}),i.onabort=ut(function(d){Ar(d),o.active&&o._reject(new q.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=ut(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&_n.storagemutated.fire(i.mutatedParts)}),this},en.prototype._promise=function(i,o,l){var c=this;if(i==="readwrite"&&this.mode!=="readwrite")return dt(new q.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new q.TransactionInactive);if(this._locked())return new ae(function(p,m){c._blockedFuncs.push([function(){c._promise(i,o,l).then(p,m)},fe])});if(l)return gn(function(){var p=new ae(function(m,_){c._lock();var S=o(m,_,c);S&&S.then&&S.then(m,_)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new ae(function(p,m){var _=o(p,m,c);_&&_.then&&_.then(p,m)});return d._lib=!0,d},en.prototype._root=function(){return this.parent?this.parent._root():this},en.prototype.waitFor=function(i){var o,l=this._root(),c=ae.resolve(i);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return c}):(l._waitingFor=c,l._waitingQueue=[],o=l.idbtrans.objectStore(l.storeNames[0]),function p(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(o.get(-1/0).onsuccess=p)}());var d=l._waitingFor;return new ae(function(p,m){c.then(function(_){return l._waitingQueue.push(ut(p.bind(null,_)))},function(_){return l._waitingQueue.push(ut(m.bind(null,_)))}).finally(function(){l._waitingFor===d&&(l._waitingFor=null)})})},en.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},en.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,i))return o[i];var l=this.schema[i];if(!l)throw new q.NotFound("Table "+i+" not part of transaction");return l=new this.db.Table(i,l,this),l.core=this.db.core.table(i),o[i]=l},en);function en(){}function Os(i,o,l,c,d,p,m){return{name:i,keyPath:o,unique:l,multi:c,auto:d,compound:p,src:(l&&!m?"&":"")+(c?"*":"")+(d?"++":"")+xa(o)}}function xa(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function Ps(i,o,l){return{name:i,primKey:o,indexes:l,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},l.reduce(function(d,p,m){return m=c(p,m),m&&(d[m[0]]=m[1]),d},{}))};var c}var Rr=function(i){try{return i.only([[]]),Rr=function(){return[[]]},[[]]}catch{return Rr=function(){return Fn},Fn}};function Ts(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(l){return l[o]}:function(l){return Ye(l,o)}:function(l){return Ye(l,i)};var o}function Ea(i){return[].slice.call(i)}var Oc=0;function Ir(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Pc(i,o,S){function c(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=O.lower,P=O.upper,A=O.lowerOpen,O=O.upperOpen;return E===void 0?P===void 0?null:o.upperBound(P,!!O):P===void 0?o.lowerBound(E,!!A):o.bound(E,P,!!A,!!O)}function d(C){var E,P=C.name;return{name:P,schema:C,mutate:function(A){var O=A.trans,$=A.type,L=A.keys,M=A.values,U=A.range;return new Promise(function(G,ne){G=ut(G);var Q=O.objectStore(P),te=Q.keyPath==null,re=$==="put"||$==="add";if(!re&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var z,Ee=(L||M||{length:1}).length;if(L&&M&&L.length!==M.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Pe(Ct){++Gt,Ar(Ct)}var Fe=[],Ie=[],Gt=0;if($==="deleteRange"){if(U.type===4)return G({numFailures:Gt,failures:Ie,results:[],lastResult:void 0});U.type===3?Fe.push(z=Q.clear()):Fe.push(z=Q.delete(c(U)))}else{var te=re?te?[M,L]:[M,null]:[L,null],De=te[0],wt=te[1];if(re)for(var kt=0;kt<Ee;++kt)Fe.push(z=wt&&wt[kt]!==void 0?Q[$](De[kt],wt[kt]):Q[$](De[kt])),z.onerror=Pe;else for(kt=0;kt<Ee;++kt)Fe.push(z=Q[$](De[kt])),z.onerror=Pe}function Pi(Ct){Ct=Ct.target.result,Fe.forEach(function(Nn,Ws){return Nn.error!=null&&(Ie[Ws]=Nn.error)}),G({numFailures:Gt,failures:Ie,results:$==="delete"?L:Fe.map(function(Nn){return Nn.result}),lastResult:Ct})}z.onerror=function(Ct){Pe(Ct),Pi(Ct)},z.onsuccess=Pi})},getMany:function(A){var O=A.trans,$=A.keys;return new Promise(function(L,M){L=ut(L);for(var U,G=O.objectStore(P),ne=$.length,Q=new Array(ne),te=0,re=0,z=function(Fe){Fe=Fe.target,Q[Fe._pos]=Fe.result,++re===te&&L(Q)},Ee=Zt(M),Pe=0;Pe<ne;++Pe)$[Pe]!=null&&((U=G.get($[Pe]))._pos=Pe,U.onsuccess=z,U.onerror=Ee,++te);te===0&&L(Q)})},get:function(A){var O=A.trans,$=A.key;return new Promise(function(L,M){L=ut(L);var U=O.objectStore(P).get($);U.onsuccess=function(G){return L(G.target.result)},U.onerror=Zt(M)})},query:(E=x,function(A){return new Promise(function(O,$){O=ut(O);var L,M,U,te=A.trans,G=A.values,ne=A.limit,z=A.query,Q=ne===1/0?void 0:ne,re=z.index,z=z.range,te=te.objectStore(P),re=re.isPrimaryKey?te:te.index(re.name),z=c(z);if(ne===0)return O({result:[]});E?((Q=G?re.getAll(z,Q):re.getAllKeys(z,Q)).onsuccess=function(Ee){return O({result:Ee.target.result})},Q.onerror=Zt($)):(L=0,M=!G&&"openKeyCursor"in re?re.openKeyCursor(z):re.openCursor(z),U=[],M.onsuccess=function(Ee){var Pe=M.result;return Pe?(U.push(G?Pe.value:Pe.primaryKey),++L===ne?O({result:U}):void Pe.continue()):O({result:U})},M.onerror=Zt($))})}),openCursor:function(A){var O=A.trans,$=A.values,L=A.query,M=A.reverse,U=A.unique;return new Promise(function(G,ne){G=ut(G);var re=L.index,Q=L.range,te=O.objectStore(P),te=re.isPrimaryKey?te:te.index(re.name),re=M?U?"prevunique":"prev":U?"nextunique":"next",z=!$&&"openKeyCursor"in te?te.openKeyCursor(c(Q),re):te.openCursor(c(Q),re);z.onerror=Zt(ne),z.onsuccess=ut(function(Ee){var Pe,Fe,Ie,Gt,De=z.result;De?(De.___id=++Oc,De.done=!1,Pe=De.continue.bind(De),Fe=(Fe=De.continuePrimaryKey)&&Fe.bind(De),Ie=De.advance.bind(De),Gt=function(){throw new Error("Cursor not stopped")},De.trans=O,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=ut(ne),De.next=function(){var wt=this,kt=1;return this.start(function(){return kt--?wt.continue():wt.stop()}).then(function(){return wt})},De.start=function(wt){function kt(){if(z.result)try{wt()}catch(Ct){De.fail(Ct)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var Pi=new Promise(function(Ct,Nn){Ct=ut(Ct),z.onerror=Zt(Nn),De.fail=Nn,De.stop=function(Ws){De.stop=De.continue=De.continuePrimaryKey=De.advance=Gt,Ct(Ws)}});return z.onsuccess=ut(function(Ct){z.onsuccess=kt,kt()}),De.continue=Pe,De.continuePrimaryKey=Fe,De.advance=Ie,kt(),Pi},G(De)):G(null)},ne)})},count:function(A){var O=A.query,$=A.trans,L=O.index,M=O.range;return new Promise(function(U,G){var ne=$.objectStore(P),Q=L.isPrimaryKey?ne:ne.index(L.name),ne=c(M),Q=ne?Q.count(ne):Q.count();Q.onsuccess=ut(function(te){return U(te.target.result)}),Q.onerror=Zt(G)})}}}var p,m,_,T=(m=S,_=Ea((p=i).objectStoreNames),{schema:{name:p.name,tables:_.map(function(C){return m.objectStore(C)}).map(function(C){var E=C.keyPath,O=C.autoIncrement,P=h(E),A={},O={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:P,keyPath:E,autoIncrement:O,unique:!0,extractKey:Ts(E)},indexes:Ea(C.indexNames).map(function($){return C.index($)}).map(function(U){var L=U.name,M=U.unique,G=U.multiEntry,U=U.keyPath,G={name:L,compound:h(U),keyPath:U,unique:M,multiEntry:G,extractKey:Ts(U)};return A[Ir(U)]=G}),getIndexByKeyPath:function($){return A[Ir($)]}};return A[":id"]=O.primaryKey,E!=null&&(A[Ir(E)]=O.primaryKey),O})},hasGetAll:0<_.length&&"getAll"in m.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=T.schema,x=T.hasGetAll,T=S.tables.map(d),w={};return T.forEach(function(C){return w[C.name]=C}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(C){if(!w[C])throw new Error("Table '".concat(C,"' not found"));return w[C]},MIN_KEY:-1/0,MAX_KEY:Rr(o),schema:S}}function Tc(i,o,l,c){var d=l.IDBKeyRange;return l.indexedDB,{dbcore:(c=Pc(o,d,c),i.dbcore.reduce(function(p,m){return m=m.create,r(r({},p),m(p))},c))}}function gi(i,c){var l=c.db,c=Tc(i._middlewares,l,i._deps,c);i.core=c.dbcore,i.tables.forEach(function(d){var p=d.name;i.core.schema.tables.some(function(m){return m.name===p})&&(d.core=i.core.table(p),i[p]instanceof i.Table&&(i[p].core=d.core))})}function yi(i,o,l,c){l.forEach(function(d){var p=c[d];o.forEach(function(m){var _=function S(x,T){return ve(x,T)||(x=y(x))&&S(x,T)}(m,d);(!_||"value"in _&&_.value===void 0)&&(m===i.Transaction.prototype||m instanceof i.Transaction?se(m,d,{get:function(){return this.table(d)},set:function(S){V(this,d,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):m[d]=new i.Table(d,p))})})}function Cs(i,o){o.forEach(function(l){for(var c in l)l[c]instanceof i.Table&&delete l[c]})}function Cc(i,o){return i._cfg.version-o._cfg.version}function Ac(i,o,l,c){var d=i._dbSchema;l.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=Ps("$meta",Oa("")[0],[]),i._storeNames.push("$meta"));var p=i._createTransaction("readwrite",i._storeNames,d);p.create(l),p._completion.catch(c);var m=p._reject.bind(p),_=fe.transless||fe;gn(function(){return fe.trans=p,fe.transless=_,o!==0?(gi(i,l),x=o,((S=p).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(T){return T??x}):ae.resolve(x)).then(function(T){return C=T,E=p,P=l,A=[],T=(w=i)._versions,O=w._dbSchema=vi(0,w.idbdb,P),(T=T.filter(function($){return $._cfg.version>=C})).length!==0?(T.forEach(function($){A.push(function(){var L=O,M=$._cfg.dbschema;_i(w,L,P),_i(w,M,P),O=w._dbSchema=M;var U=As(L,M);U.add.forEach(function(re){js(P,re[0],re[1].primKey,re[1].indexes)}),U.change.forEach(function(re){if(re.recreate)throw new q.Upgrade("Not yet support for changing primary key");var z=P.objectStore(re.name);re.add.forEach(function(Ee){return mi(z,Ee)}),re.change.forEach(function(Ee){z.deleteIndex(Ee.name),mi(z,Ee)}),re.del.forEach(function(Ee){return z.deleteIndex(Ee)})});var G=$._cfg.contentUpgrade;if(G&&$._cfg.version>C){gi(w,P),E._memoizedTables={};var ne=I(M);U.del.forEach(function(re){ne[re]=L[re]}),Cs(w,[w.Transaction.prototype]),yi(w,[w.Transaction.prototype],u(ne),ne),E.schema=ne;var Q,te=Qe(G);return te&&ir(),U=ae.follow(function(){var re;(Q=G(E))&&te&&(re=yn.bind(null,null),Q.then(re,re))}),Q&&typeof Q.then=="function"?ae.resolve(Q):U.then(function(){return Q})}}),A.push(function(L){var M,U,G=$._cfg.dbschema;M=G,U=L,[].slice.call(U.db.objectStoreNames).forEach(function(ne){return M[ne]==null&&U.db.deleteObjectStore(ne)}),Cs(w,[w.Transaction.prototype]),yi(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),E.schema=w._dbSchema}),A.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===$._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(M){return M!=="$meta"})):L.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return A.length?ae.resolve(A.shift()(E.idbtrans)).then($):ae.resolve()}().then(function(){Sa(O,P)})):ae.resolve();var w,C,E,P,A,O}).catch(m)):(u(d).forEach(function(T){js(l,T,d[T].primKey,d[T].indexes)}),gi(i,l),void ae.follow(function(){return i.on.populate.fire(p)}).catch(m));var S,x})}function jc(i,o){Sa(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var l=vi(0,i.idbdb,o);_i(i,i._dbSchema,o);for(var c=0,d=As(l,i._dbSchema).change;c<d.length;c++){var p=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(m.name);m.add.forEach(function(S){H&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(S.src)),mi(_,S)})}(d[c]);if(typeof p=="object")return p.value}}function As(i,o){var l,c={del:[],add:[],change:[]};for(l in i)o[l]||c.del.push(l);for(l in o){var d=i[l],p=o[l];if(d){var m={name:l,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||d.primKey.auto!==p.primKey.auto)m.recreate=!0,c.change.push(m);else{var _=d.idxByName,S=p.idxByName,x=void 0;for(x in _)S[x]||m.del.push(x);for(x in S){var T=_[x],w=S[x];T?T.src!==w.src&&m.change.push(w):m.add.push(w)}(0<m.del.length||0<m.add.length||0<m.change.length)&&c.change.push(m)}}else c.add.push([l,p])}return c}function js(i,o,l,c){var d=i.db.createObjectStore(o,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(p){return mi(d,p)}),d}function Sa(i,o){u(i).forEach(function(l){o.db.objectStoreNames.contains(l)||(H&&console.debug("Dexie: Creating missing table",l),js(o,l,i[l].primKey,i[l].indexes))})}function mi(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function vi(i,o,l){var c={};return je(o.objectStoreNames,0).forEach(function(d){for(var p=l.objectStore(d),m=Os(xa(x=p.keyPath),x||"",!0,!1,!!p.autoIncrement,x&&typeof x!="string",!0),_=[],S=0;S<p.indexNames.length;++S){var T=p.index(p.indexNames[S]),x=T.keyPath,T=Os(T.name,x,!!T.unique,!!T.multiEntry,!1,x&&typeof x!="string",!1);_.push(T)}c[d]=Ps(d,m,_)}),c}function _i(i,o,l){for(var c=l.db.objectStoreNames,d=0;d<c.length;++d){var p=c[d],m=l.objectStore(p);i._hasGetAll="getAll"in m;for(var _=0;_<m.indexNames.length;++_){var S=m.indexNames[_],x=m.index(S).keyPath,T=typeof x=="string"?x:"["+je(x).join("+")+"]";!o[p]||(x=o[p].idxByName[T])&&(x.name=S,delete o[p].idxByName[T],o[p].idxByName[S]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Oa(i){return i.split(",").map(function(o,l){var c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Os(c,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),h(d),l===0)})}var Rc=(bi.prototype._parseStoresSpec=function(i,o){u(i).forEach(function(l){if(i[l]!==null){var c=Oa(i[l]),d=c.shift();if(d.unique=!0,d.multi)throw new q.Schema("Primary key cannot be multi-valued");c.forEach(function(p){if(p.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),o[l]=Ps(l,d,c)}})},bi.prototype.stores=function(l){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,l):l;var l=o._versions,c={},d={};return l.forEach(function(p){f(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,Cs(o,[o._allTables,o,o.Transaction.prototype]),yi(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],u(d),d),o._storeNames=u(d),this},bi.prototype.upgrade=function(i){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||be,i),this},bi);function bi(){}function Rs(i,o){var l=i._dbNamesDB;return l||(l=i._dbNamesDB=new ln(ci,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Is(i){return i&&typeof i.databases=="function"}function Ds(i){return gn(function(){return fe.letThrough=!0,i()})}function $s(i){return!("from"in i)}var Tt=function(i,o){if(!this){var l=new Tt;return i&&"d"in i&&f(l,i),l}f(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Dr(i,o,l){var c=Ne(o,l);if(!isNaN(c)){if(0<c)throw RangeError();if($s(i))return f(i,{from:o,to:l,d:1});var d=i.l,c=i.r;if(Ne(l,i.from)<0)return d?Dr(d,o,l):i.l={from:o,to:l,d:1,l:null,r:null},Ta(i);if(0<Ne(o,i.to))return c?Dr(c,o,l):i.r={from:o,to:l,d:1,l:null,r:null},Ta(i);Ne(o,i.from)<0&&(i.from=o,i.l=null,i.d=c?c.d+1:1),0<Ne(l,i.to)&&(i.to=l,i.r=null,i.d=i.l?i.l.d+1:1),l=!i.r,d&&!i.l&&$r(i,d),c&&l&&$r(i,c)}}function $r(i,o){$s(o)||function l(c,S){var p=S.from,m=S.to,_=S.l,S=S.r;Dr(c,p,m),_&&l(c,_),S&&l(c,S)}(i,o)}function Pa(i,o){var l=wi(o),c=l.next();if(c.done)return!1;for(var d=c.value,p=wi(i),m=p.next(d.from),_=m.value;!c.done&&!m.done;){if(Ne(_.from,d.to)<=0&&0<=Ne(_.to,d.from))return!0;Ne(d.from,_.from)<0?d=(c=l.next(_.from)).value:_=(m=p.next(d.from)).value}return!1}function wi(i){var o=$s(i)?null:{s:0,n:i};return{next:function(l){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&Ne(l,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||Ne(l,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Ta(i){var o,l,c=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((l=i.l)===null||l===void 0?void 0:l.d)||0),d=1<c?"r":c<-1?"l":"";d&&(o=d=="r"?"l":"r",l=r({},i),c=i[d],i.from=c.from,i.to=c.to,i[d]=c[d],l[d]=c[o],(i[o]=l).d=Ca(l)),i.d=Ca(i)}function Ca(l){var o=l.r,l=l.l;return(o?l?Math.max(o.d,l.d):o.d:l?l.d:0)+1}function ki(i,o){return u(o).forEach(function(l){i[l]?$r(i[l],o[l]):i[l]=function c(d){var p,m,_={};for(p in d)b(d,p)&&(m=d[p],_[p]=!m||typeof m!="object"||ue.has(m.constructor)?m:c(m));return _}(o[l])}),i}function Ls(i,o){return i.all||o.all||Object.keys(i).some(function(l){return o[l]&&Pa(o[l],i[l])})}R(Tt.prototype,((Ht={add:function(i){return $r(this,i),this},addKey:function(i){return Dr(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(l){return Dr(o,l,l)}),this},hasKey:function(i){var o=wi(this).next(i).value;return o&&Ne(o.from,i)<=0&&0<=Ne(o.to,i)}})[Se]=function(){return wi(this)},Ht));var Kn={},Ms={},Fs=!1;function xi(i){ki(Ms,i),Fs||(Fs=!0,setTimeout(function(){Fs=!1,Us(Ms,!(Ms={}))},0))}function Us(i,o){o===void 0&&(o=!1);var l=new Set;if(i.all)for(var c=0,d=Object.values(Kn);c<d.length;c++)Aa(m=d[c],i,l,o);else for(var p in i){var m,_=/^idb\:\/\/(.*)\/(.*)\//.exec(p);_&&(p=_[1],_=_[2],(m=Kn["idb://".concat(p,"/").concat(_)])&&Aa(m,i,l,o))}l.forEach(function(S){return S()})}function Aa(i,o,l,c){for(var d=[],p=0,m=Object.entries(i.queries.query);p<m.length;p++){for(var _=m[p],S=_[0],x=[],T=0,w=_[1];T<w.length;T++){var C=w[T];Ls(o,C.obsSet)?C.subscribers.forEach(function(O){return l.add(O)}):c&&x.push(C)}c&&d.push([S,x])}if(c)for(var E=0,P=d;E<P.length;E++){var A=P[E],S=A[0],x=A[1];i.queries.query[S]=x}}function Ic(i){var o=i._state,l=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?dt(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,d=Math.round(10*i.verno),p=!1;function m(){if(o.openCanceller!==c)throw new q.DatabaseClosed("db.open() was cancelled")}function _(){return new ae(function(C,E){if(m(),!l)throw new q.MissingAPI;var P=i.name,A=o.autoSchema||!d?l.open(P):l.open(P,d);if(!A)throw new q.MissingAPI;A.onerror=Zt(E),A.onblocked=ut(i._fireOnBlocked),A.onupgradeneeded=ut(function(O){var $;T=A.transaction,o.autoSchema&&!i._options.allowEmptyDB?(A.onerror=Ar,T.abort(),A.result.close(),($=l.deleteDatabase(P)).onsuccess=$.onerror=ut(function(){E(new q.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(T.onerror=Zt(E),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=A.result,p&&jc(i,T),Ac(i,O/10,T,E))},E),A.onsuccess=ut(function(){T=null;var O,$,L,M,U,G=i.idbdb=A.result,ne=je(G.objectStoreNames);if(0<ne.length)try{var Q=G.transaction((M=ne).length===1?M[0]:M,"readonly");if(o.autoSchema)$=G,L=Q,(O=i).verno=$.version/10,L=O._dbSchema=vi(0,$,L),O._storeNames=je($.objectStoreNames,0),yi(O,[O._allTables],u(L),L);else if(_i(i,i._dbSchema,Q),((U=As(vi(0,(U=i).idbdb,Q),U._dbSchema)).add.length||U.change.some(function(te){return te.add.length||te.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),d=G.version+1,p=!0,C(_());gi(i,Q)}catch{}sr.push(i),G.onversionchange=ut(function(te){o.vcFired=!0,i.on("versionchange").fire(te)}),G.onclose=ut(function(te){i.on("close").fire(te)}),w&&(U=i._deps,Q=P,G=U.indexedDB,U=U.IDBKeyRange,Is(G)||Q===ci||Rs(G,U).put({name:Q}).catch(be)),C()},E)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return ae.reject(C)})}var S,x=o.dbReadyResolve,T=null,w=!1;return ae.race([c,(typeof navigator>"u"?ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function E(){return indexedDB.databases().finally(C)}S=setInterval(E,100),E()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(_)]).then(function(){return m(),o.onReadyBeingFired=[],ae.resolve(Ds(function(){return i.on.ready.fire(i.vip)})).then(function C(){if(0<o.onReadyBeingFired.length){var E=o.onReadyBeingFired.reduce(J,be);return o.onReadyBeingFired=[],ae.resolve(Ds(function(){return E(i.vip)})).then(C)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(C){o.dbOpenError=C;try{T&&T.abort()}catch{}return c===o.openCanceller&&i._close(),dt(C)}).finally(function(){o.openComplete=!0,x()}).then(function(){var C;return w&&(C={},i.tables.forEach(function(E){E.schema.indexes.forEach(function(P){P.name&&(C["idb://".concat(i.name,"/").concat(E.name,"/").concat(P.name)]=new Tt(-1/0,[[[]]]))}),C["idb://".concat(i.name,"/").concat(E.name,"/")]=C["idb://".concat(i.name,"/").concat(E.name,"/:dels")]=new Tt(-1/0,[[[]]])}),_n(jr).fire(C),Us(C,!0)),i})}function Ks(i){function o(p){return i.next(p)}var l=d(o),c=d(function(p){return i.throw(p)});function d(p){return function(S){var _=p(S),S=_.value;return _.done?S:S&&typeof S.then=="function"?S.then(l,c):h(S)?Promise.all(S).then(l,c):l(S)}}return d(o)()}function Ei(i,o,l){for(var c=h(i)?i.slice():[i],d=0;d<l;++d)c.push(o);return c}var Dc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),c=l.schema,d={},p=[];function m(w,C,E){var P=Ir(w),A=d[P]=d[P]||[],O=w==null?0:typeof w=="string"?1:w.length,$=0<C,$=r(r({},E),{name:$?"".concat(P,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:$,keyTail:C,keyLength:O,extractKey:Ts(w),unique:!$&&E.unique});return A.push($),$.isPrimaryKey||p.push($),1<O&&m(O===2?w[0]:w.slice(0,O-1),C+1,E),A.sort(function(L,M){return L.keyTail-M.keyTail}),$}o=m(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[o];for(var _=0,S=c.indexes;_<S.length;_++){var x=S[_];m(x.keyPath,0,x)}function T(w){var C,E=w.query.index;return E.isVirtual?r(r({},w),{query:{index:E.lowLevelIndex,range:(C=w.query.range,E=E.keyTail,{type:C.type===1?2:C.type,lower:Ei(C.lower,C.lowerOpen?i.MAX_KEY:i.MIN_KEY,E),lowerOpen:!0,upper:Ei(C.upper,C.upperOpen?i.MIN_KEY:i.MAX_KEY,E),upperOpen:!0})}}):w}return r(r({},l),{schema:r(r({},c),{primaryKey:o,indexes:p,getIndexByKeyPath:function(w){return(w=d[Ir(w)])&&w[0]}}),count:function(w){return l.count(T(w))},query:function(w){return l.query(T(w))},openCursor:function(w){var C=w.query.index,E=C.keyTail,P=C.isVirtual,A=C.keyLength;return P?l.openCursor(T(w)).then(function($){return $&&O($)}):l.openCursor(w);function O($){return Object.create($,{continue:{value:function(L){L!=null?$.continue(Ei(L,w.reverse?i.MAX_KEY:i.MIN_KEY,E)):w.unique?$.continue($.key.slice(0,A).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,E)):$.continue()}},continuePrimaryKey:{value:function(L,M){$.continuePrimaryKey(Ei(L,i.MAX_KEY,E),M)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var L=$.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return $.value}}})}}})}})}};function Bs(i,o,l,c){return l=l||{},c=c||"",u(i).forEach(function(d){var p,m,_;b(o,d)?(p=i[d],m=o[d],typeof p=="object"&&typeof m=="object"&&p&&m?(_=ot(p))!==ot(m)?l[c+d]=o[d]:_==="Object"?Bs(p,m,l,c+d+"."):p!==m&&(l[c+d]=o[d]):p!==m&&(l[c+d]=o[d])):l[c+d]=void 0}),u(o).forEach(function(d){b(i,d)||(l[c+d]=o[d])}),l}function Ns(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var $c={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),c=l.schema.primaryKey;return r(r({},l),{mutate:function(d){var p=fe.trans,m=p.table(o).hook,_=m.deleting,S=m.creating,x=m.updating;switch(d.type){case"add":if(S.fire===be)break;return p._promise("readwrite",function(){return T(d)},!0);case"put":if(S.fire===be&&x.fire===be)break;return p._promise("readwrite",function(){return T(d)},!0);case"delete":if(_.fire===be)break;return p._promise("readwrite",function(){return T(d)},!0);case"deleteRange":if(_.fire===be)break;return p._promise("readwrite",function(){return function w(C,E,P){return l.query({trans:C,values:!1,query:{index:c,range:E},limit:P}).then(function(A){var O=A.result;return T({type:"delete",keys:O,trans:C}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):O.length<P?{failures:[],numFailures:0,lastResult:void 0}:w(C,r(r({},E),{lower:O[O.length-1],lowerOpen:!0}),P)})})}(d.trans,d.range,1e4)},!0)}return l.mutate(d);function T(w){var C,E,P,A=fe.trans,O=w.keys||Ns(c,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:O}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),C=l,P=O,((E=w).type==="add"?Promise.resolve([]):C.getMany({trans:E.trans,keys:P,cache:"immutable"})).then(function($){var L=O.map(function(M,U){var G,ne,Q,te=$[U],re={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(re,M,te,A):w.type==="add"||te===void 0?(G=S.fire.call(re,M,w.values[U],A),M==null&&G!=null&&(w.keys[U]=M=G,c.outbound||_e(w.values[U],c.keyPath,M))):(G=Bs(te,w.values[U]),(ne=x.fire.call(re,G,M,te,A))&&(Q=w.values[U],Object.keys(ne).forEach(function(z){b(Q,z)?Q[z]=ne[z]:_e(Q,z,ne[z])}))),re});return l.mutate(w).then(function(M){for(var U=M.failures,G=M.results,ne=M.numFailures,M=M.lastResult,Q=0;Q<O.length;++Q){var te=(G||O)[Q],re=L[Q];te==null?re.onerror&&re.onerror(U[Q]):re.onsuccess&&re.onsuccess(w.type==="put"&&$[Q]?w.values[Q]:te)}return{failures:U,results:G,numFailures:ne,lastResult:M}}).catch(function(M){return L.forEach(function(U){return U.onerror&&U.onerror(M)}),Promise.reject(M)})})}}})}})}};function ja(i,o,l){try{if(!o||o.keys.length<i.length)return null;for(var c=[],d=0,p=0;d<o.keys.length&&p<i.length;++d)Ne(o.keys[d],i[p])===0&&(c.push(l?ye(o.values[d]):o.values[d]),++p);return c.length===i.length?c:null}catch{return null}}var Lc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var l=i.table(o);return r(r({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var d=ja(c.keys,c.trans._cache,c.cache==="clone");return d?ae.resolve(d):l.getMany(c).then(function(p){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?ye(p):p},p})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function Ra(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Ia(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Mc={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,l=new Tt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(c,d,p){if(fe.subscr&&d!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return i.transaction(c,d,p)},table:function(c){var d=i.table(c),p=d.schema,m=p.primaryKey,w=p.indexes,_=m.extractKey,S=m.outbound,x=m.autoIncrement&&w.filter(function(E){return E.compound&&E.keyPath.includes(m.keyPath)}),T=r(r({},d),{mutate:function(E){function P(z){return z="idb://".concat(o,"/").concat(c,"/").concat(z),M[z]||(M[z]=new Tt)}var A,O,$,L=E.trans,M=E.mutatedParts||(E.mutatedParts={}),U=P(""),G=P(":dels"),ne=E.type,re=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[Ns(m,E).filter(function(z){return z}),E.values]:[],Q=re[0],te=re[1],re=E.trans._cache;return h(Q)?(U.addKeys(Q),(re=ne==="delete"||Q.length===te.length?ja(Q,re):null)||G.addKeys(Q),(re||te)&&(A=P,O=re,$=te,p.indexes.forEach(function(z){var Ee=A(z.name||"");function Pe(Ie){return Ie!=null?z.extractKey(Ie):null}function Fe(Ie){return z.multiEntry&&h(Ie)?Ie.forEach(function(Gt){return Ee.addKey(Gt)}):Ee.addKey(Ie)}(O||$).forEach(function(Ie,wt){var De=O&&Pe(O[wt]),wt=$&&Pe($[wt]);Ne(De,wt)!==0&&(De!=null&&Fe(De),wt!=null&&Fe(wt))})}))):Q?(te={from:Q.lower,to:Q.upper},G.add(te),U.add(te)):(U.add(l),G.add(l),p.indexes.forEach(function(z){return P(z.name).add(l)})),d.mutate(E).then(function(z){return!Q||E.type!=="add"&&E.type!=="put"||(U.addKeys(z.results),x&&x.forEach(function(Ee){var Pe=E.values.map(function(Ie){return Ee.extractKey(Ie)}),Fe=Ee.keyPath.findIndex(function(Ie){return Ie===m.keyPath});z.results.forEach(function(Ie){return Pe[Fe]=Ie}),P(Ee.name).addKeys(Pe)})),L.mutatedParts=ki(L.mutatedParts||{},M),z})}}),w=function(P){var A=P.query,P=A.index,A=A.range;return[P,new Tt((P=A.lower)!==null&&P!==void 0?P:i.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:i.MAX_KEY)]},C={get:function(E){return[m,new Tt(E.key)]},getMany:function(E){return[m,new Tt().addKeys(E.keys)]},count:w,query:w,openCursor:w};return u(C).forEach(function(E){T[E]=function(P){var A=fe.subscr,O=!!A,$=Ra(fe,d)&&Ia(E,P)?P.obsSet={}:A;if(O){var L=function(te){return te="idb://".concat(o,"/").concat(c,"/").concat(te),$[te]||($[te]=new Tt)},M=L(""),U=L(":dels"),A=C[E](P),O=A[0],A=A[1];if((E==="query"&&O.isPrimaryKey&&!P.values?U:L(O.name||"")).add(A),!O.isPrimaryKey){if(E!=="count"){var G=E==="query"&&S&&P.values&&d.query(r(r({},P),{values:!1}));return d[E].apply(this,arguments).then(function(te){if(E==="query"){if(S&&P.values)return G.then(function(Pe){return Pe=Pe.result,M.addKeys(Pe),te});var re=P.values?te.result.map(_):te.result;(P.values?M:U).addKeys(re)}else if(E==="openCursor"){var z=te,Ee=P.values;return z&&Object.create(z,{key:{get:function(){return U.addKey(z.primaryKey),z.key}},primaryKey:{get:function(){var Pe=z.primaryKey;return U.addKey(Pe),Pe}},value:{get:function(){return Ee&&M.addKey(z.primaryKey),z.value}}})}return te})}U.add(l)}}return d[E].apply(this,arguments)}}),T}})}};function Da(i,o,l){if(l.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return l.numFailures===c?null:(o=r({},o),h(o.keys)&&(o.keys=o.keys.filter(function(d,p){return!(p in l.failures)})),"values"in o&&h(o.values)&&(o.values=o.values.filter(function(d,p){return!(p in l.failures)})),o)}function qs(i,o){return l=i,((c=o).lower===void 0||(c.lowerOpen?0<Ne(l,c.lower):0<=Ne(l,c.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?Ne(i,o.upper)<0:Ne(i,o.upper)<=0));var l,c}function $a(i,o,C,c,d,p){if(!C||C.length===0)return i;var m=o.query.index,_=m.multiEntry,S=o.query.range,x=c.schema.primaryKey.extractKey,T=m.extractKey,w=(m.lowLevelIndex||m).extractKey,C=C.reduce(function(E,P){var A=E,O=[];if(P.type==="add"||P.type==="put")for(var $=new Tt,L=P.values.length-1;0<=L;--L){var M,U=P.values[L],G=x(U);$.hasKey(G)||(M=T(U),(_&&h(M)?M.some(function(re){return qs(re,S)}):qs(M,S))&&($.addKey(G),O.push(U)))}switch(P.type){case"add":A=E.concat(o.values?O:O.map(function(z){return x(z)}));break;case"put":var ne=new Tt().addKeys(P.values.map(function(z){return x(z)})),A=E.filter(function(z){return!ne.hasKey(o.values?x(z):z)}).concat(o.values?O:O.map(function(z){return x(z)}));break;case"delete":var Q=new Tt().addKeys(P.keys);A=E.filter(function(z){return!Q.hasKey(o.values?x(z):z)});break;case"deleteRange":var te=P.range;A=E.filter(function(z){return!qs(x(z),te)})}return A},i);return C===i?i:(C.sort(function(E,P){return Ne(w(E),w(P))||Ne(x(E),x(P))}),o.limit&&o.limit<1/0&&(C.length>o.limit?C.length=o.limit:i.length===o.limit&&C.length<o.limit&&(d.dirty=!0)),p?Object.freeze(C):C)}function La(i,o){return Ne(i.lower,o.lower)===0&&Ne(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Fc(i,o){return function(l,c,d,p){if(l===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=Ne(l,c))===0){if(d&&p)return 0;if(d)return 1;if(p)return-1}return c}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(l,c,d,p){if(l===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=Ne(l,c))===0){if(d&&p)return 0;if(d)return-1;if(p)return 1}return c}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function Uc(i,o,l,c){i.subscribers.add(l),c.addEventListener("abort",function(){var d,p;i.subscribers.delete(l),i.subscribers.size===0&&(d=i,p=o,setTimeout(function(){d.subscribers.size===0&&me(p,d)},3e3))})}var Kc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(l,c,d){var p,m,_=i.transaction(l,c,d);return c==="readwrite"&&(m=(p=new AbortController).signal,d=function(S){return function(){if(p.abort(),c==="readwrite"){for(var x=new Set,T=0,w=l;T<w.length;T++){var C=w[T],E=Kn["idb://".concat(o,"/").concat(C)];if(E){var P=i.table(C),A=E.optimisticOps.filter(function(Ee){return Ee.trans===_});if(_._explicit&&S&&_.mutatedParts)for(var O=0,$=Object.values(E.queries.query);O<$.length;O++)for(var L=0,M=(ne=$[O]).slice();L<M.length;L++)Ls((Q=M[L]).obsSet,_.mutatedParts)&&(me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)}));else if(0<A.length){E.optimisticOps=E.optimisticOps.filter(function(Ee){return Ee.trans!==_});for(var U=0,G=Object.values(E.queries.query);U<G.length;U++)for(var ne,Q,te,re=0,z=(ne=G[U]).slice();re<z.length;re++)(Q=z[re]).res!=null&&_.mutatedParts&&(S&&!Q.dirty?(te=Object.isFrozen(Q.res),te=$a(Q.res,Q.req,A,P,Q,te),Q.dirty?(me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})):te!==Q.res&&(Q.res=te,Q.promise=ae.resolve({result:te}))):(Q.dirty&&me(ne,Q),Q.subscribers.forEach(function(Ee){return x.add(Ee)})))}}}x.forEach(function(Ee){return Ee()})}}},_.addEventListener("abort",d(!1),{signal:m}),_.addEventListener("error",d(!1),{signal:m}),_.addEventListener("complete",d(!0),{signal:m})),_},table:function(l){var c=i.table(l),d=c.schema.primaryKey;return r(r({},c),{mutate:function(p){var m=fe.trans;if(d.outbound||m.db._options.cache==="disabled"||m.explicit)return c.mutate(p);var _=Kn["idb://".concat(o,"/").concat(l)];return _?(m=c.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Ns(d,p).some(function(S){return S==null}))?(_.optimisticOps.push(p),p.mutatedParts&&xi(p.mutatedParts),m.then(function(S){0<S.numFailures&&(me(_.optimisticOps,p),(S=Da(0,p,S))&&_.optimisticOps.push(S),p.mutatedParts&&xi(p.mutatedParts))}),m.catch(function(){me(_.optimisticOps,p),p.mutatedParts&&xi(p.mutatedParts)})):m.then(function(S){var x=Da(0,r(r({},p),{values:p.values.map(function(E,w){var C,E=(C=d.keyPath)!==null&&C!==void 0&&C.includes(".")?ye(E):r({},E);return _e(E,d.keyPath,S.results[w]),E})}),S);_.optimisticOps.push(x),queueMicrotask(function(){return p.mutatedParts&&xi(p.mutatedParts)})}),m):c.mutate(p)},query:function(p){if(!Ra(fe,c)||!Ia("query",p))return c.query(p);var m=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",w=fe,_=w.requery,S=w.signal,x=function(P,A,O,$){var L=Kn["idb://".concat(P,"/").concat(A)];if(!L)return[];if(!(A=L.queries[O]))return[null,!1,L,null];var M=A[($.query?$.query.index.name:null)||""];if(!M)return[null,!1,L,null];switch(O){case"query":var U=M.find(function(G){return G.req.limit===$.limit&&G.req.values===$.values&&La(G.req.query.range,$.query.range)});return U?[U,!0,L,M]:[M.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=$.limit&&(!$.values||G.req.values)&&Fc(G.req.query.range,$.query.range)}),!1,L,M];case"count":return U=M.find(function(G){return La(G.req.query.range,$.query.range)}),[U,!!U,L,M]}}(o,l,"query",p),T=x[0],w=x[1],C=x[2],E=x[3];return T&&w?T.obsSet=p.obsSet:(w=c.query(p).then(function(P){var A=P.result;if(T&&(T.res=A),m){for(var O=0,$=A.length;O<$;++O)Object.freeze(A[O]);Object.freeze(A)}else P.result=ye(A);return P}).catch(function(P){return E&&T&&me(E,T),Promise.reject(P)}),T={obsSet:p.obsSet,promise:w,subscribers:new Set,type:"query",req:p,dirty:!1},E?E.push(T):(E=[T],(C=C||(Kn["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=E)),Uc(T,E,_,S),T.promise.then(function(P){return{result:$a(P.result,p,C==null?void 0:C.optimisticOps,c,T,m)}})}})}})}};function Si(i,o){return new Proxy(i,{get:function(l,c,d){return c==="db"?o:Reflect.get(l,c,d)}})}var ln=(pt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new q.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,l=o.filter(function(c){return c._cfg.version===i})[0];return l||(l=new this.Version(i),o.push(l),o.sort(Cc),l.stores({}),this._state.autoSchema=!1,l)},pt.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?i():new ae(function(l,c){if(o._state.openComplete)return c(new q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new q.DatabaseClosed);o.open().catch(be)}o._state.dbReadyPromise.then(l,c)}).then(i)},pt.prototype.use=function(i){var o=i.stack,l=i.create,c=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:l,level:c??10,name:d}),i.sort(function(p,m){return p.level-m.level}),this},pt.prototype.unuse=function(i){var o=i.stack,l=i.name,c=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:!!l&&d.name!==l})),this},pt.prototype.open=function(){var i=this;return Mn(et,function(){return Ic(i)})},pt.prototype._close=function(){var i=this._state,o=sr.indexOf(this);if(0<=o&&sr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new ae(function(l){i.dbReadyResolve=l}),i.openCanceller=new ae(function(l,c){i.cancelOpen=c}))},pt.prototype.close=function(l){var o=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;o?(l.isBeingOpened&&l.cancelOpen(new q.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new q.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},pt.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new ae(function(d,p){function m(){o.close(i);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=ut(function(){var S,x,T;S=o._deps,x=o.name,T=S.indexedDB,S=S.IDBKeyRange,Is(T)||x===ci||Rs(T,S).delete(x).catch(be),d()}),_.onerror=Zt(p),_.onblocked=o._fireOnBlocked}if(l)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(m):m()})},pt.prototype.backendDB=function(){return this.idbdb},pt.prototype.isOpen=function(){return this.idbdb!==null},pt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(pt.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),pt.prototype.transaction=function(){var i=(function(o,l,c){var d=arguments.length;if(d<2)throw new q.InvalidArgument("Too few arguments");for(var p=new Array(d-1);--d;)p[d-1]=arguments[d];return c=p.pop(),[o,W(p),c]}).apply(this,arguments);return this._transaction.apply(this,i)},pt.prototype._transaction=function(i,o,l){var c=this,d=fe.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var p,m,_=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(m=o.map(function(x){if(x=x instanceof c.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),i=="r"||i===bs)p=bs;else{if(i!="rw"&&i!=ws)throw new q.InvalidArgument("Invalid transaction mode: "+i);p=ws}if(d){if(d.mode===bs&&p===ws){if(!_)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&m.forEach(function(x){if(d&&d.storeNames.indexOf(x)===-1){if(!_)throw new q.SubTransaction("Table "+x+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(x){return d?d._promise(null,function(T,w){w(x)}):dt(x)}var S=(function x(T,w,C,E,P){return ae.resolve().then(function(){var A=fe.transless||fe,O=T._createTransaction(w,C,T._dbSchema,E);if(O.explicit=!0,A={trans:O,transless:A},E)O.idbtrans=E.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(M){return M.name===Xe.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return x(T,w,C,null,P)})):dt(M)}var $,L=Qe(P);return L&&ir(),A=ae.follow(function(){var M;($=P.call(O,O))&&(L?(M=yn.bind(null,null),$.then(M,M)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Ks($)))},A),($&&typeof $.then=="function"?ae.resolve($).then(function(M){return O.active?M:dt(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return $})).then(function(M){return E&&O._resolve(),O._completion.then(function(){return M})}).catch(function(M){return O._reject(M),dt(M)})})}).bind(null,this,p,m,d,l);return d?d._promise(p,S,"lock"):fe.trans?Mn(fe.transless,function(){return c._whenReady(S)}):this._whenReady(S)},pt.prototype.table=function(i){if(!b(this._allTables,i))throw new q.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},pt);function pt(i,o){var l=this;this._middlewares={},this.verno=0;var c=pt.dependencies;this._options=o=r({addons:pt.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,p,m,_,S,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};x.dbReadyPromise=new ae(function(w){x.dbReadyResolve=w}),x.openCanceller=new ae(function(w,C){x.cancelOpen=C}),this._state=x,this.name=i,this.on=Pr(this,"populate","blocked","versionchange","close",{ready:[J,be]}),this.on.ready.subscribe=Re(this.on.ready.subscribe,function(w){return function(C,E){pt.vip(function(){var P,A=l._state;A.openComplete?(A.dbOpenError||ae.resolve().then(C),E&&w(C)):A.onReadyBeingFired?(A.onReadyBeingFired.push(C),E&&w(C)):(w(C),P=l,E||w(function O(){P.on.ready.unsubscribe(C),P.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,Tr(kc.prototype,function($,O){this.db=d;var E=da,P=null;if(O)try{E=O()}catch(L){P=L}var A=$._ctx,O=A.table,$=O.hook.reading.fire;this._ctx={table:O,index:A.index,isPrimKey:!A.index||O.schema.primKey.keyPath&&A.index===O.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:A.or,valueMapper:$!==v?$:null}})),this.Table=(p=this,Tr(ma.prototype,function(w,C,E){this.db=p,this._tx=E,this.name=w,this.schema=C,this.hook=p._allTables[w]?p._allTables[w].hook:Pr(null,{creating:[F,be],reading:[k,v],updating:[N,be],deleting:[B,be]})})),this.Transaction=(m=this,Tr(Sc.prototype,function(w,C,E,P,A){var O=this;this.db=m,this.mode=w,this.storeNames=C,this.schema=E,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=Pr(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ae(function($,L){O._resolve=$,O._reject=L}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function($){var L=O.active;return O.active=!1,O.on.error.fire($),O.parent?O.parent._reject($):L&&O.idbtrans&&O.idbtrans.abort(),dt($)})})),this.Version=(_=this,Tr(Rc.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,Tr(ka.prototype,function(w,C,E){if(this.db=S,this._ctx={table:w,index:C===":id"?null:C,or:E},this._cmp=this._ascending=Ne,this._descending=function(P,A){return Ne(A,P)},this._max=function(P,A){return 0<Ne(P,A)?P:A},this._min=function(P,A){return Ne(P,A)<0?P:A},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Rr(o.IDBKeyRange),this._createTransaction=function(w,C,E,P){return new l.Transaction(w,C,E,l._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(w){l.on("blocked").fire(w),sr.filter(function(C){return C.name===l.name&&C!==l&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(w)})},this.use(Lc),this.use(Kc),this.use(Mc),this.use(Dc),this.use($c);var T=new Proxy(this,{get:function(w,C,E){if(C==="_vip")return!0;if(C==="table")return function(A){return Si(l.table(A),T)};var P=Reflect.get(w,C,E);return P instanceof ma?Si(P,T):C==="tables"?P.map(function(A){return Si(A,T)}):C==="_createTransaction"?function(){return Si(P.apply(this,arguments),T)}:P}});this.vip=T,c.forEach(function(w){return w(l)})}var Oi,Ht=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Bc=(Hs.prototype.subscribe=function(i,o,l){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:l})},Hs.prototype[Ht]=function(){return this},Hs);function Hs(i){this._subscribe=i}try{Oi={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Oi={indexedDB:null,IDBKeyRange:null}}function Ma(i){var o,l=!1,c=new Bc(function(d){var p=Qe(i),m,_=!1,S={},x={},T={get closed(){return _},unsubscribe:function(){_||(_=!0,m&&m.abort(),w&&_n.storagemutated.unsubscribe(E))}};d.start&&d.start(T);var w=!1,C=function(){return _s(P)},E=function(A){ki(S,A),Ls(x,S)&&C()},P=function(){var A,O,$;!_&&Oi.indexedDB&&(S={},A={},m&&m.abort(),m=new AbortController,$=function(L){var M=nr();try{p&&ir();var U=gn(i,L);return U=p?U.finally(yn):U}finally{M&&rr()}}(O={subscr:A,signal:m.signal,requery:C,querier:i,trans:null}),Promise.resolve($).then(function(L){l=!0,o=L,_||O.signal.aborted||(S={},function(M){for(var U in M)if(b(M,U))return;return 1}(x=A)||w||(_n(jr,E),w=!0),_s(function(){return!_&&d.next&&d.next(L)}))},function(L){l=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||_s(function(){_||d.error&&d.error(L)})}))};return setTimeout(C,0),T});return c.hasValue=function(){return l},c.getValue=function(){return o},c}var Bn=ln;function Vs(i){var o=bn;try{bn=!0,_n.storagemutated.fire(i),Us(i,!0)}finally{bn=o}}R(Bn,r(r({},He),{delete:function(i){return new Bn(i,{addons:[]}).delete()},exists:function(i){return new Bn(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Bn.dependencies,l=o.indexedDB,o=o.IDBKeyRange,(Is(l)?Promise.resolve(l.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==ci})}):Rs(l,o).toCollection().primaryKeys()).then(i)}catch{return dt(new q.MissingAPI)}var o,l},defineClass:function(){return function(i){f(this,i)}},ignoreTransaction:function(i){return fe.trans?Mn(fe.transless,i):i()},vip:Ds,async:function(i){return function(){try{var o=Ks(i.apply(this,arguments));return o&&typeof o.then=="function"?o:ae.resolve(o)}catch(l){return dt(l)}}},spawn:function(i,o,l){try{var c=Ks(i.apply(l,o||[]));return c&&typeof c.then=="function"?c:ae.resolve(c)}catch(d){return dt(d)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(i,o){return o=ae.resolve(typeof i=="function"?Bn.ignoreTransaction(i):i).timeout(o||6e4),fe.trans?fe.trans.waitFor(o):o},Promise:ae,debug:{get:function(){return H},set:function(i){K(i)}},derive:le,extend:f,props:R,override:Re,Events:Pr,on:_n,liveQuery:Ma,extendObservabilitySet:ki,getByKeyPath:Ye,setByKeyPath:_e,delByKeyPath:function(i,o){typeof o=="string"?_e(i,o,void 0):"length"in o&&[].map.call(o,function(l){_e(i,l,void 0)})},shallowClone:I,deepClone:ye,getObjectDiff:Bs,cmp:Ne,asap:Le,minKey:-1/0,addons:[],connections:sr,errnames:Xe,dependencies:Oi,cache:Kn,semVer:"4.0.8",version:"4.0.8".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,l){return i+o/Math.pow(10,2*l)})})),Bn.maxKey=Rr(Bn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_n(jr,function(i){bn||(i=new CustomEvent(Ss,{detail:i}),bn=!0,dispatchEvent(i),bn=!1)}),addEventListener(Ss,function(i){i=i.detail,bn||Vs(i)}));var ur,bn=!1,Fa=function(){};return typeof BroadcastChannel<"u"&&((Fa=function(){(ur=new BroadcastChannel(Ss)).onmessage=function(i){return i.data&&Vs(i.data)}})(),typeof ur.unref=="function"&&ur.unref(),_n(jr,function(i){bn||ur.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!ln.disableBfCache&&i.persisted){H&&console.debug("Dexie: handling persisted pagehide"),ur!=null&&ur.close();for(var o=0,l=sr;o<l.length;o++)l[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!ln.disableBfCache&&i.persisted&&(H&&console.debug("Dexie: handling persisted pageshow"),Fa(),Vs({all:new Tt(-1/0,[[]])}))})),ae.rejectionMapper=function(i,o){return!i||i instanceof Ke||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Me[i.name]?i:(o=new Me[i.name](o||i.message,i),"stack"in i&&se(o,"stack",{get:function(){return this.inner.stack}}),o)},K(H),r(ln,Object.freeze({__proto__:null,Dexie:ln,liveQuery:Ma,Entity:pa,cmp:Ne,PropModSymbol:un,PropModification:Cr,replacePrefix:function(i,o){return new Cr({replacePrefix:[i,o]})},add:function(i){return new Cr({add:i})},remove:function(i){return new Cr({remove:i})},default:ln,RangeSet:Tt,mergeRanges:$r,rangesOverlap:Pa}),{default:ln}),ln})})(Hl);var wd=Hl.exports;const So=Nl(wd),wu=Symbol.for("Dexie"),Oo=globalThis[wu]||(globalThis[wu]=So);if(So.semVer!==Oo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${So.semVer} and ${Oo.semVer}`);const An=new Oo("DictionaryDB");An.version(1).stores({words:"id,type,chinese,romaji,classification,audioid,english",definitions:"defid,wordid,partofspeech,def_chinese,def_english"});async function kd(){try{const e=await(await fetch("./src/assets/taigiwords.csv")).text(),r=await(await fetch("./src/assets/taigidefs.csv")).text();bu.parse(e,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await An.words.clear(),await An.words.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}}),bu.parse(r,{header:!0,dynamicTyping:!0,complete:async s=>{console.log("CSV Data:",s.data);const a=s.data;await An.definitions.clear(),await An.definitions.bulkAdd(a)},error:s=>{console.error("CSV Parsing Error:",s)}})}catch(t){console.error("Error loading CSV file:",t)}}async function Vl(t){let e=window.speechSynthesis.getVoices();e.length===0&&(await new Promise(r=>window.speechSynthesis.addEventListener("voiceschanged",r,{once:!0})),e=window.speechSynthesis.getVoices());const n=new SpeechSynthesisUtterance(t);n.lang="zh-TW",n.voice=e.find(r=>r.name==="Meijia"),window.speechSynthesis.speak(n)}async function Wl(t){let e=window.speechSynthesis.getVoices();e.length===0&&(await new Promise(s=>window.speechSynthesis.addEventListener("voiceschanged",s,{once:!0})),e=window.speechSynthesis.getVoices());const n=e.filter(s=>s.lang==="en-US");console.log(n);const r=new SpeechSynthesisUtterance(t);r.lang="en-US",r.voice=e.find(s=>s.name==="Samantha"),window.speechSynthesis.speak(r)}const as=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},xd={},Ed={class:"play-audio",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Sd(t,e){return gt(),jt("svg",Ed,e[0]||(e[0]=[ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.9177 4.9473L19.4897 4.3313L18.2577 5.1873L18.6857 5.8023C21.3027 9.5713 21.3027 14.4363 18.6857 18.1973L18.2577 18.8123L19.4887 19.6693L19.9177 19.0533C22.8497 14.8393 22.8497 9.1703 19.9177 4.9473Z",fill:"gray"},null,-1),ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.2312 7.6226L16.8582 6.9716L15.5572 7.7166L15.9292 8.3676C17.2142 10.6126 17.2142 13.3966 15.9302 15.6336L15.5562 16.2836L16.8572 17.0306L17.2312 16.3806C18.7792 13.6836 18.7792 10.3276 17.2312 7.6226Z",fill:"gray"},null,-1),ge("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.0788 7.564H2.3848V8.064C2.3828 10.688 2.3828 13.312 2.3848 15.937V16.436H7.0788L11.2048 20.013H12.6678V3.987H11.2048L7.0788 7.564Z",fill:"gray"},null,-1)]))}const zi=as(xd,[["render",Sd]]),Od={props:{audioID:{type:String,required:!0}},components:{IconPlayAudio:zi},data(){return{isPlaying:!1,baseSrc:"src/assets/audio_taigi/"}},computed:{fullSrc(){return`${this.baseSrc}${getAudioFolder(this.audioid)}/${audioid}.mp3`}},methods:{togglePlay(){const t=this.$refs.audio;this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying},audioEnded(){this.isPlaying=!1,console.log("Audio has finished playing.")},getAudioFolder(t){if(console.log(t),t){const e=parseInt(t.match(/^(\d+)\(/)[1]);return e<1e3?"0":e>=1e3&&e<2e3?"1":e>=2e3&&e<3e3?"2":e>=3e3&&e<4e3?"3":e>=4e3&&e<5e3?"4":e>=5e3&&e<6e3?"5":e>=6e3&&e<7e3?"6":e>=7e3&&e<8e3?"7":e>=8e3&&e<9e3?"8":e>=9e3&&e<1e4?"9":e>=1e4&&e<11e3?"10":e>=11e3&&e<12e3?"11":e>=12e3&&e<13e3?"12":e>=13e3&&e<14e3?"13":e>=14e3&&e<15e3?"14":e>=15e3&&e<16e3?"15":e>=16e3&&e<17e3?"16":e>=17e3&&e<18e3?"17":e>=18e3&&e<19e3?"18":e>=19e3&&e<2e4?"19":e>=2e4&&e<21e3?"20":e>=21e3&&e<22e3?"21":e>=22e3&&e<23e3?"22":e>=23e3&&e<24e3?"23":e>=24e3&&e<25e3?"24":e>=25e3&&e<26e3?"25":e>=26e3&&e<27e3?"26":e>=27e3&&e<28e3?"27":e>=28e3&&e<29e3?"28":"Out of range"}}},mounted(){this.$refs.audio},beforeDestroy(){this.$refs.audio}},Pd={class:"audio-player"},Td=["src"];function Cd(t,e,n,r,s,a){const u=vo("IconPlayAudio");return gt(),jt("div",Pd,[ge("audio",{ref:"audio",src:`${this.baseSrc}${a.getAudioFolder(n.audioID)}/${n.audioID}.mp3`,onEnded:e[0]||(e[0]=(...h)=>a.audioEnded&&a.audioEnded(...h))},null,40,Td),Mt(u,{onClick:a.togglePlay},null,8,["onClick"])])}const zl=as(Od,[["render",Cd],["__scopeId","data-v-ce97b142"]]),Ad="modulepreload",jd=function(t){return"/taigi-dict-app/"+t},ku={},xr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=jd(f),f in ku)return;ku[f]=!0;const y=f.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Ad,y||(b.as="script"),b.crossOrigin="",b.href=f,h&&b.setAttribute("nonce",h),document.head.appendChild(b),y)return new Promise((R,V)=>{b.addEventListener("load",R),b.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Rd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Sr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ra extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Id extends ra{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dd extends ra{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $d extends ra{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Po;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Po||(Po={}));var Ld=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class Md{constructor(e,{headers:n={},customFetch:r,region:s=Po.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Rd(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Ld(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:u}=n;let h={},{region:f}=n;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let y;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)));const g=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:y}).catch(se=>{throw new Id(se)}),b=g.headers.get("x-relay-error");if(b&&b==="true")throw new Dd(g);if(!g.ok)throw new $d(g);let R=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),V;return R==="application/json"?V=yield g.json():R==="application/octet-stream"?V=yield g.blob():R==="text/event-stream"?V=g:R==="multipart/form-data"?V=yield g.formData():V=yield g.text(),{data:V,error:null}}catch(s){return{data:null,error:s}}})}}var Lt={},ia={},us={},ri={},ls={},cs={},Fd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Er=Fd();const Ud=Er.fetch,Jl=Er.fetch.bind(Er),Gl=Er.Headers,Kd=Er.Request,Bd=Er.Response,Sr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gl,Request:Kd,Response:Bd,default:Jl,fetch:Ud},Symbol.toStringTag,{value:"Module"})),Nd=_d(Sr);var hs={};Object.defineProperty(hs,"__esModule",{value:!0});class qd extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}hs.default=qd;var Ql=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cs,"__esModule",{value:!0});const Hd=Ql(Nd),Vd=Ql(hs);let Wd=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Hd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var u,h,f;let y=null,g=null,b=null,R=a.status,V=a.statusText;if(a.ok){if(this.method!=="HEAD"){const we=await a.text();we===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=we:g=JSON.parse(we))}const le=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),ve=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");le&&ve&&ve.length>1&&(b=parseInt(ve[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,R=406,V="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const le=await a.text();try{y=JSON.parse(le),Array.isArray(y)&&a.status===404&&(g=[],y=null,R=200,V="OK")}catch{a.status===404&&le===""?(R=204,V="No Content"):y={message:le}}if(y&&this.isMaybeSingle&&(!((f=y==null?void 0:y.details)===null||f===void 0)&&f.includes("0 rows"))&&(y=null,R=200,V="OK"),y&&this.shouldThrowOnError)throw new Vd.default(y)}return{error:y,data:g,count:b,status:R,statusText:V}});return this.shouldThrowOnError||(s=s.catch(a=>{var u,h,f;return{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=a==null?void 0:a.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};cs.default=Wd;var zd=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ls,"__esModule",{value:!0});const Jd=zd(cs);let Gd=class extends Jd.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const u=a?`${a}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:u="text"}={}){var h;const f=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${y}"; options=${f};`,u==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ls.default=Gd;var Qd=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ri,"__esModule",{value:!0});const Yd=Qd(ls);let Xd=class extends Yd.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ri.default=Xd;var Zd=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(us,"__esModule",{value:!0});const Fr=Zd(ri);let ep=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const u="POST",h=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),s&&h.push(`count=${s}`),a||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const f=e.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(f.length>0){const y=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new Fr.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Fr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};us.default=ep;var fs={},ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.version=void 0;ds.version="0.0.0-automated";Object.defineProperty(fs,"__esModule",{value:!0});fs.DEFAULT_HEADERS=void 0;const tp=ds;fs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tp.version}`};var Yl=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ia,"__esModule",{value:!0});const np=Yl(us),rp=Yl(ri),ip=fs;let sp=class Xl{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},ip.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new np.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let u;const h=new URL(`${this.url}/rpc/${e}`);let f;r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{h.searchParams.append(g,b)})):(u="POST",f=n);const y=Object.assign({},this.headers);return a&&(y.Prefer=`count=${a}`),new rp.default({method:u,url:h,headers:y,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};ia.default=sp;var Or=It&&It.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.PostgrestError=Lt.PostgrestBuilder=Lt.PostgrestTransformBuilder=Lt.PostgrestFilterBuilder=Lt.PostgrestQueryBuilder=Lt.PostgrestClient=void 0;const Zl=Or(ia);Lt.PostgrestClient=Zl.default;const ec=Or(us);Lt.PostgrestQueryBuilder=ec.default;const tc=Or(ri);Lt.PostgrestFilterBuilder=tc.default;const nc=Or(ls);Lt.PostgrestTransformBuilder=nc.default;const rc=Or(cs);Lt.PostgrestBuilder=rc.default;const ic=Or(hs);Lt.PostgrestError=ic.default;var op=Lt.default={PostgrestClient:Zl.default,PostgrestQueryBuilder:ec.default,PostgrestFilterBuilder:tc.default,PostgrestTransformBuilder:nc.default,PostgrestBuilder:rc.default,PostgrestError:ic.default};const{PostgrestClient:ap,PostgrestQueryBuilder:dy,PostgrestFilterBuilder:py,PostgrestTransformBuilder:gy,PostgrestBuilder:yy}=op,up="2.10.7",lp={"X-Client-Info":`realtime-js/${up}`},cp="1.0.0",sc=1e4,hp=1e3;var wr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wr||(wr={}));var Kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kt||(Kt={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var To;(function(t){t.websocket="websocket"})(To||(To={}));var Jn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jn||(Jn={}));class fp{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+s));u=u+s;const f=r.decode(e.slice(u,u+a));u=u+a;const y=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:y}}}class oc{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const xu=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,u)=>(a[u]=dp(u,t,e,s),a),{})},dp=(t,e,n,r)=>{const s=e.find(h=>h.name===t),a=s==null?void 0:s.type,u=n[t];return a&&!r.includes(a)?ac(a,u):Co(u)},ac=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mp(e,n)}switch(t){case rt.bool:return pp(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return gp(e);case rt.json:case rt.jsonb:return yp(e);case rt.timestamp:return vp(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Co(e);default:return Co(e)}},Co=t=>t,pp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mp=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const u=t.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>ac(e,h))}return t},vp=t=>typeof t=="string"?t.replace(" ","T"):t,uc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class oo{constructor(e,n,r={},s=sc){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Eu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Eu||(Eu={}));class zr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zr.syncState(this.state,s,a,u),this.pendingDiffs.forEach(f=>{this.state=zr.syncDiff(this.state,f,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=zr.syncDiff(this.state,s,a,u),h())}),this.onJoin((s,a,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:u})}),this.onLeave((s,a,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),u=this.transformState(n),h={},f={};return this.map(a,(y,g)=>{u[y]||(f[y]=g)}),this.map(u,(y,g)=>{const b=a[y];if(b){const R=g.map(ve=>ve.presence_ref),V=b.map(ve=>ve.presence_ref),se=g.filter(ve=>V.indexOf(ve.presence_ref)<0),le=b.filter(ve=>R.indexOf(ve.presence_ref)<0);se.length>0&&(h[y]=se),le.length>0&&(f[y]=le)}else h[y]=g}),this.syncDiff(a,{joins:h,leaves:f},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(h,f)=>{var y;const g=(y=e[h])!==null&&y!==void 0?y:[];if(e[h]=this.cloneDeep(f),g.length>0){const b=e[h].map(V=>V.presence_ref),R=g.filter(V=>b.indexOf(V.presence_ref)<0);e[h].unshift(...R)}r(h,g,f)}),this.map(u,(h,f)=>{let y=e[h];if(!y)return;const g=f.map(b=>b.presence_ref);y=y.filter(b=>g.indexOf(b.presence_ref)<0),e[h]=y,s(h,y,f),y.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Su;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Su||(Su={}));var Ou;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ou||(Ou={}));var Pu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pu||(Pu={}));class sa{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oo(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new oc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new zr(this),this.broadcastEndpointURL=uc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:u,private:h}}=this.params;this._onError(g=>e&&e("CHANNEL_ERROR",g)),this._onClose(()=>e&&e("CLOSED"));const f={},y={broadcast:a,presence:u,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:h};this.socket.accessToken&&(f.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:y},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:g})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),g===void 0){e&&e("SUBSCRIBED");return}else{const R=this.bindings.postgres_changes,V=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,se=[];for(let le=0;le<V;le++){const ve=R[le],{filter:{event:we,schema:je,table:Re,filter:ce}}=ve,Le=g&&g[le];if(Le&&Le.event===we&&Le.schema===je&&Le.table===Re&&Le.filter===ce)se.push(Object.assign(Object.assign({},ve),{id:Le.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=se,e&&e("SUBSCRIBED");return}}).receive("error",g=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,f;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),y.receive("ok",()=>a("ok")),y.receive("error",()=>a("error")),y.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new oo(this,Yt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oo(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:y,join:g}=Yt;if(r&&[h,f,y,g].indexOf(u)>=0&&r!==this._joinRef())return;let R=this._onMessage(u,n,r);if(n&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(V=>{var se,le,ve;return((se=V.filter)===null||se===void 0?void 0:se.event)==="*"||((ve=(le=V.filter)===null||le===void 0?void 0:le.event)===null||ve===void 0?void 0:ve.toLocaleLowerCase())===u}).map(V=>V.callback(R,r)):(a=this.bindings[u])===null||a===void 0||a.filter(V=>{var se,le,ve,we,je,Re;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in V){const ce=V.id,Le=(se=V.filter)===null||se===void 0?void 0:se.event;return ce&&((le=n.ids)===null||le===void 0?void 0:le.includes(ce))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((ve=n.data)===null||ve===void 0?void 0:ve.type.toLocaleLowerCase()))}else{const ce=(je=(we=V==null?void 0:V.filter)===null||we===void 0?void 0:we.event)===null||je===void 0?void 0:je.toLocaleLowerCase();return ce==="*"||ce===((Re=n==null?void 0:n.event)===null||Re===void 0?void 0:Re.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===u}).map(V=>{if(typeof R=="object"&&"ids"in R){const se=R.data,{schema:le,table:ve,commit_timestamp:we,type:je,errors:Re}=se;R=Object.assign(Object.assign({},{schema:le,table:ve,commit_timestamp:we,eventType:je,new:{},old:{},errors:Re}),this._getPayloadRecords(se))}V.callback(R,r)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&sa.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=xu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=xu(e.columns,e.old_record)),n}}const _p=()=>{},bp=typeof WebSocket<"u",wp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kp{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=lp,this.params={},this.timeout=sc,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_p,this.conn=null,this.sendBuffer=[],this.serializer=new fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=a=>{let u;return a?u=a:typeof fetch>"u"?u=(...h)=>xr(async()=>{const{default:f}=await Promise.resolve().then(()=>Sr);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${To.websocket}`,this.httpEndpoint=uc(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,u)=>u(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new oc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(bp){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new xp(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),xr(async()=>{const{default:e}=await import("./browser-D5UXHbUS.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wr.connecting:return Jn.Connecting;case wr.open:return Jn.Open;case wr.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}channel(e,n={config:{}}){const r=new sa(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?u():this.sendBuffer.push(u)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cp}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:u}=n;(u&&u===this.pendingHeartbeatRef||s===(a==null?void 0:a.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${u&&"("+u+")"||""}`,a),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,a,u)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([wp],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class xp{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=wr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class oa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ep extends oa{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ao extends oa{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Sp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Sr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Op=()=>Sp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xr(()=>Promise.resolve().then(()=>Sr),void 0)).Response:Response}),jo=t=>{if(Array.isArray(t))return t.map(n=>jo(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=jo(r)}),e};var er=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const ao=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pp=(t,e,n)=>er(void 0,void 0,void 0,function*(){const r=yield Op();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Ep(ao(s),t.status||500))}).catch(s=>{e(new Ao(ao(s),s))}):e(new Ao(ao(t),t))}),Tp=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function ii(t,e,n,r,s,a){return er(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,Tp(e,r,s,a)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Pp(f,h,r))})})}function Ji(t,e,n,r){return er(this,void 0,void 0,function*(){return ii(t,"GET",e,n,r)})}function Tn(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ii(t,"POST",e,r,s,n)})}function Cp(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ii(t,"PUT",e,r,s,n)})}function Ap(t,e,n,r){return er(this,void 0,void 0,function*(){return ii(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cc(t,e,n,r,s){return er(this,void 0,void 0,function*(){return ii(t,"DELETE",e,r,s,n)})}var Dt=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const jp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rp{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=lc(s)}uploadOrUpdate(e,n,r,s){return Dt(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},Tu),s);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s!=null&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const y=this._removeEmptyFolders(n),g=this._getFinalPath(y),b=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:a,headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{})),R=yield b.json();return b.ok?{data:{path:y,id:R.Id,fullPath:R.Key},error:null}:{data:null,error:R}}catch(a){if(bt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Dt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const y=Object.assign({upsert:Tu.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",y.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",y.cacheControl)):(f=r,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const b=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),R=yield b.json();return b.ok?{data:{path:a,fullPath:R.Key},error:null}:{data:null,error:R}}catch(f){if(bt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return Dt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Tn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),u=new URL(this.url+a.url),h=u.searchParams.get("token");if(!h)throw new oa("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Dt(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Dt(this,void 0,void 0,function*(){try{return{data:{path:(yield Tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Dt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Tn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Dt(this,void 0,void 0,function*(){try{const s=yield Tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}download(e,n){return Dt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Ji(this.fetch,`${this.url}/${s}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(bt(h))return{data:null,error:h};throw h}})}info(e){return Dt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ji(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jo(r),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}exists(e){return Dt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ap(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(bt(r)&&r instanceof Ao){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&s.push(f);let y=s.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${y}`)}}}remove(e){return Dt(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Dt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jp),n),{prefix:e||""});return{data:yield Tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ip="2.7.1",Dp={"X-Client-Info":`storage-js/${Ip}`};var cr=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class $p{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dp),n),this.fetch=lc(r)}listBuckets(){return cr(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return cr(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return cr(this,void 0,void 0,function*(){try{return{data:yield Cp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}}class Lp extends $p{constructor(e,n={},r){super(e,n,r)}from(e){return new Rp(this.url,this.headers,e,this.fetch)}}const Mp="2.46.1";let Br="";typeof Deno<"u"?Br="deno":typeof document<"u"?Br="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Br="react-native":Br="node";const Fp={"X-Client-Info":`supabase-js-${Br}/${Mp}`},Up={headers:Fp},Kp={schema:"public"},Bp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Np={};var qp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};const Hp=t=>{let e;return t?e=t:typeof fetch>"u"?e=Jl:e=fetch,(...n)=>e(...n)},Vp=()=>typeof Headers>"u"?Gl:Headers,Wp=(t,e,n)=>{const r=Hp(n),s=Vp();return(a,u)=>qp(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:t;let y=new s(u==null?void 0:u.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},u),{headers:y}))})};var zp=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};function Jp(t){return t.replace(/\/$/,"")}function Gp(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:u,auth:h,realtime:f,global:y}=e,g={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},f),s),global:Object.assign(Object.assign({},y),a),accessToken:()=>zp(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const hc="2.65.1",Qp="http://localhost:9999",Yp="supabase.auth.token",Xp={"X-Client-Info":`gotrue-js/${hc}`},Cu=10,Ro="X-Supabase-Api-Version",fc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Zp(t){return Math.round(Date.now()/1e3)+t}function eg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qt=()=>typeof document<"u",Vn={tested:!1,writable:!1},Jr=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vn.tested)return Vn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vn.tested=!0,Vn.writable=!0}catch{Vn.tested=!0,Vn.writable=!1}return Vn.writable};function uo(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const dc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Sr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Di=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$i=async(t,e)=>{await t.removeItem(e)};function ng(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,a,u,h,f,y,g=0;for(t=t.replace("-","+").replace("_","/");g<t.length;)u=e.indexOf(t.charAt(g++)),h=e.indexOf(t.charAt(g++)),f=e.indexOf(t.charAt(g++)),y=e.indexOf(t.charAt(g++)),r=u<<2|h>>4,s=(h&15)<<4|f>>2,a=(f&3)<<6|y,n=n+String.fromCharCode(r),f!=64&&s!=0&&(n=n+String.fromCharCode(s)),y!=64&&a!=0&&(n=n+String.fromCharCode(a));return n}class ps{constructor(){this.promise=new ps.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ps.promiseConstructor=Promise;function Au(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(ng(r))}async function rg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ig(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await t(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){s(u);return}}})()})}function sg(t){return("0"+t.toString(16)).substr(-2)}function og(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,sg).join("")}async function ag(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function ug(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ag(t);return ug(n)}async function hr(t,e,n=!1){const r=og();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await pc(t,`${e}-code-verifier`,s);const a=await lg(r);return[a,r===a?"plain":"s256"]}const cg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hg(t){const e=t.headers.get(Ro);if(!e||!e.match(cg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class aa extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class fg extends aa{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function dg(t){return $e(t)&&t.name==="AuthApiError"}class gc extends aa{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class tr extends aa{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class En extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pg(t){return $e(t)&&t.name==="AuthSessionMissingError"}class lo extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Li extends tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mi extends tr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ju extends tr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Io extends tr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function co(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Ru extends tr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var gg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const zn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yg=[502,503,504];async function Iu(t){var e;if(!tg(t))throw new Io(zn(t),0);if(yg.includes(t.status))throw new Io(zn(t),t.status);let n;try{n=await t.json()}catch(a){throw new gc(zn(a),a)}let r;const s=hg(t);if(s&&s.getTime()>=fc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ru(zn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new En}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new Ru(zn(n),t.status,n.weak_password.reasons);throw new fg(zn(n),t.status||500,r)}const mg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Ro]||(a[Ro]=fc["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await vg(t,e,n+h,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function vg(t,e,n,r,s,a){const u=mg(e,r,s,a);let h;try{h=await t(n,Object.assign({},u))}catch(f){throw console.error(f),new Io(zn(f),0)}if(h.ok||await Iu(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(f){await Iu(f)}}function Sn(t){var e;let n=null;kg(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Zp(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Du(t){const e=Sn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Cn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _g(t){return{data:t,error:null}}function bg(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,u=gg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function wg(t){return t}function kg(t){return t.access_token&&t.refresh_token&&t.expires_in}var xg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Eg{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Cn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xg(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Cn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,u,h,f;try{const y={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:wg});if(g.error)throw g.error;const b=await g.json(),R=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,V=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return V.length>0&&(V.forEach(se=>{const le=parseInt(se.split(";")[0].split("=")[1].substring(0,1)),ve=JSON.parse(se.split(";")[1].split("=")[1]);y[`${ve}Page`]=le}),y.total=parseInt(R)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if($e(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Cn})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Cn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Cn})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const Sg={getItem:t=>Jr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Jr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Jr()&&globalThis.localStorage.removeItem(t)}};function $u(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Og(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fr={debug:!!(globalThis&&Jr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pg extends yc{}async function Tg(t,e,n){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}Og();const Cg={url:Qp,storageKey:Yp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ur=30*1e3,Lu=3;async function Mu(t,e,n){return await n()}class ei{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ei.nextInstanceID,ei.nextInstanceID+=1,this.instanceID>0&&Qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Cg),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Eg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dc(s.fetch),this.lock=s.lock||Mu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Tg:this.lock=Mu,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Jr()?this.storage=Sg:(this.memoryStorage={},this.storage=$u(this.memoryStorage)):(this.memoryStorage={},this.storage=$u(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Qt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new gc("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Sn}),{data:u,error:h}=a;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:g,password:b,options:R}=e;let V=null,se=null;this.flowType==="pkce"&&([V,se]=await hr(this.storage,this.storageKey)),a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R==null?void 0:R.emailRedirectTo,body:{email:g,password:b,data:(n=R==null?void 0:R.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken},code_challenge:V,code_challenge_method:se},xform:Sn})}else if("phone"in e){const{phone:g,password:b,options:R}=e;a=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(r=R==null?void 0:R.data)!==null&&r!==void 0?r:{},channel:(s=R==null?void 0:R.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:R==null?void 0:R.captchaToken}},xform:Sn})}else throw new Li("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(a){if($e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Du})}else if("phone"in e){const{phone:a,password:u,options:h}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Du})}else throw new Li("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new lo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Di(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:u}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Sn});if(await $i(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new lo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:u})}catch(a){if($e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:u}=e,h=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Sn}),{data:f,error:y}=h;return y?{data:{user:null,session:null},error:y}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new lo}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:y})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,u;try{if("email"in e){const{email:h,options:f}=e;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await hr(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:f}=e,{data:y,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:g}}throw new Li("You must provide either an email or phone number.")}catch(h){if($e(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Sn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,y=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:y,session:f},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await hr(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:_g})}catch(a){if($e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new En;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:u,error:h}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Li("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Di(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,y,g)=>(!u&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,y,g))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Cn}):await this._useSession(async n=>{var r,s,a;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new En}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Cn})})}catch(n){if($e(n))return pg(n)&&(await this._removeSession(),await $i(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new En;const u=s.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await hr(this.storage,this.storageKey));const{data:y,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Cn});if(g)throw g;return u.user=y.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Au(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new En;const n=Date.now()/1e3;let r=n,s=!0,a=null;const u=Au(e.access_token);if(u.exp&&(r=u.exp,s=r<=n),s){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new En;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Qt())throw new Mi("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Mi("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ju("Not a valid PKCE flow url.");const n=uo(window.location.href);if(e){if(!n.code)throw new ju("No code detected.");const{data:je,error:Re}=await this._exchangeCodeForSession(n.code);if(Re)throw Re;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:je.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Mi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:u,expires_in:h,expires_at:f,token_type:y}=n;if(!a||!h||!u||!y)throw new Mi("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(h);let R=g+b;f&&(R=parseInt(f));const V=R-g;V*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${b}s`);const se=R-b;g-se>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",se,R,g):g-se<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",se,R,g);const{data:le,error:ve}=await this._getUser(a);if(ve)throw ve;const we={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:R,refresh_token:u,token_type:y,user:le.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:n.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=uo(window.location.href);return!!(Qt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=uo(window.location.href),n=await Di(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const u=(r=s.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(dg(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await $i(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=eg(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await hr(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var u,h,f,y,g;const{data:b,error:R}=a;if(R)throw R;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",V,{headers:this.headers,jwt:(g=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)throw u;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ig(async s=>(s>0&&await rg(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Sn})),(s,a)=>{const u=200*Math.pow(2,s);return a&&co(a)&&Date.now()+u-r<Ur})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Di(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Cu;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Cu}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),co(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new En;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ps;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new En;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(s,"error",a),$e(a)){const u={session:null,error:a};return co(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){a.push(f)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await $i(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${Lu} ticks`),s<=Lu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await hr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(h.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:y}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:u,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(s.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}}ei.nextInstanceID=0;const Ag=ei;class jg extends Ag{constructor(e){super(e)}}var Rg=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(g){try{y(r.next(g))}catch(b){u(b)}}function f(g){try{y(r.throw(g))}catch(b){u(b)}}function y(g){g.done?a(g.value):s(g.value).then(h,f)}y((r=r.apply(t,e||[])).next())})};class Ig{constructor(e,n,r){var s,a,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=Jp(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Kp,realtime:Np,auth:Object.assign(Object.assign({},Bp),{storageKey:f}),global:Up},g=Gp(r??{},y);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=Wp(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new ap(`${h}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new Md(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Lp(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Rg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:u,lock:h,debug:f},y,g){var b;const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jg({url:this.authUrl,headers:Object.assign(Object.assign({},R),y),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:(b="Authorization"in this.headers)!==null&&b!==void 0?b:!1})}_initRealtimeClient(e){return new kp(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dg=(t,e,n)=>new Ig(t,e,n),$g="https://oqwvljqwtearyepyaslo.supabase.co",Lg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xd3ZsanF3dGVhcnllcHlhc2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEwODA1NjIsImV4cCI6MjA0NjY1NjU2Mn0.31HmSCfXawvkzhevPCaKWoVCZyD_elcQOCtgFWJMRKI",Vt=Dg($g,Lg),Mg={data(){return{words:[],searchQuery:"",searchResults:[],word:null,showDialog:!1,selectedWordId:null}},components:{AudioPlayerTaigi:zl,IconPlayAudio:zi},async created(){},methods:{async fetchWords(){const{data:t,error:e}=await Vt.from("words").select(`
          id,
          english,
          definitions (defid, def_english)
        `);e?console.error(e):this.words=t},clearInput(){this.searchQuery="",this.words=[]},async openEditDialog(t){this.showDialog=!0,this.selectedWordId=t;const{data:e,error:n}=await Vt.from("words").select("id, chinese, romaji, classification, english, definitions (defid, def_english, def_chinese)").eq("id",t).single();n?console.error("Error fetching word:",n.message):(this.word=e,console.log(this.word))},async updateWord(){const{data:t,error:e}=await Vt.from("words").upsert({id:this.word.id,chinese:this.word.chinese,romaji:this.word.romaji,classification:this.word.classification,english:this.word.english});e?console.error("Error updating word:",e.message):console.log("Word updated successfully:",t)},async updateDefinition(t,e){const n=this.word.definitions[e],{data:r,error:s}=await Vt.from("definitions").upsert({defid:t,wordid:this.word.id,partofspeech:n.partofspeech,def_english:n.def_english,def_chinese:n.def_chinese});s?console.error("Error updating definition:",s.message):console.log("Definition updated successfully:",r)},async deleteWord(t){const{error:e}=await Vt.from("definitions").delete().eq("word_id",t);if(e){console.error(e);return}const{error:n}=await Vt.from("words").delete().eq("id",t);n&&console.error(n)},async searchWords(){const{data:t,error:e}=await Vt.from("words").select("id, english, chinese, romaji, audioid, definitions (defid, def_english, def_chinese)").or(`chinese.ilike.%${this.searchQuery}%,english.ilike.%${this.searchQuery}%`);e?console.error(e):(this.words=t,console.log(this.words))},async readChinese(t){Vl(t)},async readEnglish(t){Wl(t)},async resetVoice(){window.speechSynthesis.cancel()},async randomWord(){const{count:t}=await Vt.from("words").select("*",{count:"exact",head:!0}),e=Math.floor(Math.random()*t),{data:n,error:r}=await Vt.from("words").select("*").range(e,e);r?console.error("Error fetching random word:",r.message):console.log("Random Word:",n[0])}}},Fg={id:"supasearch"},Ug={class:"search-words"},Kg={class:"results-count"},Bg={class:"results"},Ng={class:"word"},qg={class:"word-item word-taigi"},Hg={class:"word-item word-english"},Vg={class:"word-item word-chinese"},Wg=["onClick"],zg={key:0,class:"edit-dialog"},Jg={key:0},Gg=["onSubmit"],Qg=["onUpdate:modelValue"],Yg=["onUpdate:modelValue"],Xg=["onUpdate:modelValue"];function Zg(t,e,n,r,s,a){const u=vo("AudioPlayerTaigi"),h=vo("IconPlayAudio");return gt(),jt("div",Fg,[ge("div",Ug,[kn(ge("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=f=>s.searchQuery=f),onKeyup:e[1]||(e[1]=dd(f=>a.searchWords(s.searchQuery),["enter"])),placeholder:"Search for a word...",class:"text-field search-words-text-field"},null,544),[[xn,s.searchQuery]]),ge("button",{onClick:e[2]||(e[2]=(...f)=>a.searchWords&&a.searchWords(...f))},"Search"),ge("button",{onClick:e[3]||(e[3]=(...f)=>a.clearInput&&a.clearInput(...f))},"Clear"),ge("button",{onClick:e[4]||(e[4]=(...f)=>a.resetVoice&&a.resetVoice(...f))},"Reset Voice"),ge("div",Kg,Wt(s.words.length),1)]),ge("ul",Bg,[(gt(!0),jt($t,null,Ui(s.words,f=>(gt(),jt("li",{key:f.id,class:"entry"},[ge("div",Ng,[ge("div",qg,[Yn(Wt(f.romaji)+" ",1),f.audioid?(gt(),Wr(u,{key:0,audioID:f.audioid},null,8,["audioID"])):Gn("",!0)]),ge("div",Hg,[Yn(Wt(f.english)+" ",1),Mt(h,{onClick:y=>a.readEnglish(f.english)},null,8,["onClick"])]),ge("div",Vg,[Yn(Wt(f.chinese)+" ",1),Mt(h,{onClick:y=>a.readChinese(f.chinese)},null,8,["onClick"])])]),ge("ul",null,[(gt(!0),jt($t,null,Ui(f.definitions,y=>(gt(),jt("li",{key:y.id},[ge("ul",null,[ge("li",null,Wt(y.def_english),1),ge("li",null,Wt(y.def_chinese),1)])]))),128))]),ge("button",{onClick:y=>a.openEditDialog(f.id)},"Edit",8,Wg)]))),128))]),s.showDialog?(gt(),jt("div",zg,[ge("button",{onClick:e[5]||(e[5]=f=>this.showDialog=!1)},"Close"),ge("form",{onSubmit:e[10]||(e[10]=vu((...f)=>a.updateWord&&a.updateWord(...f),["prevent"]))},[ge("div",null,[e[11]||(e[11]=ge("label",{for:"romaji"},"Romaji",-1)),kn(ge("input",{"onUpdate:modelValue":e[6]||(e[6]=f=>s.word.romaji=f),type:"text",id:"romaji"},null,512),[[xn,s.word.romaji]])]),ge("div",null,[e[12]||(e[12]=ge("label",{for:"english"},"English",-1)),kn(ge("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>s.word.english=f),type:"text",id:"english"},null,512),[[xn,s.word.english]])]),ge("div",null,[e[13]||(e[13]=ge("label",{for:"chinese"},"Chinese",-1)),kn(ge("input",{"onUpdate:modelValue":e[8]||(e[8]=f=>s.word.chinese=f),type:"text",id:"chinese"},null,512),[[xn,s.word.chinese]])]),ge("div",null,[e[14]||(e[14]=ge("label",{for:"classification"},"Classification:",-1)),kn(ge("input",{"onUpdate:modelValue":e[9]||(e[9]=f=>s.word.classification=f),type:"text",id:"classification"},null,512),[[xn,s.word.classification]])]),e[15]||(e[15]=ge("button",{type:"submit"},"Save Word",-1))],32),s.word.definitions.length>0?(gt(),jt("div",Jg,[(gt(!0),jt($t,null,Ui(s.word.definitions,(f,y)=>(gt(),jt("div",{key:f.defid},[ge("form",{onSubmit:vu(g=>a.updateDefinition(f.defid,y),["prevent"])},[ge("div",null,[e[16]||(e[16]=ge("label",{for:"def_english"},"English Definition:",-1)),kn(ge("textarea",{"onUpdate:modelValue":g=>f.def_english=g,type:"textarea",id:"def_english"},null,8,Qg),[[xn,f.def_english]])]),ge("div",null,[e[17]||(e[17]=ge("label",{for:"def_chinese"},"Chinese Definition:",-1)),kn(ge("input",{"onUpdate:modelValue":g=>f.def_chinese=g,type:"text",id:"def_chinese"},null,8,Yg),[[xn,f.def_chinese]])]),ge("div",null,[e[18]||(e[18]=ge("label",{for:"partofspeech"},"Part of Speech:",-1)),kn(ge("input",{"onUpdate:modelValue":g=>f.partofspeech=g,type:"text",id:"partofspeech"},null,8,Xg),[[xn,f.partofspeech]])]),e[19]||(e[19]=ge("button",{type:"submit"},"Save Definition",-1))],40,Gg)]))),128))])):Gn("",!0)])):Gn("",!0)])}const ey=as(Mg,[["render",Zg],["__scopeId","data-v-5f4f753a"]]),ty={key:0,class:"wod"},ny={class:"wod-words"},ry={class:"wod-word-item"},iy={class:"wod-word-item"},sy={class:"wod-word-item"},oy={__name:"WordOfTheDay",setup(t){const e=ul(null),n=async()=>{try{const{count:a}=await Vt.from("words").select("*",{count:"exact",head:!0}),u=Math.floor(Math.random()*a),{data:h,error:f}=await Vt.from("words").select("*").range(u,u).limit(1);if(f)throw new Error(f.message);const y=h[0],{data:g,error:b}=await Vt.from("definitions").select("*").eq("wordid",y.id);if(b)throw new Error(b.message);y.definitions=g,e.value=y}catch(a){console.error("Error fetching random word and definitions:",a.message)}};Zo(n);const r=async a=>{Vl(a)},s=async a=>{Wl(a)};return(a,u)=>e.value?(gt(),jt("div",ty,[u[2]||(u[2]=ge("h4",null,"Random word",-1)),ge("div",ny,[ge("div",ry,[Yn(Wt(e.value.english)+" ",1),e.value.english?(gt(),Wr(zi,{key:0,onClick:u[0]||(u[0]=h=>s(e.value.english))})):Gn("",!0)]),ge("div",iy,[Yn(Wt(e.value.chinese)+" ",1),e.value.chinese?(gt(),Wr(zi,{key:0,onClick:u[1]||(u[1]=h=>r(e.value.chinese))})):Gn("",!0)]),ge("div",sy,[Yn(Wt(e.value.romaji)+" ",1),e.value.audioid?(gt(),Wr(zl,{key:0,audioID:e.value.audioid},null,8,["audioID"])):Gn("",!0)])]),(gt(!0),jt($t,null,Ui(e.value.definitions,(h,f)=>(gt(),jt("div",{key:h.defid,class:"wod-definitions"},Wt(h.def_chinese)+" "+Wt(h.def_english),1))),128)),ge("button",{onClick:n},"Get a different word")])):Gn("",!0)}},ay=as(oy,[["__scopeId","data-v-bbaedbb8"]]),uy={__name:"App",setup(t){const e=ul(!1);return Zo(async()=>{e.value=await An.words.count()>0&&await An.definitions.count()>0,console.log(An),e.value?console.log("Data is available in IndexedDB."):(console.log("No data in IndexedDB."),kd())}),(n,r)=>(gt(),jt($t,null,[r[0]||(r[0]=ge("header",null,[ge("div")],-1)),ge("main",null,[Mt(ey),Mt(ay)]),r[1]||(r[1]=ge("footer",null,null,-1))],64))}};yd(uy).mount("#app");export{Nl as g};
