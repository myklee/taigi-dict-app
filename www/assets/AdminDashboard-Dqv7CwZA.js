import{b as y,c as b,A as D,f as e,g as t,y as U,t as n,G as A,l,F as p,D as x,q as k,j as S,m as w,o as i}from"./vendor-C5FfeEaS.js";import{b as B}from"./router-Cvbgimde.js";import{_ as T,a as N}from"./index-CmUZZITA.js";import R from"./CommunityModerationPanel-CjBc-mqK.js";import V from"./UserManagementPanel-CISrlDwJ.js";const q={name:"AdminDashboard",components:{CommunityModerationPanel:R,UserManagementPanel:V},setup(){const _=B(),s=N(),u=y(null),o=y(!1),h=y(!1),M=b(()=>s.userProfile),g=b(()=>s.loading),f=b(()=>s.error),c=b(()=>s.canModerate),r=async()=>{const d=await s.getAdminDashboardStats();d.success&&(u.value=d.data)},m=async()=>{await r()},v=d=>d.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase()),a=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=()=>{_.push({name:"dictionary"})};return D(async()=>{c.value&&await r()}),{dashboardStats:u,showUserManagement:o,showModerationPanel:h,userProfile:M,loading:g,error:f,canModerate:c,loadDashboardStats:r,refreshStats:m,formatAction:v,formatDate:a,goToDictionary:C}}},F={class:"admin-dashboard"},L={class:"navigation-header"},Q={class:"dashboard-header"},j={class:"user-info"},z={key:0,class:"stats-grid"},E={class:"stat-card"},G={class:"stat-number"},I={class:"stat-card"},W={class:"stat-number"},H={class:"stat-card"},J={class:"stat-number"},K={class:"stat-card"},O={class:"stat-number"},X={class:"stat-card"},Y={class:"stat-number"},Z={class:"stat-card"},$={class:"stat-number"},ss={class:"quick-actions"},ts={class:"action-buttons"},os=["disabled"],as={key:1,class:"recent-activity"},ns={class:"activity-list"},es={class:"activity-info"},is={class:"activity-action"},rs={class:"activity-admin"},ds={class:"activity-time"},ls={class:"modal-header"},cs={class:"modal-body"},ms={class:"modal-header"},vs={class:"modal-body"},bs={key:4,class:"loading-overlay"},us={key:5,class:"error-message"};function gs(_,s,u,o,h,M){var c,r,m,v;const g=w("UserManagementPanel"),f=w("CommunityModerationPanel");return i(),e("div",F,[t("div",L,[t("button",{onClick:s[0]||(s[0]=(...a)=>o.goToDictionary&&o.goToDictionary(...a)),class:"back-btn"},s[11]||(s[11]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m15 18-6-6 6-6"})],-1),U(" Back to Dictionary ")])),s[12]||(s[12]=t("div",{class:"nav-title"},"Admin Dashboard",-1))]),t("div",Q,[s[13]||(s[13]=t("h1",null,"Admin Dashboard",-1)),t("div",j,[t("span",null,"Welcome, "+n(((c=o.userProfile)==null?void 0:c.username)||"Admin"),1),t("span",{class:A(["role-badge",(r=o.userProfile)==null?void 0:r.role])},n((m=o.userProfile)==null?void 0:m.role),3)])]),o.dashboardStats?(i(),e("div",z,[t("div",E,[t("div",G,n(o.dashboardStats.total_users),1),s[14]||(s[14]=t("div",{class:"stat-label"},"Total Users",-1))]),t("div",I,[t("div",W,n(o.dashboardStats.active_users),1),s[15]||(s[15]=t("div",{class:"stat-label"},"Active Users",-1))]),t("div",H,[t("div",J,n(o.dashboardStats.pending_definitions),1),s[16]||(s[16]=t("div",{class:"stat-label"},"Pending Definitions",-1))]),t("div",K,[t("div",O,n(o.dashboardStats.pending_reports),1),s[17]||(s[17]=t("div",{class:"stat-label"},"Pending Reports",-1))]),t("div",X,[t("div",Y,n(o.dashboardStats.moderators),1),s[18]||(s[18]=t("div",{class:"stat-label"},"Moderators",-1))]),t("div",Z,[t("div",$,n(o.dashboardStats.admins),1),s[19]||(s[19]=t("div",{class:"stat-label"},"Admins",-1))])])):l("",!0),t("div",ss,[s[20]||(s[20]=t("h2",null,"Quick Actions",-1)),t("div",ts,[t("button",{onClick:s[1]||(s[1]=a=>o.showUserManagement=!0),class:"action-btn primary"}," Manage Users "),t("button",{onClick:s[2]||(s[2]=a=>o.showModerationPanel=!0),class:"action-btn secondary"}," Moderation Queue "),t("button",{onClick:s[3]||(s[3]=(...a)=>o.refreshStats&&o.refreshStats(...a)),class:"action-btn secondary",disabled:o.loading}," Refresh Stats ",8,os)])]),(v=o.dashboardStats)!=null&&v.recent_activity?(i(),e("div",as,[s[21]||(s[21]=t("h2",null,"Recent Admin Activity",-1)),t("div",ns,[(i(!0),e(p,null,x(o.dashboardStats.recent_activity,a=>(i(),e("div",{key:a.created_at,class:"activity-item"},[t("div",es,[t("span",is,n(o.formatAction(a.action)),1),t("span",rs,"by "+n(a.admin_username),1)]),t("div",ds,n(o.formatDate(a.created_at)),1)]))),128))])])):l("",!0),o.showUserManagement?(i(),e("div",{key:2,class:"modal-overlay",onClick:s[7]||(s[7]=a=>o.showUserManagement=!1)},[t("div",{class:"modal large",onClick:s[6]||(s[6]=S(()=>{},["stop"]))},[t("div",ls,[s[22]||(s[22]=t("h3",null,"User Management",-1)),t("button",{onClick:s[4]||(s[4]=a=>o.showUserManagement=!1),class:"modal-close"},"×")]),t("div",cs,[k(g,{onClose:s[5]||(s[5]=a=>o.showUserManagement=!1)})])])])):l("",!0),o.showModerationPanel?(i(),e("div",{key:3,class:"modal-overlay",onClick:s[10]||(s[10]=a=>o.showModerationPanel=!1)},[t("div",{class:"modal large",onClick:s[9]||(s[9]=S(()=>{},["stop"]))},[t("div",ms,[s[23]||(s[23]=t("h3",null,"Moderation Panel",-1)),t("button",{onClick:s[8]||(s[8]=a=>o.showModerationPanel=!1),class:"modal-close"},"×")]),t("div",vs,[k(f)])])])):l("",!0),o.loading?(i(),e("div",bs,s[24]||(s[24]=[t("div",{class:"loading-spinner"},null,-1)]))):l("",!0),o.error?(i(),e("div",us,n(o.error),1)):l("",!0)])}const ks=T(q,[["render",gs],["__scopeId","data-v-272b8a11"]]);export{ks as default};
