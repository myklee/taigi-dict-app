import{_ as F,u as B,s as p}from"./index-CmUZZITA.js";import{A as W,I as y,s as R,a as S}from"./AudioPlayerTaigi-CWgaieRU.js";import{o as s,f as r,g as o,E as N,b as k,A as Z,q as v,z as w,u as d,l as a,y as m,t as n,F as L,D as $,G as j}from"./vendor-C5FfeEaS.js";import{L as D}from"./Loader-Cth2euVp.js";import z from"./EditWord-CQd5qnB_.js";import{p as P}from"./pinyin-web-Brx8g6kF.js";import{I as T}from"./IconEdit-BhSTa8nK.js";import{u as q,I}from"./favoritesStore-CTEzz-4U.js";import"./router-Cvbgimde.js";import"./AudioRecorder-B6379Soo.js";const G={class:"icon-button"},O={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J={"clip-path":"url(#clip0_76_208)"},K=["fill"],Q={__name:"IconRefresh",props:{color:String},setup(f){const e=f;return(_,c)=>(s(),r("div",G,[(s(),r("svg",O,[o("g",J,[o("path",{d:"M20 9C20.2652 9 20.5196 9.10535 20.7071 9.29289C20.8946 9.48043 21 9.73478 21 10V11C21 13.1217 20.1571 15.1566 18.6569 16.6568C17.1566 18.1571 15.1217 19 13 19H9.414L10.207 19.793C10.3892 19.9816 10.49 20.2342 10.4877 20.4964C10.4854 20.7586 10.3802 21.0094 10.1948 21.1948C10.0094 21.3802 9.7586 21.4854 9.4964 21.4877C9.2342 21.4899 8.9816 21.3892 8.793 21.207L6.297 18.711C6.14205 18.5584 6.04126 18.3592 6.01 18.144L6 17.991C6.00163 17.7571 6.08554 17.5312 6.237 17.353L6.293 17.293L8.793 14.793C8.9816 14.6108 9.2342 14.51 9.4964 14.5123C9.7586 14.5146 10.0094 14.6198 10.1948 14.8052C10.3802 14.9906 10.4854 15.2414 10.4877 15.5036C10.49 15.7658 10.3892 16.0184 10.207 16.207L9.414 17H13C14.5913 17 16.1174 16.3679 17.2426 15.2426C18.3679 14.1174 19 12.5913 19 11V10C19 9.73478 19.1054 9.48043 19.2929 9.29289C19.4804 9.10535 19.7348 9 20 9ZM15.207 2.793L17.707 5.293C17.8945 5.48052 17.9998 5.73483 17.9998 6C17.9998 6.26516 17.8945 6.51947 17.707 6.707L15.207 9.207C15.1148 9.30251 15.0044 9.37869 14.8824 9.4311C14.7604 9.48351 14.6292 9.51109 14.4964 9.51225C14.3636 9.5134 14.2319 9.4881 14.109 9.43782C13.9861 9.38754 13.8745 9.31328 13.7806 9.21939C13.6867 9.1255 13.6125 9.01385 13.5622 8.89095C13.5119 8.76805 13.4866 8.63637 13.4877 8.50359C13.4889 8.37082 13.5165 8.23959 13.5689 8.11759C13.6213 7.99559 13.6975 7.88524 13.793 7.793L14.586 7H11C9.4087 7 7.88258 7.63214 6.75736 8.75735C5.63214 9.88257 5 11.4087 5 13V14C5 14.2652 4.89464 14.5196 4.70711 14.7071C4.51957 14.8946 4.26522 15 4 15C3.73478 15 3.48043 14.8946 3.29289 14.7071C3.10536 14.5196 3 14.2652 3 14V13C3 10.8783 3.84285 8.84343 5.34315 7.34314C6.84344 5.84285 8.87827 5 11 5H14.586L13.793 4.20699C13.6108 4.01839 13.51 3.76579 13.5123 3.50359C13.5146 3.2414 13.6198 2.99058 13.8052 2.80518C13.9906 2.61977 14.2414 2.5146 14.5036 2.51232C14.7658 2.51004 15.0184 2.61084 15.207 2.793Z",fill:e.color},null,8,K)]),c[0]||(c[0]=o("defs",null,[o("clipPath",{id:"clip0_76_208"},[o("rect",{width:"24",height:"24",fill:"white"})])],-1))]))]))}},U={},X={class:"icon-button icon-trash"};function Y(f,e){return s(),r("div",X,e[0]||(e[0]=[N('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_76_172)"><path d="M14.28 2C14.6998 2.00011 15.1088 2.13229 15.4493 2.37781C15.7898 2.62333 16.0444 2.96975 16.177 3.368L16.72 5H20C20.2652 5 20.5196 5.10536 20.7071 5.29289C20.8946 5.48043 21 5.73478 21 6C21 6.26522 20.8946 6.51957 20.7071 6.70711C20.5196 6.89464 20.2652 7 20 7L19.997 7.071L19.13 19.214C19.0759 19.9706 18.7372 20.6786 18.182 21.1956C17.6269 21.7125 16.8965 21.9999 16.138 22H7.862C7.10346 21.9999 6.37311 21.7125 5.81797 21.1956C5.26283 20.6786 4.92411 19.9706 4.87 19.214L4.003 7.07C4.00119 7.04671 4.00019 7.02336 4 7C3.73478 7 3.48043 6.89464 3.29289 6.70711C3.10536 6.51957 3 6.26522 3 6C3 5.73478 3.10536 5.48043 3.29289 5.29289C3.48043 5.10536 3.73478 5 4 5H7.28L7.823 3.368C7.9557 2.96959 8.21043 2.62305 8.5511 2.37752C8.89176 2.13198 9.30107 1.9999 9.721 2H14.28ZM17.997 7H6.003L6.865 19.071C6.88295 19.3232 6.99577 19.5592 7.18076 19.7316C7.36574 19.904 7.60916 19.9999 7.862 20H16.138C16.3908 19.9999 16.6343 19.904 16.8192 19.7316C17.0042 19.5592 17.117 19.3232 17.135 19.071L17.997 7ZM10 10C10.2449 10 10.4813 10.09 10.6644 10.2527C10.8474 10.4155 10.9643 10.6397 10.993 10.883L11 11V16C10.9997 16.2549 10.9021 16.5 10.7272 16.6854C10.5522 16.8707 10.313 16.9822 10.0586 16.9972C9.80416 17.0121 9.55362 16.9293 9.35817 16.7657C9.16271 16.6021 9.0371 16.3701 9.007 16.117L9 16V11C9 10.7348 9.10536 10.4804 9.29289 10.2929C9.48043 10.1054 9.73478 10 10 10ZM14 10C14.2652 10 14.5196 10.1054 14.7071 10.2929C14.8946 10.4804 15 10.7348 15 11V16C15 16.2652 14.8946 16.5196 14.7071 16.7071C14.5196 16.8946 14.2652 17 14 17C13.7348 17 13.4804 16.8946 13.2929 16.7071C13.1054 16.5196 13 16.2652 13 16V11C13 10.7348 13.1054 10.4804 13.2929 10.2929C13.4804 10.1054 13.7348 10 14 10ZM14.28 4H9.72L9.387 5H14.613L14.28 4Z" fill="#ACABB5"></path></g><defs><clipPath id="clip0_76_172"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>',1)]))}const e1=F(U,[["render",Y]]),o1={key:0,class:"rw"},s1={class:"rw-header"},t1={class:"rw-header-actions"},i1={key:0,class:"rw-content"},r1={class:"rw-words"},a1={class:"rw-words-main"},n1={key:0,class:"rw-word-item rw-taigi alphabetic"},l1={key:1,class:"rw-word-item rw-taigi alphabetic"},d1={key:2,class:"rw-word-item rw-chinese logographic"},c1={class:"pinyin-zhuyin"},u1={class:"pinyin"},h1={class:"zhuyin"},C1={key:0,class:"rw-word-item rw-english alphabetic"},v1={key:1,class:"rw-word-item rw-english alphabetic"},w1={class:"logographic"},_1={class:"alphabetic"},m1={key:1,class:"rw-history"},f1={class:"rw-history-header"},g1={class:"rw-history-word"},p1={class:"rw-history-romaji"},y1={class:"rw-history-english"},k1={class:"rw-history-chinese"},L1={__name:"RandomWord",setup(f){const e=k(null),_=k(!0),c=B(),h=q(),g=k(!1),V=()=>{g.value=!1,document.body.style.overflow="scroll"},b=async()=>{try{_.value=!0;const{count:l}=await p.from("words").select("*",{count:"exact",head:!0});if(!l||l===0)throw new Error("No words found in database");const t=Math.floor(Math.random()*l),{data:i,error:C}=await p.from("words").select("*").not("romaji","is",null).range(t,t).limit(1);if(C)throw new Error(C.message);if(!i||i.length===0)throw new Error("No word data returned");const u=i[0];if(!u||!u.id)throw new Error("Invalid word data - missing ID");const{data:A,error:E}=await p.from("definitions").select("*").eq("wordid",u.id);if(E)throw new Error(E.message);u.definitions=A||[],e.value=u,c.addToRandomHistory(u)}catch(l){console.error("Error fetching random word and definitions:",l.message)}finally{_.value=!1}};Z(async()=>{await h.loadFromIndexedDB(),await h.loadFromSupabase(),b()});const x=async l=>{R(l)},H=async l=>{S(l)},M=l=>{g.value=!0,document.body.style.overflow="hidden"};return(l,t)=>(s(),r(L,null,[v(D,{loading:_.value&&!e.value},null,8,["loading"]),e.value?(s(),r("div",o1,[v(D,{loading:_.value},null,8,["loading"]),o("header",s1,[t[6]||(t[6]=o("h3",null,"Random word",-1)),o("div",t1,[e.value&&e.value.id?(s(),w(I,{key:0,isFavorited:d(h).isFavorited(e.value.id),onClick:t[0]||(t[0]=i=>d(h).toggleFavorite(e.value)),title:"Add to favorites",class:"rw-favorite"},null,8,["isFavorited"])):a("",!0),v(Q,{class:"rw-get-word",color:"#a5a5a5",onClick:b}),e.value?(s(),w(T,{key:1,class:"edit-rw",onClick:t[1]||(t[1]=i=>M(e.value))})):a("",!0)])]),e.value?(s(),r("div",i1,[o("div",r1,[o("div",a1,[e.value.romaji?(s(),r("div",n1,[m(n(e.value.romaji)+" ",1),e.value.audioid?(s(),w(W,{key:0,audioID:e.value.audioid},null,8,["audioID"])):a("",!0)])):a("",!0),e.value.taiwanese?(s(),r("div",l1,n(e.value.taiwanese),1)):a("",!0),e.value.chinese?(s(),r("div",d1,[m(n(e.value.chinese)+" ",1),o("div",c1,[o("span",u1,n(d(P)(e.value.chinese).join(" ")),1),o("span",h1,n(e.value.zhuyin),1)]),e.value.chinese?(s(),w(y,{key:0,onClick:t[2]||(t[2]=i=>x(e.value.chinese))})):a("",!0)])):a("",!0)]),e.value.english?(s(),r("div",C1,[m(n(e.value.english)+" ",1),e.value.english?(s(),w(y,{key:0,onClick:t[3]||(t[3]=i=>H(e.value.english))})):a("",!0)])):a("",!0),e.value.english_mknoll?(s(),r("div",v1,[m(n(e.value.english_mknoll)+" ",1),e.value.english_mknoll?(s(),w(y,{key:0,onClick:t[4]||(t[4]=i=>H(e.value.english_mknoll))})):a("",!0)])):a("",!0)]),(s(!0),r(L,null,$(e.value.definitions,(i,C)=>(s(),r("div",{key:i.defid,class:"rw-definitions"},[o("ul",null,[o("li",w1,n(i.def_chinese),1),o("li",_1,n(i.def_english),1)])]))),128))])):a("",!0),d(c).randomWordHistory.length>1?(s(),r("div",m1,[o("div",f1,[t[7]||(t[7]=o("h3",null,"Random word history",-1)),v(e1,{onClick:d(c).clearRandomWordHistory},null,8,["onClick"])]),o("ul",null,[(s(!0),r(L,null,$(d(c).randomWordHistory,(i,C)=>(s(),r("li",{key:C,class:j([`rw-${C}`,"rw-history-item"])},[o("div",g1,[o("span",p1,n(i.romaji),1),o("span",y1,n(i.english),1),o("span",k1,n(i.chinese),1)]),v(I,{isFavorited:d(h).isFavorited(i.id),onClick:u=>d(h).toggleFavorite(i),title:"Add to favorites",class:"rw-history-favorite"},null,8,["isFavorited","onClick"])],2))),128))])])):a("",!0),v(z,{visible:g.value,word:e.value,onClose:t[5]||(t[5]=i=>V())},null,8,["visible","word"])])):a("",!0)],64))}},A1=F(L1,[["__scopeId","data-v-1d663bbb"]]);export{A1 as default};
