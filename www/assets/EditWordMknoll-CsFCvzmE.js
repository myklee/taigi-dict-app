import{b as x,f as m,q as w,l as c,g as t,j as h,k as n,v as r,o as f}from"./vendor-C5FfeEaS.js";import{_ as E,s as a}from"./index-CmUZZITA.js";import{A as V}from"./AudioRecorder-B6379Soo.js";import{L as A}from"./Loader-Cth2euVp.js";import"./router-Cvbgimde.js";const C={key:0,class:"edit-dialog"},W={class:"edit-moe-word"},B={class:"edit-moe-word edit-taiwanese"},M={class:"edit-moe-word edit-chinese"},N={class:"edit-moe-word edit-mknoll"},U={__name:"EditWordMknoll",props:{visible:Boolean,word:Object},emits:["close","update-word"],setup(l,{emit:v}){const g=l,s=x(!1),u=v,k=()=>u("close"),p=async(i,e)=>{s.value=!0;const{data:o,error:d}=await a.from("maryknoll").upsert({id:i.id,chinese:i.chinese,taiwanese:i.taiwanese,english_mknoll:i.english_mknoll});d?(console.error("Error updating word:",d.message),s.value=!1):(console.log("Word updated successfully:",o),s.value=!1,u("word-updated",i))};function b(i){return i.split("/").pop().split("?")[0]}const y=async(i,e)=>{s.value=!0;try{const o=b(e);console.log(o);const{error:d}=await a.storage.from("audio-files").remove([o]);if(d)throw d;await a.from("maryknoll").update({audio_url:null}).eq("id",i),g.word.audio_url=null,console.log("Audio deleted successfully!")}catch(o){console.error("Error deleting audio:",o)}finally{s.value=!1}};return(i,e)=>l.visible?(f(),m("div",C,[w(A,{loading:s.value},null,8,["loading"]),w(V,{wordId:l.word.id,mknoll:!0},null,8,["wordId"]),l.word.audio_url?(f(),m("button",{key:0,onClick:e[0]||(e[0]=o=>y(l.word.id,l.word.audio_url))}," Delete Audio ")):c("",!0),t("button",{class:"close-dialog",onClick:k},"Close"),t("div",W,[t("form",{onSubmit:e[4]||(e[4]=h(o=>p(l.word,i.index),["prevent"]))},[t("div",B,[e[5]||(e[5]=t("label",{for:"taiwanese"},"Taiwanese",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.word.taiwanese=o),type:"text",id:"taiwanese"},null,512),[[r,l.word.taiwanese]])]),t("div",M,[e[6]||(e[6]=t("label",{for:"chinese"},"Chinese",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.word.chinese=o),type:"text",id:"chinese"},null,512),[[r,l.word.chinese]])]),t("div",N,[e[7]||(e[7]=t("label",{for:"english_mknoll"},"English",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.word.english_mknoll=o),type:"text",id:"english_mknoll"},null,512),[[r,l.word.english_mknoll]])]),e[8]||(e[8]=t("button",{type:"submit"},"Save Word",-1))],32)])])):c("",!0)}},L=E(U,[["__scopeId","data-v-378cdb17"]]);export{L as default};
